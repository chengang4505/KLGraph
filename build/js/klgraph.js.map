{"version":3,"sources":["webpack:///webpack/bootstrap cc8c782a8e94ab912bf3","webpack:///./src/util.js","webpack:///./src/base/EventEmitter.js","webpack:///./src/animation/tween.js","webpack:///./src/base/Matrix.js","webpack:///./src/render/webgl/label/glsl/label-frag.glsl","webpack:///./src/render/webgl/render.js","webpack:///./src/render/webgl/label/glsl/edge-label-vert.glsl","webpack:///./src/core/index.js","webpack:///./src/render/index.js","webpack:///./src/base/timer.js","webpack:///./src/core/Event.js","webpack:///./src/core/Graph.js","webpack:///./src/core/Selection.js","webpack:///./src/core/config.js","webpack:///./src/layout/CircularLayout.js","webpack:///./src/layout/ColaLayout.js","webpack:///./src/layout/DargeLayout.js","webpack:///./src/layout/FlowLayout.js","webpack:///./src/layout/Grid.js","webpack:///./src/layout/index.js","webpack:///./src/render/webgl/TextSdf.js","webpack:///./src/render/webgl/TextureIcon.js","webpack:///./src/render/webgl/TextureLoader.js","webpack:///./src/render/webgl/TextureText.js","webpack:///./src/render/webgl/edge/curve/curve.js","webpack:///./src/render/webgl/label/EdgeLabel.js","webpack:///./src/render/webgl/label/NodeLabel.js","webpack:///./src/render/webgl/label/curveLabel/curveLabel.js","webpack:///./src/render/webgl/edge/curve/frag.glsl","webpack:///./src/render/webgl/edge/curve/vert.glsl","webpack:///./src/render/webgl/edge/glsl/default-frag.glsl","webpack:///./src/render/webgl/edge/glsl/default-vert.glsl","webpack:///./src/render/webgl/label/glsl/node-label-vert.glsl","webpack:///./src/render/webgl/node/default/default-frag.glsl","webpack:///./src/render/webgl/node/default/default-vert.glsl","webpack:///./src/render/webgl/node/rect/frag.glsl","webpack:///./src/render/webgl/node/rect/vert.glsl","webpack:///./src/index.js","webpack:///./src/base/GLUtil.js","webpack:///./src/render/webgl/edge/render.js","webpack:///./src/render/webgl/node/default/render.js","webpack:///./src/render/webgl/node/rect/render.js"],"names":["typeofstr","typeofobj","typeoffn","utils","uuid","a","b","Math","random","toString","isArray","obj","Array","isString","isObject","isFunction","loadShader","gl","shaderSource","shaderType","error","compiled","shader","createShader","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","console","deleteShader","loadProgram","shaders","attribs","loc","i","linked","program","createProgram","length","attachShader","bindAttribLocation","locations","opt_attribs","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","extend","k","res","l","arguments","getDistance","x1","y1","x2","y2","dx","dy","sqrt","normalize","vector","len","getAngle","cos","acos","inRect","posx","posy","x","y","w","h","reI","reN","reHex6","reRgbaInteger","RegExp","parseColor","format","trim","toLowerCase","m","n","exec","parseInt","r","g","getNodeSizeX","node","size","type","width","getNodeSizeY","height","getBBox","nodes","x0","Infinity","y0","forEach","e","getPointOnQuadraticCurve","t","xi","yi","pow","getPointTangentOnQuadraticCurve","pos1","pos2","getControlPos","count","order","dis","factor","ratio","norV","EventEmitter","_listener","cb","listener","push","splice","args","fn","slice","apply","interpolateNumber","Tween","objs","interpolates","timer","timerHandle","bind","_duration","list","elapsed","min","attr","attrInterpolater","emit","stop","time","toObjs","remove","mat3","matrixFromTranslate","matrixFromRotation","angle","sin","matrixFromScale","invert","a11","a12","a13","a21","a22","a23","a31","a32","a33","del","multiply","a00","a01","a02","a10","a20","b00","b01","b02","b10","b11","b12","b20","b21","b22","transformPoint","p","rotateVector","v","multiMatrix","matrixs","reduce","pre","cur","layerCheckDefault","data","layerCheck","WebGLRender","context","config","container","graph","needUpdate","sampleRatio","initRender","initTexture","textureLoader","textureIcon","textureText","initEvent","initIconTexture","initTextTexture","projectMatrix","camera","scale","positionX","positionY","rotation","renderCache","layers","index","flag","edge","renderLayerMap","renderLayersConfig","name","subLayers","render","default","check","rect","edgeLabel","nodeLabel","initRenderLayerMap","call","_this","layer","subLayer","shaderVert","VERTEX_SHADER","shaderFrag","FRAGMENT_SHADER","activeAttributes","activeUniforms","offsetConfig","buffer","createBuffer","renderData","uniforms","bytes","datas","arrView","Float32Array","offset","start","strip","cacheIndex","temp","err","totalLen","contextRelativeLayers","id","getRenderData","join","byteLength","ArrayBuffer","putData","edges","updateCacheByData","updateContextCache","timeEnd","updateLayerRenderData","updateLayerUniformData","cache","int8ViewS","int8ViewT","Int8Array","clear","COLOR_BUFFER_BIT","useProgram","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","drawArrays","TRIANGLES","getUniforms","matrix","getCameraMatrix","renderflag","updateLayerData","ids","forceRender","nodesIndex","edgesIndex","resizeCanvas","render2","option","preserveDrawingBuffer","getContext","getExtension","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","disable","DEPTH_TEST","clearColor","on","updateNodeRenderData","updateEdgeRenderData","clearRenderCache","map","addTexts","getAddText","url","img","text","label","texts","chars","split","createCanvasImg","root","renderType","typeRoot","renderRoot","layersConfig","counter","icons","icon","createIcons","isInvert","mat","canvas","multiplier","clientWidth","clientHeight","viewport","pos","camPos","isVector","animation","newscale","zoomMin","zoomMax","zoomToAnimation","removeByType","to","duration","Core","initCanvas","selection","mouse","off","makeLayout","layout","_start","_initEvent","style","position","_createCanvas","appendChild","oncontextmenu","preventDefault","display","cursor","document","createElement","left","top","frames","state","_render","requestAnimationFrame","resize","isSelected","select","shiftKey","unSelect","max","getFitOptions","layoutConfig","getEdges","fit","bbox","bbox1","offsetX","offsetY","setNodeData","source","target","curve","now","Timer","timerFlush","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","performance","Date","setFrame","f","setTimeout","clearNow","_call","_time","_next","prototype","constructor","restart","callback","delay","TypeError","sleep","wake","nap","poke","t0","t1","t2","clearTimeout","clearInterval","setInterval","handlerWrap","handle","toCameraPos","cameraX","cameraY","mouseDown","mouseMove","events","mousemove","_moveHandler","mousedown","_downHandler","mouseup","_upHandler","mousewheel","_wheelHandler","addEventListener","click","_clickHandler","trigger","event","checkInNode","isFind","sizeX","sizeY","getNode","findNode","graphPos","toGraphPos","handleDrag","isCamera","isDown","startx","starty","onmousemove","offsetx","offsety","newgraphPos","onmouseup","onmouseout","removeEventListener","which","button","zoomRatio","wheelDelta","zoomTo","camearaX","camearaY","update","Graph","options","read","inEdgesIndex","outEdgesIndex","log","updateEdgeCount","curveCount","curveOrder","nodeid","removeEdge","edgeid","updatePos","hasOwnProperty","oldpos","quad","point","insert","Selection","ctx","initGraphEvent","clearRect","fillStyle","strokeStyle","beginPath","closePath","fill","stroke","mouseUp","renderRect","filter","isAdd","sendMessage","selected","getSelection","newSelected","selects","domPos","graphToDomPos","isPointInPath","removeNode","renderNode","renderNodeLabel","renderEdge","renderEdgeLabel","textureIconWidth","textureIconHeight","CircularLayout","posSet","depthPosSet","drawnBiComps","bc","nodeHeights","node2BiComp","init","createBicconnects","__layout","oldNodes","oldLinks","tempNodes","_index","links","s","states","dfsn","low","edgesStack","biComponents","num","dfs","current","neigh","neighNodes","singleComponent","pop","biconncts","maxIndex","delete","j","maxSize","radius","PI","deltaAngle","startX","startY","sortInnerCircle","test","SetOuterCircle","icNodes","greedyNodes","modestNodes","forFunct","tmp","NoOfChildren","toReturn","gNo","mNo","deltaM","deltaG","nodeId","outerCircle","currNeigh","compIndex","innerCircleRadius","firstTouched","outerNodesCount","rnc","iter","currNeighbour","outerRadius","tryCount","outerDeltaAngle","outerPositionsTaken","outerPositionsOwners","pointX","pointY","theAngle","theAngleHlp","innerDeltaAngle","asin","idPos","addedNeighbours","currentNeighbour","noOfNeighbours","startPos","BestFreePositionsForAll","startAngle","holeDepth","EachNodeHeight","DFSSetPos","idealPosition","noOfPos","innerCirclePos","innerCSize","alreadyFound","startOfAlFound","found","goDown","goUp","goUpCount","biggestGap","bestStartPos","thisGap","nodeID","noOfChildren","theRadius","component","undefined","comp","centerX","centerY","currAngle","oneAtLeast","neighboursCount","min1","min2","min1Id","min2Id","maxId","remStartAngle","rTry","hlp","setOffset","abs","ColaLayout","cola","Layout","convergenceThreshold","_init","symmetricDiffLinkLengths","_nodes","_edges","DargeLayout","dagre","graphlib","setGraph","rankdir","nodesep","ranksep","ranker","setDefaultEdgeLabel","setNode","setEdge","d","FlowLayout","flowLayout","filterEdges","first","breadFirst","Grid","nx","ny","circular","flow","darge","grid","TextSdf","INF","fontSize","cutoff","fontFamily","font","textBaseline","gridOuter","Float64Array","gridInner","z","Int16Array","middle","round","navigator","userAgent","indexOf","draw","char","fillText","charSize","measureText","imgData","getImageData","edt","c","charWidth","edt1d","q","TextureIcon","texture","border","iconinfo","iconsToCreate","fontLoaded","updateGPUTexture","fonts","fontsReady","ready","then","fillRect","textAlign","infos","createIcon","computeAlpha","warn","uvs","putImageData","empty","createTexture","activeTexture","TEXTURE11","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","save","restore","TextureLoader","textures","defaultTexture","texturesIndex","urls","_load","image","src","onload","tx","TEXTURE0","NEAREST","TextureText","textinfo","sdf","ceil","px","py","TEXTURE10","strs","charAt","stary","body","addData","arr","attributes","attrData","scaleTrangles","points","p1_x","p1_y","p2_x","p2_y","p3_x","p3_y","avg_x","avg_y","p1_x_new","p1_y_new","p2_x_new","p2_y_new","p3_x_new","p3_y_new","Curve","ATTRIBUTES","arrayBuffer","dataBuffer","tSize","aSize","vX","vY","tX","tY","ctrlP","dx1","dy1","dis1","arrowX","arrowY","color","scalePos","scaleUV","dashed","positionLocation","getAttribLocation","uvLocation","disLocation","flagLocation","colorLocation","dashedLocation","matrixLocation","getUniformLocation","cameraScaleLocation","float32View","Uint8View","Uint8Array","offset32","offset8","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniformMatrix3fv","uniform1f","u_matrix","u_camera_scale","u_image","str","charHeight","uv","totalWidht","getData","rotate","a_position","a_uv","a_size","NodeLabel","sizeLocation","imageLocation","cameaScaleLocation","uniform1i","CurveLabel","tangent","center","getActiveAttributes","getActiveUniforms","calTypeOffset","checkAttrValid","setUniforms","GLComType","glType","BYTE","SHORT","UNSIGNED_SHORT","GlType","components","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","getType","typeNum","shaderAttrInfos","numAttribs","ACTIVE_ATTRIBUTES","attribInfo","getActiveAttrib","location","shaderUniformInfos","numUniforms","ACTIVE_UNIFORMS","uniformInfo","getActiveUniform","substr","uniformSetter","uniform2fv","uniform3fv","uniform4fv","uniformMatrix2fv","uniformMatrix4fv","uniform1iv","arrowSize","crossVector","targetSize","a_normal","a_color","comType","a_img","a_selected","a_flag","u_textures","u_borderColor","u_sample_ratio","u_icons_texture","hasIcon","iconSize"],"mappings":"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","file":"klgraph.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 40);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cc8c782a8e94ab912bf3","/**\n * Created by chengang on 17-3-17.\n */\n\nvar typeofstr = typeof '';\nvar typeofobj = typeof {};\nvar typeoffn = typeof function(){};\n\nvar utils = {};\n\n\nutils.uuid = function(a,b){\n    for(               // loop :)\n        b=a='';        // b - result , a - numeric variable\n        a++<36;        //\n        b+=a*51&52  // if \"a\" is not 9 or 14 or 19 or 24\n            ?  //  return a random number or 4\n            (\n                a^15      // if \"a\" is not 15\n                    ?      // genetate a random number from 0 to 15\n                    8^Math.random()*\n                    (a^20?16:4)  // unless \"a\" is 20, in which case a random number from 8 to 11\n                    :\n                    4            //  otherwise 4\n            ).toString(16)\n            :\n            '-'            //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n    );\n    return b;\n};\n\n\n//is tool\nutils.isArray = function( obj ){\n    return Array.isArray ? Array.isArray( obj ) : obj != null && obj instanceof Array;\n};\nutils.isString = function( obj ){\n    return obj != null && typeof obj == typeofstr;\n};\nutils.isObject = function( obj ){\n    return obj != null && typeof obj === typeofobj;\n};\nutils.isFunction =  function( obj ){\n    return obj != null && typeof obj === typeoffn;\n};\n\n//webgl shader tool\nutils.loadShader = function(gl, shaderSource, shaderType, error) {\n    var compiled,\n        shader = gl.createShader(shaderType);\n\n    // Load the shader source\n    gl.shaderSource(shader, shaderSource);\n\n    // Compile the shader\n    gl.compileShader(shader);\n\n    // Check the compile status\n    compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    // If something went wrong:\n    if (!compiled) {\n        if (error) {\n            error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        }\n\n        console.error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n};\nutils.loadProgram = function(gl, shaders, attribs, loc, error) {\n    var i,\n        linked,\n        program = gl.createProgram();\n\n    for (i = 0; i < shaders.length; ++i)\n        gl.attachShader(program, shaders[i]);\n\n    if (attribs)\n        for (i = 0; i < attribs.length; ++i)\n            gl.bindAttribLocation(\n                program,\n                locations ? locations[i] : i,\n                opt_attribs[i]\n            );\n\n    gl.linkProgram(program);\n\n    // Check the link status\n    linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        if (error)\n            error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        console.error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n        return null;\n    }\n\n    return program;\n};\n\n\nutils.extend = function() {\n    var i,\n        k,\n        res = {},\n        l = arguments.length;\n\n    for (i = l - 1; i >= 0; i--)\n        for (k in arguments[i])\n            res[k] = arguments[i][k];\n\n    return res;\n};\n\n// math tool\n\nutils.getDistance = function (x1,y1,x2,y2) {\n    var dx =x1 - x2;\n    var dy =y1 - y2;\n    return Math.sqrt(dx*dx+dy*dy);\n};\n\nutils.normalize = function (vector) {\n  var len = Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]);\n  if(len == 0) return [0,0];\n  return [vector[0]/len,vector[1]/len];\n};\n\nutils.getAngle = function (x1,y1,x2,y2) {\n    var cos = (x1*x2+y1*y2)/(Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2));\n    return Math.acos(cos);\n};\n\nutils.inRect = function (posx,posy,x,y,w,h) {\n  return posx >= x && posx <= x+w && posy >= y && posy <= y+h;\n};\n\n\n//color parse\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\";\nvar reHex6 = /^#([0-9a-f]{6})$/;\nvar reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\");\nutils.parseColor = function (format) {\n    format = (format + \"\").trim().toLowerCase();\n    var m,n;\n    if(m = reHex6.exec(format)){\n        n = parseInt(m[1], 16);\n        return{\n            r:n >> 16 & 0xff,\n            g: n >> 8 & 0xff,\n            b: n & 0xff,\n            a:255\n        }\n    }else if(m = reRgbaInteger.exec(format)){\n        return{\n            r:+m[1],\n            g:+m[2],\n            b:+m[3],\n            a:+m[4]*255\n        }\n    }else {\n        throw 'not valid color format';\n    }\n}\n\n\nutils.getNodeSizeX = function (node) {\n    var size = node.size || 10;\n    if(node.type == 'rect' && node.width) size = node.width;\n\n    return size;\n};\n\nutils.getNodeSizeY = function (node) {\n    var size = node.size || 10;\n    if(node.type == 'rect' && node.height) size = node.height;\n\n    return size;\n};\n\nutils.getBBox = function (nodes) {\n    var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n    nodes.forEach(function (e) {\n        if (e.x < x0) x0 = e.x;\n        if (e.x > x1) x1 = e.x;\n        if (e.y < y0) y0 = e.y;\n        if (e.y > y1) y1 = e.y;\n    });\n\n    return {\n        x:x0,\n        y:y0,\n        w:x1-x0,\n        h:y1-y0\n    }\n};\n\n\n/**\n * Compute the coordinates of the point positioned\n * at length t in the quadratic bezier curve.\n *\n * @param  {number} t  In [0,1] the step percentage to reach\n *                     the point in the curve from the context point.\n * @param  {number} x1 The X coordinate of the context point.\n * @param  {number} y1 The Y coordinate of the context point.\n * @param  {number} x2 The X coordinate of the ending point.\n * @param  {number} y2 The Y coordinate of the ending point.\n * @param  {number} xi The X coordinate of the control point.\n * @param  {number} yi The Y coordinate of the control point.\n * @return {object}    {x,y}.\n */\nutils.getPointOnQuadraticCurve = function(t, x1, y1, x2, y2, xi, yi) {\n    // http://stackoverflow.com/a/5634528\n    return [\n        Math.pow(1 - t, 2) * x1 + 2 * (1 - t) * t * xi + Math.pow(t, 2) * x2,\n        Math.pow(1 - t, 2) * y1 + 2 * (1 - t) * t * yi + Math.pow(t, 2) * y2\n    ];\n};\n\nutils.getPointTangentOnQuadraticCurve = function(t, x1, y1, x2, y2, xi, yi) {\n    var pos1 = utils.getPointOnQuadraticCurve(t, x1, y1, x2, y2, xi, yi);\n    var pos2 = utils.getPointOnQuadraticCurve(t+0.001, x1, y1, x2, y2, xi, yi);\n    return utils.normalize([pos2[0]-pos1[0],pos2[1] - pos1[1]]);\n};\n\n\nutils.getControlPos = function(x1,y1,x2,y2,count,order) {\n    var dis = utils.getDistance(x1,y1,x2,y2);\n    var factor = dis/8;\n\n    var ratio = (count+1)%2 == 1 ? 1 : -1;\n    ratio *= order ? 1 : -1;\n\n    factor *= ratio * ((count >> 1) + 1);\n\n    var norV = utils.normalize([y1-y2,x2-x1]);\n    return [norV[0]*factor+(x1+x2)/2,norV[1]*factor+(y1+y2)/2];\n};\n\n\nexport  default utils ;\n\n// window.utils = utils;\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nexport default class EventEmitter {\n    constructor(){\n        this._listener = {};\n    }\n\n    on(type,cb){\n        if(!type || !cb) return;\n        this._listener[type] = this._listener[type] || [];\n\n        var listener = this._listener[type];\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]) return;\n        }\n\n        this._listener[type].push(cb);\n        return cb;\n    }\n\n    off(type,cb){\n        if(!type) return;\n        var listener;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        if(cb){\n            for(var i = 0,len = listener.length; i < len;i++){\n                if(cb == listener[i]){\n                    listener.splice(i,1);\n                    break;\n                }\n            }\n        }else {\n            this._listener[type] = [];\n        }\n    }\n\n    emit(type,args){\n        if(!type) return;\n        var listener,fn;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        listener = listener.slice();\n\n        for(var i = 0,len = listener.length;i< len;i++){\n            fn = listener[i];\n            fn.apply(null,args);\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/EventEmitter.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nimport EventEmitter from '../base/EventEmitter';\nimport timer from '../base/timer'\n\n/**\n * from d3-interpolate\n */\nfunction interpolateNumber(a, b) {\n    return a = +a, b -= a, function(t) {\n        return a + b * t;\n    };\n}\n\n\n\nexport  default class Tween extends  EventEmitter{\n\n    static list = [];\n\n    constructor(objs,type){\n        super();\n        if(!objs) throw 'must have a obj';\n\n        type = type || '';\n\n        this.objs = objs;\n        this.type = type;\n        this.interpolates = null;\n        this.timer = timer(this.timerHandle.bind(this));\n        this._duration = 0;\n\n        Tween.list.push(this);\n    }\n\n\n    timerHandle(elapsed) {\n        var t = elapsed / this._duration;\n\n        t = Math.min(t,1);\n\n        var obj,attr,attrInterpolater;\n        if(Array.isArray(this.interpolates)){\n            for(var i = 0,len = this.interpolates.length;i< len;i++){\n                obj = this.objs[i];\n                attrInterpolater = this.interpolates[i];\n                for(attr in attrInterpolater){\n                    obj[attr] = attrInterpolater[attr](t);\n                }\n            }\n        }else {\n            obj = this.objs;\n            attrInterpolater = this.interpolates;\n            for(attr in attrInterpolater){\n                obj[attr] = attrInterpolater[attr](t);\n            }\n        }\n\n        this.emit('change',[t]);\n\n        if(elapsed >=this._duration) this.stop();\n\n    }\n\n\n    duration(time) {\n        this._duration = time;\n        return this;\n    }\n\n    to(toObjs) {\n        if(Array.isArray(toObjs) && toObjs.length !== this.objs.length){\n            console.error('toObjs lenght not eq objs length');\n            this.stop();\n            return this;\n        }\n\n        var obj,attr,attrInterpolater;\n        if(Array.isArray(toObjs)){\n            this.interpolates = [];\n            for(var i = 0,len = toObjs.length;i<len;i++){\n                obj = toObjs[i];\n                attrInterpolater = {};\n                for(attr in obj){\n                    attrInterpolater[attr] = interpolateNumber(this.objs[i][attr],obj[attr]);\n                }\n                this.interpolates.push(attrInterpolater);\n            }\n        }else {\n            obj = toObjs;\n            attrInterpolater = {};\n            for(attr in obj){\n                attrInterpolater[attr] = interpolateNumber(this.objs[attr],obj[attr]);\n            }\n            this.interpolates = attrInterpolater;\n        }\n\n        return this;\n\n    };\n\n    stop() {\n        if(this.timer){\n            this.timer.stop();\n            this.timer = null;\n            this.objs = null;\n            this.interpolates = null;\n\n            Tween.remove(this.objs);\n        }\n    }\n\n    static remove(obj){\n        var list = Tween.list;\n        Tween.list = [];\n        list.forEach(function (e) {\n            if(e.objs == obj){\n                e.stop();\n            }else {\n                Tween.list.push(e);\n            }\n        })\n    }\n\n    static removeByType(type){\n        var list = Tween.list;\n        Tween.list = [];\n        list.forEach(function (e) {\n            if(e.type === type){\n                e.stop();\n            }else {\n                Tween.list.push(e);\n            }\n        })\n    }\n\n    static removeAll(){\n        Tween.list.forEach(function (e) {\n            e.stop();\n        })\n\n        Tween.list = [];\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/animation/tween.js","/**\n * Created by chengang on 17-3-28.\n */\n\n'use strict';\n\n\nvar mat3 = {};\n\nmat3.normalize = function () {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromTranslate = function(dx, dy) {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        dx, dy, 1\n    ];\n};\n\nmat3.matrixFromRotation = function(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle);\n\n    return  [\n        cos, sin, 0,\n        -sin, cos, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromScale = function(x,y) {\n    return  [\n        x, 0, 0,\n        0, y, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.invert = function (a) {\n    var l =  3,\n        a11 = a[0 * l + 0],\n        a12 = a[0 * l + 1],\n        a13 = a[0 * l + 2],\n        a21 = a[1 * l + 0],\n        a22 = a[1 * l + 1],\n        a23 = a[1 * l + 2],\n        a31 = a[2 * l + 0],\n        a32 = a[2 * l + 1],\n        a33 = a[2 * l + 2];\n\n    var del = a11*(a22*a33-a23*a32)-a12*(a21*a33-a23*a31)+a13*(a21*a32-a22*a31);\n\n    return [\n        (a22*a33-a23*a32)/del,(a13*a32-a12*a33)/del,(a12*a23-a13*a22)/del,\n        (a23*a31-a21*a33)/del,(a11*a33-a13*a31)/del,(a13*a21-a11*a23)/del,\n        (a21*a32-a22*a31)/del,(a12*a31-a11*a32)/del,(a11*a22-a12*a21)/del\n    ];\n}\n\nmat3.multiply = function(a, b) {\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2],\n        b00 = b[0 * l + 0],\n        b01 = b[0 * l + 1],\n        b02 = b[0 * l + 2],\n        b10 = b[1 * l + 0],\n        b11 = b[1 * l + 1],\n        b12 = b[1 * l + 2],\n        b20 = b[2 * l + 0],\n        b21 = b[2 * l + 1],\n        b22 = b[2 * l + 2];\n\n    return [\n        a00 * b00 + a01 * b10 + a02 * b20,\n        a00 * b01 + a01 * b11 + a02 * b21,\n        a00 * b02 + a01 * b12 + a02 * b22,\n        a10 * b00 + a11 * b10 + a12 * b20,\n        a10 * b01 + a11 * b11 + a12 * b21,\n        a10 * b02 + a11 * b12 + a12 * b22,\n        a20 * b00 + a21 * b10 + a22 * b20,\n        a20 * b01 + a21 * b11 + a22 * b21,\n        a20 * b02 + a21 * b12 + a22 * b22\n    ];\n};\n\nmat3.transformPoint = function (p,a) {\n    var x = p[0],\n        y = p[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10+a20,x*a01+y*a11+a21];\n}\n\nmat3.rotateVector = function (v,a) {\n    var x = v[0],\n        y = v[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10,x*a01+y*a11];\n};\n\n\nmat3.multiMatrix = function (matrixs) {\n    return matrixs.reduce(function (pre,cur) {\n        return mat3.multiply(pre,cur);\n    })\n};\n\nexport default mat3;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/Matrix.js","module.exports = \" precision mediump float;\\n\\nvec4 color = vec4(77, 72, 91,255);\\n\\nvarying vec2 v_texCoord;\\nvarying float size;\\n\\n\\nuniform sampler2D u_image;\\nuniform float u_camera_scale;\\n\\n\\nvoid main() {\\n    color = color / 255.0;\\n\\n    float offset = size * u_camera_scale * 0.12;\\n\\n    offset = pow(offset,1.2);\\n\\n    offset = min((1.0-0.72),offset);\\n\\n   float dist = texture2D(u_image, v_texCoord).r;\\n   float alpha = smoothstep(0.72 - offset, 0.72 + offset, dist);\\n   gl_FragColor = color *alpha;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/label-frag.glsl\n// module id = 4\n// module chunks = 0","\n'use strict';\n\nimport util from '../../util'\nimport mat3 from '../../base/Matrix'\nimport EventEmitter from '../../base/EventEmitter'\nimport TextureLoader from './TextureLoader'\nimport TextureText from './TextureText'\nimport TextureIcon from './TextureIcon'\nimport initEvent from '../../core/Event'\nimport Tween from '../../animation/tween'\nimport {\n    getActiveUniforms,\n    getActiveAttributes,\n    calTypeOffset,\n    vertexAttribPointer,\n    setUniforms,\n    checkAttrValid,\n    GlType,GLComType\n} from '../../base/GLUtil'\n\n\nfunction layerCheckDefault() {\n    return function (data) {\n        return !data.type || data.type == 'default';\n    }\n}\n\nfunction layerCheck(type) {\n    return function (data) {\n        return data.type == type;\n    }\n}\n\n\n\nclass WebGLRender extends EventEmitter{\n    constructor(context,config) {\n        super();\n\n        this.context = context;\n        this.config = config;\n\n        this.container = config.container;\n        this.graph = context.graph;\n\n        this.needUpdate = true;\n        this.sampleRatio = 1.5;\n\n        this.initRender();\n\n        this.initTexture = false;\n        this.textureLoader = new TextureLoader(this.gl);\n        this.textureIcon = new TextureIcon(this.gl,this.config);\n        this.textureText = new TextureText(this.gl);\n\n        this.initEvent();\n        this.initIconTexture();\n        this.initTextTexture();\n\n        this.projectMatrix = null;\n\n        this.camera = {\n            scale:1,\n            positionX:0,\n            positionY:0,\n            rotation:0\n        };\n\n\n        this.renderCache = {\n            graph:{layers:[],index:{},flag:false},\n            node:{layers:[],index:{},flag:false},\n            edge:{layers:[],index:{},flag:false}\n        };\n        this.renderLayerMap = {};\n        this.renderLayersConfig = [\n            {\n                name:'base',\n                subLayers:[\n                    {name:'edge',context:'edge',render:WebGLRender.edge.default,check:layerCheckDefault()},\n                    {name:'node',context:'node',render:WebGLRender.node.default,check:layerCheckDefault()},\n                    {name:'rectNode',context:'node',render:WebGLRender.node.rect,check:layerCheck('rect')},\n                    {name:'edgeLabel',context:'edge',render:WebGLRender.edgeLabel.default,check:layerCheckDefault()},\n                    {name:'nodeLabel',context:'node',render:WebGLRender.nodeLabel.default,check:function () {return true}},\n                ]\n            }\n        ];\n        this.initRenderLayerMap();\n\n        initEvent.call(this);\n\n\n\n    }\n\n    initRenderLayerMap(){\n        var  renderLayerMap = this.renderLayerMap;\n        var gl = this.gl;\n        var program;\n\n        var _this = this;\n        this.renderLayersConfig.forEach(function (layer) {\n            layer.subLayers.forEach(function (subLayer) {\n\n                program = util.loadProgram(gl, [\n                    util.loadShader(gl, subLayer.render.shaderVert, gl.VERTEX_SHADER),\n                    util.loadShader(gl, subLayer.render.shaderFrag, gl.FRAGMENT_SHADER)\n                ]);\n\n                program.activeAttributes = getActiveAttributes(gl,program);\n                program.activeUniforms = getActiveUniforms(gl,program);\n                program.offsetConfig = calTypeOffset(program.activeAttributes);\n                program.buffer = gl.createBuffer();\n\n                subLayer.program = program;\n\n                subLayer.renderData = {\n                    uniforms:null,\n                    data:null,\n                    bytes:0\n                };\n\n                _this.renderCache[subLayer.context].layers.push(subLayer.name);\n\n                renderLayerMap[subLayer.name] = subLayer\n            })\n        }.bind(this));\n    }\n    putData(buffer,datas,offsetConfig){\n        // debugger\n        var arrView = new Float32Array(buffer);\n        var offset = 0;\n        var config = offsetConfig.config;\n        datas.forEach(function (data) {\n            for(var attr in config){\n                if(util.isArray(data[attr])){\n                    data[attr].forEach(function (e,i) {\n                        arrView[offset+config[attr].start+i] = data[attr][i];\n                    });\n                }else {\n                    arrView[offset+config[attr].start] = data[attr];\n                }\n            }\n            offset += offsetConfig.strip;\n        }.bind(this));\n    }\n    updateCacheByData(context,data){\n\n        var cacheIndex,temp,err,totalLen;\n        var contextRelativeLayers = this.renderCache[context].layers;\n        var renderLayerMap = this.renderLayerMap;\n\n        cacheIndex = this.renderCache[context].index[data.id] =  this.renderCache[context].index[data.id]  || {};\n\n        contextRelativeLayers.forEach(function(layer) {\n            if(!renderLayerMap[layer].check(data)) return;\n\n            temp = renderLayerMap[layer].render.getRenderData({\n                data: data,\n                graph: this.graph,\n                textureText: this.textureText,\n                textureLoader: this.textureLoader,\n                textureIcon: this.textureIcon\n            });\n\n            if (!util.isArray(temp)) temp = [temp];\n\n            temp.forEach(function (data) {\n                if (err = checkAttrValid(renderLayerMap[layer].program.activeAttributes, data)) {\n                    throw err.join('\\n');\n                }\n            }.bind(this));\n\n            totalLen = temp.length * renderLayerMap[layer].program.offsetConfig.strip * 4;\n            if (!cacheIndex[layer] || cacheIndex[layer].byteLength != totalLen) {\n                cacheIndex[layer] = new ArrayBuffer(totalLen);\n            }\n\n            this.putData(cacheIndex[layer], temp, renderLayerMap[layer].program.offsetConfig);\n\n        }.bind(this))\n    }\n    updateContextCache(context){\n        if(context != 'node' &&  context != 'edge' && context != 'graph') return;\n\n        if(this.renderCache[context].flag)  return;\n\n        var datas;\n        var  renderLayerMap = this.renderLayerMap;\n\n        if(context === 'graph'){\n\n        }else {\n            datas = context == 'node' ? this.graph.nodes : this.graph.edges;\n            for(var i = 0,len = datas.length;i < len ; i++){\n                this.updateCacheByData(context,datas[i]);\n            }\n        }\n\n        this.renderCache[context].flag = true;\n    }\n    updateLayerData(){\n        console.time('updateContextCacheNode');\n        this.updateContextCache('node');\n        console.timeEnd('updateContextCacheNode');\n\n        console.time('updateContextCacheEdge');\n        this.updateContextCache('edge');\n        console.timeEnd('updateContextCacheEdge');\n\n        console.time('updateLayerRenderData');\n        this.updateLayerRenderData();\n        console.timeEnd('updateLayerRenderData');\n\n        console.time('updateLayerUniformData');\n        this.updateLayerUniformData();\n        console.timeEnd('updateLayerUniformData');\n\n\n        for(var layer in this.renderLayerMap){\n            this.renderLayerMap[layer].cache = true;\n        }\n    }\n    updateLayerRenderData(){\n        var datas;\n        var data,cacheIndex,renderLayerMap,int8ViewS,int8ViewT,start,uniforms,err;\n\n        //clear bytes 0\n        renderLayerMap = this.renderLayerMap;\n        for(var layer in renderLayerMap){\n            if(renderLayerMap[layer].cache) continue;\n            renderLayerMap[layer].renderData.bytes = 0;\n        }\n\n        //calculate total byte per layer\n        datas = this.graph.nodes;\n        for(var i = 0;i< datas.length;i++){\n            data = datas[i];\n            cacheIndex = this.renderCache.node.index[data.id];\n            for(var layer in cacheIndex){\n                if(renderLayerMap[layer].cache) continue;\n                \n                renderLayerMap[layer].renderData.bytes += cacheIndex[layer].byteLength;\n            }\n        }\n\n        datas = this.graph.edges;\n        for(var i = 0;i< datas.length;i++){\n            data = datas[i];\n            cacheIndex = this.renderCache.edge.index[data.id];\n            for(var layer in cacheIndex){\n                if(renderLayerMap[layer].cache) continue;\n\n                renderLayerMap[layer].renderData.bytes += cacheIndex[layer].byteLength;\n            }\n        }\n\n        //gather render data per layer\n        for(var layer in renderLayerMap){\n            if(renderLayerMap[layer].cache) continue;\n\n            if(!renderLayerMap[layer].renderData.data\n                || renderLayerMap[layer].renderData.data.byteLength != renderLayerMap[layer].renderData.bytes\n            )\n                renderLayerMap[layer].renderData.data = new ArrayBuffer(renderLayerMap[layer].renderData.bytes);\n\n            renderLayerMap[layer].renderData.bytes = 0;\n\n        }\n\n        datas = this.graph.nodes;\n        for(var i = 0;i< datas.length;i++){\n            data = datas[i];\n            cacheIndex = this.renderCache.node.index[data.id];\n            for(var layer in cacheIndex){\n\n                if(renderLayerMap[layer].cache) continue;\n\n                int8ViewS = new Int8Array(cacheIndex[layer]);\n                int8ViewT = new Int8Array(renderLayerMap[layer].renderData.data);\n                start = renderLayerMap[layer].renderData.bytes;\n                for(var m = 0; m < int8ViewS.length;m++){\n                    int8ViewT[start+m] = int8ViewS[m];\n                    renderLayerMap[layer].renderData.bytes++;\n                }\n            }\n        }\n\n        datas = this.graph.edges;\n        for(var i = 0;i< datas.length;i++){\n            data = datas[i];\n            cacheIndex = this.renderCache.edge.index[data.id];\n            for(var layer in cacheIndex){\n\n                if(renderLayerMap[layer].cache) continue;\n\n                int8ViewS = new Int8Array(cacheIndex[layer]);\n                int8ViewT = new Int8Array(renderLayerMap[layer].renderData.data);\n                start = renderLayerMap[layer].renderData.bytes;\n                for(var m = 0; m < int8ViewS.length;m++){\n                    int8ViewT[start+m] = int8ViewS[m];\n                    renderLayerMap[layer].renderData.bytes++;\n                }\n            }\n        }\n\n    }\n    draw(){\n        var gl = this.gl,\n            renderLayerMap,program;\n        renderLayerMap = this.renderLayerMap;\n\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        // debugger\n        for(var layer in renderLayerMap){\n            program = renderLayerMap[layer].program;\n            gl.useProgram(program);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, program.buffer);\n            gl.bufferData(gl.ARRAY_BUFFER,renderLayerMap[layer].renderData.data , gl.STATIC_DRAW);\n\n            vertexAttribPointer(gl,program.activeAttributes,program.offsetConfig);\n\n            setUniforms(gl,program.activeUniforms,renderLayerMap[layer].renderData.uniforms);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n            gl.drawArrays(\n                gl.TRIANGLES, 0,\n                renderLayerMap[layer].renderData.data.byteLength/(program.offsetConfig.strip*4)\n            );\n        }\n    }\n    updateLayerUniformData(){\n        var uniforms,err;\n        var renderLayerMap = this.renderLayerMap;\n\n        for(var layer in renderLayerMap){\n            uniforms = renderLayerMap[layer].render.getUniforms({\n                matrix: mat3.multiMatrix([this.getCameraMatrix(true), this.projectMatrix]),\n                camera: this.camera,\n                sampleRatio: this.sampleRatio,\n                textureLoader: this.textureLoader,\n            });\n\n            if (err = checkAttrValid(renderLayerMap[layer].program.activeUniforms, uniforms)) {\n                throw err.join('\\n');\n            }\n\n            renderLayerMap[layer].renderData.uniforms = uniforms;\n        }\n    }\n    render2(){\n\n        // if(this.renderflag) return;\n\n        this.renderflag = true;\n        console.time('render')\n\n        this.updateLayerData();\n\n        // this.updateLayerData('edge');\n        // this.draw();\n        console.timeEnd('render')\n\n        // debugger\n    }\n\n    updateNodeRenderData(ids){\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        var cacheIndex;\n        ids.forEach(function (id) {\n            this.updateCacheByData('node',this.graph.nodesIndex[id]);\n            cacheIndex = this.renderCache.node.index[id];\n            for(var layer in cacheIndex){\n                this.renderLayerMap[layer].cache = false;\n            }\n        }.bind(this));\n\n    }\n\n    updateEdgeRenderData(ids){\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        var cacheIndex;\n        ids.forEach(function (id) {\n            this.updateCacheByData('edge',this.graph.edgesIndex[id]);\n            cacheIndex = this.renderCache.edge.index[id];\n            for(var layer in cacheIndex){\n                this.renderLayerMap[layer].cache = false;\n            }\n        }.bind(this));\n    }\n\n    //render\n    render() {\n        // debugger\n        this.resizeCanvas();\n        // setTimeout(this.render2.bind(this),500);\n        this.render2();\n\n        this.needUpdate = false;\n\n        // debugger\n        // return;\n        //\n        // if(!this.initTexture){\n        //     var imgs = {};\n        //     var nodes = this.graph.nodes;\n        //     nodes.forEach(function (node) {\n        //         node.img && (imgs[node.img] = true);\n        //     });\n        //\n        //     this.textureLoader.loadImgs(Object.keys(imgs));\n        //     this.initTexture = true;\n        // }\n\n    }\n    initRender() {\n        var option = {\n            preserveDrawingBuffer:true\n        }\n        this.gl = this.container.getContext('experimental-webgl',option) || this.container.getContext('webgl',option);\n\n        if (!this.gl) {\n            throw '浏览器不支持webGl';\n        }\n\n        this.gl.getExtension('OES_standard_derivatives');\n\n        this.resizeCanvas();\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        // this.gl.clearColor(218/255, 224/255, 231/255, 1);\n        this.gl.clearColor(0,0,0,0);\n    }\n    initEvent(){\n        var _this = this;\n        this.graph.on('change',function (type,ids) {\n            if(type =='node'){\n                 _this.updateNodeRenderData(ids);\n            }else if(type == 'edge'){\n                 _this.updateEdgeRenderData(ids);\n            }\n\n        });\n        this.graph.on('reset',function () {\n            _this.clearRenderCache();\n            _this.initIconTexture();\n            _this.initTextTexture();\n        });\n        this.graph.on('add',function (type,ids) {\n            if(!util.isArray(ids)) ids = [ids];\n\n            var objs = null;\n\n            if(type == 'node') objs = ids.map(function (e) {return _this.graph.nodesIndex[e]});\n            else objs = ids.map(function (e) {return _this.graph.edgesIndex[e]});\n\n            _this.textureText.addTexts(getAddText(objs));\n            _this.clearRenderCache();\n        });\n        this.graph.on('remove',function (type,ids) {\n            _this.clearRenderCache();\n        });\n\n\n\n        this.textureIcon.on('load',function () {\n            this.clearRenderCache();\n        }.bind(this));\n\n\n        this.textureLoader.on('load',function (url) {\n            var nodes = _this.graph.nodes;\n            nodes.forEach(function (e) {\n                if(e.img && e.img == url) _this.updateNodeRenderData(e.id);\n            });\n        });\n\n\n        function getAddText(objs) {\n            var text = '';\n            objs.forEach(function (e) {\n                e.label && (text += e.label);\n            });\n\n            return text;\n        }\n\n    }\n    initTextTexture(){\n\n        this.textureText.clear();\n\n        var nodes = this.graph.nodes;\n        var edges = this.graph.edges;\n\n        var map = {};\n        var texts = [];\n        nodes.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        edges.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        this.textureText.createCanvasImg(texts);\n    }\n    initRenderLayers(root, type) {\n        var renderType = type;\n        var typeRoot = WebGLRender[root];\n\n        var renderRoot;\n\n        renderRoot= this.renderType[root].type;\n\n\n\n        if(!typeRoot[type]){\n            console.error(`${root}: no type[${type}],use default`);\n            type = 'default';\n        }\n\n        var temp,layersConfig;\n        if(!renderRoot[renderType]){\n\n            layersConfig = typeRoot[type];\n            if(util.isFunction(layersConfig)){\n                layersConfig = {\n                    layers:[\n                        {name:'base',layer:layersConfig}\n                    ]\n                }\n            }\n            renderRoot[renderType] = {layers:{},order:[]};\n            layersConfig.layers.forEach(function (config) {\n                temp = {};\n                temp.counter = 0;\n                temp.data = [];\n                temp.render = new config.layer();\n                temp.program = util.loadProgram(this.gl, [\n                    util.loadShader(this.gl, temp.render.shaderVert, this.gl.VERTEX_SHADER),\n                    util.loadShader(this.gl, temp.render.shaderFrag, this.gl.FRAGMENT_SHADER)\n                ]);\n                renderRoot[renderType].layers[config.name] = temp;\n                renderRoot[renderType].order.push(config.name);\n            }.bind(this));\n\n        }\n    }\n    initIconTexture(){\n\n        this.textureIcon.clear();\n\n        var nodes = this.graph.nodes;\n\n        var map = {};\n        var icons = [];\n        nodes.forEach(function (e) {\n            if(e.icon){\n                if(!map[e.icon]){\n                    map[e.icon] = true;\n                    icons.push(e.icon);\n                }\n            }\n        });\n\n        this.textureIcon.createIcons(icons);\n\n    }\n\n    getCameraMatrix(isInvert){\n        var mat = mat3.multiMatrix([\n            mat3.matrixFromScale(this.camera.scale,this.camera.scale),\n            mat3.matrixFromRotation(this.camera.rotation),\n            mat3.matrixFromTranslate(this.camera.positionX,this.camera.positionY)\n        ]);\n        return isInvert  ? mat3.invert(mat) : mat;\n    }\n    resizeCanvas() {\n        var canvas = this.gl.canvas;\n        var multiplier = this.sampleRatio;\n        var width = canvas.clientWidth * multiplier | 0;\n        var height = canvas.clientHeight * multiplier | 0;\n        if (canvas.width !== width || canvas.height !== height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n\n        this.projectMatrix = mat3.matrixFromScale(2/(canvas.clientWidth),2/(canvas.clientHeight));\n        this.gl.viewport(0, 0,canvas.width, canvas.height);\n\n    }\n\n    graphToDomPos(pos){\n        var canvas = this.gl.canvas;\n        var camPos =  mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix(true));\n        return {x:camPos[0]+canvas.clientWidth/2,y:canvas.clientHeight/2-camPos[1]};\n    }\n    toCameraPos(pos){\n        var canvas = this.gl.canvas;\n        return {x:pos.x-canvas.clientWidth/2,y:canvas.clientHeight/2-pos.y};\n    }\n    toGraphPos(pos,isVector){\n        var p = isVector ?\n            mat3.rotateVector([pos.x,pos.y],this.getCameraMatrix())\n            :\n            mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix());\n        return {x:p[0],y:p[1]};\n    }\n\n    forceRender(){\n        this.needUpdate = true;\n    }\n    zoomTo(ratio,x,y,animation){\n\n        var scale = this.camera.scale;\n        var positionX,positionY;\n\n        var newscale = ratio * scale;\n        if(newscale < this.config.zoomMin) newscale = this.config.zoomMin;\n        if(newscale > this.config.zoomMax) newscale = this.config.zoomMax;\n\n        if (x != null && y != null) {\n            var offset = mat3.rotateVector([x * (newscale - scale)/scale, y *(newscale - scale)/scale], this.getCameraMatrix());\n            positionX = this.camera.positionX - offset[0] ;\n            positionY = this.camera.positionY - offset[1];\n        }\n\n        if(animation){\n            this.zoomToAnimation({\n                positionX:positionX,\n                positionY:positionY,\n                scale:newscale\n            });\n        }else {\n            this.camera.positionX = positionX;\n            this.camera.positionY = positionY;\n            this.camera.scale = newscale;\n        }\n    }\n\n    zoomToAnimation(option,time){\n        Tween.removeByType('camera');\n        time = time || 100;\n\n        var _this = this;\n        new Tween(this.camera,'camera').to(option).duration(time).on('change',function () {\n            _this.forceRender();\n        });\n\n    }\n\n    //cache update\n    clearRenderCache(layers){\n        this.forceRender();\n        var _this = this;\n        if(layers){\n            layers.forEach(function (layer) {\n                _this.renderLayerMap[layer].cache = false;\n            });\n        }else {\n            for(var layer in _this.renderLayerMap){\n                _this.renderLayerMap[layer].cache = false;\n            }\n            _this.renderCache.graph.flag = false;\n            _this.renderCache.node.flag = false;\n            _this.renderCache.edge.flag = false;\n        }\n    }\n\n\n\n}\n\nexport default WebGLRender;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/render.js","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\nsize = a_size;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/edge-label-vert.glsl\n// module id = 6\n// module chunks = 0","/**\n * Created by chengang on 17-4-6.\n */\n\n'use strict';\n\nimport Graph from './Graph'\nimport WebGLRender from  '../render/webgl/render'\nimport utils from '../util'\n\nimport Tween from '../animation/tween'\nimport Selection from './Selection'\nimport layout from '../layout/index'\nimport defaultConfig from './config'\n\nexport  default  class Core {\n\n    static layout = layout;\n\n    constructor(option) {\n        option = option || {};\n\n        this.config = utils.extend(defaultConfig, option.config || {});\n\n        this.graph = new Graph({\n            nodes: option.nodes,\n            edges: option.edges,\n        });\n\n        this.container = option.container;\n\n        this.canvas = {};\n        this.initCanvas();\n\n        this.render = new WebGLRender(\n            this,\n            utils.extend({container: this.canvas.render}, this.config)\n        );\n\n        this.selection = new Selection(this.canvas.mouse, this);\n\n        this.on = this.render.on.bind(this.render);\n        this.off = this.render.off.bind(this.render);\n\n        if(this.graph.nodes.length > 0) this.makeLayout(option.layout || 'preset');\n\n        this._start();\n\n        this._initEvent();\n    }\n\n    initCanvas() {\n\n        this.container.style.position = 'relative';\n\n        this.canvas.render = this._createCanvas();\n        this.container.appendChild(this.canvas.render);\n\n        this.container.oncontextmenu = function (e) {\n            e.preventDefault();\n        };\n\n        this.canvas.mouse = this._createCanvas();\n        this.canvas.mouse.style.display = 'none';\n        this.canvas.mouse.style.cursor = 'cell';\n\n        this.container.appendChild(this.canvas.mouse);\n    }\n\n    _createCanvas() {\n        var canvas = document.createElement('canvas');\n        canvas.style.position = 'absolute';\n        canvas.style.left = '0px';\n        canvas.style.top = '0px';\n        canvas.width = this.container.clientWidth;\n        canvas.height = this.container.clientHeight;\n        canvas.style.width = '100%';\n        canvas.style.height = '100%';\n\n        return canvas;\n    }\n\n    _start() {\n        var _this = this;\n        var frames = state();\n\n        function state() {\n            var n = -1, start = 0;\n            return function (time) {\n                n++;\n                time = time / 1000;\n                if ((time - start) > 1) {\n                    // console.log(n);\n                    n = -1;\n                    start = time;\n                }\n\n            }\n        }\n\n        function render(time) {\n            _this._render();\n            frames(time);\n            requestAnimationFrame(render)\n        }\n\n        requestAnimationFrame(render);\n    }\n\n    _render() {\n        this.resize();\n\n        if (this.render && this.render.needUpdate) {\n            // console.time('render')\n            // debugger\n            this.render.render();\n            // console.timeEnd('render')\n        }\n\n\n    }\n\n\n    _initEvent() {\n        var _this = this;\n        this.render.on('nodeclick', function (node, e) {\n            if (!_this.selection.isSelected(node))\n                _this.selection.select(node,e.shiftKey);\n            else if(e.shiftKey) _this.selection.unSelect(node);\n        });\n\n        this.render.on('rightclick', function (type,node, e) {\n            if (type == 'node' && !_this.selection.isSelected(node))\n                _this.selection.select(node);\n        });\n    }\n\n    resize() {\n        if (this.canvas.mouse.width != this.container.clientWidth || this.canvas.mouse.height != this.container.clientHeight) {\n            this.canvas.mouse.width = this.container.clientWidth;\n            this.canvas.mouse.height = this.container.clientHeight;\n            this.render.forceRender();\n        }\n    }\n\n\n    getFitOptions(nodes) {\n        var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n        nodes.forEach(function (e) {\n            if (e.x < x0) x0 = e.x;\n            if (e.x > x1) x1 = e.x;\n            if (e.y < y0) y0 = e.y;\n            if (e.y > y1) y1 = e.y;\n        });\n\n        return {\n            scale:Math.max((x1-x0)/this.render.container.clientWidth,(y1-y0)/this.render.container.clientHeight),\n            positionX:(x0+x1)/2,\n            positionY:(y0+y1)/2,\n        }\n    }\n\n    fit(duration,option){\n        var _this = this;\n        Tween.removeByType('camera');\n        duration = duration || 1000;\n        option = option || this.getFitOptions(this.graph.nodes);\n        new Tween(this.render.camera,'camera').to(option).duration(duration).on('change',function () {\n            _this.render.forceRender();\n        });\n    }\n\n\n    makeLayout(type,nodes) {\n\n        var _this = this;\n        var layout, data;\n        var layoutConfig = Core.layout;\n\n        Tween.removeByType('layout');\n\n        var edges = null;\n        if(nodes == null){\n            nodes =  this.graph.nodes;\n            edges =  this.graph.edges;\n        }else {\n            edges = getEdges(nodes);\n        }\n\n        if (type == 'preset') {\n            this.graph.nodes.forEach(function (e) {\n                if (!('x' in e)) e.x = Math.random() * _this.render.gl.clientWidth;\n                if (!('y' in e)) e.y = Math.random() * _this.render.gl.clientWidth;\n            });\n            this.render.clearRenderCache();\n        } else if (layout = layoutConfig[type]) {\n\n            layout = new layoutConfig[type]();\n            data = layout.layout(nodes,edges);\n\n            if(data.length > this.graph.nodes.length * 4/5){\n                new Tween(nodes, 'layout').to(data).duration(2000).on('change', function (t) {\n                    _this.render.clearRenderCache();\n                });\n\n                this.fit(2000,this.getFitOptions(data));\n            }else {\n\n                var bbox = utils.getBBox(nodes);\n                var bbox1 = utils.getBBox(data);\n\n                var offsetX = bbox.x+bbox.w/2 - (bbox1.x + bbox1.w/2);\n                var offsetY = bbox.y+bbox.h/2 - (bbox1.y + bbox1.h/2);\n\n                data.forEach(function (e) {\n                    e.x += offsetX;\n                    e.y += offsetY;\n                });\n\n                new Tween(nodes, 'layout').to(data).duration(2000).on('change', function (t) {\n                    nodes.forEach(function (node) {\n                       _this.graph.setNodeData(node.id,{x:node.x});\n                    });\n                });\n            }\n\n        }\n\n\n        function getEdges(nodes) {\n            var map = {};\n            var edges = [];\n            nodes.forEach(function (e) {\n                map[e.id] = true;\n            });\n\n            _this.graph.edges.forEach(function (e) {\n                if(map[e.source] && map[e.target])\n                    edges.push(e);\n            });\n\n            return edges;\n\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","/**\n * Created by chengang on 17-3-28.\n */\n\n\nimport WebGLRender from './webgl/render'\nWebGLRender.node = {};\nWebGLRender.edge = {};\nWebGLRender.nodeLabel = {};\nWebGLRender.edgeLabel = {};\n\nimport node from './webgl/node/default/render'\nimport rect from './webgl/node/rect/render'\nWebGLRender.node.default = node;\nWebGLRender.node.rect = rect;\n\n\nimport NodeLabel from './webgl/label/NodeLabel'\nWebGLRender.nodeLabel.default = NodeLabel;\nWebGLRender.nodeLabel.rect = NodeLabel;\n\nimport edge from './webgl/edge/render'\nimport curve from './webgl/edge/curve/curve'\nWebGLRender.edge.default = edge;\nWebGLRender.edge.curve = curve;\n\n\nimport EdgeLabel from './webgl/label/EdgeLabel'\nimport curveLabel from './webgl/label/curveLabel/curveLabel'\nWebGLRender.edgeLabel.default = EdgeLabel;\nWebGLRender.edgeLabel.curve = curveLabel;\n\n\n\nexport {\n    WebGLRender\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","/**\n *from d3-timer\n */\n\n'use strict';\n\n\nvar frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : function (f) {\n            // setTimeout(f, 17);\n            setTimeout(f, 30);\n        };//\n\nexport function now() {\n    return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n    clockNow = 0;\n}\n\nexport function Timer() {\n    this._call = this._time = this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n    constructor: Timer,\n    restart: function (callback, delay, time) {\n        if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n        time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n        if (!this._next && taskTail !== this) {\n            if (taskTail) taskTail._next = this;\n            else taskHead = this;\n            taskTail = this;\n        }\n        this._call = callback;\n        this._time = time;\n        sleep();\n    },\n    stop: function () {\n        if (this._call) {\n            this._call = null;\n            this._time = Infinity;\n            sleep();\n        }\n    }\n};\n\nexport default  function timer(callback, delay, time) {\n    var t = new Timer;\n    t.restart(callback, delay, time);\n    return t;\n}\n\nexport function timerFlush() {\n    now(); // Get the current time, if not already set.\n    ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n    var t = taskHead, e;\n    while (t) {\n        if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n        t = t._next;\n    }\n    --frame;\n}\n\nfunction wake() {\n    clockNow = (clockLast = clock.now()) + clockSkew;\n    frame = timeout = 0;\n    try {\n        timerFlush();\n    } finally {\n        frame = 0;\n        nap();\n        clockNow = 0;\n    }\n}\n\nfunction poke() {\n    var now = clock.now(), delay = now - clockLast;\n    if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n    var t0, t1 = taskHead, t2, time = Infinity;\n    while (t1) {\n        if (t1._call) {\n            if (time > t1._time) time = t1._time;\n            t0 = t1, t1 = t1._next;\n        } else {\n            t2 = t1._next, t1._next = null;\n            t1 = t0 ? t0._next = t2 : taskHead = t2;\n        }\n    }\n    taskTail = t0;\n    sleep(time);\n}\n\nfunction sleep(time) {\n    if (frame) return; // Soonest alarm already set, or will be.\n    if (timeout) timeout = clearTimeout(timeout);\n    var delay = time - clockNow;\n    if (delay > 24) {\n        if (time < Infinity) timeout = setTimeout(wake, delay);\n        if (interval) interval = clearInterval(interval);\n    } else {\n        if (!interval) interval = setInterval(poke, pokeDelay);\n        frame = 1, setFrame(wake);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/timer.js","/**\n * Created by chengang on 17-3-29.\n */\n\n'use strict';\n\nimport util from '../util'\n\nexport default function initEvent() {\n\n    function handlerWrap(handle) {\n        return function (e) {\n            var pos = _this.toCameraPos({x: e.offsetX, y: e.offsetY});\n            e.cameraX = pos.x;\n            e.cameraY = pos.y;\n            handle(e);\n        }\n    }\n\n\n    var _this = this;\n    var mouseDown= false,mouseMove = false;\n\n    var events = {\n        // click:handlerWrap(_clickHandler),\n        mousemove:handlerWrap(_moveHandler),\n        mousedown:handlerWrap(_downHandler),\n        mouseup:handlerWrap(_upHandler),\n        mousewheel:handlerWrap(_wheelHandler),\n    };\n\n\n    for(var e in events)    this.container.addEventListener(e, events[e], false);\n\n    events.click = handlerWrap(_clickHandler);\n\n    //some little situation maybe need the trigger function.\n    this.trigger = function (type,event) {\n        if(events[type]) events[type](event);\n    };\n\n\n    function checkInNode(posx,posy,node) {\n        var isFind = false;\n        var dis,sizeX,sizeY;\n        if(node.type == 'rect'){\n            sizeX = util.getNodeSizeX(node);\n            sizeY = util.getNodeSizeY(node);\n            isFind = util.inRect(posx,posy,node.x-sizeX,node.y-sizeY,sizeX*2,sizeY*2);\n        }else {\n            dis = util.getDistance(posx, posy, node.x, node.y);\n            isFind = dis <= node.size\n        }\n        return isFind;\n    }\n\n    function getNode(pos) {\n        // var nodes = _this.graph.quad.point(pos.x, pos.y);\n        var nodes = _this.graph.nodes;\n\n        var node, dis;\n        var findNode = null;\n        if (nodes.length > 0) {\n            for (var i = nodes.length - 1; i >= 0; i--) {\n                node = nodes[i];\n                // node = _this.graph.nodesIndex[node.id];\n                if (checkInNode(pos.x,pos.y,node)) {\n                    findNode = node;\n                    break;\n                }\n            }\n        }\n        return findNode;\n    }\n\n\n\n    function _clickHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n        if(node) _this.emit('nodeclick',[node,e]);\n        else _this.emit('stageclick',[e]);\n    }\n\n    function _moveHandler(e) {\n        if(mouseDown)   mouseMove = true;\n        // var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        // var node = getNode(graphPos);\n    }\n\n\n    function _downHandler(e) {\n\n        mouseDown = true;\n\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n         handleDrag(!node);\n        _this.forceRender();\n\n        function handleDrag(isCamera) {\n            var isDown = true;\n            var startx = graphPos.x,starty = graphPos.y;\n\n            var onmousemove =handlerWrap(function(e) {\n                if(!isDown) return;\n                // console.time('move')\n\n                _this.forceRender();\n\n                var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                var offsetx = graphPos.x - startx;\n                var offsety = graphPos.y - starty;\n\n                if(isCamera){\n                    _this.camera.positionX -= offsetx;\n                    _this.camera.positionY -= offsety;\n                }else {\n\n                    if(_this.context.selection.isSelected(node)){\n                        _this.context.selection.data.forEach(function (node) {\n                            _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n                        });\n                    }else _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n                    // _this.emit('drag',['node',offsetx,offsety]);\n\n                    // fit(e);\n                }\n\n\n                if(isCamera){\n                    var newgraphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                    startx = newgraphPos.x;\n                    starty = newgraphPos.y;\n                }else {\n                    startx = graphPos.x;\n                    starty = graphPos.y;\n                }\n                // console.timeEnd('move')\n            });\n\n            var onmouseup = handlerWrap(function(e) {\n                e.preventDefault();\n                isDown = false;\n                clear();\n            });\n\n            var onmouseout = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n\n            _this.container.addEventListener('mousemove',onmousemove);\n            _this.container.addEventListener('mouseup',onmouseup);\n            _this.container.addEventListener('mouseout',onmouseout);\n\n\n            function clear() {\n                onmousemove&&_this.container.removeEventListener('mousemove',onmousemove);\n                onmouseup&&_this.container.removeEventListener('mouseup',onmouseup);\n                onmouseout&&_this.container.removeEventListener('mouseout',onmouseout);\n                onmousemove = onmouseup = onmouseout= null;\n            }\n\n\n        }\n\n    }\n\n    function _upHandler(e) {\n\n        if(mouseDown && !mouseMove){\n            _clickHandler(e);\n        }\n        mouseDown = false;\n        mouseMove = false;\n\n        if ((e.which && e.which == 3) || (e.button && e.button == 2)){\n            var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n            var node = getNode(graphPos);\n            if(node){\n                _this.emit('rightclick',['node',node,e]);\n            }else {\n                _this.emit('rightclick',['stage',null,e]);\n            }\n        }\n\n\n\n    }\n\n    function _wheelHandler(e) {\n        _this.forceRender();\n        var ratio = _this.config.zoomRatio;\n        if(e.wheelDelta > 0){\n            _this.zoomTo(1/ratio,e.cameraX,e.cameraY);\n            _this.emit('zoom',[1/ratio])\n        }else {\n            _this.zoomTo(ratio,e.cameraX,e.cameraY);\n            _this.emit('zoom',[ratio])\n        }\n    }\n\n    //drag\n\n\n    function fit(e) {\n        var x = e.offsetX,y = e.offsetY;\n\n        var camearaX = _this.camera.positionX;\n        var camearaY = _this.camera.positionY;\n        var scale = _this.camera.scale;\n\n        var offset = 20/scale;\n        var update = false;\n\n        if(x < 100 ){\n            update = true;\n            camearaX -= offset;\n        }\n        if(x > _this.container.clientWidth - 100){\n            update = true;\n            camearaX += offset;\n        }\n\n        if(y < 100){\n            update = true;\n            camearaY += offset;\n        }\n\n        if(y > _this.container.clientHeight - 100){\n            update = true;\n            camearaY -= offset;\n        }\n\n        // if(update) _this.zoomToAnimation({\n        //     positionX:camearaX,\n        //     positionY:camearaY,\n        //     scale:scale\n        // });\n\n        if(update) _this.zoomTo(1.01,e.cameraX,e.cameraY,true);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Event.js","\n'use strict';\n\n\nimport  utils  from '../util.js'\n// import  Quad from '../base/Quad'\nimport EventEmitter from '../base/EventEmitter'\n\nclass Graph extends EventEmitter{\n\n    constructor(options) {\n\n        super();\n\n        options = options || {};\n\n        // this.quad = new Quad();\n\n        if (options.nodes || options.edges) this.read(options);\n\n    }\n\n    clear(){\n        /**\n         * node edge data\n         */\n        this.nodes = [];\n        this.edges = [];\n\n        /**\n         * node edge index\n         */\n        this.nodesIndex = {};\n        this.edgesIndex = {};\n\n        /**\n         *nodes degrees info\n         */\n        this.inEdgesIndex = {};\n        this.outEdgesIndex = {};\n    }\n\n    /**\n     * 读取 node ,edge 信息\n     * @param options\n     */\n    read(options) {\n\n        this.clear();\n\n        (options.nodes || []).forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            e.id += '';\n            this.nodesIndex[e.id] = e;\n            this.nodes.push(e);\n        }.bind(this));\n\n        (options.edges || []).forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n\n            if (!e.source || !this.nodesIndex[e.source + ''])\n            {\n                console.log(e);\n                console.error('some edge has not source id or not a node of the id') ;\n                return\n            }\n            if (!e.target || !this.nodesIndex[e.target + '']){\n                console.log(e);\n                console.error('some edge has not target id or not a node of the id');\n                return\n            }\n\n            this.edgesIndex['' + e.id] = e;\n\n            e.source += '';\n            e.target += '';\n\n            this.inEdgesIndex[e.target] = this.inEdgesIndex[e.target] || [];\n            this.inEdgesIndex[e.target].push(e.id);\n\n            this.outEdgesIndex[e.source] = this.outEdgesIndex[e.source] || [];\n            this.outEdgesIndex[e.source].push(e.id);\n\n            this.edges.push(e);\n\n        }.bind(this));\n\n        this.updateEdgeCount();\n\n        this.emit('reset');\n\n        // this.quad.index(this.nodes);\n\n    }\n\n    updateEdgeCount(){\n        var source,target,attr,map = {};\n        this.edges.forEach(function (edge) {\n            source = this.nodesIndex[edge.source];\n            target = this.nodesIndex[edge.target];\n            attr = edge.source+edge.target;\n            if(!map[attr]) map[attr] = map[edge.target+edge.source] = {counter:0,source:edge.source};\n\n            edge.curveCount = map[attr].counter;\n            map[attr].counter++;\n            edge.curveOrder = edge.source == map[attr].source;\n        }.bind(this));\n    }\n\n    /**\n     * add nodes\n     * @param nodes\n     */\n    addNode(nodes) {\n        nodes = nodes || [];\n\n        if(nodes.length == 0) return;\n\n        if (!utils.isArray(nodes)) nodes = [nodes];\n\n        var node;\n        for (var i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            if (!node.id) node.id = utils.uuid();\n            if (this.nodesIndex[node.id]) {\n                throw 'node has existed.'\n            }\n            this.nodes.push(node);\n            this.nodesIndex[node.id] = node;\n        }\n\n        var ids = nodes.map(function (e) {return e.id});\n        this.emit('add',['node',ids]);\n    }\n\n\n    /**\n     * remove node\n     * @param nodeid\n     */\n    removeNode(nodeid) {\n        if (!nodeid || !this.nodesIndex[nodeid]) return;\n\n        var nodes = this.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].id == nodeid) {\n                nodes.splice(i, 1);\n                break\n            }\n        }\n        var edges;\n        edges = this.inEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        edges = this.outEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        this.nodesIndex[nodeid] = null;\n        this.inEdgesIndex[nodeid] = null;\n        this.outEdgesIndex[nodeid] = null;\n\n        this.emit('remove',['node',nodeid]);\n\n    }\n\n\n    /**\n     * add edges ,\n     * @param edges\n     */\n    addEdge(edges) {\n        edges = edges || [];\n\n        if(edges.length  == 0) return;\n\n        if (!utils.isArray(edges)) edges = [edges];\n\n        var edge;\n        for (var i = 0; i < edges.length; i++) {\n            edge = edges[i];\n            if (!edge.id) edge.id = utils.uuid();\n            if (this.edgesIndex[edge.id]){\n                // debugger\n                throw 'edge has existed.';\n            }\n            if (!edge.source || !this.nodesIndex[edge.source + '']){\n                console.log(edge);\n                throw 'some edge has not source id or not a node of the id';\n            }\n            if (!edge.target || !this.nodesIndex[edge.target + '']) {\n                console.log(edge);\n                throw 'some edge has not target id or not a node of the id';\n            }\n\n            this.edges.push(edge);\n            this.edgesIndex[edge.id] = edge;\n\n            edge.source += '';\n            edge.target += '';\n\n            this.inEdgesIndex[edge.target] = this.inEdgesIndex[edge.target] || [];\n            this.inEdgesIndex[edge.target].push(edge.id);\n\n            this.outEdgesIndex[edge.source] = this.outEdgesIndex[edge.source] || [];\n            this.outEdgesIndex[edge.source].push(edge.id);\n        }\n\n        var ids = edges.map(function (e) {return e.id});\n        this.emit('add',['edge',ids]);\n    }\n\n\n    removeEdge(edgeid) {\n        if (!edgeid || !this.edgesIndex[edgeid]) return;\n\n        var edge = this.edgesIndex[edgeid], edges;\n        var outEdgesIndex, inEdgesIndex;\n\n\n        outEdgesIndex = this.outEdgesIndex[edge.source];\n        if (outEdgesIndex.length > 0) {\n            for (var i = 0; i < outEdgesIndex.length; i++) {\n                if (outEdgesIndex[i] == edgeid) {\n                    outEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        inEdgesIndex = this.inEdgesIndex[edge.target];\n        if (inEdgesIndex.length > 0) {\n            for (var i = 0; i < inEdgesIndex.length; i++) {\n                if (inEdgesIndex[i] == edgeid) {\n                    inEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n\n        edges = this.edges;\n        for (var i = 0; i < edges.length; i++) {\n            if (edges[i].id == edgeid) {\n                edges.splice(i, 1);\n                break;\n            }\n        }\n\n        this.edgesIndex[edgeid] = null;\n        this.emit('remove',['edge',edgeid]);\n    }\n\n    getNodes(){\n        return this.nodes;\n    }\n\n    setNodeData(id,obj){\n        var node = this.nodesIndex[id];\n\n        var updatePos = false;\n        if(obj.hasOwnProperty('x') || obj.hasOwnProperty('y')) updatePos = true;\n\n        for(var attr in obj) node[attr] = obj[attr];\n\n        this.emit('change',['node',id]);\n        if(updatePos){\n            this.inEdgesIndex[id] && this.inEdgesIndex[id].length > 0 && this.emit('change',['edge',this.inEdgesIndex[id]]);\n            this.outEdgesIndex[id] && this.outEdgesIndex[id].length > 0 && this.emit('change',['edge',this.outEdgesIndex[id]]);\n        }\n    }\n\n    updateNodeQuad(id,oldpos){\n        var nodes = this.quad.point(oldpos.x,oldpos.y);\n        if(nodes.length > 0){\n            for(var i = 0,len = nodes.length;i<len;i++){\n                if(nodes[i].id == id){\n                    nodes.splice(i,1);\n                    break;\n                }\n            }\n            this.quad.insert(this.nodesIndex[id],this.quad.root);\n        }\n    }\n}\n\nexport default Graph;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Graph.js","/**\n * Created by chengang on 17-4-19.\n */\n\n'use strict';\n\nimport  EventEmitter from '../base/EventEmitter'\nimport  utils from '../util'\n\nexport default class Selection extends EventEmitter{\n    constructor(canvas,context){\n        super();\n\n        this.context = context;\n\n        this.canvas = canvas;\n        this.ctx = this.canvas.getContext('2d');\n\n        this.canvas.addEventListener('mousedown',this.mouseDown.bind(this));\n\n        this.rect = {\n            x:0,\n            y:0,\n            w:0,\n            h:0\n        };\n\n        this.data = [];\n\n        this.initGraphEvent();\n    }\n\n    enable(){\n        this.canvas.style.display = 'block';\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n\n    renderRect(){\n        var rect = this.rect;\n        var ctx = this.ctx;\n        ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n        ctx.fillStyle = 'rgba(58, 75, 89, 0.3)';\n        ctx.strokeStyle=\"#4b7598\";\n        ctx.beginPath();\n        ctx.rect(rect.x,rect.y,rect.w,rect.h);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n    }\n\n    disable(){\n        this.canvas.style.display = 'none';\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n\n    initGraphEvent(){\n        var _this = this;\n        this.context.graph.on('remove',function (type,id) {\n            if(type == 'node'){\n                for(var i = 0;i<_this.data.length;i++){\n                    if(_this.data[i].id == id){\n                        _this.data.splice(i,1);\n                        break;\n                    }\n                }\n            }\n        });\n\n        this.context.graph.on('reset',function () {\n            _this.data = [];\n        })\n    }\n\n    mouseDown(e){\n        var _this = this;\n\n        this.rect.x = e.offsetX;\n        this.rect.y = e.offsetY;\n\n        _this.emit('selectstart');\n\n        document.addEventListener('mousemove',mouseMove);\n        document.addEventListener('mouseup',mouseUp);\n        function mouseMove(e) {\n            _this.rect.w = e.offsetX - _this.rect.x;\n            _this.rect.h = e.offsetY - _this.rect.y;\n\n            _this.renderRect();\n        }\n        function mouseUp(e) {\n            document.removeEventListener('mousemove',mouseMove);\n            document.removeEventListener('mouseup',mouseUp);\n            var data = _this.filter(_this.ctx);\n\n            _this.disable();\n            _this.select(data);\n            _this.emit('selectend',[data]);\n        }\n    }\n\n    select(nodes,isAdd,sendMessage = true){\n        var _this = this;\n\n        if(!utils.isArray(nodes)) nodes = [nodes];\n\n        if(isAdd){\n            nodes.forEach(function (node) {\n                _this.context.graph.setNodeData(node.id,{selected:true});\n                _this.data.push(node);\n            });\n\n        }else {\n\n            _this.data.forEach(function (e) {\n                if(_this.context.graph.nodesIndex[e.id])\n                    _this.context.graph.setNodeData(e.id,{selected:false});\n            });\n\n            nodes.forEach(function (node) {\n                _this.context.graph.setNodeData(node.id,{selected:true});\n            });\n\n            _this.data = nodes;\n\n        }\n\n        sendMessage && _this.emit('select',[_this.getSelection()]);\n    }\n\n    unSelect(nodes){\n\n        if(this.data.length == 0 || !nodes) return;\n\n        var _this = this;\n        if(!utils.isArray(nodes)) nodes = [nodes];\n\n        var map = {};\n\n        nodes.forEach(function (node) {\n            map[node.id] = true;\n        });\n\n        var newSelected = [];\n        this.data.forEach(function (node) {\n            if(map[node.id]) _this.context.graph.setNodeData(node.id,{selected:false});\n            else newSelected.push(node);\n        });\n\n        this.data = newSelected;\n\n        _this.emit('select',[_this.getSelection()]);\n    }\n\n    getSelection(){\n        return this.data.slice();\n    }\n\n\n    isSelected(node){\n        for(var i = 0;i< this.data.length;i++){\n            if(this.data[i].id == node.id){\n                return true\n            }\n        }\n        return false;\n    }\n\n    filter(ctx){\n        var nodes = this.context.graph.nodes;\n        var selects = [];\n        var domPos;\n        nodes.forEach(function (node) {\n            domPos = this.context.render.graphToDomPos({x:node.x,y:node.y});\n            if(ctx.isPointInPath(domPos.x,domPos.y)) selects.push(node);\n        }.bind(this));\n\n        return selects;\n    }\n\n    delete(){\n        var _this = this;\n        var data = this.data;\n        this.data = [];\n        data.forEach(function (node) {\n            _this.context.graph.removeNode(node.id);\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Selection.js","/**\n * Created by chengang on 17-4-12.\n */\n\n'use strict';\n\nexport default {\n    zoomRatio:1.2,\n    zoomMin:0.05,\n    zoomMax:20,\n\n    renderNode:true,\n    renderNodeLabel:false,\n    renderEdge:false,\n    renderEdgeLabel:true,\n\n    textureIconWidth:1024,\n    textureIconHeight:1024,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","/**\n * Created by chengang on 17-2-20.\n */\nfunction CircularLayout() {\n    this.nodes = null;\n    // this.links = null;\n     this.posSet = null;\n     this.depthPosSet = null;\n     this.drawnBiComps =null;\n     this.bc = null;\n     this.nodeHeights = {};\n     this.node2BiComp = {};\n\n     this.width = 60;\n\n}\n\nvar p = CircularLayout.prototype;\n\n//必须有的方法\np.layout = function (nodes,edges) {\n    this.init(nodes,edges);\n\n    this.posSet = new Array(this.nodes.length);\n    this.depthPosSet = new Array(this.nodes.length);\n\n    this.bc = this.createBicconnects();\n    // var test = this.bc.filter(function (e) {\n    //     return e.length > 3;\n    // });\n    this.__layout(this.bc);\n    return this.nodes.map(function (e) {\n        return {x: e.x || 0,y:e.y || 0};\n    })\n};\np.init = function (nodes,edges) {\n    var oldNodes = nodes,oldLinks = edges;\n    var tempNodes = [],map = {},temp;\n    oldNodes.forEach(function (e,i) {\n        temp = {\n            id:e.id,\n            _index:i,\n            links:[]\n        };\n        tempNodes.push(temp);\n        map[temp.id] = temp;\n    })\n\n    var s,t;\n    oldLinks.forEach(function (e,i) {\n        s = map[e.source];\n        t = map[e.target];\n\n        s.links = s.links || [];\n        s.links.push(t._index);\n\n        t.links = t.links || [];\n        t.links.push(s._index);\n    });\n\n    this.nodes = tempNodes;\n};\np.createBicconnects = function() {\n    var nodes = this.nodes;\n    var states = new Array(this.nodes.length),\n        dfsn = new Array(this.nodes.length),\n        low = new Array(this.nodes.length),\n        edgesStack = [],\n        pre = new Array(this.nodes.length);\n\n    var biComponents = [];\n\n    pre[0] = -1;\n    var num = 0;\n    for (var i = 0; i < this.nodes.length; i++) {\n        states[i] = 0;\n    }\n\n    dfs(0);\n    return biComponents;\n\n    function dfs(current) {\n        states[current] = 1;\n        low[current] = dfsn[current] = ++num;\n\n        var neigh;\n        var neighNodes = nodes[current].links;\n\n        for (var i = 0; i < neighNodes.length; i++) {\n            neigh = neighNodes[i];\n\n            if (states[neigh] == 0) {\n                pre[neigh] = current;\n                edgesStack.push({source: current, target: neigh});\n                dfs(neigh);\n                low[current] = Math.min(low[current], low[neigh]);\n\n                if ((pre[current] == -1 && nodes[current].links.length >= 2) || low[neigh] >= dfsn[current]) {\n//                        var children = nodes[current].links;\n//                        if(children.length >=2){\n                    var singleComponent = [];\n                    var map = {};\n                    singleComponent.push(edgesStack[edgesStack.length - 1].target);\n                    map[edgesStack[edgesStack.length - 1].target] = true;\n                    while (edgesStack[edgesStack.length - 1].source != current) {\n                        var edge = edgesStack.pop();\n                        if (!map[edge.source]) {\n                            singleComponent.push(edge.source);\n                            map[edge.source] = true;\n                        }\n                        if (!map[edge.target]) {\n                            singleComponent.push(edge.target);\n                            map[edge.target] = true;\n                        }\n                    }\n                    edgesStack.pop();\n                    if (!map[current]) {\n                        singleComponent.push(current);\n                        map[current] = true;\n                    }\n                    /*singleComponent.length > 2 && */biComponents.push(singleComponent);\n//                        }\n                }\n//                    states[neigh]\n            } else if (neigh != pre[current]) {\n                low[current] = Math.min(low[current], low[neigh]);\n            }\n        }\n\n\n    }\n};\np.__layout = function(biconncts) {\n\n\n    var max = -1;\n    var maxIndex = null;\n    var nodes = this.nodes;\n\n    biconncts.forEach(function (e, i) {\n        if (e.length > max) {\n            max = e.length;\n            maxIndex = i;\n        }\n    });\n\n    biconncts[maxIndex].forEach(function (e) {\n        nodes[e].delete = true;\n    });\n\n    for (var i = 0; i < biconncts.length; i++)\n        if (biconncts[i].length > 3) {\n            for (var j = 0; j < biconncts[i].length; j++) {\n                this.node2BiComp[biconncts[i][j]] = i;\n            }\n        }\n\n    var bc = biconncts[maxIndex];\n\n    this.drawnBiComps = new Array(bc.length);\n    this.drawnBiComps[maxIndex] = true;\n\n\n\n    var maxSize = bc.length;\n    var radius = (this.width * maxSize) / (Math.PI * 2);\n    var deltaAngle = (2 * Math.PI) / maxSize;\n    var angle = 0;\n\n    var startX = radius | 0;\n    var startY = radius | 0;\n\n\n    bc = this.sortInnerCircle(bc);\n\n    for (var i = 0; i < bc.length; i++) {\n        nodes[bc[i]].test = i;\n        nodes[bc[i]].x = startX + Math.cos(angle) * radius;\n        nodes[bc[i]].y = startY - Math.sin(angle) * radius;\n        this.posSet[bc[i]] = true;\n        angle += deltaAngle;\n    }\n\n    this.SetOuterCircle(maxIndex, radius, startX, startY, -1);\n};\np.sortInnerCircle = function(icNodes) {\n    var greedyNodes = [];\n    var modestNodes = [];\n\n    var forFunct = {};\n\n    for (var i = 0; i < icNodes.length; i++)\n        forFunct[icNodes[i]] = true;\n\n    for (var i = 0; i < icNodes.length; i++) {\n        var tmp = this.NoOfChildren(icNodes[i], forFunct);\n\n        if (tmp > 4)\n            greedyNodes.push(icNodes[i]);\n        else\n            modestNodes.push(icNodes[i]);\n    }\n\n    var toReturn = new Array(icNodes.length);\n    var gNo = greedyNodes.length;\n    var mNo = modestNodes.length;\n    var deltaM;\n    var deltaG;\n\n    if (gNo == 0) {\n        deltaM = mNo;\n        deltaG = 0;\n    } else if (mNo == 0) {\n        deltaG = gNo;\n        deltaM = 0;\n    } else if (gNo > mNo) {\n        deltaM = 1;\n        deltaG = (gNo / mNo) | 0 ;\n    } else {\n        deltaG = 1;\n        deltaM = (mNo / gNo ) | 0;\n    }\n\n    var x = 0;\n    var i, g, m;\n    for (g = 0, m = 0; g < greedyNodes.length && m < modestNodes.length;) {\n        for (i = 0; i < deltaG && g < greedyNodes.length; i++)\n            toReturn[x++] = greedyNodes[g++];\n\n        for (i = 0; i < deltaM && m < modestNodes.length; i++)\n            toReturn[x++] = modestNodes[m++];\n    }\n\n    while (g < greedyNodes.length)\n        toReturn[x++] = greedyNodes[g++];\n\n    while (m < modestNodes.length)\n        toReturn[x++] = modestNodes[m++];\n    return toReturn;\n\n};\np.NoOfChildren = function(nodeId, outerCircle) {\n    var toReturn = 0;\n    var nodes = this.nodes;\n    var links = nodes[nodeId].links;\n\n    for (var i = 0; i < links.length; i++) {\n        var currNeigh = links[i];\n\n        if (!this.posSet[currNeigh] && !outerCircle[currNeigh])\n            toReturn++;\n    }\n\n    if (toReturn > 7)\n        toReturn = 7;\n\n    return toReturn;\n};\np.SetOuterCircle = function(compIndex, innerCircleRadius, startX, startY, firstTouched) {\n    var nodes = this.nodes;\n    var outerNodesCount = 0;\n    var rnc = 0;\n    var iter;\n    var outerCircle = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        for (var j = 0 ;j< iter.length;j++) {\n            var currNeighbour = iter[j];\n\n            if (!this.posSet[currNeighbour]) {\n                outerNodesCount += (this.NoOfChildren(currNeighbour, outerCircle) + 1);\n                outerCircle[currNeighbour] = true;\n                rnc++;\n            }\n        }\n    }\n\n    var outerRadius = 1.5 * innerCircleRadius;\n\n    // + 5 * nodeHorizontalSpacing;\n    var tryCount = ((2 * Math.PI * outerRadius) / 32) | 0;\n    var outerDeltaAngle = (2 * Math.PI) / tryCount;\n\n    if (tryCount < (1.2 * outerNodesCount)) {\n        outerRadius = (1.2 * 32 * outerNodesCount) / (2 * Math.PI);\n        outerDeltaAngle = (2 * Math.PI) / (1.2 * outerNodesCount);\n        outerNodesCount *= 1.2;\n    } else\n        outerNodesCount = tryCount;\n\n    if ((outerNodesCount > 10) && (firstTouched != -1))\n        outerNodesCount += 5;\n\n    // 5 places on outer circle for connection with other biconn. comp.\n    //System.out.println(\"tryCount = \" + tryCount);\n\n    // setting nodes on outer circle\n    outerNodesCount = outerNodesCount | 0;\n    var outerPositionsTaken = new Array(outerNodesCount);\n    var outerPositionsOwners = new Array(outerNodesCount);\n\n    for (var i = 0; i < outerPositionsTaken.length; i++) {\n        outerPositionsTaken[i] = -1;\n        outerPositionsOwners[i] = -1;\n    }\n\n    var pointX;\n    var pointY;\n    var theAngle;\n    var theAngleHlp;\n    var innerDeltaAngle;\n    innerDeltaAngle = (2 * Math.PI) / this.bc[compIndex].length;\n\n    if (firstTouched != -1) {\n        pointX = nodes[firstTouched].x;\n        pointY = nodes[firstTouched].y;\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n        var idPos = ((theAngle / outerDeltaAngle) | 0) % outerPositionsTaken.length;\n        outerPositionsTaken[idPos] = (theAngle / innerDeltaAngle) | 0;\n        outerPositionsOwners[idPos] = -2; // must not be even moved because that node is coming from another bicomp.\n\n        if (outerPositionsTaken.length > 10) {\n            outerPositionsTaken[(idPos + 1) % outerPositionsTaken.length] = (theAngle / innerDeltaAngle) | 0;\n            outerPositionsTaken[(idPos + 2) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 1 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 2 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n\n            outerPositionsOwners[(idPos + 1) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos + 2) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 1 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 2 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n        }\n    }\n\n    var addedNeighbours = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n        var noOfNeighbours = 0;\n\n        for (var j = 0; j < iter.length;j++) {\n            currentNeighbour = iter[j];\n\n            if (!this.posSet[currentNeighbour]) {\n                noOfNeighbours += (this.NoOfChildren(currentNeighbour, addedNeighbours) + 1);\n                addedNeighbours[currentNeighbour]= true;\n            }\n        }\n\n        if (noOfNeighbours == 0)\n            continue;\n\n        pointX = nodes[this.bc[compIndex][i]].x;\n        pointY = nodes[this.bc[compIndex][i]].y;\n\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n//\t\t\titer = edgesFrom[this.bc[compIndex][i]].iterator();\n\n        var startPos = this.BestFreePositionsForAll(0| ((theAngle / outerDeltaAngle)\n            - (noOfNeighbours / 2.0)), outerPositionsTaken,\n            outerPositionsOwners, noOfNeighbours,\n            0| (theAngle / innerDeltaAngle), startX,\n            startY, outerDeltaAngle, outerRadius,\n            this.bc[compIndex].length);\n        var startAngle = startPos * outerDeltaAngle;\n\n        if (startAngle < 0)\n            continue;\n\n//\t\t\titer = nodes[this.bc[compIndex][i]].iterator();\n\n        for (var m = 0;m< iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour]) {\n                this.posSet[currentNeighbour] = true;\n\n                var holeDepth = this.NoOfChildren(currentNeighbour, addedNeighbours);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    // free but it must not be used (add. space for tree-like struct.)\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n\n\n                nodes[currentNeighbour].x = startX + (Math.cos(startAngle) * outerRadius);\n                nodes[currentNeighbour].y = startY - (Math.sin(startAngle) * outerRadius);\n\n                outerPositionsOwners[(startPos) % outerPositionsOwners.length] = currentNeighbour;\n                outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                startPos++;\n                startAngle += outerDeltaAngle;\n\n                if (startAngle > (2 * Math.PI))\n                    startAngle -= (2 * Math.PI);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n            }\n        }\n    }\n\n    // laying out the rest of nodes\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!addedNeighbours[currentNeighbour]) {\n                continue;\n            }\n\n            pointX = nodes[currentNeighbour].x;\n            pointY = nodes[currentNeighbour].y;\n\n            theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n            theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n\n            if (theAngleHlp > (Math.PI / 2))\n                theAngle = Math.PI - theAngle;\n\n            if (theAngle < 0)\n                theAngle += (2 * Math.PI);\n\n            for (var j = 0; j < this.posSet.length; j++)\n                this.depthPosSet[j] = this.posSet[j];\n\n            this.EachNodeHeight(currentNeighbour);\n\n            this.DFSSetPos(currentNeighbour, theAngle, outerRadius - innerCircleRadius);\n        }\n    }\n};\np.BestFreePositionsForAll = function(idealPosition, outerPositionsTaken, outerPositionsOwners, noOfPos,\n                                 innerCirclePos, startX, startY,\n                                 outerDeltaAngle, outerRadius, innerCSize) {\n    var startPos = idealPosition;\n    var nodes = this.nodes;\n\n    if (idealPosition < 0)\n        startPos += outerPositionsTaken.length;\n\n    var i = 0;\n    var alreadyFound = 0;\n    var startOfAlFound = -1;\n    var found = false;\n    var goDown = false;\n    var goUp = false;\n\n    //An infinite loop occurs when there is no place in the outerPositionsTaken array where all the number\n    //of positions that we need (noOfPos) can fit contiguously. In such a case, an infinite loop occurs.\n    //Experiment: Create a count. If the count exceeds outPositionsTaken.length, then we have looked at every\n    //possible startPos. Set startPos to the best startPos (meaning, the most contingious spaces) and set found\n    //to true.\n\n    //Experiment: int goUpCount = 0;\n    var goUpCount = 0;\n    //Experiment: int biggestGap = 0;\n    var biggestGap = 0;\n    //Experiment: int bestStartPos;\n    var bestStartPos = 0;\n\n    while (!found && !(goUp && goDown)) {\n        //System.out.print(startPos + \" \");\n        for (i = startPos;\n             (i < (startPos + noOfPos))\n             && (outerPositionsTaken[i % outerPositionsTaken.length] == -1); i++) {\n        }\n\n        if (i < (startPos + noOfPos)) {\n            if (((outerPositionsTaken[i % outerPositionsTaken.length] > innerCirclePos)\n                && ((outerPositionsTaken[i % outerPositionsTaken.length] - innerCirclePos) < (0.7 * innerCSize)))\n                || ((innerCirclePos - outerPositionsTaken[i % outerPositionsTaken.length]) > (0.7 * innerCSize))) {\n                alreadyFound = (i - startPos + outerPositionsTaken.length) % outerPositionsTaken.length;\n                startOfAlFound = startPos;\n                startPos -= (noOfPos - alreadyFound);\n\n                if (startPos < 0)\n                    startPos += outerPositionsTaken.length;\n\n                goDown = true;\n            } else {\n                //Experiment: goUpCount++;\n                goUpCount++;\n                //Experiment: int thisGap = i - startPos;\n                var thisGap = i - startPos;\n                //Experiment: if( thisGap > biggestGap )\n                if (thisGap > biggestGap) {\n                    biggestGap = thisGap;\n                    bestStartPos = startPos;\n                }\n                //Experiment: if( count > outerPositionsTaken.length )\n                if (goUpCount > outerPositionsTaken.length * 3) {\n                    startPos = bestStartPos;\n                    found = true;\n                }\n                //Experiment: else\n                else {\n                    startPos = (i + 1) % outerPositionsTaken.length;\n                    goUp = true;\n                }\n            }\n        } else\n            found = true;\n    }\n\n    if (goUp && goDown) {\n        i = startOfAlFound - 1;\n\n        var j = i - 1;\n        var count = 0;\n        //System.out.print(j + \" \");\n\n        var index = (i % outerPositionsTaken.length + outerPositionsTaken.length) % outerPositionsTaken.length;\n        if (((outerPositionsTaken[index] > innerCirclePos)\n            && ((outerPositionsTaken[index] - innerCirclePos) < (0.7 * innerCSize)))\n            || ((innerCirclePos - outerPositionsTaken[index]) > (0.7 * innerCSize))) {\n            j--;\n            i--;\n        }\n\n        while (count < (noOfPos - alreadyFound)) {\n            //System.out.print(j + \" \");\n\n            if (outerPositionsTaken[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -1) {\n                // move all for one place left\n                //\tSystem.out.print(\" moving \");\n                if (outerPositionsOwners[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -2) {\n                    //System.out.println(\"BUUUUUUUUUUUUUUUUUUU\");\n\n                    return -1;\n                }\n\n                for (var k = j; k < (i - count); k++) {\n                    if (outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length] > 0)\n                    {\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].x = startX + (Math.cos(outerDeltaAngle * k) * outerRadius);\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].y = startY - (Math.sin(outerDeltaAngle * k) * outerRadius);\n                    }\n\n\n                    outerPositionsOwners[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                    outerPositionsTaken[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsTaken[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                }\n\n                count++;\n            }\n\n            j--;\n        }\n\n        startPos = (i - count + 1 + outerPositionsOwners.length) % outerPositionsOwners.length;\n    }\n\n    /*    for (i = startPos; i < startPos + noOfPos; i++)\n     {\n     outerPositionsTaken[i % outerPositionsTaken.length] = innerCirclePos;\n     }*/\n    return startPos;\n\n};\np.EachNodeHeight = function(nodeID) {\n    var nodes = this.nodes;\n    var links = nodes[nodeID].links;\n    var currentNeighbour;\n    var noOfChildren = 0;\n    var tmp = {};\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (!this.depthPosSet[currentNeighbour] && !tmp[currentNeighbour]) {\n            this.depthPosSet[currentNeighbour] = true;\n            tmp[currentNeighbour] = true;\n        }\n    }\n\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (tmp[currentNeighbour]) {\n            noOfChildren += this.EachNodeHeight(currentNeighbour);\n        }\n    }\n\n//\t\tif (this.nodeHeights[nodeID])\n//\t\t\tthis.nodeHeights.remove(Integer.valueOf(nodeID));\n\n    this.nodeHeights[nodeID] = noOfChildren;\n\n    return (noOfChildren + 1);\n};\np.DFSSetPos = function( nodeID, theAngle,  theRadius) {\n    var component = this.node2BiComp[nodeID];\n    var nodes = this.nodes;\n    if (component != undefined && !this.drawnBiComps[component]) {\n        var comp = component;\n        var centerX =nodes[nodeID].x;\n        var centerY = nodes[nodeID].y;\n        var radius = (this.width * this.bc[comp].length) / (2 * Math.PI);\n        var deltaAngle = (2 * Math.PI) / this.bc[comp].length;\n        var currAngle = theAngle - Math.PI - deltaAngle;\n\n        if (currAngle < 0)\n            currAngle += (2 * Math.PI);\n\n        centerX += (Math.cos(theAngle) * radius * 4.0);\n        centerY -= (Math.sin(theAngle) * radius * 4.0);\n\n        this.drawnBiComps[comp] = true;\n\n        // sorting nodes on inner circle\n        this.bc[comp] = this.sortInnerCircle(this.bc[comp]);\n\n        /*if (this.bc[comp].length > 20)\n         this.bc[comp] = ReduceInnerCircleCrossings(this.bc[comp]);*/\n        var oneAtLeast = false;\n\n        for (var i = 0; i < this.bc[comp].length; i++) {\n            if (this.posSet[this.bc[comp][i]])\n                continue;\n\n\n            nodes[this.bc[comp][i]].x = centerX + (Math.cos(currAngle) * radius);\n            nodes[this.bc[comp][i]].y = centerY - (Math.sin(currAngle) * radius);\n\n            this.posSet[this.bc[comp][i]] = true;\n\n            oneAtLeast = true;\n            currAngle -= deltaAngle;\n\n            if (currAngle < 0)\n                currAngle += (2 * Math.PI);\n        }\n\n        if (oneAtLeast) {\n\n            nodes[nodeID].x += Math.cos(theAngle) * 3 * radius;\n            nodes[nodeID].y -= Math.sin(theAngle) * 3 * radius;\n\n\n            this.SetOuterCircle(comp, radius, centerX, centerY, nodeID);\n        }\n    } else {\n        var iter = nodes[nodeID].links;\n        var currentNeighbour;\n        var startAngle = theAngle + (Math.PI / 2);\n\n        if (startAngle > (2 * Math.PI))\n            startAngle -= (2 * Math.PI);\n\n        var neighboursCount = 0;\n        var min1 = 1000;\n        var min2 = 1000;\n        var max = -1;\n        var min1Id = -1;\n        var min2Id = -2;\n        var maxId = -3;\n        var tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                neighboursCount++;\n                tmp[currentNeighbour]=true;\n\n                if (this.nodeHeights[currentNeighbour] < min1) {\n                    min2 = min1;\n                    min2Id = min1Id;\n                    min1 = this.nodeHeights[currentNeighbour];\n                    min1Id = currentNeighbour;\n                } else if (this.nodeHeights[currentNeighbour] < min2) {\n                    min2 = this.nodeHeights[currentNeighbour];\n                    min2Id = currentNeighbour;\n                }\n\n                if (this.nodeHeights[currentNeighbour] >= max)//&& currentNeighbour != min2Id && currentNeighbour != min1Id)\n                {\n                    max = this.nodeHeights[currentNeighbour];\n                    maxId = currentNeighbour;\n                }\n            }\n        }\n\n        if (neighboursCount == 0)\n            return;\n\n        var deltaAngle = Math.PI / (neighboursCount + 1);\n\n        startAngle -= deltaAngle;\n\n        if (startAngle < 0)\n            startAngle += (2 * Math.PI);\n\n        var remStartAngle = startAngle;\n\n        if (neighboursCount > 2) {\n            deltaAngle = (2 * Math.PI) / neighboursCount;\n            startAngle = (theAngle + Math.PI) - ((3 * deltaAngle) / 2);\n\n            if (startAngle > (2 * Math.PI))\n                startAngle -= (2 * Math.PI);\n\n            remStartAngle = (theAngle + Math.PI) - (deltaAngle / 2);\n\n            if (remStartAngle > (2 * Math.PI))\n                remStartAngle -= (2 * Math.PI);\n        }\n\n        iter = nodes[nodeID].links;\n\n        var r = 72;\n        var rTry;\n\n        if (((this.width * neighboursCount) / (2 * Math.PI)) > r)\n            r = (this.width * neighboursCount) / (2 * Math.PI);\n\n        rTry = r;\n\n        var hlp = 100.0;\n        var startX = nodes[nodeID].x;\n        var startY = nodes[nodeID].y;\n\n        if (neighboursCount > 2) {\n            nodes[nodeID].x = startX + (Math.cos(theAngle) * r * ((min2 + 1) % 100));\n            nodes[nodeID].y = startY - (Math.sin(theAngle) * r * ((min2 + 1) % 100));\n\n            startX = nodes[nodeID].x;\n            startY = nodes[nodeID].y;\n\n            //System.out.println(\"theAngle = \" + theAngle + \", startAngle = \" + startAngle + \", remStartAngle = \" + remStartAngle + \", deltaAngle = \" + deltaAngle);\n            //System.out.println(\"min1Id = \" + min1Id + \", min2Id\" + min2Id + \", maxId\" + maxId);\n            setOffset(nodes[min1Id], startX + (Math.cos(remStartAngle) * r),\n                startY - (Math.sin(remStartAngle) * r));\n            nodes[min1Id].test = 'min1'\n            setOffset(nodes[min2Id], startX + (Math.cos(remStartAngle + deltaAngle) * r),\n                startY - (Math.sin(remStartAngle + deltaAngle) * r));\n            nodes[min2Id].test = 'min2'\n\n            if (this.nodeHeights[maxId] > 8)\n                r = 256;\n\n            setOffset(nodes[maxId],\n                startX + (Math.cos(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r),\n                startY - (Math.sin(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r));\n            nodes[maxId].test = 'maxId'\n\n            //System.out.println(\"Ugao za maxID \"\n            //                  + (remStartAngle - ((neighboursCount / 2) * deltaAngle)));\n        }\n\n        tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                if (this.nodeHeights[currentNeighbour] > 8)\n                    r = 256;\n                else\n                    r = rTry;\n\n                this.posSet[currentNeighbour] = true;\n                tmp[currentNeighbour] = true;\n\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    setOffset(nodes[currentNeighbour], startX + (Math.cos(startAngle) * r),\n                        startY - (Math.sin(startAngle) * r));\n\n                    startAngle -= deltaAngle;\n\n                    if (startAngle < 0)\n                        startAngle += (2 * Math.PI);\n\n                    if (((Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle))) < 0.0001)\n                        || (Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle)\n                            + (2 * Math.PI))) < 0.0001)) && (neighboursCount > 2)) {\n                        startAngle -= deltaAngle;\n\n                        if (startAngle < 0)\n                            startAngle += (2 * Math.PI);\n                    }\n                }\n            }\n        }\n\n        iter = nodes[nodeID].links;\n\n        if (neighboursCount > 2) {\n            this.DFSSetPos(min1Id, remStartAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(min2Id, remStartAngle + deltaAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(maxId, remStartAngle - ((neighboursCount / 2) * deltaAngle),\n                theRadius * Math.sin(deltaAngle / 2));\n            hlp = remStartAngle;\n            remStartAngle -= deltaAngle;\n        }\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (tmp[currentNeighbour]) {\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    this.DFSSetPos(currentNeighbour, remStartAngle,\n                        theRadius * Math.sin(deltaAngle / 2));\n\n                    remStartAngle -= deltaAngle;\n\n                    if (((remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)))\n                        || (remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)\n                        + (2 * Math.PI)))) && (neighboursCount > 2))\n                        startAngle -= deltaAngle;\n\n                    if (remStartAngle < 0)\n                        remStartAngle += (2 * Math.PI);\n                }\n            }\n        }\n    }\n};\n\nfunction setOffset(node,x,y) {\n    node.x = x;\n    node.y = y;\n}\n\nexport default CircularLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/CircularLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class ColaLayout{\n    layout(nodes,edges){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 1000]);\n\n        var data = this._init(nodes,edges);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .symmetricDiffLinkLengths(30)\n            .start(60,0,0,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:e.y};\n        })\n    }\n\n    _init(_nodes,_edges){\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        _nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        _edges.forEach(function (e, i) {\n            if (map.hasOwnProperty(e.source) && map.hasOwnProperty(e.target))\n                edges.push({\n                    source: map[e.source],\n                    target: map[e.target],\n                });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/ColaLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class DargeLayout{\n    layout(nodes,edges){\n        // debugger\n        if(!dagre || !dagre.graphlib) throw 'please add dagre lib first';\n        var g = new dagre.graphlib.Graph();\n\n        g.setGraph({\n            rankdir:'TB',\n            nodesep:15,\n            ranksep:40,\n            ranker:'longest-path'//network-simplex  longest-path tight-tree\n        });\n\n        g.setDefaultEdgeLabel(function() { return {}; });\n\n        nodes.forEach(function (e) {\n            g.setNode(e.id,{width:20,height:20});\n        });\n\n        edges.forEach(function (e) {\n            g.setEdge(e.source,e.target);\n        });\n\n        dagre.layout(g);\n\n        var data = g.nodes().map(function (e) {\n            var d = g.node(e);\n            return {x:d.x,y:-1*d.y};\n        });\n\n        return data;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/DargeLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class FlowLayout{\n    layout(nodes,edges){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(nodes,edges);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .flowLayout(\"y\", 30)\n            .symmetricDiffLinkLengths(30)\n            .start(10,20,20,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:-1*e.y};\n        })\n    }\n\n    _init(_nodes,_edges){\n\n        // var filterEdge = this._filterEdge(nodes,edges);\n\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        _nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        _edges.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n\n    _filterEdge(nodes,edges){\n        var filterEdges = [];\n\n        var flag = {};\n        var first = nodes[0];\n\n        breadFirst(first);\n\n        return filterEdges;\n\n        function breadFirst(node) {\n            // debugger\n            flag[node.id] = true;\n\n            var nodes = [];\n\n            var edges = graph.inEdgesIndex[node.id],edge;\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.source]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.source]);\n                    }\n                });\n            }\n\n            edges = graph.outEdgesIndex[node.id];\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.target]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.target]);\n                    }\n                });\n            }\n\n            nodes.forEach(function (e) {\n                breadFirst(e);\n            })\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/FlowLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class Grid{\n    layout(_nodes,_edges){\n\n        var nodes = [];\n\n        var width = 50;\n        var height = 50;\n\n        var num = (Math.sqrt(_nodes.length) | 0) + 1;\n\n        var nx,ny;\n\n        _nodes.forEach(function (e,id) {\n            nx = (id % num) | 0;\n            ny = (id / num) | 0;\n            nodes.push({\n                x:  nx * width,\n                y:  ny * height,\n            });\n        });\n\n        return nodes;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/Grid.js","/**\n * Created by chengang on 17-2-20.\n */\n\nimport CircularLayout from './CircularLayout'\nimport ColaLayout from './ColaLayout'\nimport FlowLayout from './FlowLayout'\nimport DargeLayout from './DargeLayout'\nimport Grid from './Grid'\n\nexport default {\n    circular:CircularLayout,\n    cola:ColaLayout,\n    flow:FlowLayout,\n    darge:DargeLayout,\n    grid:Grid,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layout/index.js","'use strict';\n\nvar INF = 1e20;\n\nexport  default  function TextSdf(fontSize, buffer, radius, cutoff, fontFamily) {\n    this.fontSize = fontSize || 24;\n    this.buffer = buffer === undefined ? 3 : buffer;\n    this.cutoff = cutoff || 0.25;\n    this.fontFamily = fontFamily || 'sans-serif';\n    this.radius = radius || 8;\n    var size = this.size = this.fontSize + this.buffer * 2;\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.canvas.height = size;\n\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.font = fontSize + 'px ' + this.fontFamily;\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillStyle = 'black';\n\n    // temporary arrays for the distance transform\n    this.gridOuter = new Float64Array(size * size);\n    this.gridInner = new Float64Array(size * size);\n    this.f = new Float64Array(size);\n    this.d = new Float64Array(size);\n    this.z = new Float64Array(size + 1);\n    this.v = new Int16Array(size);\n\n    // hack around https://bugzilla.mozilla.org/show_bug.cgi?id=737852\n    this.middle = Math.round((size / 2) * (navigator.userAgent.indexOf('Gecko/') >= 0 ? 1.2 : 1));\n}\n\nTextSdf.prototype.draw = function (char) {\n    this.ctx.clearRect(0, 0, this.size, this.size);\n    this.ctx.fillText(char, this.buffer, this.middle);\n\n    var charSize = (this.ctx.measureText(char).width+1)|0;\n    var imgData = this.ctx.getImageData(0, 0, this.size, this.size);\n    var data = imgData.data;\n\n    for (var i = 0; i < this.size * this.size; i++) {\n        var a = data[i * 4 + 3] / 255; // alpha value\n        this.gridOuter[i] = a === 1 ? 0 : a === 0 ? INF : Math.pow(Math.max(0, 0.5 - a), 2);\n        this.gridInner[i] = a === 1 ? INF : a === 0 ? 0 : Math.pow(Math.max(0, a - 0.5), 2);\n    }\n\n    edt(this.gridOuter, this.size, this.size, this.f, this.d, this.v, this.z);\n    edt(this.gridInner, this.size, this.size, this.f, this.d, this.v, this.z);\n\n    for (i = 0; i < this.size * this.size; i++) {\n        var d = this.gridOuter[i] - this.gridInner[i];\n        var c = Math.max(0, Math.min(255, Math.round(255 - 255 * (d / this.radius + this.cutoff))));\n        data[4 * i + 0] = c;\n        data[4 * i + 1] = c;\n        data[4 * i + 2] = c;\n        data[4 * i + 3] = 255;\n    }\n\n    return {\n        data:imgData,\n        charWidth:charSize+this.buffer*2\n    };\n};\n\n// 2D Euclidean distance transform by Felzenszwalb & Huttenlocher https://cs.brown.edu/~pff/dt/\nfunction edt(data, width, height, f, d, v, z) {\n    for (var x = 0; x < width; x++) {\n        for (var y = 0; y < height; y++) {\n            f[y] = data[y * width + x];\n        }\n        edt1d(f, d, v, z, height);\n        for (y = 0; y < height; y++) {\n            data[y * width + x] = d[y];\n        }\n    }\n    for (y = 0; y < height; y++) {\n        for (x = 0; x < width; x++) {\n            f[x] = data[y * width + x];\n        }\n        edt1d(f, d, v, z, width);\n        for (x = 0; x < width; x++) {\n            data[y * width + x] = Math.sqrt(d[x]);\n        }\n    }\n}\n\n// 1D squared distance transform\nfunction edt1d(f, d, v, z, n) {\n    v[0] = 0;\n    z[0] = -INF;\n    z[1] = +INF;\n\n    for (var q = 1, k = 0; q < n; q++) {\n        var s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k]);\n        while (s <= z[k]) {\n            k--;\n            s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k]);\n        }\n        k++;\n        v[k] = q;\n        z[k] = s;\n        z[k + 1] = +INF;\n    }\n\n    for (q = 0, k = 0; q < n; q++) {\n        while (z[k + 1] < q) k++;\n        d[q] = (q - v[k]) * (q - v[k]) + f[v[k]];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextSdf.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureIcon extends EventEmitter{\n    constructor(gl,option){\n        super();\n\n        this.gl = gl;\n        this.texture = null;\n\n        this.textureIconWidth = option.textureIconWidth;\n        this.textureIconHeight = option.textureIconHeight;\n\n        this.fontSize = 60;\n        this.fontFamily = 'FontAwesome';\n\n        this.border = 2;\n        this.width = 70;//char width\n        this.height = 80;\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n\n        this.canvas = null;\n        this.iconinfo = null;\n        this.icons = [];\n        this.iconsToCreate = [];\n\n        this.fontLoaded = false;\n\n        this._init();\n\n        this.updateGPUTexture(true);\n\n        var _this = this;\n        if (document.fonts) {\n            var fontsReady = document.fonts.ready;\n            if (typeof(fontsReady) == \"function\") {\n                fontsReady = document.fonts.ready();\n            }\n            fontsReady.then(function () {\n                _this.fontLoaded  = true;\n                _this.createIcons();\n                _this.emit('load')\n            });\n        }\n    }\n\n    _init(){\n        this.canvas = document.createElement('canvas');\n\n        this.canvas.width  = this.textureIconWidth;\n        this.canvas.height  = this.textureIconHeight;\n\n        var ctx = this.canvas.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        ctx.font = `${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = \"#ff0000\";\n\n        this.iconinfo =  {\n            fontSize:this.fontSize,\n            img:this.canvas,\n            width:this.width,\n            height:this.height,\n            infos:{}\n        };\n\n        this.ctx = ctx;\n\n    }\n\n    createIcons(icons) {\n\n        icons = icons || this.iconsToCreate;\n\n        if(icons.length == 0) return;\n\n        if(!this.fontLoaded){\n            icons.forEach(function (e) {\n                this.iconsToCreate.push(e);\n            }.bind(this));\n            return;\n        }\n\n        for (var i = 0; i < icons.length; i++) {\n            this.createIcon(icons[i]);\n        }\n        this.computeAlpha();\n\n\n        // document.body.appendChild(this.canvas);\n        this.updateGPUTexture();\n    }\n\n    createIcon(icon){\n\n        var ctx = this.ctx,\n            c = this.canvas;\n\n        if(this.iconinfo && this.iconinfo.infos[icon]) return;\n\n        if(this.startx + this.width + this.border > c.width){\n            this.startx = this.border;\n            this.starty += this.height + this.border;\n\n            if(this.starty + this.height > c.height){\n                console.warn('icon texture no space');\n                return;\n            }\n        }\n\n\n        ctx.fillText(icon, this.startx, this.starty);\n        this.iconinfo.infos[icon] = {\n            uvs:[\n                (this.startx-this.width/2)/c.width, (this.starty - this.height/2)/c.height,\n                (this.startx + this.width/2)/c.width, (this.starty + this.height/2)/c.height,\n            ],\n            width:this.width/this.width\n        };\n\n        this.icons.push(icon);\n\n        this.startx += this.width + this.border;\n    }\n\n\n    computeAlpha() {\n\n        var ctx = this.ctx;\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n        ctx.putImageData(imgData,0,0);\n    }\n\n    updateGPUTexture(empty){\n        var gl = this.gl;\n\n        this.createTexture(empty);\n\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addIcons(icons){\n        var char;\n        var map = {};\n        for(var i = 0,len = icons.length;i< len;i++){\n            char = icons[i];\n            if(!this.iconinfo.infos[char] && !map[char]){\n                if(this.fontLoaded){\n                    this.createIcon(char);\n                }else {\n                    this.iconsToCreate.push(char);\n                }\n                map[char] = true;\n            }\n        }\n        this.updateGPUTexture();\n    }\n\n    createTexture(empty){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        if(empty)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.iconinfo.img);\n    }\n\n    clear(){\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n        this.icons = [];\n        this.iconsToCreate = [];\n        this.iconinfo.infos = {};\n\n        var ctx = this.ctx;\n        ctx.save();\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.restore();\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureIcon.js","/**\n * Created by chengang on 17-4-5.\n */\nimport EventEmitter from '../../base/EventEmitter'\n\nexport  default  class  TextureLoader extends EventEmitter {\n    constructor(gl){\n        super();\n        this.gl = gl;\n        this.cache = {};\n        this.textures = [];\n        this.defaultTexture = this.createTexture();\n        this.texturesIndex = [0,1,2,3,4,5,6,7,8,9];\n        this.updateGPUTexture();\n    }\n\n    loadImgs(urls){\n        if(Array.isArray(urls)){\n            urls.forEach(function (url) {\n                this._load(url);\n            }.bind(this));\n        }else {\n            this._load(urls);\n        }\n    }\n\n    _load(url){\n        if(!this.cache[url]){\n            var image = document.createElement('IMG');\n            // image.setAttribute('crossOrigin', imgCrossOrigin);\n            image.src = url;\n            image.onload = function() {\n                var tx = this.createTexture(image);\n                this.cache[url] = this.textures.length;//index\n                this.textures.push(tx);\n                this.updateGPUTexture();\n                this.emit('load',[url]);\n            }.bind(this);\n        }\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n        this.texturesIndex.forEach(function (e) {\n            gl.activeTexture(gl['TEXTURE'+e]);\n            if(e > this.textures.length - 1){\n                gl.bindTexture(gl.TEXTURE_2D, this.defaultTexture);\n            }else {\n                gl.bindTexture(gl.TEXTURE_2D, this.textures[e]);\n            }\n        }.bind(this));\n    }\n\n    createTexture(img){\n        var gl = this.gl;\n        var texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        if(img)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        return texture;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureLoader.js","\n\nimport EventEmitter from '../../base/EventEmitter'\nimport TextSdf from './TextSdf'\n\nexport default class TextureText extends EventEmitter{\n    constructor(gl){\n        super();\n\n        this.gl = gl;\n\n        this.texture = null;\n\n        this.border = 2;\n\n        this.fontSize = 48;\n        this.fontFamily = 'Arial';\n\n        this.canvas = null;\n\n        this.textinfo = null;\n\n        this.texts = null;\n\n        this.sdf = new TextSdf(this.fontSize, this.fontSize/8, this.fontSize/3,null,this.fontFamily);\n\n\n        // test();\n    }\n\n    createCanvasImg(texts) {\n\n        if(!this.canvas) this.canvas = document.createElement('canvas');\n\n        var c = this.canvas;\n\n\n        var width = this.sdf.size;\n        var height = width;\n        var num = Math.ceil(Math.sqrt(texts.length));\n\n        c.width  = num * (width) + 2* this.border;\n        c.height  = num * (height) + 2* this.border;\n\n\n        var ctx = c.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, c.width, c.height);\n\n        ctx.font = `bold ${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"top\";\n        ctx.fillStyle = \"#ff0000\";\n\n\n        var startx =this.border;\n        var starty =this.border;\n        var infos = {}, px, py, charWidth,data;\n\n        this.texts = [];\n\n        for (var i = 0; i < texts.length; i++) {\n\n            if(this.textinfo && this.textinfo.infos[texts[i]]) continue;\n\n            data = this.sdf.draw(texts[i]);\n            charWidth = data.charWidth;\n\n            // charWidth = ctx.measureText(texts[i]).width;\n\n            if(startx + charWidth > c.width){\n                startx = this.border;\n                starty += height\n            }\n\n            ctx.putImageData(data.data, startx, starty,0,0,charWidth,data.data.height);\n\n            // ctx.fillText(texts[i], startx, starty);\n\n\n            infos[texts[i]] = {\n                uvs:[\n                    startx/c.width, starty/c.height,\n                    (startx + charWidth)/c.width, (starty + height)/c.height,\n                ],\n                width:charWidth/width\n            };\n\n            this.texts.push(texts[i]);\n\n            startx += charWidth;\n        }\n        // this.computeAlpha(ctx);\n        this.textinfo =  {\n            fontSize:this.fontSize,\n            img:c,\n            width:c.width,\n            height:c.height,\n            infos:infos\n        };\n\n        // document.body.appendChild(c);\n        // c.style.position = 'absolute';\n        // c.style.top = '100px';\n\n        this.updateGPUTexture();\n    }\n\n    computeAlpha(ctx) {\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n\n        ctx.putImageData(imgData,0,0);\n\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n\n        this.createTexture();\n\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addTexts(strs){\n        var len = strs.length;\n        var char,num = 0;\n\n        var texts = this.texts;\n        var map = {};\n        for(var i = 0;i< len;i++){\n            char = strs.charAt(i);\n            if(!this.textinfo.infos[char] && !map[char]){\n                num++;\n                map[char] = true;\n                texts.push(char);\n            }\n        }\n\n        if(num > 0) {\n           this.clear();\n            this.createCanvasImg(texts);\n        }\n    }\n\n    createTexture(){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textinfo.img);\n    }\n\n    clear(){\n        this.textinfo = null;\n        this.texts = null;\n    }\n\n}\n\nfunction test() {\n    var chars = '泽材abcdefghkilmnopqrstuvwxyz灭逐莫笔亡鲜';\n    var fontSize = 24;\n\n    var sdf = new TextSdf(fontSize, fontSize/8, fontSize/3,null,'Arial');\n\n    var canvas = document.createElement('canvas');\n    canvas.width = 400;\n    canvas.height = 400;\n    canvas.style.position = 'absolute';\n    canvas.style.top = '200px';\n\n    var ctx = canvas.getContext('2d');\n\n    var now = performance.now();\n    var startx = 0,stary=0,data;\n    for (var i = 0;i< chars.length;i++) {\n        data = sdf.draw(chars[i]);\n        if(startx + data.charWidth + 0 >= canvas.width){\n            stary += sdf.size;\n            startx = 0;\n        }\n\n        ctx.putImageData(data.data, startx, stary,0,0,data.charWidth,data.data.height);\n\n        startx += data.charWidth + 0;\n    }\n   console.log(Math.round(performance.now() - now) + 'ms.');\n\n    document.body.appendChild(canvas);\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureText.js","\n'use strict'\n\nimport util from '../../../../util'\n\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nfunction scaleTrangles(points, scale) {\n    scale = scale || 1.4;\n    var p1_x = points[0],\n        p1_y = points[1],\n        p2_x = points[2],\n        p2_y = points[3],\n        p3_x = points[4],\n        p3_y = points[5];\n\n    var avg_x = (p1_x + p2_x + p3_x) / 3,\n        avg_y = (p1_y + p2_y + p3_y) / 3;\n\n    var p1_x_new = avg_x + (p1_x - avg_x) * scale,\n        p1_y_new = avg_y + (p1_y - avg_y) * scale,\n        p2_x_new = avg_x + (p2_x - avg_x) * scale,\n        p2_y_new = avg_y + (p2_y - avg_y) * scale,\n        p3_x_new = avg_x + (p3_x - avg_x) * scale,\n        p3_y_new = avg_y + (p3_y - avg_y) * scale;\n\n    return [p1_x_new, p1_y_new, p2_x_new, p2_y_new, p3_x_new, p3_y_new];\n}\n\n\n\nexport  default class Curve{\n    constructor(){\n        // this.POINTS = 9;\n        this.ATTRIBUTES = 11 ;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 6*4 + 4 + 4;\n    }\n\n    getRenderData({data,source,target}){\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var tSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n\n        var aSize = 3, vX, vY;\n\n        var tX = target.x - tSize / dis * dx;\n        var tY = target.y - tSize / dis * dy;\n\n\n        var ctrlP = util.getControlPos(source.x,source.y,tX,tY,edge.curveCount,edge.curveOrder);\n\n        data = [];\n\n        //arrow\n        var dx1 = tX - ctrlP[0],dy1 = tY - ctrlP[1];\n        var dis1 = util.getDistance(tX,tY,ctrlP[0],ctrlP[1]);\n\n        vX = aSize/dis1 * dx1;\n        vY = aSize/dis1 * dy1;\n\n        var arrowX = tX - vX,\n            arrowY = tY - vY;\n\n\n        //curve\n        var color = util.parseColor(edge.color||source.color || '#b3d2ff');\n\n        var scalePos = scaleTrangles([source.x,source.y,ctrlP[0],ctrlP[1],tX-vX,tY-vY]);\n        var scaleUV = scaleTrangles([1,1,0.5,0,0,0]);\n\n\n        var dashed = edge.dashed ? 1:0;\n        // debugger\n        //curve\n        addData(data,this.ATTRIBUTES,[scalePos[0],scalePos[1],scaleUV[0],scaleUV[1],dis,0,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[scalePos[2],scalePos[3],scaleUV[2],scaleUV[3],dis,0,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[scalePos[4],scalePos[5],scaleUV[4],scaleUV[5],dis,0,color.r,color.g,color.b,color.a,dashed]);\n\n\n        //arrow\n        addData(data,this.ATTRIBUTES,[arrowX+vX,arrowY+vY,0,0,0,1,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[arrowX + vY * 0.6,arrowY - vX * 0.6,0,0,0,1,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[arrowX - vY * 0.6,arrowY + vX * 0.6,0,0,0,1,color.r,color.g,color.b,color.a,dashed]);\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        // debugger\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n        var disLocation = gl.getAttribLocation(program, \"a_dis\");\n        var flagLocation = gl.getAttribLocation(program, \"a_flag\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var dashedLocation = gl.getAttribLocation(program, \"a_dashed\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n            float32View[i*offset32+5] = data[i*this.ATTRIBUTES+5];\n\n            Uint8View[i*offset8+25] = data[i*this.ATTRIBUTES+6];\n            Uint8View[i*offset8+26] = data[i*this.ATTRIBUTES+7];\n            Uint8View[i*offset8+27] = data[i*this.ATTRIBUTES+8];\n            Uint8View[i*offset8+28] = data[i*this.ATTRIBUTES+9];\n\n            float32View[i*offset32+7] = data[i*this.ATTRIBUTES+10];\n\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(disLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(flagLocation, 1, gl.FLOAT, false, this.strip, 5*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false, this.strip, 6*4);\n        gl.vertexAttribPointer(dashedLocation, 1, gl.FLOAT, false, this.strip, 7*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n        gl.enableVertexAttribArray(disLocation);\n        gl.enableVertexAttribArray(flagLocation);\n        gl.enableVertexAttribArray(colorLocation);\n        gl.enableVertexAttribArray(dashedLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/curve/curve.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../util'\nimport mat3 from '../../../base/Matrix'\n\nimport vert from './glsl/edge-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_image:10,\n        }\n    },\n    getRenderData({data, textureLoader, textureIcon,textureText,graph}){\n        var target = graph.nodesIndex[data.target];\n        var source = graph.nodesIndex[data.source];\n\n        if(!data.label) return [];\n\n        // debugger\n        var str = data.label.split('');\n\n        var renderData = [];\n\n        var size = data.fontSize ||  Math.max(util.getNodeSizeX(source),util.getNodeSizeY(source))/3;\n        var infos = textureText.textinfo.infos,\n            charWidth = size,\n            charHeight = size,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var centerX = (source.x + target.x)/2, centerY = (source.y + target.y)/2;\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            renderData.push(getData([startx,starty,x1,y1,width],centerX,centerY,angle));\n            renderData.push(getData([startx,starty-charHeight,x1,y2,width],centerX,centerY,angle));\n            renderData.push(getData([startx+width,starty,x2,y1,width],centerX,centerY,angle));\n            renderData.push(getData([startx,starty-charHeight,x1,y2,width],centerX,centerY,angle));\n            renderData.push(getData([startx+width,starty,x2,y1,width],centerX,centerY,angle));\n            renderData.push(getData([startx+width,starty-charHeight,x2,y2,width],centerX,centerY,angle));\n\n            startx += width*7/8;\n        }\n\n        return renderData;\n    }\n\n}\n\nfunction getData(data,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([data[0],data[1]],mat3.matrixFromRotation(angle));\n    data[0] = rotate[0] + centerX;\n    data[1] = rotate[1] + centerY;\n    return {\n        a_position: [data[0], data[1]],\n        a_uv:[data[2],data[3]],\n        a_size: data[4],\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/EdgeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\nimport vert from './glsl/node-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\nimport util from '../../../util'\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_image:10,\n        }\n    },\n    getRenderData({data, textureLoader, textureIcon,textureText,graph}){\n\n        if(!data.label) return [];\n\n        // debugger\n        var str = data.label.split('');\n\n        var renderData = [];\n\n        var sizeX = util.getNodeSizeX(data),sizeY = util.getNodeSizeY(data);\n        var size = Math.max(sizeX,sizeY);\n        var infos = textureText.textinfo.infos,\n            charWidth = size/2,\n            charHeight = size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                // console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n\n        var startx = totalWidht/2 * -1 + data.x;\n        var starty =  data.y - sizeY;\n        var x1,y1,x2,y2;\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                // console.log(1);\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            renderData.push(getData([startx,starty,x1,y1,width]));\n            renderData.push(getData([startx,starty-charHeight,x1,y2,width]));\n            renderData.push(getData([startx+width,starty,x2,y1,width]));\n            renderData.push(getData([startx,starty-charHeight,x1,y2,width]));\n            renderData.push(getData([startx+width,starty,x2,y1,width]));\n            renderData.push(getData([startx+width,starty-charHeight,x2,y2,width]));\n\n            startx += width*7/8;\n        }\n        return renderData;\n    }\n\n}\n\nfunction getData(data) {\n    return {\n        a_position: [data[0], data[1]],\n        a_uv:[data[2],data[3]],\n        a_size: data[4],\n    }\n}\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 5;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 5;\n    }\n\n    getRenderData({data,textureText}){\n        var node  = data;\n        if(!node.label) return [];\n\n        // debugger\n        var str = node.label.split('');\n\n        var data = [];\n\n        var sizeX = util.getNodeSizeX(node),sizeY = util.getNodeSizeY(node);\n        var size = Math.max(sizeX,sizeY);\n        var infos = textureText.textinfo.infos,\n            charWidth = size/2,\n            charHeight = size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                // console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n\n        var startx = totalWidht/2 * -1 + node.x;\n        var starty =  node.y - sizeY;\n        var x1,y1,x2,y2;\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                // console.log(1);\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1,width]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2,width]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1,width]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2,width]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1,width]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2,width]);\n\n            startx += width*7/8;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n        var cameaScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n        gl.uniform1f(cameaScaleLocation, camera.scale);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/NodeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../../util'\nimport mat3 from '../../../../base/Matrix'\n\nimport vert from './../glsl/edge-label-vert.glsl'\nimport frag from './../glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\n\nexport default class CurveLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 5;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 5 ;\n    }\n\n    getRenderData({data,source,target,textureText}){\n        var edge = data;\n        if(!edge.label) return [];\n\n        // debugger\n        var str = edge.label.split('');\n\n        data = [];\n\n        var size = edge.fontSize ||  Math.max(util.getNodeSizeX(source),util.getNodeSizeY(source))/3;\n        var infos = textureText.textinfo.infos,\n            charWidth = size,\n            charHeight = size,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        //curve\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var tSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n\n        var tX = target.x - tSize / dis * dx;\n        var tY = target.y - tSize / dis * dy;\n\n        var ctrlP = util.getControlPos(source.x,source.y,tX,tY,edge.curveCount,edge.curveOrder);\n\n        var tangent = util.getPointTangentOnQuadraticCurve(0.5,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n        dx = tangent[0],dy = tangent[1];\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var center = util.getPointOnQuadraticCurve(0.5,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n\n        var centerX = center[0], centerY = center[1];\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1,width],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2,width],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1,width],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2,width],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1,width],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2,width],centerX,centerY,angle);\n\n            startx += width*7/8;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n        var cameaScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n        gl.uniform1f(cameaScaleLocation, camera.scale);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/curveLabel/curveLabel.js","module.exports = \"#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n#endif\\n\\nprecision mediump float;\\nvarying vec4 color;\\nvarying vec2 uv;\\nvarying float dis;\\nvarying float flag;\\nvarying float dashed;\\n\\nuniform float u_camera_scale;\\n\\n\\n\\nvoid main(){\\n        float a = 0.6;\\n        float width = a / u_camera_scale;\\n        float scale = 1.0;\\n        float base = 0.6;\\n        float smooth_factor = 0.4;\\n\\n        if(flag > -0.5 && flag < 0.5){//curve\\n                vec2 px = dFdx(uv);\\n                vec2 py = dFdy(uv);\\n\\n                float fx = 2.0 * uv.x * px.x - px.y;\\n                float fy = 2.0 * uv.y * py.x - py.y;\\n\\n                float sd = (uv.x * uv.x - uv.y) / sqrt(fx * fx + fy * fy);\\n\\n                float alpha = 1.0 - abs(sd) / width;\\n                if (alpha < 0.0 || uv.x < 0.0 || uv.x > 1.0) discard;\\n\\n                float n = 800.0/dis;\\n                float dot = mod(uv.x*100.0,n);\\n                if(dashed > 0.5 && dot > n*0.5 && dot < n) discard;\\n\\n                if(alpha < 0.2) scale = smoothstep(0.0,smooth_factor,alpha);\\n\\n                gl_FragColor = color*scale;\\n\\n        }else if(flag > 0.5 && flag < 1.5){//arrow\\n                gl_FragColor = color;\\n        }\\n\\n\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/curve/frag.glsl\n// module id = 31\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\n//attribute vec2 a_normal;\\nattribute vec4 a_color;\\n//attribute float a_size;\\nattribute vec2 a_uv;\\nattribute float a_dis;\\nattribute float a_flag;\\nattribute float a_dashed;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\nvarying vec2 uv;\\nvarying float dis;\\nvarying float flag;\\nvarying float dashed;\\n\\nvoid main() {\\n\\n//vec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nuv = a_uv;\\ndis = a_dis;\\nflag = a_flag;\\ncolor = a_color/255.0;\\ndashed = a_dashed;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/curve/vert.glsl\n// module id = 32\n// module chunks = 0","module.exports = \"precision mediump float;\\nvarying vec4 color;\\nvoid main(){\\ngl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-frag.glsl\n// module id = 33\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute vec4 a_color;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\n\\nvoid main() {\\n\\nvec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(pos,1)).xy,0,1);\\n\\ncolor = a_color/255.0;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-vert.glsl\n// module id = 34\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\nsize = a_size;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/node-label-vert.glsl\n// module id = 35\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\nvarying float size;\\n\\n\\nuniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n\\n\\n\\n\\n\\n\\n//todo\\nvec4 getSampleColore(int index,vec2 uv){\\n    vec4 c;\\n    if(index == 0){\\n        c = texture2D(u_textures[0],uv);\\n    }else if(index == 1){\\n        c = texture2D(u_textures[1],uv);\\n    }else if(index == 2){\\n        c = texture2D(u_textures[2],uv);\\n    }else if(index == 3){\\n        c = texture2D(u_textures[3],uv);\\n    }else if(index == 4){\\n        c = texture2D(u_textures[4],uv);\\n    }else if(index == 5){\\n        c = texture2D(u_textures[5],uv);\\n    }\\n    return c;\\n}\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = min(0.05,4.0/size) ,\\n   border = min(0.75,0.04*size) ;\\n\\nif(flag > 0.5 && flag < 1.5) //flag =1 base\\n{\\n    vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    r = length(cxy);\\n\\n    if(r > 1.0 ){\\n        discard;\\n    }\\n\\n    if(img >= 0.0){\\n        nodecolor = getSampleColore(int(img),uv);\\n    }\\n\\n    if(r > 1.0-blur && r <=1.0){\\n        alpha = 1.0 - smoothstep(1.0-blur, 1.0, r);\\n     }\\n\\n\\n     if( selected > 0.5  && r > border && r < border + blur){\\n        nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n    }\\n\\n     if( selected > 0.5  &&  r >= border + blur){\\n        nodecolor = borderColor;\\n     }\\n\\n      gl_FragColor = nodecolor * alpha;\\n\\n}else if(flag > 1.5 && flag < 2.5) {//flag =2 icon\\n    gl_FragColor = texture2D(u_icons_texture,uv).w * vec4(1,1,1,1);\\n}\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/default/default-frag.glsl\n// module id = 36\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_img;\\nattribute vec2 a_uv;\\nattribute float a_selected;\\nattribute float a_flag;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\nvarying float size;\\n\\n\\nvoid main() {\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\nuv = a_uv;\\nflag = a_flag;\\n\\nsize = a_size / u_camera_scale ;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/default/default-vert.glsl\n// module id = 37\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\n\\n\\nuniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n//todo\\nvec4 getSampleColore(int index,vec2 uv){\\n    vec4 c;\\n    if(index == 0){\\n        c = texture2D(u_textures[0],uv);\\n    }else if(index == 1){\\n        c = texture2D(u_textures[1],uv);\\n    }else if(index == 2){\\n        c = texture2D(u_textures[2],uv);\\n    }else if(index == 3){\\n        c = texture2D(u_textures[3],uv);\\n    }else if(index == 4){\\n        c = texture2D(u_textures[4],uv);\\n    }else if(index == 5){\\n        c = texture2D(u_textures[5],uv);\\n    }\\n    return c;\\n}\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = 0.05 ,\\n   border = 0.75 ;\\n\\n\\nif(flag > 0.5 && flag < 1.5) //flag =1\\n{\\n    vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    r = length(cxy);\\n\\n    if(img >= 0.0){\\n        nodecolor = getSampleColore(int(img),uv);\\n    }\\n\\n     if( selected > 0.5  && r > border && r < border + blur){\\n        nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n    }\\n\\n     if( selected > 0.5  &&  r >= border + blur){\\n        nodecolor = borderColor;\\n     }\\n\\n      gl_FragColor = nodecolor * alpha;\\n\\n}else if(flag > 1.5 && flag < 2.5) {//flag =2\\n    gl_FragColor = texture2D(u_icons_texture,uv).w * vec4(1,1,1,1);\\n}\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/rect/frag.glsl\n// module id = 38\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_img;\\nattribute vec2 a_uv;\\nattribute float a_selected;\\nattribute float a_flag;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\n\\n\\nvoid main() {\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\nuv = a_uv;\\nflag = a_flag;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/rect/vert.glsl\n// module id = 39\n// module chunks = 0","// export {default as Graph} from './core/Graph'\nexport {WebGLRender} from './render/index'\n// export {default as quadtree} from './tesst/src/quadtree'\n// export {default as Quad} from './base/Quad'\n// export {default as Event} from './core/Event'\nexport {default as GraphView} from './core/index'\nexport {default as util} from './util'\nexport {default as Tween} from './animation/tween'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","'use strict';\n\nimport util from '../util'\n\n\nexport var GLComType = {\n    FLOAT:{glType:'FLOAT',bytes:4},\n    BYTE:{glType:'BYTE',bytes:1},\n    SHORT:{glType:'SHORT',bytes:2},\n    UNSIGNED_BYTE:{glType:'UNSIGNED_BYTE',bytes:1},\n    UNSIGNED_SHORT:{glType:'UNSIGNED_SHORT',bytes:2},\n};\n\nexport var GlType = {\n    FLOAT:{components:1,glType:'FLOAT'},\n    FLOAT_VEC2:{components:2,glType:'FLOAT_VEC2'},\n    FLOAT_VEC3:{components:3,glType:'FLOAT_VEC3'},\n    FLOAT_VEC4:{components:4,glType:'FLOAT_VEC4'},\n    INT:{components:1,glType:'INT'},\n    INT_VEC2:{components:2,glType:'INT_VEC2'},\n    INT_VEC3:{components:3,glType:'INT_VEC3'},\n    INT_VEC4:{components:4,glType:'INT_VEC4'},\n    BOOL:{components:1,glType:'BOOL'},\n    BOOL_VEC2:{components:2,glType:'BOOL_VEC2'},\n    BOOL_VEC3:{components:3,glType:'BOOL_VEC3'},\n    BOOL_VEC4:{components:4,glType:'BOOL_VEC4'},\n    FLOAT_MAT2:{components:4,glType:'FLOAT_MAT2'},\n    FLOAT_MAT3:{components:9,glType:'FLOAT_MAT3'},\n    FLOAT_MAT4:{components:16,glType:'FLOAT_MAT4'},\n    SAMPLER_2D:{components:1,glType:'SAMPLER_2D'},\n    SAMPLER_CUBE:{components:1,glType:'SAMPLER_CUBE'},\n};\n\nfunction getType(gl,typeNum) {\n    var type = 'FLOAT';\n    for(var name in GlType){\n        if(gl[name] == typeNum) return name;\n    }\n    console.error('gl type not found');\n    return type;\n}\n\n\nexport  function getActiveAttributes (gl,program) {\n    var shaderAttrInfos = {};\n    var numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (var i = 0; i < numAttribs; ++i) {\n        var attribInfo = gl.getActiveAttrib(program, i);\n        if (!attribInfo) {\n            continue;\n        }\n\n        shaderAttrInfos[attribInfo.name] = {};\n        shaderAttrInfos[attribInfo.name].type = getType(gl,attribInfo.type);\n        shaderAttrInfos[attribInfo.name].size = attribInfo.size;\n        shaderAttrInfos[attribInfo.name].location = gl.getAttribLocation(program, attribInfo.name);\n    }\n    return shaderAttrInfos;\n}\nexport function getActiveUniforms (gl,program) {\n    var shaderUniformInfos = {};\n    var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (var i = 0; i < numUniforms; ++i) {\n        var uniformInfo = gl.getActiveUniform(program, i);\n        if (!uniformInfo) {\n            continue;\n        }\n\n        var name = uniformInfo.name;\n        // remove the array suffix.\n        if (name.substr(-3) === \"[0]\") {\n            name = name.substr(0, name.length - 3);\n        }\n\n        shaderUniformInfos[name] = {};\n        shaderUniformInfos[name].type = getType(gl,uniformInfo.type);\n        shaderUniformInfos[name].size = uniformInfo.size;\n        shaderUniformInfos[name].location = gl.getUniformLocation(program, name);\n    }\n    return shaderUniformInfos;\n}\n\nexport function calTypeOffset(activeAttributes,config) {\n    config = config || {};\n    var offsetConfig = {\n        config:{},\n        strip:0\n    };\n    var type,num = 0;\n    for(var attr in activeAttributes){\n        type = activeAttributes[attr].type;\n        offsetConfig.config[attr] = {};\n        offsetConfig.config[attr].start = num;\n        offsetConfig.config[attr].components = GlType[type].components;\n        num += GlType[type].components;\n    }\n    offsetConfig.strip = num;\n    return offsetConfig;\n}\n\nexport function vertexAttribPointer(gl,activeAttributes,offsetConfig) {\n    var config = offsetConfig.config;\n    var strip = offsetConfig.strip;\n    for(var attr in activeAttributes){\n        gl.vertexAttribPointer(\n            activeAttributes[attr].location,\n            config[attr].components,\n            gl.FLOAT, false, strip*4, config[attr].start*4\n        );\n        gl.enableVertexAttribArray(activeAttributes[attr].location);\n    }\n\n}\n\nexport function checkAttrValid(config,data){\n\n    var type;\n    var err = [];\n    for(var attr in config){\n        if(!config.hasOwnProperty(attr)){\n            err.push('shader need attribute: ' + attr);\n            continue;\n        }\n\n        if(data[attr] == undefined){\n            err.push('attribute ['+attr+']: is undefined');\n            continue;\n        }\n\n        type = config[attr].type;\n        if(util.isArray(data[attr]) && data[attr].length != GlType[type].components*config[attr].size){\n            err.push('attribute ['+attr+']: size need ' + GlType[type].components);\n        }\n    }\n\n    return err.length ? err : null;\n}\n\n\nvar uniformSetter = {\n    FLOAT:function (gl,location,v) {gl.uniform1f(location, v);} ,\n    FLOAT_VEC2:function (gl,location,v) {gl.uniform2fv(location, v);} ,\n    FLOAT_VEC3:function (gl,location,v) {gl.uniform3fv(location, v);} ,\n    FLOAT_VEC4:function (gl,location,v) {gl.uniform4fv(location, v);} ,\n    FLOAT_MAT2:function (gl,location,v) {gl.uniformMatrix2fv(location, false, v);} ,\n    FLOAT_MAT3:function (gl,location,v) {gl.uniformMatrix3fv(location, false, v);} ,\n    FLOAT_MAT4:function (gl,location,v) {gl.uniformMatrix4fv(location, false, v);} ,\n    SAMPLER_2D:function (gl,location,v) {\n        if(v.length) gl.uniform1iv(location, v);\n        else gl.uniform1i(location, v);\n    } ,\n};\n\n\nexport  function setUniforms(gl,activeUniforms,uniforms){\n    var type;\n    for(var attr in activeUniforms){\n        type = activeUniforms[attr].type;\n        uniformSetter[type](gl,activeUniforms[attr].location,uniforms[attr]);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/GLUtil.js","/**\n * Created by chengang on 17-3-31.\n */\n\nimport util from '../../../util'\n\nimport edgeVert from './glsl/default-vert.glsl'\nimport edgeFrag from './glsl/default-frag.glsl'\n\n\nexport default {\n    shaderVert: edgeVert,\n    shaderFrag: edgeFrag,\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix\n        }\n    },\n    getRenderData({data, textureLoader, textureIcon,graph}){\n        var target = graph.nodesIndex[data.target];\n        var source = graph.nodesIndex[data.source];\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        data = [];\n        var size = 0.8,arrowSize =6;\n        var crossVector = util.normalize([-dy,dx]);\n\n        //arrow\n        var targetSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var arrowX = target.x - (targetSize + arrowSize)/dis * dx;\n        var arrowY = target.y - (targetSize + arrowSize)/dis * dy;\n\n        var color = util.parseColor(edge.color||source.color || '#b3d2ff');\n\n        var renderData = [];\n\n        renderData.push(getData([source.x,source.y,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([arrowX,arrowY,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]));\n\n        //arrow\n        renderData.push(getData([arrowX,arrowY,crossVector[0],crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([arrowX,arrowY,-crossVector[0],-crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]));\n        renderData.push(getData([arrowX,arrowY,arrowSize/dis * dx,arrowSize/dis * dy,1,color.r,color.g,color.b,color.a]));\n\n\n        return renderData;\n    }\n\n}\n\nfunction getData(data) {\n    return {\n        a_position: [data[0], data[1]],\n        a_normal: [data[2],data[3]],\n        a_size: data[4],\n        a_color: [data[5], data[6], data[7], data[8]],\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/render.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../../util'\nimport nodeVert from './default-vert.glsl'\nimport nodeFrag from './default-frag.glsl'\n\nimport {GlType as type, GLComType as comType} from '../../../../base/GLUtil'\n\nexport default {\n    shaderVert: nodeVert,\n    shaderFrag: nodeFrag,\n    attributes: {\n        a_size: {type: type.FLOAT, comType: comType.FLOAT},\n        a_position: {type: type.FLOAT_VEC2, comType: comType.FLOAT},\n        a_color: {type: type.FLOAT_VEC4, comType: comType.FLOAT},\n        a_img: {type: type.FLOAT, comType: comType.FLOAT},\n        a_selected: {type: type.FLOAT, comType: comType.FLOAT},\n        a_uv: {type: type.FLOAT_VEC2, comType: comType.FLOAT},\n        a_flag: {type: type.FLOAT, comType: comType.FLOAT},\n    },\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_textures:textureLoader.texturesIndex,\n            u_borderColor:[212, 82, 95,255.0],\n            u_sample_ratio:sampleRatio,\n            u_icons_texture:11,\n        }\n    },\n    getRenderData({data, textureLoader, textureIcon}){\n        var size = data.size * 2 || 10 * 2;\n        var isSelected = data.selected ? 1.0 : 0.0;\n        var color = utils.parseColor(data.color || '#62ffb7');\n\n        var img = -1;\n        if (data.img && textureLoader.cache[data.img])\n            img = textureLoader.cache[data.img];\n\n\n        var renderData = [];\n\n        renderData.push(getData([data.x-data.size,data.y+data.size,color.r,color.g,color.b,color.a,0,0,img,isSelected,1,data.size]));\n        renderData.push(getData([data.x+data.size,data.y+data.size,color.r,color.g,color.b,color.a,1,0,img,isSelected,1,data.size]));\n        renderData.push(getData([data.x-data.size,data.y-data.size,color.r,color.g,color.b,color.a,0,1,img,isSelected,1,data.size]));\n        renderData.push(getData([data.x+data.size,data.y+data.size,color.r,color.g,color.b,color.a,1,0,img,isSelected,1,data.size]));\n        renderData.push(getData([data.x-data.size,data.y-data.size,color.r,color.g,color.b,color.a,0,1,img,isSelected,1,data.size]));\n        renderData.push(getData([data.x+data.size,data.y-data.size,color.r,color.g,color.b,color.a,1,1,img,isSelected,1,data.size]));\n\n        var hasIcon = data.icon && textureIcon.iconinfo.infos[data.icon],uvs;\n        var scale = 0.7;\n        //icon\n        if(hasIcon){\n\n            uvs = textureIcon.iconinfo.infos[data.icon].uvs;\n            renderData.push(getData([data.x-data.size*scale,data.y+data.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[1],-2,isSelected,2,data.size]));\n            renderData.push(getData([data.x+data.size*scale,data.y+data.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2,data.size]));\n            renderData.push(getData([data.x-data.size*scale,data.y-data.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2,data.size]));\n            renderData.push(getData([data.x+data.size*scale,data.y+data.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2,data.size]));\n            renderData.push(getData([data.x-data.size*scale,data.y-data.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2,data.size]));\n            renderData.push(getData([data.x+data.size*scale,data.y-data.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[3],-2,isSelected,2,data.size]));\n        }\n        \n        \n        return renderData;\n    }\n\n}\n\nfunction getData(data) {\n    return {\n        a_position: [data[0], data[1]],\n        a_color: [data[2], data[3], data[4], data[5]],\n        a_uv:[data[6],data[7]],\n        a_img: data[8],\n        a_selected: data[9],\n        a_flag: data[10],\n        a_size: data[11],\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/default/render.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../../util'\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_textures:textureLoader.texturesIndex,\n            u_borderColor:[212, 82, 95,255.0],\n            u_sample_ratio:sampleRatio,\n            u_icons_texture:11,\n        }\n    },\n    getRenderData({data, textureLoader, textureIcon,graph}){\n\n        var color = utils.parseColor(data.color || '#34e1ff');\n\n        var img = -1;\n        if(data.img && textureLoader.cache.hasOwnProperty(data.img))\n            img = textureLoader.cache[data.img];\n\n        var sizeX = data.width||data.size||10;\n        var sizeY = data.height||data.size||10;\n        var isSelected = data.selected ? 1.0 : 0.0;\n\n        var renderData = [];\n\n\n        //base\n        renderData.push(getData([data.x-sizeX,data.y+sizeY,color.r,color.g,color.b,color.a,0,0,img,isSelected,1]));\n        renderData.push(getData([data.x+sizeX,data.y+sizeY,color.r,color.g,color.b,color.a,1,0,img,isSelected,1]));\n        renderData.push(getData([data.x-sizeX,data.y-sizeY,color.r,color.g,color.b,color.a,0,1,img,isSelected,1]));\n        renderData.push(getData([data.x+sizeX,data.y+sizeY,color.r,color.g,color.b,color.a,1,0,img,isSelected,1]));\n        renderData.push(getData([data.x-sizeX,data.y-sizeY,color.r,color.g,color.b,color.a,0,1,img,isSelected,1]));\n        renderData.push(getData([data.x+sizeX,data.y-sizeY,color.r,color.g,color.b,color.a,1,1,img,isSelected,1]));\n\n\n        var hasIcon = data.icon && textureIcon.iconinfo.infos[data.icon],uvs;\n        var scale = 0.85;\n        var iconSize = Math.min(sizeX,sizeY);\n        //icon\n        if(hasIcon){\n            // debugger\n            uvs = textureIcon.iconinfo.infos[data.icon].uvs;\n            renderData.push(getData([data.x-iconSize*scale,data.y+iconSize*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[1],-2,isSelected,2]));\n            renderData.push(getData([data.x+iconSize*scale,data.y+iconSize*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2]));\n            renderData.push(getData([data.x-iconSize*scale,data.y-iconSize*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2]));\n            renderData.push(getData([data.x+iconSize*scale,data.y+iconSize*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2]));\n            renderData.push(getData([data.x-iconSize*scale,data.y-iconSize*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2]));\n            renderData.push(getData([data.x+iconSize*scale,data.y-iconSize*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[3],-2,isSelected,2]));\n        }\n\n\n        return renderData;\n    }\n\n}\n\nfunction getData(data) {\n    return {\n        a_position: [data[0], data[1]],\n        a_color: [data[2], data[3], data[4], data[5]],\n        a_uv:[data[6],data[7]],\n        a_img: data[8],\n        a_selected: data[9],\n        a_flag: data[10],\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/rect/render.js"],"sourceRoot":""}