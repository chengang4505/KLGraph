{"version":3,"sources":["webpack:///webpack/bootstrap ace0e43668de9954d569","webpack:///./src/util.js","webpack:///./src/base/EventEmitter.js","webpack:///./src/base/Matrix.js","webpack:///./src/render/webgl/label/glsl/label-frag.glsl","webpack:///./src/core/Event.js","webpack:///./src/core/Graph.js","webpack:///./src/render/webgl/render.js","webpack:///./src/render/webgl/label/glsl/edge-label-vert.glsl","webpack:///./src/base/Quad.js","webpack:///./src/core/index.js","webpack:///./src/render/index.js","webpack:///./src/animation/tween.js","webpack:///./src/base/timer.js","webpack:///./src/core/Selection.js","webpack:///./src/core/config.js","webpack:///./src/layout/CircularLayout.js","webpack:///./src/layout/ColaLayout.js","webpack:///./src/layout/DargeLayout.js","webpack:///./src/layout/FlowLayout.js","webpack:///./src/layout/index.js","webpack:///./src/render/webgl/TextureIcon.js","webpack:///./src/render/webgl/TextureLoader.js","webpack:///./src/render/webgl/TextureText.js","webpack:///./src/render/webgl/edge/curve/curve.js","webpack:///./src/render/webgl/edge/default.js","webpack:///./src/render/webgl/label/EdgeLabel.js","webpack:///./src/render/webgl/label/NodeLabel.js","webpack:///./src/render/webgl/label/curveLabel/curveLabel.js","webpack:///./src/render/webgl/node/default/Node.js","webpack:///./src/render/webgl/node/rect/Rect.js","webpack:///./src/render/webgl/edge/curve/frag.glsl","webpack:///./src/render/webgl/edge/curve/vert.glsl","webpack:///./src/render/webgl/edge/glsl/default-frag.glsl","webpack:///./src/render/webgl/edge/glsl/default-vert.glsl","webpack:///./src/render/webgl/label/glsl/node-label-vert.glsl","webpack:///./src/render/webgl/node/default/default-frag.glsl","webpack:///./src/render/webgl/node/default/default-vert.glsl","webpack:///./src/render/webgl/node/rect/frag.glsl","webpack:///./src/render/webgl/node/rect/vert.glsl","webpack:///./src/index.js"],"names":["utils","uuid","a","b","Math","random","toString","typeofstr","typeofobj","typeoffn","isArray","obj","Array","isString","isObject","isFunction","loadShader","gl","shaderSource","shaderType","error","compiled","shader","createShader","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","console","deleteShader","loadProgram","shaders","attribs","loc","i","linked","program","createProgram","length","attachShader","bindAttribLocation","locations","opt_attribs","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","extend","k","res","l","arguments","getDistance","x1","y1","x2","y2","dx","dy","sqrt","normalize","vector","len","getAngle","cos","acos","inRect","posx","posy","x","y","w","h","reI","reN","reHex6","reRgbaInteger","RegExp","parseColor","format","trim","toLowerCase","m","n","exec","parseInt","r","g","getNodeSizeX","node","size","type","width","getNodeSizeY","height","getPointOnQuadraticCurve","t","xi","yi","pow","getPointTangentOnQuadraticCurve","pos1","pos2","getControlPos","count","order","dis","factor","ratio","norV","EventEmitter","_listener","cb","listener","push","splice","args","fn","slice","apply","mat3","matrixFromTranslate","matrixFromRotation","angle","sin","matrixFromScale","invert","a11","a12","a13","a21","a22","a23","a31","a32","a33","del","multiply","a00","a01","a02","a10","a20","b00","b01","b02","b10","b11","b12","b20","b21","b22","transformPoint","p","rotateVector","v","multiMatrix","matrixs","reduce","pre","cur","initEvent","handlerWrap","handle","e","pos","_this","toCameraPos","offsetX","offsetY","cameraX","cameraY","events","click","_clickHandler","mousemove","_moveHandler","mousedown","_downHandler","mouseup","_upHandler","mousewheel","_wheelHandler","container","addEventListener","trigger","event","checkInNode","isFind","sizeX","sizeY","getNode","nodes","graph","findNode","graphPos","toGraphPos","emit","handleDrag","forceRender","isCamera","isDown","startx","starty","onmousemove","offsetx","offsety","camera","position","context","selection","isSelected","data","forEach","setNodeData","id","newgraphPos","onmouseup","preventDefault","clear","onmouseout","removeEventListener","which","button","config","zoomRatio","wheelDelta","zoomTo","Graph","options","edges","nodesIndex","edgesIndex","inEdgesIndex","outEdgesIndex","read","bind","source","target","updateEdgeCount","attr","map","edge","counter","curveCount","curveOrder","ids","nodeid","removeEdge","edgeid","updatePos","hasOwnProperty","oldpos","quad","point","insert","root","WebGLRender","needUpdate","sampleRatio","initRender","initGraphChangeEvent","initTexture","textureLoader","on","textureUpdate","initIconTexture","textureText","initTextTexture","projectMatrix","scale","rotation","renderType","index","cache","nodeLabel","edgeLabel","call","resizeCanvas","COLOR_BUFFER_BIT","imgs","img","loadImgs","Object","keys","renderEdge","renderEdgeLabel","renderNode","renderNodeLabel","createRenderCache","textureIcon","renderCacheData","layers","name","rootType","argFn","nodeData","cacheIndex","start","offset","rootType1","clearClusterCacheCounter","initRenderLayers","render","getRenderData","fixClusterCacheLength","camMatrixInvert","orders","getCameraMatrix","useProgram","matrix","getContext","getExtension","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","disable","DEPTH_TEST","clearColor","updateNodeRenderData","updateNodeLabelRenderData","updateEdgeRenderData","updateEdgeLabelRenderData","clearRenderCache","objs","addTexts","getAddText","text","label","texts","chars","split","createCanvasImg","typeRoot","renderRoot","temp","layersConfig","layer","shaderVert","VERTEX_SHADER","shaderFrag","FRAGMENT_SHADER","icons","icon","createIcons","isInvert","mat","canvas","multiplier","clientWidth","clientHeight","viewport","camPos","isVector","newscale","zoomMin","zoomMax","url","renderData","updateRenderData","defaultConfig","maxLevel","indexN","rect","x0","y0","right","top","indexNs","pointRect","points","getIndexRect","createNode","level","elements","children","Quad","option","time","Infinity","timeEnd","pointR","indexs","_point","Core","initCanvas","mouse","off","makeLayout","layout","_start","_initEvent","style","_createCanvas","appendChild","oncontextmenu","display","cursor","document","createElement","left","frames","state","_render","requestAnimationFrame","resize","select","layoutConfig","to","duration","default","curve","interpolateNumber","Tween","interpolates","timer","timerHandle","_duration","elapsed","min","attrInterpolater","stop","toObjs","list","now","Timer","timerFlush","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","performance","Date","setFrame","f","setTimeout","clearNow","_call","_time","_next","prototype","constructor","restart","callback","delay","TypeError","sleep","wake","nap","poke","t0","t1","t2","clearTimeout","clearInterval","setInterval","Selection","ctx","mouseDown","initGraphEvent","clearRect","fillStyle","strokeStyle","beginPath","closePath","fill","stroke","mouseMove","mouseUp","renderRect","filter","selected","newSelected","selects","domPos","graphToDomPos","isPointInPath","removeNode","textureIconWidth","textureIconHeight","CircularLayout","posSet","depthPosSet","drawnBiComps","bc","nodeHeights","node2BiComp","init","createBicconnects","__layout","oldNodes","oldLinks","tempNodes","_index","s","links","states","dfsn","low","edgesStack","biComponents","num","dfs","current","neigh","neighNodes","singleComponent","pop","biconncts","max","maxIndex","delete","j","maxSize","radius","PI","deltaAngle","startX","startY","sortInnerCircle","test","SetOuterCircle","icNodes","greedyNodes","modestNodes","forFunct","tmp","NoOfChildren","toReturn","gNo","mNo","deltaM","deltaG","nodeId","outerCircle","currNeigh","compIndex","innerCircleRadius","firstTouched","outerNodesCount","rnc","iter","currNeighbour","outerRadius","tryCount","outerDeltaAngle","outerPositionsTaken","outerPositionsOwners","pointX","pointY","theAngle","theAngleHlp","innerDeltaAngle","asin","idPos","addedNeighbours","currentNeighbour","noOfNeighbours","startPos","BestFreePositionsForAll","startAngle","holeDepth","EachNodeHeight","DFSSetPos","idealPosition","noOfPos","innerCirclePos","innerCSize","alreadyFound","startOfAlFound","found","goDown","goUp","goUpCount","biggestGap","bestStartPos","thisGap","nodeID","noOfChildren","theRadius","component","undefined","comp","centerX","centerY","currAngle","oneAtLeast","neighboursCount","min1","min2","min1Id","min2Id","maxId","remStartAngle","rTry","hlp","setOffset","abs","ColaLayout","cola","Layout","convergenceThreshold","_init","symmetricDiffLinkLengths","DargeLayout","dagre","graphlib","setGraph","rankdir","nodesep","ranksep","ranker","setDefaultEdgeLabel","setNode","setEdge","d","FlowLayout","flowLayout","filterEdge","_filterEdge","filterEdges","flag","first","breadFirst","circular","flow","darge","TextureIcon","texture","fontSize","fontFamily","border","iconinfo","iconsToCreate","fontLoaded","updateGPUTexture","fonts","fontsReady","ready","then","fillRect","font","textAlign","textBaseline","infos","createIcon","computeAlpha","c","warn","fillText","uvs","imgData","getImageData","putImageData","empty","createTexture","activeTexture","TEXTURE11","bindTexture","TEXTURE_2D","char","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","TextureLoader","textures","defaultTexture","texturesIndex","urls","_load","image","src","onload","tx","TEXTURE0","NEAREST","TextureText","textinfo","ceil","px","py","charWidth","measureText","TEXTURE10","strs","charAt","addData","arr","attributes","attrData","scaleTrangles","p1_x","p1_y","p2_x","p2_y","p3_x","p3_y","avg_x","avg_y","p1_x_new","p1_y_new","p2_x_new","p2_y_new","p3_x_new","p3_y_new","Curve","ATTRIBUTES","arrayBuffer","dataBuffer","strip","tSize","aSize","vX","vY","tX","tY","ctrlP","dx1","dy1","dis1","arrowX","arrowY","color","scalePos","scaleUV","dashed","createBuffer","positionLocation","getAttribLocation","uvLocation","disLocation","flagLocation","colorLocation","dashedLocation","matrixLocation","getUniformLocation","cameraScaleLocation","byteLength","ArrayBuffer","float32View","Float32Array","Uint8View","Uint8Array","offset32","offset8","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniformMatrix3fv","uniform1f","drawArrays","TRIANGLES","Edge","POINTS","arrowSize","crossVector","targetSize","normalLocation","sizeLocation","rotate","NodeLabel","str","charHeight","uv","totalWidht","log","imageLocation","uniform1i","CurveLabel","tangent","center","Node","hasIcon","imgLocation","selectedLocation","texturesLocation","borderColorLocation","sampleRatioLocation","iconTextureLocation","int8View","Int8Array","int16View","Int16Array","offset16","SHORT","uniform4f","uniform1iv","Rect","iconSize"],"mappings":"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","file":"klgraph.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 39);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ace0e43668de9954d569","/**\n * Created by chengang on 17-3-17.\n */\n\nvar utils = {};\n\n\nutils.uuid = function(a,b){\n    for(               // loop :)\n        b=a='';        // b - result , a - numeric variable\n        a++<36;        //\n        b+=a*51&52  // if \"a\" is not 9 or 14 or 19 or 24\n            ?  //  return a random number or 4\n            (\n                a^15      // if \"a\" is not 15\n                    ?      // genetate a random number from 0 to 15\n                    8^Math.random()*\n                    (a^20?16:4)  // unless \"a\" is 20, in which case a random number from 8 to 11\n                    :\n                    4            //  otherwise 4\n            ).toString(16)\n            :\n            '-'            //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n    );\n    return b;\n};\n\n\nvar typeofstr = typeof '';\nvar typeofobj = typeof {};\nvar typeoffn = typeof function(){};\n\nutils.isArray = function( obj ){\n    return Array.isArray ? Array.isArray( obj ) : obj != null && obj instanceof Array;\n};\n\nutils.isString = function( obj ){\n    return obj != null && typeof obj == typeofstr;\n};\n\nutils.isObject = function( obj ){\n    return obj != null && typeof obj === typeofobj;\n};\n\nutils.isFunction =  function( obj ){\n    return obj != null && typeof obj === typeoffn;\n};\n\n\n\nutils.loadShader = function(gl, shaderSource, shaderType, error) {\n    var compiled,\n        shader = gl.createShader(shaderType);\n\n    // Load the shader source\n    gl.shaderSource(shader, shaderSource);\n\n    // Compile the shader\n    gl.compileShader(shader);\n\n    // Check the compile status\n    compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    // If something went wrong:\n    if (!compiled) {\n        if (error) {\n            error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        }\n\n        console.error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n};\n\n\n\nutils.loadProgram = function(gl, shaders, attribs, loc, error) {\n    var i,\n        linked,\n        program = gl.createProgram();\n\n    for (i = 0; i < shaders.length; ++i)\n        gl.attachShader(program, shaders[i]);\n\n    if (attribs)\n        for (i = 0; i < attribs.length; ++i)\n            gl.bindAttribLocation(\n                program,\n                locations ? locations[i] : i,\n                opt_attribs[i]\n            );\n\n    gl.linkProgram(program);\n\n    // Check the link status\n    linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        if (error)\n            error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        console.error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n        return null;\n    }\n\n    return program;\n};\n\n\nutils.extend = function() {\n    var i,\n        k,\n        res = {},\n        l = arguments.length;\n\n    for (i = l - 1; i >= 0; i--)\n        for (k in arguments[i])\n            res[k] = arguments[i][k];\n\n    return res;\n};\n\nutils.getDistance = function (x1,y1,x2,y2) {\n    var dx =x1 - x2;\n    var dy =y1 - y2;\n    return Math.sqrt(dx*dx+dy*dy);\n};\n\nutils.normalize = function (vector) {\n  var len = Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]);\n  if(len == 0) return [0,0];\n  return [vector[0]/len,vector[1]/len];\n};\n\nutils.getAngle = function (x1,y1,x2,y2) {\n    var cos = (x1*x2+y1*y2)/(Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2));\n    return Math.acos(cos);\n};\n\nutils.inRect = function (posx,posy,x,y,w,h) {\n  return posx >= x && posx <= x+w && posy >= y && posy <= y+h;\n};\n\n\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\";\nvar reHex6 = /^#([0-9a-f]{6})$/;\nvar reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\");\nutils.parseColor = function (format) {\n    format = (format + \"\").trim().toLowerCase();\n    var m,n;\n    if(m = reHex6.exec(format)){\n        n = parseInt(m[1], 16);\n        return{\n            r:n >> 16 & 0xff,\n            g: n >> 8 & 0xff,\n            b: n & 0xff,\n            a:255\n        }\n    }else if(m = reRgbaInteger.exec(format)){\n        return{\n            r:+m[1],\n            g:+m[2],\n            b:+m[3],\n            a:+m[4]*255\n        }\n    }else {\n        throw 'not valid color format';\n    }\n}\n\n\nutils.getNodeSizeX = function (node) {\n    var size = node.size || 10;\n    if(node.type == 'rect' && node.width) size = node.width;\n\n    return size;\n};\n\nutils.getNodeSizeY = function (node) {\n    var size = node.size || 10;\n    if(node.type == 'rect' && node.height) size = node.height;\n\n    return size;\n};\n\n\n/**\n * Compute the coordinates of the point positioned\n * at length t in the quadratic bezier curve.\n *\n * @param  {number} t  In [0,1] the step percentage to reach\n *                     the point in the curve from the context point.\n * @param  {number} x1 The X coordinate of the context point.\n * @param  {number} y1 The Y coordinate of the context point.\n * @param  {number} x2 The X coordinate of the ending point.\n * @param  {number} y2 The Y coordinate of the ending point.\n * @param  {number} xi The X coordinate of the control point.\n * @param  {number} yi The Y coordinate of the control point.\n * @return {object}    {x,y}.\n */\nutils.getPointOnQuadraticCurve = function(t, x1, y1, x2, y2, xi, yi) {\n    // http://stackoverflow.com/a/5634528\n    return [\n        Math.pow(1 - t, 2) * x1 + 2 * (1 - t) * t * xi + Math.pow(t, 2) * x2,\n        Math.pow(1 - t, 2) * y1 + 2 * (1 - t) * t * yi + Math.pow(t, 2) * y2\n    ];\n};\n\nutils.getPointTangentOnQuadraticCurve = function(t, x1, y1, x2, y2, xi, yi) {\n    var pos1 = utils.getPointOnQuadraticCurve(t, x1, y1, x2, y2, xi, yi);\n    var pos2 = utils.getPointOnQuadraticCurve(t+0.001, x1, y1, x2, y2, xi, yi);\n    return utils.normalize([pos2[0]-pos1[0],pos2[1] - pos1[1]]);\n};\n\n\nutils.getControlPos = function(x1,y1,x2,y2,count,order) {\n    var dis = utils.getDistance(x1,y1,x2,y2);\n    var factor = dis/8;\n\n    var ratio = (count+1)%2 == 1 ? 1 : -1;\n    ratio *= order ? 1 : -1;\n\n    factor *= ratio * ((count >> 1) + 1);\n\n    var norV = utils.normalize([y1-y2,x2-x1]);\n    return [norV[0]*factor+(x1+x2)/2,norV[1]*factor+(y1+y2)/2];\n};\n\n\nexport  default utils ;\n\n// window.utils = utils;\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nexport default class EventEmitter {\n    constructor(){\n        this._listener = {};\n    }\n\n    on(type,cb){\n        if(!type || !cb) return;\n        this._listener[type] = this._listener[type] || [];\n\n        var listener = this._listener[type];\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]) return;\n        }\n\n        this._listener[type].push(cb);\n        return cb;\n    }\n\n    off(type,cb){\n        if(!type) return;\n        var listener;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        if(cb){\n            for(var i = 0,len = listener.length; i < len;i++){\n                if(cb == listener[i]){\n                    listener.splice(i,1);\n                    break;\n                }\n            }\n        }else {\n            this._listener[type] = [];\n        }\n    }\n\n    emit(type,args){\n        if(!type) return;\n        var listener,fn;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        listener = listener.slice();\n\n        for(var i = 0,len = listener.length;i< len;i++){\n            fn = listener[i];\n            fn.apply(null,args);\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/EventEmitter.js","/**\n * Created by chengang on 17-3-28.\n */\n\n'use strict';\n\n\nvar mat3 = {};\n\nmat3.normalize = function () {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromTranslate = function(dx, dy) {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        dx, dy, 1\n    ];\n};\n\nmat3.matrixFromRotation = function(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle);\n\n    return  [\n        cos, sin, 0,\n        -sin, cos, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromScale = function(x,y) {\n    return  [\n        x, 0, 0,\n        0, y, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.invert = function (a) {\n    var l =  3,\n        a11 = a[0 * l + 0],\n        a12 = a[0 * l + 1],\n        a13 = a[0 * l + 2],\n        a21 = a[1 * l + 0],\n        a22 = a[1 * l + 1],\n        a23 = a[1 * l + 2],\n        a31 = a[2 * l + 0],\n        a32 = a[2 * l + 1],\n        a33 = a[2 * l + 2];\n\n    var del = a11*(a22*a33-a23*a32)-a12*(a21*a33-a23*a31)+a13*(a21*a32-a22*a31);\n\n    return [\n        (a22*a33-a23*a32)/del,(a13*a32-a12*a33)/del,(a12*a23-a13*a22)/del,\n        (a23*a31-a21*a33)/del,(a11*a33-a13*a31)/del,(a13*a21-a11*a23)/del,\n        (a21*a32-a22*a31)/del,(a12*a31-a11*a32)/del,(a11*a22-a12*a21)/del\n    ];\n}\n\nmat3.multiply = function(a, b) {\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2],\n        b00 = b[0 * l + 0],\n        b01 = b[0 * l + 1],\n        b02 = b[0 * l + 2],\n        b10 = b[1 * l + 0],\n        b11 = b[1 * l + 1],\n        b12 = b[1 * l + 2],\n        b20 = b[2 * l + 0],\n        b21 = b[2 * l + 1],\n        b22 = b[2 * l + 2];\n\n    return [\n        a00 * b00 + a01 * b10 + a02 * b20,\n        a00 * b01 + a01 * b11 + a02 * b21,\n        a00 * b02 + a01 * b12 + a02 * b22,\n        a10 * b00 + a11 * b10 + a12 * b20,\n        a10 * b01 + a11 * b11 + a12 * b21,\n        a10 * b02 + a11 * b12 + a12 * b22,\n        a20 * b00 + a21 * b10 + a22 * b20,\n        a20 * b01 + a21 * b11 + a22 * b21,\n        a20 * b02 + a21 * b12 + a22 * b22\n    ];\n};\n\nmat3.transformPoint = function (p,a) {\n    var x = p[0],\n        y = p[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10+a20,x*a01+y*a11+a21];\n}\n\nmat3.rotateVector = function (v,a) {\n    var x = v[0],\n        y = v[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10,x*a01+y*a11];\n};\n\n\nmat3.multiMatrix = function (matrixs) {\n    return matrixs.reduce(function (pre,cur) {\n        return mat3.multiply(pre,cur);\n    })\n};\n\nexport default mat3;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/Matrix.js","module.exports = \" precision mediump float;\\n\\nvec4 color = vec4(77, 72, 91,255);\\n\\nvarying vec2 v_texCoord;\\nuniform sampler2D u_image;\\n\\n\\nvoid main() {\\n    color = color / 255.0;\\n   vec4 color0 = texture2D(u_image, v_texCoord);\\n   gl_FragColor = color * color0.w;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/label-frag.glsl\n// module id = 3\n// module chunks = 0","/**\n * Created by chengang on 17-3-29.\n */\n\n'use strict';\n\nimport util from '../util'\n\nexport default function initEvent() {\n\n    function handlerWrap(handle) {\n        return function (e) {\n            var pos = _this.toCameraPos({x: e.offsetX, y: e.offsetY});\n            e.cameraX = pos.x;\n            e.cameraY = pos.y;\n            handle(e);\n        }\n    }\n\n\n    var _this = this;\n\n    var events = {\n        click:handlerWrap(_clickHandler),\n        mousemove:handlerWrap(_moveHandler),\n        mousedown:handlerWrap(_downHandler),\n        mouseup:handlerWrap(_upHandler),\n        mousewheel:handlerWrap(_wheelHandler),\n    };\n\n    for(var e in events)    this.container.addEventListener(e, events[e], false);\n\n\n    //some little situation maybe need the trigger function.\n    this.trigger = function (type,event) {\n        if(events[type]) events[type](event);\n    };\n\n\n    function checkInNode(posx,posy,node) {\n        var isFind = false;\n        var dis,sizeX,sizeY;\n        if(node.type == 'rect'){\n            sizeX = util.getNodeSizeX(node);\n            sizeY = util.getNodeSizeY(node);\n            isFind = util.inRect(posx,posy,node.x-sizeX,node.y-sizeY,sizeX*2,sizeY*2);\n        }else {\n            dis = util.getDistance(posx, posy, node.x, node.y);\n            isFind = dis <= node.size\n        }\n        return isFind;\n    }\n\n    function getNode(pos) {\n        // var nodes = _this.graph.quad.point(pos.x, pos.y);\n        var nodes = _this.graph.nodes;\n\n        var node, dis;\n        var findNode = null;\n        if (nodes.length > 0) {\n            for (var i = nodes.length - 1; i >= 0; i--) {\n                node = nodes[i];\n                // node = _this.graph.nodesIndex[node.id];\n                if (checkInNode(pos.x,pos.y,node)) {\n                    findNode = node;\n                    break;\n                }\n            }\n        }\n        return findNode;\n    }\n\n\n\n    function _clickHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n        if(node) _this.emit('nodeclick',[node,e]);\n        else _this.emit('stageclick',[e]);\n    }\n\n    function _moveHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        // var node = getNode(graphPos);\n    }\n\n\n    function _downHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n         handleDrag(!node);\n        _this.forceRender();\n\n        function handleDrag(isCamera) {\n            var isDown = true;\n            var startx = graphPos.x,starty = graphPos.y;\n\n            var onmousemove =handlerWrap(function(e) {\n                if(!isDown) return;\n                // console.time('move')\n\n                _this.forceRender();\n\n                var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                var offsetx = graphPos.x - startx;\n                var offsety = graphPos.y - starty;\n\n                if(isCamera){\n                    _this.camera.position.x -= offsetx;\n                    _this.camera.position.y -= offsety;\n                }else {\n                    if(_this.context.selection.isSelected(node)){\n                        _this.context.selection.data.forEach(function (node) {\n                            _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n                        });\n                    }else _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n                    // _this.emit('drag',['node',offsetx,offsety]);\n                }\n\n\n                if(isCamera){\n                    var newgraphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                    startx = newgraphPos.x;\n                    starty = newgraphPos.y;\n                }else {\n                    startx = graphPos.x;\n                    starty = graphPos.y;\n                }\n                // console.timeEnd('move')\n            });\n\n            var onmouseup = handlerWrap(function(e) {\n                e.preventDefault();\n                isDown = false;\n                clear();\n            });\n\n            var onmouseout = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n\n            _this.container.addEventListener('mousemove',onmousemove);\n            _this.container.addEventListener('mouseup',onmouseup);\n            _this.container.addEventListener('mouseout',onmouseout);\n\n\n            function clear() {\n                onmousemove&&_this.container.removeEventListener('mousemove',onmousemove);\n                onmouseup&&_this.container.removeEventListener('mouseup',onmouseup);\n                onmouseout&&_this.container.removeEventListener('mouseout',onmouseout);\n                onmousemove = onmouseup = onmouseout= null;\n            }\n\n        }\n\n    }\n\n    function _upHandler(e) {\n        if ((e.which && e.which == 3) || (e.button && e.button == 2)){\n            var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n            var node = getNode(graphPos);\n            if(node){\n                _this.emit('rightclick',['node',node,e]);\n            }else {\n                _this.emit('rightclick',['stage',null,e]);\n            }\n\n        }\n\n    }\n\n    function _wheelHandler(e) {\n        _this.forceRender();\n        var ratio = _this.config.zoomRatio;\n        if(e.wheelDelta > 0){\n            _this.zoomTo(1/ratio,e.cameraX,e.cameraY);\n            _this.emit('zoom',[1/ratio])\n        }else {\n            _this.zoomTo(ratio,e.cameraX,e.cameraY);\n            _this.emit('zoom',[ratio])\n        }\n    }\n\n    //drag\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Event.js","/**\n * Created by chengang on 17-3-17.\n */\n\n'use strict';\n\n\nimport  utils  from '../util.js'\n// import  Quad from '../base/Quad'\nimport EventEmitter from '../base/EventEmitter'\n\nclass Graph extends EventEmitter{\n\n    constructor(options) {\n\n        super();\n\n        options = options || {};\n\n        /**\n         * node edge data\n         */\n        this.nodes = [];\n        this.edges = [];\n\n        /**\n         * node edge index\n         */\n        this.nodesIndex = {};\n        this.edgesIndex = {};\n\n        /**\n         *nodes degrees info\n         */\n        this.inEdgesIndex = {};\n        this.outEdgesIndex = {};\n\n\n        // this.quad = new Quad();\n\n        if (options.nodes || options.edges) this.read(options);\n\n    }\n\n    /**\n     *  node ,edge \n     * @param options\n     */\n    read(options) {\n\n        (options.nodes || []).forEach(function (e) {\n            this.nodes.push(e);\n        }.bind(this));\n\n        (options.edges || []).forEach(function (e) {\n            this.edges.push(e);\n        }.bind(this));\n\n        this.nodes.forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            e.id += '';\n            this.nodesIndex[e.id] = e;\n        }.bind(this));\n\n        this.edges.forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            this.edgesIndex['' + e.id] = e;\n\n            if (!e.source || !this.nodesIndex[e.source + '']) throw 'some edge has not source id or not a node of the id';\n            if (!e.target || !this.nodesIndex[e.target + '']) throw 'some edge has not target id or not a node of the id';\n\n            e.source += '';\n            e.target += '';\n\n            this.inEdgesIndex[e.target] = this.inEdgesIndex[e.target] || [];\n            this.inEdgesIndex[e.target].push(e.id);\n\n            this.outEdgesIndex[e.source] = this.outEdgesIndex[e.source] || [];\n            this.outEdgesIndex[e.source].push(e.id);\n\n        }.bind(this));\n\n        this.updateEdgeCount();\n\n        this.emit('reset');\n\n        // this.quad.index(this.nodes);\n\n    }\n\n    updateEdgeCount(){\n        var source,target,attr,map = {};\n        this.edges.forEach(function (edge) {\n            source = this.nodesIndex[edge.source];\n            target = this.nodesIndex[edge.target];\n            attr = edge.source+edge.target;\n            if(!map[attr]) map[attr] = map[edge.target+edge.source] = {counter:0,source:edge.source};\n\n            edge.curveCount = map[attr].counter;\n            map[attr].counter++;\n            edge.curveOrder = edge.source == map[attr].source;\n        }.bind(this));\n    }\n\n    /**\n     * add nodes\n     * @param nodes\n     */\n    addNode(nodes) {\n        nodes = nodes || [];\n\n        if(nodes.length == 0) return;\n\n        if (!utils.isArray(nodes)) nodes = [nodes];\n\n        var node;\n        for (var i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            if (!node.id) node.id = utils.uuid();\n            if (this.nodesIndex[node.id]) throw 'node has existed.'\n            this.nodes.push(node);\n            this.nodesIndex[node.id] = node;\n        }\n\n        var ids = nodes.map(function (e) {return e.id});\n        this.emit('add',['node',ids]);\n    }\n\n\n    /**\n     * remove node\n     * @param nodeid\n     */\n    removeNode(nodeid) {\n        if (!nodeid || !this.nodesIndex[nodeid]) return;\n\n        var nodes = this.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].id == nodeid) {\n                nodes.splice(i, 1);\n                break\n            }\n        }\n        var edges;\n        edges = this.inEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        edges = this.outEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        this.nodesIndex[nodeid] = null;\n        this.inEdgesIndex[nodeid] = null;\n        this.outEdgesIndex[nodeid] = null;\n\n        this.emit('remove',['node',nodeid]);\n\n    }\n\n\n    /**\n     * add edges ,\n     * @param edges\n     */\n    addEdge(edges) {\n        edges = edges || [];\n\n        if(edges.length  == 0) return;\n\n        if (!utils.isArray(edges)) edges = [edges];\n\n        var edge;\n        for (var i = 0; i < edges.length; i++) {\n            edge = edges[i];\n            if (!edge.id) edge.id = utils.uuid();\n            if (this.edgesIndex[edge.id]) throw 'edge has existed.';\n            if (!edge.source || !this.nodesIndex[edge.source + '']) throw 'some edge has not source id or not a node of the id';\n            if (!edge.target || !this.nodesIndex[edge.target + '']) throw 'some edge has not target id or not a node of the id';\n\n            this.edges.push(edge);\n            this.edgesIndex[edge.id] = edge;\n\n            edge.source += '';\n            edge.target += '';\n\n            this.inEdgesIndex[edge.target] = this.inEdgesIndex[edge.target] || [];\n            this.inEdgesIndex[edge.target].push(edge.id);\n\n            this.outEdgesIndex[edge.source] = this.outEdgesIndex[edge.source] || [];\n            this.outEdgesIndex[edge.source].push(edge.id);\n        }\n\n        var ids = edges.map(function (e) {return e.id});\n        this.emit('add',['edge',ids]);\n    }\n\n\n    removeEdge(edgeid) {\n        if (!edgeid || !this.edgesIndex[edgeid]) return;\n\n        var edge = this.edgesIndex[edgeid], edges;\n        var outEdgesIndex, inEdgesIndex;\n\n\n        outEdgesIndex = this.outEdgesIndex[edge.source];\n        if (outEdgesIndex.length > 0) {\n            for (var i = 0; i < outEdgesIndex.length; i++) {\n                if (outEdgesIndex[i] == edgeid) {\n                    outEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        inEdgesIndex = this.inEdgesIndex[edge.target];\n        if (inEdgesIndex.length > 0) {\n            for (var i = 0; i < inEdgesIndex.length; i++) {\n                if (inEdgesIndex[i] == edgeid) {\n                    inEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n\n        edges = this.edges;\n        for (var i = 0; i < edges.length; i++) {\n            if (edges[i].id == edgeid) {\n                edges.splice(i, 1);\n                break;\n            }\n        }\n\n        this.edgesIndex[edgeid] = null;\n        this.emit('remove',['edge',edgeid]);\n    }\n\n    getNodes(){\n        return this.nodes;\n    }\n\n    setNodeData(id,obj){\n        var node = this.nodesIndex[id];\n\n        var updatePos = false;\n        if(obj.hasOwnProperty('x') || obj.hasOwnProperty('y')) updatePos = true;\n\n        for(var attr in obj) node[attr] = obj[attr];\n\n        this.emit('change',['node',id]);\n        if(updatePos){\n            this.inEdgesIndex[id] && this.inEdgesIndex[id].length > 0 && this.emit('change',['edge',this.inEdgesIndex[id]]);\n            this.outEdgesIndex[id] && this.outEdgesIndex[id].length > 0 && this.emit('change',['edge',this.outEdgesIndex[id]]);\n        }\n    }\n\n    updateNodeQuad(id,oldpos){\n        var nodes = this.quad.point(oldpos.x,oldpos.y);\n        if(nodes.length > 0){\n            for(var i = 0,len = nodes.length;i<len;i++){\n                if(nodes[i].id == id){\n                    nodes.splice(i,1);\n                    break;\n                }\n            }\n            this.quad.insert(this.nodesIndex[id],this.quad.root);\n        }\n    }\n}\n\nexport default Graph;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Graph.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport util from '../../util'\nimport mat3 from '../../base/Matrix'\nimport EventEmitter from '../../base/EventEmitter'\nimport TextureLoader from './TextureLoader'\nimport TextureText from './TextureText'\nimport TextureIcon from './TextureIcon'\nimport initEvent from '../../core/Event'\n\nclass WebGLRender extends EventEmitter{\n    constructor(context,config) {\n        super();\n\n        this.context = context;\n        this.config = config;\n\n        this.container = config.container;\n        this.graph = context.graph;\n        this.needUpdate = true;\n\n        this.sampleRatio = 1.5;\n\n        this.initRender();\n        this.initGraphChangeEvent();\n\n        this.initTexture = false;\n        this.textureLoader = new TextureLoader(this.gl);\n        this.textureLoader.on('load',this.textureUpdate.bind(this));\n\n        this.initIconTexture();\n\n        this.textureText = new TextureText(this.gl);\n        this.initTextTexture();\n\n        this.projectMatrix = null;\n\n        this.camera = {\n            scale:1,\n            position:{\n                x:0,y:0\n            },\n            rotation:0\n        };\n\n        //cache\n        this.renderType = {\n            node: {index:{},type:{},cache:false},\n            nodeLabel: {index:{},type:{},cache:false},\n            edge: {index:{},type:{},cache:false},\n            edgeLabel: {index:{},type:{},cache:false}\n        };\n        initEvent.call(this);\n\n    }\n    //render\n    render() {\n        // debugger\n\n        this.resizeCanvas();\n\n        var gl = this.gl;\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        if(!this.initTexture){\n            var imgs = {};\n            var nodes = this.graph.nodes;\n            nodes.forEach(function (node) {\n                node.img && (imgs[node.img] = true);\n            });\n\n            this.textureLoader.loadImgs(Object.keys(imgs));\n            this.initTexture = true;\n        }\n\n        // console.time('render')\n\n        // console.time('renderEdge');\n        this.config.renderEdge && this.renderEdge();\n        // console.timeEnd('renderEdge');\n\n        // console.time('renderEdgeLabel');\n        this.config.renderEdge && this.config.renderEdgeLabel && this.renderEdgeLabel();\n        // console.timeEnd('renderEdgeLabel');\n\n        // console.time('renderNode');\n        this.config.renderNode && this.renderNode();\n        // console.timeEnd('renderNode');\n\n        // console.time('renderNodeLabel');\n        this.config.renderNode && this.config.renderNodeLabel && this.renderNodeLabel();\n        // console.timeEnd('renderNodeLabel');\n\n\n        // console.timeEnd('render')\n\n\n        this.needUpdate = false;\n    }\n    renderNode(){\n        // debugger\n\n        this.createRenderCache('node',this.graph.nodes,function (data) {\n            return {\n                data:data,\n                textureLoader:this.textureLoader,\n                textureIcon:this.textureIcon\n            }\n        }.bind(this));\n\n        this.renderCacheData('node',this.graph.nodes);\n    }\n    renderNodeLabel(){\n\n        this.createRenderCache('nodeLabel',this.graph.nodes,function (data) {\n            return {\n                data:data,\n                textureText:this.textureText\n            }\n        }.bind(this));\n\n        this.renderCacheData('nodeLabel',this.graph.nodes);\n\n    }\n    renderEdge(){\n        this.createRenderCache('edge',this.graph.edges,function (data) {\n            return {\n                data:data,\n                source:this.graph.nodesIndex[data.source],\n                target:this.graph.nodesIndex[data.target]\n            }\n        }.bind(this));\n\n        this.renderCacheData('edge',this.graph.edges);\n    }\n    renderEdgeLabel(){\n\n        this.createRenderCache('edgeLabel',this.graph.edges,function (data) {\n            return {\n                data:data,\n                source:this.graph.nodesIndex[data.source],\n                target:this.graph.nodesIndex[data.target],\n                textureText:this.textureText\n            }\n        }.bind(this));\n\n        this.renderCacheData('edgeLabel',this.graph.edges);\n\n    }\n\n    clearClusterCacheCounter(type) {\n        var renderType = this.renderType[type].type;\n        var layers;\n        for (var e in renderType){\n            layers  = renderType[e].layers;\n            for(var name in layers){\n                layers[name].counter = 0;\n            }\n        }\n    }\n    fixClusterCacheLength(type){\n        var renderType = this.renderType[type].type;\n        var layers;\n        for (var e in renderType){\n            layers  = renderType[e].layers;\n            for(var name in layers){\n                layers[name].data.length = layers[name].counter;\n            }\n        }\n    }\n\n    createRenderCache(rootType,data,argFn){\n        var nodeData, cacheIndex;\n        var start, offset, layers, type;\n\n        var rootType1 = this.renderType[rootType].type;\n\n        if (!this.renderType[rootType].cache) {\n            this.clearClusterCacheCounter(rootType);\n\n            data.forEach(function (e) {\n\n                type = e.type || 'default';\n                if (!rootType1[type]) this.initRenderLayers(rootType, type);\n\n                //cache info\n                cacheIndex = this.renderType[rootType].index[e.id] = this.renderType[rootType].index[e.id] || {};\n                cacheIndex.type = type;\n                cacheIndex.start = {};//layer start\n\n                layers = rootType1[type].layers;\n                for (var name in layers) {\n\n                    start = layers[name].counter;\n                    offset = 0;\n\n                    nodeData = layers[name].render.getRenderData(argFn(e));\n\n                    // no data\n                    if (!nodeData || nodeData.length == 0) {\n                        // cacheIndex.start[name] = null;\n                        continue;\n                    }\n\n                    nodeData.forEach(function (data) {\n                        layers[name].data[start + offset] = data;\n                        offset++;\n                    }.bind(this));\n\n                    //cache info\n                    cacheIndex.start[name] = start;\n\n                    layers[name].counter += offset;\n                }\n            }.bind(this));\n\n            this.fixClusterCacheLength(rootType);\n\n            this.renderType[rootType].cache = true;\n        }\n    }\n    renderCacheData(rootType,data){\n        var renderType, type, layers, camMatrixInvert, orders, cacheIndex;\n\n        camMatrixInvert = this.getCameraMatrix(true);\n\n        renderType = this.renderType[rootType].type;\n\n        for (type in renderType) {\n\n            layers = renderType[type].layers;\n\n            renderType[type].order.forEach(function (name) {\n\n                if (layers[name].data.length > 0) {\n\n                    this.gl.useProgram(layers[name].program);\n\n                    layers[name].render.render({\n                        gl: this.gl,\n                        program: layers[name].program,\n                        data: layers[name].data,\n                        matrix: mat3.multiMatrix([camMatrixInvert, this.projectMatrix]),\n                        camera: this.camera,\n                        sampleRatio: this.sampleRatio,\n                        textureLoader: this.textureLoader,\n                    });\n\n                }\n\n            }.bind(this));\n        }\n\n    }\n\n    initRender() {\n        this.gl = this.container.getContext('experimental-webgl') || this.container.getContext('webgl');\n\n        if (!this.gl) {\n            throw 'webGl';\n        }\n\n        this.gl.getExtension('OES_standard_derivatives');\n\n        this.resizeCanvas();\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.clearColor(1.0, 1.0, 1.0, 1);\n    }\n    initGraphChangeEvent(){\n        var _this = this;\n        this.graph.on('change',function (type,ids) {\n            if(type =='node'){\n                // console.time('updateNode');\n                _this.config.renderNode && _this.updateNodeRenderData(ids);\n                // console.timeEnd('updateNode');\n                // console.time('updateNodeLabel');\n                _this.config.renderNode && _this.config.renderNodeLabel && _this.updateNodeLabelRenderData(ids);\n                // console.timeEnd('updateNodeLabel');\n            }else if(type == 'edge'){\n                // console.time('updateEdge');\n                _this.config.renderEdge && _this.updateEdgeRenderData(ids);\n                // console.timeEnd('updateEdge');\n                // console.time('updateEdgeLabel');\n                _this.config.renderEdge && _this.config.renderEdgeLabel && _this.updateEdgeLabelRenderData(ids);\n                // console.timeEnd('updateEdgeLabel');\n            }\n\n        });\n\n        this.graph.on('reset',function () {\n            _this.clearRenderCache()\n        });\n\n\n        this.graph.on('add',function (type,ids) {\n            if(!util.isArray(ids)) ids = [ids];\n\n            var objs = null;\n\n            if(type == 'node') objs = ids.map(function (e) {return _this.graph.nodesIndex[e]});\n            else objs = ids.map(function (e) {return _this.graph.edgesIndex[e]});\n\n            _this.textureText.addTexts(getAddText(objs));\n            _this.clearRenderCache();\n        });\n\n        this.graph.on('remove',function (type,ids) {\n            _this.clearRenderCache();\n        });\n\n\n        function getAddText(objs) {\n            var text = '';\n            objs.forEach(function (e) {\n                e.label && (text += e.label);\n            });\n\n            return text;\n        }\n\n    }\n    initTextTexture(){\n        var nodes = this.graph.nodes;\n        var edges = this.graph.edges;\n\n        var map = {};\n        var texts = [];\n        nodes.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        edges.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        this.textureText.createCanvasImg(texts);\n    }\n    initRenderLayers(root, type) {\n        var renderType = type;\n        var typeRoot = WebGLRender[root];\n\n        var renderRoot;\n\n        renderRoot= this.renderType[root].type;\n\n\n\n        if(!typeRoot[type]){\n            console.error(`${root}: no type[${type}],use default`);\n            type = 'default';\n        }\n\n        var temp,layersConfig;\n        if(!renderRoot[renderType]){\n\n            layersConfig = typeRoot[type];\n            if(util.isFunction(layersConfig)){\n                layersConfig = {\n                    layers:[\n                        {name:'base',layer:layersConfig}\n                    ]\n                }\n            }\n            renderRoot[renderType] = {layers:{},order:[]};\n            layersConfig.layers.forEach(function (config) {\n                temp = {};\n                temp.counter = 0;\n                temp.data = [];\n                temp.render = new config.layer();\n                temp.program = util.loadProgram(this.gl, [\n                    util.loadShader(this.gl, temp.render.shaderVert, this.gl.VERTEX_SHADER),\n                    util.loadShader(this.gl, temp.render.shaderFrag, this.gl.FRAGMENT_SHADER)\n                ]);\n                renderRoot[renderType].layers[config.name] = temp;\n                renderRoot[renderType].order.push(config.name);\n            }.bind(this));\n\n        }\n    }\n    initIconTexture(){\n\n        var nodes = this.graph.nodes;\n\n        var map = {};\n        var icons = [];\n        nodes.forEach(function (e) {\n            if(e.icon){\n                if(!map[e.icon]){\n                    map[e.icon] = true;\n                    icons.push(e.icon);\n                }\n            }\n        });\n\n        this.textureIcon = new TextureIcon(this.gl,this.config);\n\n        this.textureIcon.createIcons(icons);\n\n        this.textureIcon.on('load',function () {\n            this.clearRenderCache('node');\n        }.bind(this))\n    }\n\n    getCameraMatrix(isInvert){\n        var mat = mat3.multiMatrix([\n            mat3.matrixFromScale(this.camera.scale,this.camera.scale),\n            mat3.matrixFromRotation(this.camera.rotation),\n            mat3.matrixFromTranslate(this.camera.position.x,this.camera.position.y)\n        ]);\n        return isInvert  ? mat3.invert(mat) : mat;\n    }\n    resizeCanvas() {\n        var canvas = this.gl.canvas;\n        var multiplier = this.sampleRatio;\n        var width = canvas.clientWidth * multiplier | 0;\n        var height = canvas.clientHeight * multiplier | 0;\n        if (canvas.width !== width || canvas.height !== height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n\n        this.projectMatrix = mat3.matrixFromScale(2/(canvas.clientWidth),2/(canvas.clientHeight));\n        this.gl.viewport(0, 0,canvas.width, canvas.height);\n\n    }\n\n    graphToDomPos(pos){\n        var canvas = this.gl.canvas;\n        var camPos =  mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix(true));\n        return {x:camPos[0]+canvas.clientWidth/2,y:canvas.clientHeight/2-camPos[1]};\n    }\n    toCameraPos(pos){\n        var canvas = this.gl.canvas;\n        return {x:pos.x-canvas.clientWidth/2,y:canvas.clientHeight/2-pos.y};\n    }\n    toGraphPos(pos,isVector){\n        var p = isVector ?\n            mat3.rotateVector([pos.x,pos.y],this.getCameraMatrix())\n            :\n            mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix());\n        return {x:p[0],y:p[1]};\n    }\n\n    forceRender(){\n        this.needUpdate = true;\n    }\n    zoomTo(ratio,x,y){\n\n        var scale = this.camera.scale;\n\n        var newscale = ratio * scale;\n        if(newscale < this.config.zoomMin) newscale = this.config.zoomMin;\n        if(newscale > this.config.zoomMax) newscale = this.config.zoomMax;\n\n        if (x != null && y != null) {\n            var offset = mat3.rotateVector([x * (newscale - scale)/scale, y *(newscale - scale)/scale], this.getCameraMatrix());\n            this.camera.position.x -= offset[0] ;\n            this.camera.position.y -= offset[1];\n        }\n\n        this.camera.scale = newscale;\n    }\n    textureUpdate(url){\n        var nodes = this.graph.nodes;\n        nodes.forEach(function (e) {\n            if(e.img && e.img == url) this.updateNodeRenderData(e.id);\n        }.bind(this));\n    }\n\n    //cache update\n    clearRenderCache(rootType){\n        if(rootType&& this.renderType[rootType]){\n            this.forceRender();\n            this.renderType[rootType].cache = false;\n        }else if(!rootType){\n            this.forceRender();\n            this.renderType.node.cache = false;\n            this.renderType.nodeLabel.cache = false;\n            this.renderType.edge.cache = false;\n            this.renderType.edgeLabel.cache = false;\n        }\n    }\n    updateRenderData(rootType,id,argFn){\n        if(!this.renderType[rootType].cache) return;\n\n        var cache = this.renderType[rootType].index[id];//\n        var type = cache.type;\n        var start = cache.start;\n\n        var renderType = this.renderType[rootType].type[type];\n\n        for(var layer in renderType.layers){\n            var renderData = renderType.layers[layer].render.getRenderData(argFn());\n\n\n            if (\n                (!renderData || renderData.length == 0)\n                ||\n                (renderData && renderData.length > 0 && start[layer] === null)\n            ) continue;\n\n            renderData.forEach(function (e,i) {\n                renderType.layers[layer].data[start[layer]+i] = e;\n            });\n        }\n    }\n    updateNodeRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('node',id,function () {\n                return {\n                    data:this.graph.nodesIndex[id],\n                    textureLoader:this.textureLoader,\n                    textureIcon:this.textureIcon\n                }\n            }.bind(this));\n\n        }.bind(this));\n\n    }\n    updateNodeLabelRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('nodeLabel',id,function () {\n                return {\n                    data:this.graph.nodesIndex[id],\n                    textureText:this.textureText\n                }\n            }.bind(this));\n        }.bind(this));\n\n    }\n    updateEdgeRenderData(ids){\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('edge',id,function () {\n                return {\n                    data:this.graph.edgesIndex[id],\n                    source:this.graph.nodesIndex[this.graph.edgesIndex[id].source],\n                    target:this.graph.nodesIndex[this.graph.edgesIndex[id].target]\n                }\n            }.bind(this));\n        }.bind(this));\n    }\n    updateEdgeLabelRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('edgeLabel',id,function () {\n                return {\n                    data:this.graph.edgesIndex[id],\n                    source:this.graph.nodesIndex[this.graph.edgesIndex[id].source],\n                    target:this.graph.nodesIndex[this.graph.edgesIndex[id].target],\n                    textureText:this.textureText\n                }\n            }.bind(this));\n        }.bind(this));\n\n    }\n\n\n\n}\n\nexport default WebGLRender;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/render.js","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/edge-label-vert.glsl\n// module id = 7\n// module chunks = 0","/**\n * Created by chengang on 17-3-29.\n */\n\nimport util from '../util'\n\n'use strict';\n\n\nvar defaultConfig = {\n    maxLevel:2,\n};\n\nfunction indexN(x,y,rect) {\n    var x0 = rect.x,y0 = rect.y, w = rect.w, h = rect.h;\n    var right = x > (x0+w/2);\n    var top = y > (y0+h/2);\n    return top << 1 | right;\n}\n\nfunction indexNs(pointRect,rect) {\n    var points = [\n        [pointRect.x,pointRect.y],\n        [pointRect.x+pointRect.w/2,pointRect.y],\n        [pointRect.x,pointRect.y+pointRect.h/2],\n        [pointRect.x+pointRect.w/2,pointRect.y+pointRect.h/2],\n    ];\n    var map = {},n;\n    points.forEach(function (e) {\n        n = indexN(e[0],e[1],rect);\n        map[n] = true;\n    })\n\n    return map;\n}\n\nfunction getIndexRect(index,rect) {\n    var r;\n    switch(index){\n        case 0:\n            r = {x:rect.x,y:rect.y,w:rect.w/2,h:rect.h/2};\n            break;\n        case 1:\n            r = {x:rect.x+rect.w/2,y:rect.y,w:rect.w/2,h:rect.h/2};\n            break;\n        case 2:\n            r = {x:rect.x,y:rect.y+rect.h/2,w:rect.w/2,h:rect.h/2};\n            break;\n        case 3:\n            r = {x:rect.x+rect.w/2,y:rect.y+rect.h/2,w:rect.w/2,h:rect.h/2};\n            break;\n    }\n\n    return r;\n}\n\n\nfunction createNode(level,rect) {\n    return {\n        level:level||0,\n        rect:rect,\n        elements:[],\n        children:null,\n    }\n}\n\nfunction pointRect(n) {\n    return {\n        x: n.x - n.size,\n        y: n.y - n.size,\n        w:n.size*2,\n        h:n.size*2,\n    };\n}\n\nexport  default class Quad{\n    constructor(option){\n        this.option = util.extend(defaultConfig,option||{});\n        this.root =null;\n    }\n\n    index(nodes,option){\n        console.time('quadindex');\n        option = option || {};\n\n        var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n        if(!option.rect){\n            nodes.forEach(function (e) {\n                if(e.x < x0) x0 = e.x;\n                if(e.x > x1) x1 = e.x;\n                if(e.y < y0) y0 = e.y;\n                if(e.y > y1) y1 = e.y;\n            });\n            option.rect = {x:x0,y:y0,w:x1-x0,h:y1-y0};\n        }\n\n\n        this.root = createNode(0,option.rect);\n\n        nodes.forEach(function (e) {\n            this.insert(e,this.root);\n        }.bind(this));\n        console.timeEnd('quadindex');\n\n    }\n\n    insert(data,root){\n        var pointR = pointRect(data);\n        if(root.level < this.option.maxLevel){\n            root.children = root.children || new Array(4);\n            var indexs = indexNs(pointR,root.rect);\n            var e ;\n            for(var i in indexs) {\n                e = +i;\n                if(!root.children[e]) root.children[e] = createNode(root.level+1,getIndexRect(e,root.rect));\n                this.insert(data,root.children[e]);\n            }\n        }else {\n            root.elements.push({x:data.x,y:data.y,id:data.id});\n        }\n    }\n\n    point(x,y){\n        return this._point(x,y,this.root);\n    }\n\n    _point(x,y,root){\n        if(root.children){\n            var index = indexN(x,y,root.rect);\n            return  root.children[index] ?  this._point(x,y,root.children[index]) : [];\n        }else {\n            return root.elements;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/Quad.js","/**\n * Created by chengang on 17-4-6.\n */\n\n'use strict';\n\nimport Graph from './Graph'\nimport WebGLRender from  '../render/webgl/render'\nimport utils from '../util'\n\nimport Tween from '../animation/tween'\nimport Selection from './Selection'\nimport layout from '../layout/index'\nimport defaultConfig from './config'\n\nexport  default  class Core{\n\n    static layout = layout;\n\n    constructor(option){\n        option = option || {};\n\n        this.config = utils.extend(defaultConfig,option.config || {});\n\n        this.graph  = new Graph({\n            nodes:option.nodes,\n            edges:option.edges,\n        });\n\n        this.container = option.container;\n\n        this.canvas = {};\n        this.initCanvas();\n\n        this.render = new WebGLRender(\n            this,\n            utils.extend({container:this.canvas.render},this.config)\n        );\n\n        this.selection = new Selection(this.canvas.mouse,this);\n\n        this.on = this.render.on.bind(this.render);\n        this.off = this.render.off.bind(this.render);\n\n        this.makeLayout(option.layout || 'preset');\n\n        this._start();\n\n        this._initEvent();\n    }\n\n    initCanvas(){\n\n        this.container.style.position = 'relative';\n\n        this.canvas.render =  this._createCanvas();\n        this.container.appendChild(this.canvas.render);\n\n        this.container.oncontextmenu = function (e) {\n          e.preventDefault();\n        };\n\n        this.canvas.mouse =  this._createCanvas();\n        this.canvas.mouse.style.display = 'none';\n        this.canvas.mouse.style.cursor = 'cell';\n\n        this.container.appendChild(this.canvas.mouse);\n    }\n\n    _createCanvas(){\n        var canvas = document.createElement('canvas');\n        canvas.style.position = 'absolute';\n        canvas.style.left = '0px';\n        canvas.style.top = '0px';\n        canvas.width = this.container.clientWidth;\n        canvas.height = this.container.clientHeight;\n        canvas.style.width = '100%';\n        canvas.style.height = '100%';\n\n        return canvas;\n    }\n\n    _start(){\n        var _this = this;\n        var frames = state();\n        function state() {\n            var n = -1,start = 0;\n            return function (time) {\n                n++;\n                time = time/1000;\n                if((time - start) > 1){\n                    // console.log(n);\n                    n = -1;\n                    start = time;\n                }\n\n            }\n        }\n        function render(time) {\n            _this._render();\n            frames(time);\n            requestAnimationFrame(render)\n        }\n        requestAnimationFrame(render);\n    }\n\n    _render(){\n        this.resize();\n\n        if(this.render && this.render.needUpdate){\n            // console.time('render')\n            // debugger\n            this.render.render();\n            // console.timeEnd('render')\n        }\n\n\n    }\n\n\n    _initEvent(){\n        var _this = this;\n        this.render.on('nodeclick',function (node,e) {\n            if(!_this.selection.isSelected(node))\n                _this.selection.select(node);\n        });\n    }\n\n    resize(){\n        if(this.canvas.mouse.width != this.container.clientWidth ||this.canvas.mouse.height != this.container.clientHeight ){\n            this.canvas.mouse.width = this.container.clientWidth;\n            this.canvas.mouse.height = this.container.clientHeight;\n            this.render.forceRender();\n        }\n    }\n\n\n\n    makeLayout(type){\n\n        var _this = this;\n        var layout,data;\n        var layoutConfig = Core.layout;\n\n        if (type == 'preset') {\n            this.graph.nodes.forEach(function (e) {\n                if (!('x' in e)) e.x = Math.random() * _this.render.gl.clientWidth;\n                if (!('y' in e)) e.y = Math.random() * _this.render.gl.clientWidth;\n            });\n\n            this.graph.emit('reset');\n        } else if (layout = layoutConfig[type]) {\n\n            layout = new layoutConfig[type]();\n            data = layout.layout(this.graph);\n\n            new Tween(this.graph.nodes).to(data).duration(2000).on('change', function (t) {\n                _this.graph.emit('reset');\n            })\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","/**\n * Created by chengang on 17-3-28.\n */\n\n\nimport WebGLRender from './webgl/render'\nWebGLRender.node = {};\nWebGLRender.edge = {};\nWebGLRender.nodeLabel = {};\nWebGLRender.edgeLabel = {};\n\nimport node from './webgl/node/default/Node'\nimport rect from './webgl/node/rect/Rect'\n// import node from './webgl/node/index'\nWebGLRender.node.default = node;\nWebGLRender.node.rect = rect;\n\n\nimport edge from './webgl/edge/default'\nimport curve from './webgl/edge/curve/curve'\nWebGLRender.edge.default = edge;\nWebGLRender.edge.curve = curve;\n\nimport NodeLabel from './webgl/label/NodeLabel'\nWebGLRender.nodeLabel.default = NodeLabel;\nWebGLRender.nodeLabel.rect = NodeLabel;\n\n\nimport EdgeLabel from './webgl/label/EdgeLabel'\nimport curveLabel from './webgl/label/curveLabel/curveLabel'\nWebGLRender.edgeLabel.default = EdgeLabel;\nWebGLRender.edgeLabel.curve = curveLabel;\n\n\nexport {\n    WebGLRender\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nimport EventEmitter from '../base/EventEmitter';\nimport timer from '../base/timer'\n\n/**\n * from d3-interpolate\n */\nfunction interpolateNumber(a, b) {\n    return a = +a, b -= a, function(t) {\n        return a + b * t;\n    };\n}\n\n\n\nexport  default class Tween extends  EventEmitter{\n\n    static list = [];\n\n    constructor(objs){\n        super();\n\n        if(!Array.isArray(objs)) objs = [objs];\n        this.objs = objs;\n        this.interpolates = [];\n        this.timer = timer(this.timerHandle.bind(this));\n        this._duration = 0;\n\n        // Tween.list.push(this);\n    }\n\n\n    timerHandle(elapsed) {\n        var t = elapsed / this._duration;\n\n        t = Math.min(t,1);\n        var obj,attr,attrInterpolater;\n        for(var i = 0,len = Math.min(this.interpolates.length,this.objs.length);i< len;i++){\n            obj = this.objs[i];\n            attrInterpolater = this.interpolates[i];\n            for(attr in attrInterpolater){\n                obj[attr] = attrInterpolater[attr](t);\n            }\n        }\n\n        this.emit('change',[t]);\n\n        if(elapsed >=this._duration) this.stop();\n\n    }\n\n\n    duration(time) {\n        this._duration = time;\n        return this;\n    }\n\n    to(toObjs) {\n        if(!Array.isArray(toObjs)) toObjs = [toObjs];\n\n        var obj,attr,attrInterpolater;\n        for(var i = 0,len = Math.min(toObjs.length,this.objs.length);i<len;i++){\n            obj = toObjs[i];\n            attrInterpolater = {};\n            for(attr in obj){\n                attrInterpolater[attr] = interpolateNumber(this.objs[i][attr],obj[attr]);\n            }\n            this.interpolates.push(attrInterpolater);\n        }\n\n        return this;\n\n    };\n\n    stop() {\n        this.timer.stop();\n        this.timer = null;\n        this.objs = null;\n        this.interpolates = null\n    }\n\n    static remove(obj){\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/animation/tween.js","/**\n *from d3-timer\n */\n\n'use strict';\n\n\nvar frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : function (f) {\n            setTimeout(f, 17);\n        };//\n\nexport function now() {\n    return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n    clockNow = 0;\n}\n\nexport function Timer() {\n    this._call = this._time = this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n    constructor: Timer,\n    restart: function (callback, delay, time) {\n        if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n        time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n        if (!this._next && taskTail !== this) {\n            if (taskTail) taskTail._next = this;\n            else taskHead = this;\n            taskTail = this;\n        }\n        this._call = callback;\n        this._time = time;\n        sleep();\n    },\n    stop: function () {\n        if (this._call) {\n            this._call = null;\n            this._time = Infinity;\n            sleep();\n        }\n    }\n};\n\nexport default  function timer(callback, delay, time) {\n    var t = new Timer;\n    t.restart(callback, delay, time);\n    return t;\n}\n\nexport function timerFlush() {\n    now(); // Get the current time, if not already set.\n    ++frame; // Pretend weve set an alarm, if we havent already.\n    var t = taskHead, e;\n    while (t) {\n        if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n        t = t._next;\n    }\n    --frame;\n}\n\nfunction wake() {\n    clockNow = (clockLast = clock.now()) + clockSkew;\n    frame = timeout = 0;\n    try {\n        timerFlush();\n    } finally {\n        frame = 0;\n        nap();\n        clockNow = 0;\n    }\n}\n\nfunction poke() {\n    var now = clock.now(), delay = now - clockLast;\n    if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n    var t0, t1 = taskHead, t2, time = Infinity;\n    while (t1) {\n        if (t1._call) {\n            if (time > t1._time) time = t1._time;\n            t0 = t1, t1 = t1._next;\n        } else {\n            t2 = t1._next, t1._next = null;\n            t1 = t0 ? t0._next = t2 : taskHead = t2;\n        }\n    }\n    taskTail = t0;\n    sleep(time);\n}\n\nfunction sleep(time) {\n    if (frame) return; // Soonest alarm already set, or will be.\n    if (timeout) timeout = clearTimeout(timeout);\n    var delay = time - clockNow;\n    if (delay > 24) {\n        if (time < Infinity) timeout = setTimeout(wake, delay);\n        if (interval) interval = clearInterval(interval);\n    } else {\n        if (!interval) interval = setInterval(poke, pokeDelay);\n        frame = 1, setFrame(wake);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/timer.js","/**\n * Created by chengang on 17-4-19.\n */\n\n'use strict';\n\nimport  EventEmitter from '../base/EventEmitter'\nimport  utils from '../util'\n\nexport default class Selection extends EventEmitter{\n    constructor(canvas,context){\n        super();\n\n        this.context = context;\n\n        this.canvas = canvas;\n        this.ctx = this.canvas.getContext('2d');\n\n        this.canvas.addEventListener('mousedown',this.mouseDown.bind(this));\n\n        this.rect = {\n            x:0,\n            y:0,\n            w:0,\n            h:0\n        };\n\n        this.data = [];\n\n        this.initGraphEvent();\n    }\n\n    enable(){\n        this.canvas.style.display = 'block';\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n\n    renderRect(){\n        var rect = this.rect;\n        var ctx = this.ctx;\n        ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n        ctx.fillStyle = 'rgba(58, 75, 89, 0.3)';\n        ctx.strokeStyle=\"#4b7598\";\n        ctx.beginPath();\n        ctx.rect(rect.x,rect.y,rect.w,rect.h);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n    }\n\n    disable(){\n        this.canvas.style.display = 'none';\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n\n    initGraphEvent(){\n        var _this = this;\n        this.context.graph.on('remove',function (type,id) {\n            if(type == 'node'){\n                for(var i = 0;i<_this.data.length;i++){\n                    if(_this.data[i].id == id){\n                        _this.data.splice(i,1);\n                        break;\n                    }\n                }\n            }\n        });\n\n        this.context.graph.on('reset',function () {\n            _this.data = [];\n        })\n    }\n\n    mouseDown(e){\n        var _this = this;\n\n        this.rect.x = e.offsetX;\n        this.rect.y = e.offsetY;\n\n        document.addEventListener('mousemove',mouseMove);\n        document.addEventListener('mouseup',mouseUp);\n        function mouseMove(e) {\n            _this.rect.w = e.offsetX - _this.rect.x;\n            _this.rect.h = e.offsetY - _this.rect.y;\n\n            _this.renderRect();\n        }\n        function mouseUp(e) {\n            document.removeEventListener('mousemove',mouseMove);\n            document.removeEventListener('mouseup',mouseUp);\n            var data = _this.filter(_this.ctx);\n\n            _this.disable();\n            _this.select(data);\n            _this.emit('selectend',[data]);\n        }\n    }\n\n    select(nodes){\n        var _this = this;\n        if(!utils.isArray(nodes)) nodes = [nodes];\n\n        _this.data.forEach(function (e) {\n            if(_this.context.graph.nodesIndex[e.id])\n                _this.context.graph.setNodeData(e.id,{selected:false});\n        });\n\n        nodes.forEach(function (node) {\n            _this.context.graph.setNodeData(node.id,{selected:true});\n        });\n\n        _this.data = nodes;\n    }\n\n    unSelect(nodes){\n\n        if(this.data.length == 0 || !nodes) return;\n\n        var _this = this;\n        if(!utils.isArray(nodes)) nodes = [nodes];\n\n        var map = {};\n\n        nodes.forEach(function (node) {\n            map[node.id] = true;\n        });\n\n        var newSelected = [];\n        this.data.forEach(function (node) {\n            if(map[node.id]) _this.context.graph.setNodeData(node.id,{selected:false});\n            else newSelected.push(node);\n        });\n\n        this.data = newSelected;\n    }\n\n    getSelection(){\n        return this.data.slice();\n    }\n\n\n    isSelected(node){\n        for(var i = 0;i< this.data.length;i++){\n            if(this.data[i].id == node.id){\n                return true\n            }\n        }\n        return false;\n    }\n\n    filter(ctx){\n        var nodes = this.context.graph.nodes;\n        var selects = [];\n        var domPos;\n        nodes.forEach(function (node) {\n            domPos = this.context.render.graphToDomPos({x:node.x,y:node.y});\n            if(ctx.isPointInPath(domPos.x,domPos.y)) selects.push(node);\n        }.bind(this));\n\n        return selects;\n    }\n\n    delete(){\n        var _this = this;\n        var data = this.data;\n        this.data = [];\n        data.forEach(function (node) {\n            _this.context.graph.removeNode(node.id);\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Selection.js","/**\n * Created by chengang on 17-4-12.\n */\n\n'use strict';\n\nexport default {\n    zoomRatio:1.2,\n    zoomMin:0.2,\n    zoomMax:5,\n\n    renderNode:true,\n    renderNodeLabel:true,\n    renderEdge:true,\n    renderEdgeLabel:true,\n\n    textureIconWidth:512,\n    textureIconHeight:512,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","/**\n * Created by chengang on 17-2-20.\n */\nfunction CircularLayout() {\n    this.nodes = null;\n    // this.links = null;\n     this.posSet = null;\n     this.depthPosSet = null;\n     this.drawnBiComps =null;\n     this.bc = null;\n     this.nodeHeights = {};\n     this.node2BiComp = {};\n\n     this.width = 60;\n\n}\n\nvar p = CircularLayout.prototype;\n\n//\np.layout = function (graph) {\n    this.init(graph);\n\n    this.posSet = new Array(this.nodes.length);\n    this.depthPosSet = new Array(this.nodes.length);\n\n    this.bc = this.createBicconnects();\n    // var test = this.bc.filter(function (e) {\n    //     return e.length > 3;\n    // });\n    this.__layout(this.bc);\n    return this.nodes.map(function (e) {\n        return {x:e.x,y:e.y};\n    })\n};\np.init = function (graph) {\n    var oldNodes = graph.nodes,oldLinks = graph.edges;\n    var tempNodes = [],map = {},temp;\n    oldNodes.forEach(function (e,i) {\n        temp = {\n            id:e.id,\n            _index:i\n        };\n        tempNodes.push(temp);\n        map[temp.id] = temp;\n    })\n\n    var s,t;\n    oldLinks.forEach(function (e,i) {\n        s = map[e.source];\n        t = map[e.target];\n        s.links = s.links || [];\n        s.links.push(t._index);\n\n        t.links = t.links || [];\n        t.links.push(s._index);\n    });\n\n    this.nodes = tempNodes;\n};\np.createBicconnects = function() {\n    var nodes = this.nodes;\n    var states = new Array(this.nodes.length),\n        dfsn = new Array(this.nodes.length),\n        low = new Array(this.nodes.length),\n        edgesStack = [],\n        pre = new Array(this.nodes.length);\n\n    var biComponents = [];\n\n    pre[0] = -1;\n    var num = 0;\n    for (var i = 0; i < this.nodes.length; i++) {\n        states[i] = 0;\n    }\n\n    dfs(0);\n    return biComponents;\n\n    function dfs(current) {\n        states[current] = 1;\n        low[current] = dfsn[current] = ++num;\n\n        var neigh;\n        var neighNodes = nodes[current].links;\n\n        for (var i = 0; i < neighNodes.length; i++) {\n            neigh = neighNodes[i];\n\n            if (states[neigh] == 0) {\n                pre[neigh] = current;\n                edgesStack.push({source: current, target: neigh});\n                dfs(neigh);\n                low[current] = Math.min(low[current], low[neigh]);\n\n                if ((pre[current] == -1 && nodes[current].links.length >= 2) || low[neigh] >= dfsn[current]) {\n//                        var children = nodes[current].links;\n//                        if(children.length >=2){\n                    var singleComponent = [];\n                    var map = {};\n                    singleComponent.push(edgesStack[edgesStack.length - 1].target);\n                    map[edgesStack[edgesStack.length - 1].target] = true;\n                    while (edgesStack[edgesStack.length - 1].source != current) {\n                        var edge = edgesStack.pop();\n                        if (!map[edge.source]) {\n                            singleComponent.push(edge.source);\n                            map[edge.source] = true;\n                        }\n                        if (!map[edge.target]) {\n                            singleComponent.push(edge.target);\n                            map[edge.target] = true;\n                        }\n                    }\n                    edgesStack.pop();\n                    if (!map[current]) {\n                        singleComponent.push(current);\n                        map[current] = true;\n                    }\n                    /*singleComponent.length > 2 && */biComponents.push(singleComponent);\n//                        }\n                }\n//                    states[neigh]\n            } else if (neigh != pre[current]) {\n                low[current] = Math.min(low[current], low[neigh]);\n            }\n        }\n\n\n    }\n};\np.__layout = function(biconncts) {\n\n\n    var max = -1;\n    var maxIndex = null;\n    var nodes = this.nodes;\n\n    biconncts.forEach(function (e, i) {\n        if (e.length > max) {\n            max = e.length;\n            maxIndex = i;\n        }\n    });\n\n    biconncts[maxIndex].forEach(function (e) {\n        nodes[e].delete = true;\n    });\n\n    for (var i = 0; i < biconncts.length; i++)\n        if (biconncts[i].length > 3) {\n            for (var j = 0; j < biconncts[i].length; j++) {\n                this.node2BiComp[biconncts[i][j]] = i;\n            }\n        }\n\n    var bc = biconncts[maxIndex];\n\n    this.drawnBiComps = new Array(bc.length);\n    this.drawnBiComps[maxIndex] = true;\n\n\n\n    var maxSize = bc.length;\n    var radius = (this.width * maxSize) / (Math.PI * 2);\n    var deltaAngle = (2 * Math.PI) / maxSize;\n    var angle = 0;\n\n    var startX = radius | 0;\n    var startY = radius | 0;\n\n\n    bc = this.sortInnerCircle(bc);\n\n    for (var i = 0; i < bc.length; i++) {\n        nodes[bc[i]].test = i;\n        nodes[bc[i]].x = startX + Math.cos(angle) * radius;\n        nodes[bc[i]].y = startY - Math.sin(angle) * radius;\n        this.posSet[bc[i]] = true;\n        angle += deltaAngle;\n    }\n\n    this.SetOuterCircle(maxIndex, radius, startX, startY, -1);\n};\np.sortInnerCircle = function(icNodes) {\n    var greedyNodes = [];\n    var modestNodes = [];\n\n    var forFunct = {};\n\n    for (var i = 0; i < icNodes.length; i++)\n        forFunct[icNodes[i]] = true;\n\n    for (var i = 0; i < icNodes.length; i++) {\n        var tmp = this.NoOfChildren(icNodes[i], forFunct);\n\n        if (tmp > 4)\n            greedyNodes.push(icNodes[i]);\n        else\n            modestNodes.push(icNodes[i]);\n    }\n\n    var toReturn = new Array(icNodes.length);\n    var gNo = greedyNodes.length;\n    var mNo = modestNodes.length;\n    var deltaM;\n    var deltaG;\n\n    if (gNo == 0) {\n        deltaM = mNo;\n        deltaG = 0;\n    } else if (mNo == 0) {\n        deltaG = gNo;\n        deltaM = 0;\n    } else if (gNo > mNo) {\n        deltaM = 1;\n        deltaG = (gNo / mNo) | 0 ;\n    } else {\n        deltaG = 1;\n        deltaM = (mNo / gNo ) | 0;\n    }\n\n    var x = 0;\n    var i, g, m;\n    for (g = 0, m = 0; g < greedyNodes.length && m < modestNodes.length;) {\n        for (i = 0; i < deltaG && g < greedyNodes.length; i++)\n            toReturn[x++] = greedyNodes[g++];\n\n        for (i = 0; i < deltaM && m < modestNodes.length; i++)\n            toReturn[x++] = modestNodes[m++];\n    }\n\n    while (g < greedyNodes.length)\n        toReturn[x++] = greedyNodes[g++];\n\n    while (m < modestNodes.length)\n        toReturn[x++] = modestNodes[m++];\n    return toReturn;\n\n};\np.NoOfChildren = function(nodeId, outerCircle) {\n    var toReturn = 0;\n    var nodes = this.nodes;\n    var links = nodes[nodeId].links;\n\n    for (var i = 0; i < links.length; i++) {\n        var currNeigh = links[i];\n\n        if (!this.posSet[currNeigh] && !outerCircle[currNeigh])\n            toReturn++;\n    }\n\n    if (toReturn > 7)\n        toReturn = 7;\n\n    return toReturn;\n};\np.SetOuterCircle = function(compIndex, innerCircleRadius, startX, startY, firstTouched) {\n    var nodes = this.nodes;\n    var outerNodesCount = 0;\n    var rnc = 0;\n    var iter;\n    var outerCircle = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        for (var j = 0 ;j< iter.length;j++) {\n            var currNeighbour = iter[j];\n\n            if (!this.posSet[currNeighbour]) {\n                outerNodesCount += (this.NoOfChildren(currNeighbour, outerCircle) + 1);\n                outerCircle[currNeighbour] = true;\n                rnc++;\n            }\n        }\n    }\n\n    var outerRadius = 1.5 * innerCircleRadius;\n\n    // + 5 * nodeHorizontalSpacing;\n    var tryCount = ((2 * Math.PI * outerRadius) / 32) | 0;\n    var outerDeltaAngle = (2 * Math.PI) / tryCount;\n\n    if (tryCount < (1.2 * outerNodesCount)) {\n        outerRadius = (1.2 * 32 * outerNodesCount) / (2 * Math.PI);\n        outerDeltaAngle = (2 * Math.PI) / (1.2 * outerNodesCount);\n        outerNodesCount *= 1.2;\n    } else\n        outerNodesCount = tryCount;\n\n    if ((outerNodesCount > 10) && (firstTouched != -1))\n        outerNodesCount += 5;\n\n    // 5 places on outer circle for connection with other biconn. comp.\n    //System.out.println(\"tryCount = \" + tryCount);\n\n    // setting nodes on outer circle\n    outerNodesCount = outerNodesCount | 0;\n    var outerPositionsTaken = new Array(outerNodesCount);\n    var outerPositionsOwners = new Array(outerNodesCount);\n\n    for (var i = 0; i < outerPositionsTaken.length; i++) {\n        outerPositionsTaken[i] = -1;\n        outerPositionsOwners[i] = -1;\n    }\n\n    var pointX;\n    var pointY;\n    var theAngle;\n    var theAngleHlp;\n    var innerDeltaAngle;\n    innerDeltaAngle = (2 * Math.PI) / this.bc[compIndex].length;\n\n    if (firstTouched != -1) {\n        pointX = nodes[firstTouched].x;\n        pointY = nodes[firstTouched].y;\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n        var idPos = ((theAngle / outerDeltaAngle) | 0) % outerPositionsTaken.length;\n        outerPositionsTaken[idPos] = (theAngle / innerDeltaAngle) | 0;\n        outerPositionsOwners[idPos] = -2; // must not be even moved because that node is coming from another bicomp.\n\n        if (outerPositionsTaken.length > 10) {\n            outerPositionsTaken[(idPos + 1) % outerPositionsTaken.length] = (theAngle / innerDeltaAngle) | 0;\n            outerPositionsTaken[(idPos + 2) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 1 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 2 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n\n            outerPositionsOwners[(idPos + 1) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos + 2) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 1 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 2 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n        }\n    }\n\n    var addedNeighbours = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n        var noOfNeighbours = 0;\n\n        for (var j = 0; j < iter.length;j++) {\n            currentNeighbour = iter[j];\n\n            if (!this.posSet[currentNeighbour]) {\n                noOfNeighbours += (this.NoOfChildren(currentNeighbour, addedNeighbours) + 1);\n                addedNeighbours[currentNeighbour]= true;\n            }\n        }\n\n        if (noOfNeighbours == 0)\n            continue;\n\n        pointX = nodes[this.bc[compIndex][i]].x;\n        pointY = nodes[this.bc[compIndex][i]].y;\n\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n//\t\t\titer = edgesFrom[this.bc[compIndex][i]].iterator();\n\n        var startPos = this.BestFreePositionsForAll(0| ((theAngle / outerDeltaAngle)\n            - (noOfNeighbours / 2.0)), outerPositionsTaken,\n            outerPositionsOwners, noOfNeighbours,\n            0| (theAngle / innerDeltaAngle), startX,\n            startY, outerDeltaAngle, outerRadius,\n            this.bc[compIndex].length);\n        var startAngle = startPos * outerDeltaAngle;\n\n        if (startAngle < 0)\n            continue;\n\n//\t\t\titer = nodes[this.bc[compIndex][i]].iterator();\n\n        for (var m = 0;m< iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour]) {\n                this.posSet[currentNeighbour] = true;\n\n                var holeDepth = this.NoOfChildren(currentNeighbour, addedNeighbours);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    // free but it must not be used (add. space for tree-like struct.)\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n\n\n                nodes[currentNeighbour].x = startX + (Math.cos(startAngle) * outerRadius);\n                nodes[currentNeighbour].y = startY - (Math.sin(startAngle) * outerRadius);\n\n                outerPositionsOwners[(startPos) % outerPositionsOwners.length] = currentNeighbour;\n                outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                startPos++;\n                startAngle += outerDeltaAngle;\n\n                if (startAngle > (2 * Math.PI))\n                    startAngle -= (2 * Math.PI);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n            }\n        }\n    }\n\n    // laying out the rest of nodes\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!addedNeighbours[currentNeighbour]) {\n                continue;\n            }\n\n            pointX = nodes[currentNeighbour].x;\n            pointY = nodes[currentNeighbour].y;\n\n            theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n            theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n\n            if (theAngleHlp > (Math.PI / 2))\n                theAngle = Math.PI - theAngle;\n\n            if (theAngle < 0)\n                theAngle += (2 * Math.PI);\n\n            for (var j = 0; j < this.posSet.length; j++)\n                this.depthPosSet[j] = this.posSet[j];\n\n            this.EachNodeHeight(currentNeighbour);\n\n            this.DFSSetPos(currentNeighbour, theAngle, outerRadius - innerCircleRadius);\n        }\n    }\n};\np.BestFreePositionsForAll = function(idealPosition, outerPositionsTaken, outerPositionsOwners, noOfPos,\n                                 innerCirclePos, startX, startY,\n                                 outerDeltaAngle, outerRadius, innerCSize) {\n    var startPos = idealPosition;\n    var nodes = this.nodes;\n\n    if (idealPosition < 0)\n        startPos += outerPositionsTaken.length;\n\n    var i = 0;\n    var alreadyFound = 0;\n    var startOfAlFound = -1;\n    var found = false;\n    var goDown = false;\n    var goUp = false;\n\n    //An infinite loop occurs when there is no place in the outerPositionsTaken array where all the number\n    //of positions that we need (noOfPos) can fit contiguously. In such a case, an infinite loop occurs.\n    //Experiment: Create a count. If the count exceeds outPositionsTaken.length, then we have looked at every\n    //possible startPos. Set startPos to the best startPos (meaning, the most contingious spaces) and set found\n    //to true.\n\n    //Experiment: int goUpCount = 0;\n    var goUpCount = 0;\n    //Experiment: int biggestGap = 0;\n    var biggestGap = 0;\n    //Experiment: int bestStartPos;\n    var bestStartPos = 0;\n\n    while (!found && !(goUp && goDown)) {\n        //System.out.print(startPos + \" \");\n        for (i = startPos;\n             (i < (startPos + noOfPos))\n             && (outerPositionsTaken[i % outerPositionsTaken.length] == -1); i++) {\n        }\n\n        if (i < (startPos + noOfPos)) {\n            if (((outerPositionsTaken[i % outerPositionsTaken.length] > innerCirclePos)\n                && ((outerPositionsTaken[i % outerPositionsTaken.length] - innerCirclePos) < (0.7 * innerCSize)))\n                || ((innerCirclePos - outerPositionsTaken[i % outerPositionsTaken.length]) > (0.7 * innerCSize))) {\n                alreadyFound = (i - startPos + outerPositionsTaken.length) % outerPositionsTaken.length;\n                startOfAlFound = startPos;\n                startPos -= (noOfPos - alreadyFound);\n\n                if (startPos < 0)\n                    startPos += outerPositionsTaken.length;\n\n                goDown = true;\n            } else {\n                //Experiment: goUpCount++;\n                goUpCount++;\n                //Experiment: int thisGap = i - startPos;\n                var thisGap = i - startPos;\n                //Experiment: if( thisGap > biggestGap )\n                if (thisGap > biggestGap) {\n                    biggestGap = thisGap;\n                    bestStartPos = startPos;\n                }\n                //Experiment: if( count > outerPositionsTaken.length )\n                if (goUpCount > outerPositionsTaken.length * 3) {\n                    startPos = bestStartPos;\n                    found = true;\n                }\n                //Experiment: else\n                else {\n                    startPos = (i + 1) % outerPositionsTaken.length;\n                    goUp = true;\n                }\n            }\n        } else\n            found = true;\n    }\n\n    if (goUp && goDown) {\n        i = startOfAlFound - 1;\n\n        var j = i - 1;\n        var count = 0;\n        //System.out.print(j + \" \");\n\n        var index = (i % outerPositionsTaken.length + outerPositionsTaken.length) % outerPositionsTaken.length;\n        if (((outerPositionsTaken[index] > innerCirclePos)\n            && ((outerPositionsTaken[index] - innerCirclePos) < (0.7 * innerCSize)))\n            || ((innerCirclePos - outerPositionsTaken[index]) > (0.7 * innerCSize))) {\n            j--;\n            i--;\n        }\n\n        while (count < (noOfPos - alreadyFound)) {\n            //System.out.print(j + \" \");\n\n            if (outerPositionsTaken[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -1) {\n                // move all for one place left\n                //\tSystem.out.print(\" moving \");\n                if (outerPositionsOwners[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -2) {\n                    //System.out.println(\"BUUUUUUUUUUUUUUUUUUU\");\n\n                    return -1;\n                }\n\n                for (var k = j; k < (i - count); k++) {\n                    if (outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length] > 0)\n                    {\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].x = startX + (Math.cos(outerDeltaAngle * k) * outerRadius);\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].y = startY - (Math.sin(outerDeltaAngle * k) * outerRadius);\n                    }\n\n\n                    outerPositionsOwners[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                    outerPositionsTaken[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsTaken[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                }\n\n                count++;\n            }\n\n            j--;\n        }\n\n        startPos = (i - count + 1 + outerPositionsOwners.length) % outerPositionsOwners.length;\n    }\n\n    /*    for (i = startPos; i < startPos + noOfPos; i++)\n     {\n     outerPositionsTaken[i % outerPositionsTaken.length] = innerCirclePos;\n     }*/\n    return startPos;\n\n};\np.EachNodeHeight = function(nodeID) {\n    var nodes = this.nodes;\n    var links = nodes[nodeID].links;\n    var currentNeighbour;\n    var noOfChildren = 0;\n    var tmp = {};\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (!this.depthPosSet[currentNeighbour] && !tmp[currentNeighbour]) {\n            this.depthPosSet[currentNeighbour] = true;\n            tmp[currentNeighbour] = true;\n        }\n    }\n\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (tmp[currentNeighbour]) {\n            noOfChildren += this.EachNodeHeight(currentNeighbour);\n        }\n    }\n\n//\t\tif (this.nodeHeights[nodeID])\n//\t\t\tthis.nodeHeights.remove(Integer.valueOf(nodeID));\n\n    this.nodeHeights[nodeID] = noOfChildren;\n\n    return (noOfChildren + 1);\n};\np.DFSSetPos = function( nodeID, theAngle,  theRadius) {\n    var component = this.node2BiComp[nodeID];\n    var nodes = this.nodes;\n    if (component != undefined && !this.drawnBiComps[component]) {\n        var comp = component;\n        var centerX =nodes[nodeID].x;\n        var centerY = nodes[nodeID].y;\n        var radius = (this.width * this.bc[comp].length) / (2 * Math.PI);\n        var deltaAngle = (2 * Math.PI) / this.bc[comp].length;\n        var currAngle = theAngle - Math.PI - deltaAngle;\n\n        if (currAngle < 0)\n            currAngle += (2 * Math.PI);\n\n        centerX += (Math.cos(theAngle) * radius * 4.0);\n        centerY -= (Math.sin(theAngle) * radius * 4.0);\n\n        this.drawnBiComps[comp] = true;\n\n        // sorting nodes on inner circle\n        this.bc[comp] = this.sortInnerCircle(this.bc[comp]);\n\n        /*if (this.bc[comp].length > 20)\n         this.bc[comp] = ReduceInnerCircleCrossings(this.bc[comp]);*/\n        var oneAtLeast = false;\n\n        for (var i = 0; i < this.bc[comp].length; i++) {\n            if (this.posSet[this.bc[comp][i]])\n                continue;\n\n\n            nodes[this.bc[comp][i]].x = centerX + (Math.cos(currAngle) * radius);\n            nodes[this.bc[comp][i]].y = centerY - (Math.sin(currAngle) * radius);\n\n            this.posSet[this.bc[comp][i]] = true;\n\n            oneAtLeast = true;\n            currAngle -= deltaAngle;\n\n            if (currAngle < 0)\n                currAngle += (2 * Math.PI);\n        }\n\n        if (oneAtLeast) {\n\n            nodes[nodeID].x += Math.cos(theAngle) * 3 * radius;\n            nodes[nodeID].y -= Math.sin(theAngle) * 3 * radius;\n\n\n            this.SetOuterCircle(comp, radius, centerX, centerY, nodeID);\n        }\n    } else {\n        var iter = nodes[nodeID].links;\n        var currentNeighbour;\n        var startAngle = theAngle + (Math.PI / 2);\n\n        if (startAngle > (2 * Math.PI))\n            startAngle -= (2 * Math.PI);\n\n        var neighboursCount = 0;\n        var min1 = 1000;\n        var min2 = 1000;\n        var max = -1;\n        var min1Id = -1;\n        var min2Id = -2;\n        var maxId = -3;\n        var tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                neighboursCount++;\n                tmp[currentNeighbour]=true;\n\n                if (this.nodeHeights[currentNeighbour] < min1) {\n                    min2 = min1;\n                    min2Id = min1Id;\n                    min1 = this.nodeHeights[currentNeighbour];\n                    min1Id = currentNeighbour;\n                } else if (this.nodeHeights[currentNeighbour] < min2) {\n                    min2 = this.nodeHeights[currentNeighbour];\n                    min2Id = currentNeighbour;\n                }\n\n                if (this.nodeHeights[currentNeighbour] >= max)//&& currentNeighbour != min2Id && currentNeighbour != min1Id)\n                {\n                    max = this.nodeHeights[currentNeighbour];\n                    maxId = currentNeighbour;\n                }\n            }\n        }\n\n        if (neighboursCount == 0)\n            return;\n\n        var deltaAngle = Math.PI / (neighboursCount + 1);\n\n        startAngle -= deltaAngle;\n\n        if (startAngle < 0)\n            startAngle += (2 * Math.PI);\n\n        var remStartAngle = startAngle;\n\n        if (neighboursCount > 2) {\n            deltaAngle = (2 * Math.PI) / neighboursCount;\n            startAngle = (theAngle + Math.PI) - ((3 * deltaAngle) / 2);\n\n            if (startAngle > (2 * Math.PI))\n                startAngle -= (2 * Math.PI);\n\n            remStartAngle = (theAngle + Math.PI) - (deltaAngle / 2);\n\n            if (remStartAngle > (2 * Math.PI))\n                remStartAngle -= (2 * Math.PI);\n        }\n\n        iter = nodes[nodeID].links;\n\n        var r = 72;\n        var rTry;\n\n        if (((this.width * neighboursCount) / (2 * Math.PI)) > r)\n            r = (this.width * neighboursCount) / (2 * Math.PI);\n\n        rTry = r;\n\n        var hlp = 100.0;\n        var startX = nodes[nodeID].x;\n        var startY = nodes[nodeID].y;\n\n        if (neighboursCount > 2) {\n            nodes[nodeID].x = startX + (Math.cos(theAngle) * r * ((min2 + 1) % 100));\n            nodes[nodeID].y = startY - (Math.sin(theAngle) * r * ((min2 + 1) % 100));\n\n            startX = nodes[nodeID].x;\n            startY = nodes[nodeID].y;\n\n            //System.out.println(\"theAngle = \" + theAngle + \", startAngle = \" + startAngle + \", remStartAngle = \" + remStartAngle + \", deltaAngle = \" + deltaAngle);\n            //System.out.println(\"min1Id = \" + min1Id + \", min2Id\" + min2Id + \", maxId\" + maxId);\n            setOffset(nodes[min1Id], startX + (Math.cos(remStartAngle) * r),\n                startY - (Math.sin(remStartAngle) * r));\n            nodes[min1Id].test = 'min1'\n            setOffset(nodes[min2Id], startX + (Math.cos(remStartAngle + deltaAngle) * r),\n                startY - (Math.sin(remStartAngle + deltaAngle) * r));\n            nodes[min2Id].test = 'min2'\n\n            if (this.nodeHeights[maxId] > 8)\n                r = 256;\n\n            setOffset(nodes[maxId],\n                startX + (Math.cos(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r),\n                startY - (Math.sin(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r));\n            nodes[maxId].test = 'maxId'\n\n            //System.out.println(\"Ugao za maxID \"\n            //                  + (remStartAngle - ((neighboursCount / 2) * deltaAngle)));\n        }\n\n        tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                if (this.nodeHeights[currentNeighbour] > 8)\n                    r = 256;\n                else\n                    r = rTry;\n\n                this.posSet[currentNeighbour] = true;\n                tmp[currentNeighbour] = true;\n\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    setOffset(nodes[currentNeighbour], startX + (Math.cos(startAngle) * r),\n                        startY - (Math.sin(startAngle) * r));\n\n                    startAngle -= deltaAngle;\n\n                    if (startAngle < 0)\n                        startAngle += (2 * Math.PI);\n\n                    if (((Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle))) < 0.0001)\n                        || (Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle)\n                            + (2 * Math.PI))) < 0.0001)) && (neighboursCount > 2)) {\n                        startAngle -= deltaAngle;\n\n                        if (startAngle < 0)\n                            startAngle += (2 * Math.PI);\n                    }\n                }\n            }\n        }\n\n        iter = nodes[nodeID].links;\n\n        if (neighboursCount > 2) {\n            this.DFSSetPos(min1Id, remStartAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(min2Id, remStartAngle + deltaAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(maxId, remStartAngle - ((neighboursCount / 2) * deltaAngle),\n                theRadius * Math.sin(deltaAngle / 2));\n            hlp = remStartAngle;\n            remStartAngle -= deltaAngle;\n        }\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (tmp[currentNeighbour]) {\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    this.DFSSetPos(currentNeighbour, remStartAngle,\n                        theRadius * Math.sin(deltaAngle / 2));\n\n                    remStartAngle -= deltaAngle;\n\n                    if (((remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)))\n                        || (remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)\n                        + (2 * Math.PI)))) && (neighboursCount > 2))\n                        startAngle -= deltaAngle;\n\n                    if (remStartAngle < 0)\n                        remStartAngle += (2 * Math.PI);\n                }\n            }\n        }\n    }\n};\n\nfunction setOffset(node,x,y) {\n    node.x = x;\n    node.y = y;\n}\n\nexport default CircularLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/CircularLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class ColaLayout{\n    layout(graph){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(graph);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .symmetricDiffLinkLengths(50)\n            .start(60,0,0,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:e.y};\n        })\n    }\n\n    _init(graph){\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        graph.nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        graph.edges.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/ColaLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class DargeLayout{\n    layout(graph){\n        // debugger\n        if(!dagre || !dagre.graphlib) throw 'please add dagre lib first';\n        var g = new dagre.graphlib.Graph();\n\n        g.setGraph({\n            rankdir:'TB',\n            nodesep:15,\n            ranksep:100,\n            ranker:'longest-path'//network-simplex  longest-path tight-tree\n        });\n\n        g.setDefaultEdgeLabel(function() { return {}; });\n\n        graph.nodes.forEach(function (e) {\n            g.setNode(e.id,{width:20,height:20});\n        });\n\n        graph.edges.forEach(function (e) {\n            g.setEdge(e.source,e.target);\n        });\n\n        dagre.layout(g);\n\n        var data = g.nodes().map(function (e) {\n            var d = g.node(e);\n            return {x:d.x,y:-1*d.y};\n        });\n\n        return data;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/DargeLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class FlowLayout{\n    layout(graph){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(graph);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .flowLayout(\"y\", 30)\n            .symmetricDiffLinkLengths(30)\n            .start(10,20,20,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:-1*e.y};\n        })\n    }\n\n    _init(graph){\n\n        var filterEdge = this._filterEdge(graph);\n\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        graph.nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        filterEdge.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n\n    _filterEdge(graph){\n        var filterEdges = [];\n\n        var flag = {};\n        var first = graph.nodes[0];\n\n        breadFirst(first);\n\n        return filterEdges;\n\n        function breadFirst(node) {\n            // debugger\n            flag[node.id] = true;\n\n            var nodes = [];\n\n            var edges = graph.inEdgesIndex[node.id],edge;\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.source]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.source]);\n                    }\n                });\n            }\n\n            edges = graph.outEdgesIndex[node.id];\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.target]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.target]);\n                    }\n                });\n            }\n\n            nodes.forEach(function (e) {\n                breadFirst(e);\n            })\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/FlowLayout.js","/**\n * Created by chengang on 17-2-20.\n */\n\nimport CircularLayout from './CircularLayout'\nimport ColaLayout from './ColaLayout'\nimport FlowLayout from './FlowLayout'\nimport DargeLayout from './DargeLayout'\n\nexport default {\n    circular:CircularLayout,\n    cola:ColaLayout,\n    flow:FlowLayout,\n    darge:DargeLayout,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layout/index.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureIcon extends EventEmitter{\n    constructor(gl,option){\n        super();\n\n        this.gl = gl;\n        this.texture = null;\n\n        this.textureIconWidth = option.textureIconWidth;\n        this.textureIconHeight = option.textureIconHeight;\n\n        this.fontSize = 60;\n        this.fontFamily = 'FontAwesome';\n\n        this.border = 2;\n        this.width = 70;//char width\n        this.height = 80;\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n\n        this.canvas = null;\n        this.iconinfo = null;\n        this.icons = [];\n        this.iconsToCreate = [];\n\n        this.fontLoaded = false;\n\n        this._init();\n\n        this.updateGPUTexture(true);\n\n        var _this = this;\n        if (document.fonts) {\n            var fontsReady = document.fonts.ready;\n            if (typeof(fontsReady) == \"function\") {\n                fontsReady = document.fonts.ready();\n            }\n            fontsReady.then(function () {\n                _this.fontLoaded  = true;\n                _this.createIcons();\n                _this.emit('load')\n            });\n        }\n    }\n\n    _init(){\n        this.canvas = document.createElement('canvas');\n\n        this.canvas.width  = this.textureIconWidth;\n        this.canvas.height  = this.textureIconHeight;\n\n        var ctx = this.canvas.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        ctx.font = `${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = \"#ff0000\";\n\n        this.iconinfo =  {\n            fontSize:this.fontSize,\n            img:this.canvas,\n            width:this.width,\n            height:this.height,\n            infos:{}\n        };\n\n        this.ctx = ctx;\n\n    }\n\n    createIcons(icons) {\n\n        icons = icons || this.iconsToCreate;\n\n        if(icons.length == 0) return;\n\n        if(!this.fontLoaded){\n            icons.forEach(function (e) {\n                this.iconsToCreate.push(e);\n            }.bind(this));\n            return;\n        }\n\n        for (var i = 0; i < icons.length; i++) {\n            this.createIcon(icons[i]);\n        }\n        this.computeAlpha();\n\n\n        // document.body.appendChild(this.canvas);\n        this.updateGPUTexture();\n    }\n\n    createIcon(icon){\n\n        var ctx = this.ctx,\n            c = this.canvas;\n\n        if(this.iconinfo && this.iconinfo.infos[icon]) return;\n\n        if(this.startx + this.width + this.border > c.width){\n            this.startx = this.border;\n            this.starty += this.height + this.border;\n\n            if(this.starty + this.height > c.height){\n                console.warn('icon texture no space');\n                return;\n            }\n        }\n\n\n        ctx.fillText(icon, this.startx, this.starty);\n        this.iconinfo.infos[icon] = {\n            uvs:[\n                (this.startx-this.width/2)/c.width, (this.starty - this.height/2)/c.height,\n                (this.startx + this.width/2)/c.width, (this.starty + this.height/2)/c.height,\n            ],\n            width:this.width/this.width\n        };\n\n        this.icons.push(icon);\n\n        this.startx += this.width + this.border;\n    }\n\n\n    computeAlpha() {\n\n        var ctx = this.ctx;\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n        ctx.putImageData(imgData,0,0);\n    }\n\n    updateGPUTexture(empty){\n        var gl = this.gl;\n\n        this.createTexture(empty);\n\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addIcons(icons){\n        var char;\n        var map = {};\n        for(var i = 0,len = icons.length;i< len;i++){\n            char = icons[i];\n            if(!this.iconinfo.infos[char] && !map[char]){\n                if(this.fontLoaded){\n                    this.createIcon(char);\n                }else {\n                    this.iconsToCreate.push(char);\n                }\n                map[char] = true;\n            }\n        }\n        this.updateGPUTexture();\n    }\n\n    createTexture(empty){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        if(empty)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.iconinfo.img);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureIcon.js","/**\n * Created by chengang on 17-4-5.\n */\nimport EventEmitter from '../../base/EventEmitter'\n\nexport  default  class  TextureLoader extends EventEmitter {\n    constructor(gl){\n        super();\n        this.gl = gl;\n        this.cache = {};\n        this.textures = [];\n        this.defaultTexture = this.createTexture();\n        this.texturesIndex = [0,1,2,3,4,5,6,7,8,9];\n        this.updateGPUTexture();\n    }\n\n    loadImgs(urls){\n        if(Array.isArray(urls)){\n            urls.forEach(function (url) {\n                this._load(url);\n            }.bind(this));\n        }else {\n            this._load(urls);\n        }\n    }\n\n    _load(url){\n        if(!this.cache[url]){\n            var image = document.createElement('IMG');\n            // image.setAttribute('crossOrigin', imgCrossOrigin);\n            image.src = url;\n            image.onload = function() {\n                var tx = this.createTexture(image);\n                this.cache[url] = this.textures.length;//index\n                this.textures.push(tx);\n                this.updateGPUTexture();\n                this.emit('load',[url]);\n            }.bind(this);\n        }\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n        this.texturesIndex.forEach(function (e) {\n            gl.activeTexture(gl['TEXTURE'+e]);\n            if(e > this.textures.length - 1){\n                gl.bindTexture(gl.TEXTURE_2D, this.defaultTexture);\n            }else {\n                gl.bindTexture(gl.TEXTURE_2D, this.textures[e]);\n            }\n        }.bind(this));\n    }\n\n    createTexture(img){\n        var gl = this.gl;\n        var texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        if(img)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        return texture;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureLoader.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureText extends EventEmitter{\n    constructor(gl){\n        super();\n\n        this.gl = gl;\n\n        this.texture = null;\n\n        this.border = 2;\n\n        this.fontSize = 26;\n        this.fontFamily = 'Arial';\n\n        this.canvas = null;\n\n        this.textinfo = null;\n\n        this.texts = null;\n    }\n\n    createCanvasImg(texts) {\n\n        if(!this.canvas) this.canvas = document.createElement('canvas');\n\n        var c = this.canvas;\n\n\n        var width = this.fontSize + 1;\n        var height = this.fontSize + 1;\n        var num = Math.ceil(Math.sqrt(texts.length));\n\n        c.width  = num * width + 2* this.border;\n        c.height  = num * height + 2* this.border;\n\n\n        var ctx = c.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, c.width, c.height);\n\n        ctx.font = `bold ${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"top\";\n        ctx.fillStyle = \"#ff0000\";\n\n\n        var startx =this.border;\n        var starty =this.border;\n        var infos = {}, px, py, charWidth;\n\n        this.texts = [];\n\n        for (var i = 0; i < texts.length; i++) {\n\n            if(this.textinfo && this.textinfo.infos[texts[i]]) continue;\n\n            charWidth = ctx.measureText(texts[i]).width;\n            if(startx + charWidth + this.border > c.width){\n                startx = this.border;\n                starty += height\n            }\n            ctx.fillText(texts[i], startx, starty);\n            infos[texts[i]] = {\n                uvs:[\n                    startx/c.width, starty/c.height,\n                    (startx + charWidth)/c.width, (starty + height)/c.height,\n                ],\n                width:charWidth/width\n            };\n\n            this.texts.push(texts[i]);\n\n            startx += charWidth + this.border;\n        }\n        this.computeAlpha(ctx);\n        this.textinfo =  {\n            fontSize:this.fontSize,\n            img:c,\n            width:c.width,\n            height:c.height,\n            infos:infos\n        };\n\n        // document.body.appendChild(c);\n        this.updateGPUTexture();\n    }\n\n    computeAlpha(ctx) {\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n\n        ctx.putImageData(imgData,0,0);\n\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n\n        this.createTexture();\n\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addTexts(strs){\n        var len = strs.length;\n        var char,num = 0;\n\n        var texts = this.texts;\n        var map = {};\n        for(var i = 0;i< len;i++){\n            char = strs.charAt(i);\n            if(!this.textinfo.infos[char] && !map[char]){\n                num++;\n                map[char] = true;\n                texts.push(char);\n            }\n        }\n\n        if(num > 0) {\n            this.textinfo = null;\n            this.texts = null;\n            this.createCanvasImg(texts);\n        }\n    }\n\n    createTexture(){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textinfo.img);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureText.js","\n'use strict'\n\nimport util from '../../../../util'\n\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nfunction scaleTrangles(points, scale) {\n    scale = scale || 1.4;\n    var p1_x = points[0],\n        p1_y = points[1],\n        p2_x = points[2],\n        p2_y = points[3],\n        p3_x = points[4],\n        p3_y = points[5];\n\n    var avg_x = (p1_x + p2_x + p3_x) / 3,\n        avg_y = (p1_y + p2_y + p3_y) / 3;\n\n    var p1_x_new = avg_x + (p1_x - avg_x) * scale,\n        p1_y_new = avg_y + (p1_y - avg_y) * scale,\n        p2_x_new = avg_x + (p2_x - avg_x) * scale,\n        p2_y_new = avg_y + (p2_y - avg_y) * scale,\n        p3_x_new = avg_x + (p3_x - avg_x) * scale,\n        p3_y_new = avg_y + (p3_y - avg_y) * scale;\n\n    return [p1_x_new, p1_y_new, p2_x_new, p2_y_new, p3_x_new, p3_y_new];\n}\n\n\n\nexport  default class Curve{\n    constructor(){\n        // this.POINTS = 9;\n        this.ATTRIBUTES = 11 ;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 6*4 + 4 + 4;\n    }\n\n    getRenderData({data,source,target}){\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var tSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n\n        var aSize = 3, vX, vY;\n\n        var tX = target.x - tSize / dis * dx;\n        var tY = target.y - tSize / dis * dy;\n\n\n        var ctrlP = util.getControlPos(source.x,source.y,tX,tY,edge.curveCount,edge.curveOrder);\n\n        data = [];\n\n        //arrow\n        var dx1 = tX - ctrlP[0],dy1 = tY - ctrlP[1];\n        var dis1 = util.getDistance(tX,tY,ctrlP[0],ctrlP[1]);\n\n        vX = aSize/dis1 * dx1;\n        vY = aSize/dis1 * dy1;\n\n        var arrowX = tX - vX,\n            arrowY = tY - vY;\n\n\n        //curve\n        var color = util.parseColor(edge.color||source.color || '#b3d2ff');\n\n        var scalePos = scaleTrangles([source.x,source.y,ctrlP[0],ctrlP[1],tX-vX,tY-vY]);\n        var scaleUV = scaleTrangles([1,1,0.5,0,0,0]);\n\n\n        var dashed = edge.dashed ? 1:0;\n        // debugger\n        //curve\n        addData(data,this.ATTRIBUTES,[scalePos[0],scalePos[1],scaleUV[0],scaleUV[1],dis,0,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[scalePos[2],scalePos[3],scaleUV[2],scaleUV[3],dis,0,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[scalePos[4],scalePos[5],scaleUV[4],scaleUV[5],dis,0,color.r,color.g,color.b,color.a,dashed]);\n\n\n        //arrow\n        addData(data,this.ATTRIBUTES,[arrowX+vX,arrowY+vY,0,0,0,1,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[arrowX + vY * 0.6,arrowY - vX * 0.6,0,0,0,1,color.r,color.g,color.b,color.a,dashed]);\n        addData(data,this.ATTRIBUTES,[arrowX - vY * 0.6,arrowY + vX * 0.6,0,0,0,1,color.r,color.g,color.b,color.a,dashed]);\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        // debugger\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n        var disLocation = gl.getAttribLocation(program, \"a_dis\");\n        var flagLocation = gl.getAttribLocation(program, \"a_flag\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var dashedLocation = gl.getAttribLocation(program, \"a_dashed\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n            float32View[i*offset32+5] = data[i*this.ATTRIBUTES+5];\n\n            Uint8View[i*offset8+25] = data[i*this.ATTRIBUTES+6];\n            Uint8View[i*offset8+26] = data[i*this.ATTRIBUTES+7];\n            Uint8View[i*offset8+27] = data[i*this.ATTRIBUTES+8];\n            Uint8View[i*offset8+28] = data[i*this.ATTRIBUTES+9];\n\n            float32View[i*offset32+7] = data[i*this.ATTRIBUTES+10];\n\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(disLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(flagLocation, 1, gl.FLOAT, false, this.strip, 5*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false, this.strip, 6*4);\n        gl.vertexAttribPointer(dashedLocation, 1, gl.FLOAT, false, this.strip, 7*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n        gl.enableVertexAttribArray(disLocation);\n        gl.enableVertexAttribArray(flagLocation);\n        gl.enableVertexAttribArray(colorLocation);\n        gl.enableVertexAttribArray(dashedLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/curve/curve.js","/**\n * Created by chengang on 17-3-31.\n */\n\nimport util from '../../../util'\n\nimport edgeVert from './glsl/default-vert.glsl'\nimport edgeFrag from './glsl/default-frag.glsl'\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport  default class Edge{\n    constructor(){\n        this.POINTS = 9;\n        this.ATTRIBUTES = 9 ;\n\n        this.shaderVert = edgeVert;\n        this.shaderFrag = edgeFrag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 5*4 + 1*4;\n    }\n\n    getRenderData({data,source,target}){\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        data = [];\n        var size = 0.3,arrowSize =3;\n        var crossVector = util.normalize([-dy,dx]);\n\n        //arrow\n        var targetSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var arrowX = target.x - (targetSize + arrowSize)/dis * dx;\n        var arrowY = target.y - (targetSize + arrowSize)/dis * dy;\n\n        var color = util.parseColor(edge.color||source.color || '#b3d2ff');\n\n        addData(data,this.ATTRIBUTES,[source.x,source.y,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n\n        //arrow\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,-crossVector[0],-crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,arrowSize/dis * dx,arrowSize/dis * dy,1,color.r,color.g,color.b,color.a]);\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var normalLocation = gl.getAttribLocation(program, \"a_normal\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n\n            Uint8View[i*offset8+20] = data[i*this.ATTRIBUTES+5];\n            Uint8View[i*offset8+21] = data[i*this.ATTRIBUTES+6];\n            Uint8View[i*offset8+22] = data[i*this.ATTRIBUTES+7];\n            Uint8View[i*offset8+23] = data[i*this.ATTRIBUTES+8];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(normalLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false, this.strip, 5*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(normalLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(colorLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/default.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../util'\nimport mat3 from '../../../base/Matrix'\n\nimport vert from './glsl/edge-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport default class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,source,target,textureText}){\n        var edge = data;\n        if(!edge.label) return [];\n\n        // debugger\n        var str = edge.label.split('');\n\n        data = [];\n\n        var size = edge.fontSize ||  Math.max(util.getNodeSizeX(source),util.getNodeSizeY(source))/3;\n        var infos = textureText.textinfo.infos,\n            charWidth = size,\n            charHeight = size,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var centerX = (source.x + target.x)/2, centerY = (source.y + target.y)/2;\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2],centerX,centerY,angle);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/EdgeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\nimport vert from './glsl/node-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\nimport util from '../../../util'\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport default class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,textureText}){\n        var node  = data;\n        if(!node.label) return [];\n\n        // debugger\n        var str = node.label.split('');\n\n        var data = [];\n\n        var sizeX = util.getNodeSizeX(node),sizeY = util.getNodeSizeY(node);\n        var size = Math.max(sizeX,sizeY);\n        var infos = textureText.textinfo.infos,\n            charWidth = size/2,\n            charHeight = size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                // console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n\n        var startx = totalWidht/2 * -1 + node.x;\n        var starty =  node.y - sizeY;\n        var x1,y1,x2,y2;\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                // console.log(1);\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2]);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/NodeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../../util'\nimport mat3 from '../../../../base/Matrix'\n\nimport vert from './../glsl/edge-label-vert.glsl'\nimport frag from './../glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\n\nexport default class CurveLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,source,target,textureText}){\n        var edge = data;\n        if(!edge.label) return [];\n\n        // debugger\n        var str = edge.label.split('');\n\n        data = [];\n\n        var size = edge.fontSize ||  Math.max(util.getNodeSizeX(source),util.getNodeSizeY(source))/3;\n        var infos = textureText.textinfo.infos,\n            charWidth = size,\n            charHeight = size,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        //curve\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var tSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n\n        var tX = target.x - tSize / dis * dx;\n        var tY = target.y - tSize / dis * dy;\n\n        var ctrlP = util.getControlPos(source.x,source.y,tX,tY,edge.curveCount,edge.curveOrder);\n\n        var tangent = util.getPointTangentOnQuadraticCurve(0.5,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n        dx = tangent[0],dy = tangent[1];\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var center = util.getPointOnQuadraticCurve(0.5,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n\n        var centerX = center[0], centerY = center[1];\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2],centerX,centerY,angle);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/curveLabel/curveLabel.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../../util'\nimport nodeVert from './default-vert.glsl'\nimport nodeFrag from './default-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nclass Node{\n    constructor(){\n        this.ATTRIBUTES = 11;\n\n        this.shaderVert = nodeVert;\n        this.shaderFrag = nodeFrag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 5 * 4+4+4;\n    }\n\n    getRenderData({data,textureLoader,textureIcon}){\n\n        var node = data;\n        var color = utils.parseColor(node.color || '#ff0000');\n\n        var img = -1;\n        if(node.img && textureLoader.cache.hasOwnProperty(node.img))\n            img = textureLoader.cache[node.img];\n\n        var size = node.size*2||10*2;\n        var isSelected = node.selected ? 1.0 : 0.0;\n\n        var data = [];\n\n\n        //base\n        addData(data,this.ATTRIBUTES,[node.x-node.size,node.y+node.size,color.r,color.g,color.b,color.a,0,0,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x+node.size,node.y+node.size,color.r,color.g,color.b,color.a,1,0,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x-node.size,node.y-node.size,color.r,color.g,color.b,color.a,0,1,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x+node.size,node.y+node.size,color.r,color.g,color.b,color.a,1,0,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x-node.size,node.y-node.size,color.r,color.g,color.b,color.a,0,1,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x+node.size,node.y-node.size,color.r,color.g,color.b,color.a,1,1,img,isSelected,1]);\n\n\n        var hasIcon = node.icon && textureIcon.iconinfo.infos[node.icon],uvs;\n        var scale = 0.7;\n        //icon\n        if(hasIcon){\n            // debugger\n            uvs = textureIcon.iconinfo.infos[node.icon].uvs;\n            addData(data,this.ATTRIBUTES,[node.x-node.size*scale,node.y+node.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[1],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x+node.size*scale,node.y+node.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x-node.size*scale,node.y-node.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x+node.size*scale,node.y+node.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x-node.size*scale,node.y-node.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x+node.size*scale,node.y-node.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[3],-2,isSelected,2]);\n        }\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var imgLocation = gl.getAttribLocation(program, \"a_img\");\n        var selectedLocation = gl.getAttribLocation(program, \"a_selected\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n        var flagLocation = gl.getAttribLocation(program, \"a_flag\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var texturesLocation = gl.getUniformLocation(program, \"u_textures\");\n        var borderColorLocation = gl.getUniformLocation(program, \"u_borderColor\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n        var iconTextureLocation = gl.getUniformLocation(program, \"u_icons_texture\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n        var int8View = new Int8Array(this.arrayBuffer);\n        var int16View = new Int16Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset16 = this.strip/2;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];//x\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];//y\n\n            Uint8View[i*this.strip+8] = data[i*this.ATTRIBUTES+2];//color.r\n            Uint8View[i*this.strip+9] = data[i*this.ATTRIBUTES+3];//color.g\n            Uint8View[i*this.strip+10] = data[i*this.ATTRIBUTES+4];//color.b\n            Uint8View[i*this.strip+11] = data[i*this.ATTRIBUTES+5];//color.a\n\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+6];//u\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+7];//v\n\n            int16View[i*offset16+10] = data[i*this.ATTRIBUTES+8];//img\n            int16View[i*offset16+11] = data[i*this.ATTRIBUTES+9];//selected\n\n            float32View[i*offset32+6] = data[i*this.ATTRIBUTES+10];//flag\n\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false,  this.strip, 2*4);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false,  this.strip, 3*4);\n        gl.vertexAttribPointer(imgLocation, 1, gl.SHORT, false, this.strip, 5*4);\n        gl.vertexAttribPointer(selectedLocation, 1, gl.SHORT, false, this.strip,  5*4+2);\n        gl.vertexAttribPointer(flagLocation, 1, gl.FLOAT, false, this.strip, 6*4);\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(colorLocation);\n        gl.enableVertexAttribArray(imgLocation);\n        gl.enableVertexAttribArray(selectedLocation);\n        gl.enableVertexAttribArray(uvLocation);\n        gl.enableVertexAttribArray(flagLocation);\n\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n        gl.uniform4f(borderColorLocation,222, 19, 19,255.0);\n\n        gl.uniform1iv(texturesLocation,textureLoader.texturesIndex);\n        gl.uniform1i(iconTextureLocation,11);\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n\n\n    }\n}\n\n\nexport default Node;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/default/Node.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../../util'\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nclass Rect{\n    constructor(){\n        this.ATTRIBUTES = 11;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 5 * 4+4+4;\n    }\n\n    getRenderData({data,textureLoader,textureIcon}){\n\n        var node = data;\n        var color = utils.parseColor(node.color || '#34e1ff');\n\n        var img = -1;\n        if(node.img && textureLoader.cache.hasOwnProperty(node.img))\n            img = textureLoader.cache[node.img];\n\n        var sizeX = node.width||node.size||10;\n        var sizeY = node.height||node.size||10;\n        var isSelected = node.selected ? 1.0 : 0.0;\n\n        data = [];\n\n\n        //base\n        addData(data,this.ATTRIBUTES,[node.x-sizeX,node.y+sizeY,color.r,color.g,color.b,color.a,0,0,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x+sizeX,node.y+sizeY,color.r,color.g,color.b,color.a,1,0,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x-sizeX,node.y-sizeY,color.r,color.g,color.b,color.a,0,1,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x+sizeX,node.y+sizeY,color.r,color.g,color.b,color.a,1,0,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x-sizeX,node.y-sizeY,color.r,color.g,color.b,color.a,0,1,img,isSelected,1]);\n        addData(data,this.ATTRIBUTES,[node.x+sizeX,node.y-sizeY,color.r,color.g,color.b,color.a,1,1,img,isSelected,1]);\n\n\n        var hasIcon = node.icon && textureIcon.iconinfo.infos[node.icon],uvs;\n        var scale = 0.85;\n        var iconSize = Math.min(sizeX,sizeY);\n        //icon\n        if(hasIcon){\n            // debugger\n            uvs = textureIcon.iconinfo.infos[node.icon].uvs;\n            addData(data,this.ATTRIBUTES,[node.x-iconSize*scale,node.y+iconSize*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[1],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x+iconSize*scale,node.y+iconSize*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x-iconSize*scale,node.y-iconSize*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x+iconSize*scale,node.y+iconSize*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x-iconSize*scale,node.y-iconSize*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],-2,isSelected,2]);\n            addData(data,this.ATTRIBUTES,[node.x+iconSize*scale,node.y-iconSize*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[3],-2,isSelected,2]);\n        }\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var imgLocation = gl.getAttribLocation(program, \"a_img\");\n        var selectedLocation = gl.getAttribLocation(program, \"a_selected\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n        var flagLocation = gl.getAttribLocation(program, \"a_flag\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var texturesLocation = gl.getUniformLocation(program, \"u_textures\");\n        var borderColorLocation = gl.getUniformLocation(program, \"u_borderColor\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n        var iconTextureLocation = gl.getUniformLocation(program, \"u_icons_texture\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n        var int8View = new Int8Array(this.arrayBuffer);\n        var int16View = new Int16Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset16 = this.strip/2;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];//x\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];//y\n\n            Uint8View[i*this.strip+8] = data[i*this.ATTRIBUTES+2];//color.r\n            Uint8View[i*this.strip+9] = data[i*this.ATTRIBUTES+3];//color.g\n            Uint8View[i*this.strip+10] = data[i*this.ATTRIBUTES+4];//color.b\n            Uint8View[i*this.strip+11] = data[i*this.ATTRIBUTES+5];//color.a\n\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+6];//u\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+7];//v\n\n            int16View[i*offset16+10] = data[i*this.ATTRIBUTES+8];//img\n            int16View[i*offset16+11] = data[i*this.ATTRIBUTES+9];//selected\n\n            float32View[i*offset32+6] = data[i*this.ATTRIBUTES+10];//flag\n\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false,  this.strip, 2*4);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false,  this.strip, 3*4);\n        gl.vertexAttribPointer(imgLocation, 1, gl.SHORT, false, this.strip, 5*4);\n        gl.vertexAttribPointer(selectedLocation, 1, gl.SHORT, false, this.strip,  5*4+2);\n        gl.vertexAttribPointer(flagLocation, 1, gl.FLOAT, false, this.strip, 6*4);\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(colorLocation);\n        gl.enableVertexAttribArray(imgLocation);\n        gl.enableVertexAttribArray(selectedLocation);\n        gl.enableVertexAttribArray(uvLocation);\n        gl.enableVertexAttribArray(flagLocation);\n\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n        gl.uniform4f(borderColorLocation,222, 19, 19,255.0);\n\n        gl.uniform1iv(texturesLocation,textureLoader.texturesIndex);\n        gl.uniform1i(iconTextureLocation,11);\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n\n\n    }\n}\n\n\nexport default Rect;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/rect/Rect.js","module.exports = \"#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n#endif\\n\\nprecision mediump float;\\nvarying vec4 color;\\nvarying vec2 uv;\\nvarying float dis;\\nvarying float flag;\\nvarying float dashed;\\n\\nuniform float u_camera_scale;\\n\\n\\n\\nvoid main(){\\n        float a = 0.6;\\n        float width = a / u_camera_scale;\\n        float scale = 1.0;\\n        float base = 0.6;\\n        float smooth_factor = 0.4;\\n\\n        if(flag > -0.5 && flag < 0.5){//curve\\n                vec2 px = dFdx(uv);\\n                vec2 py = dFdy(uv);\\n\\n                float fx = 2.0 * uv.x * px.x - px.y;\\n                float fy = 2.0 * uv.y * py.x - py.y;\\n\\n                float sd = (uv.x * uv.x - uv.y) / sqrt(fx * fx + fy * fy);\\n\\n                float alpha = 1.0 - abs(sd) / width;\\n                if (alpha < 0.0 || uv.x < 0.0 || uv.x > 1.0) discard;\\n\\n                float n = 800.0/dis;\\n                float dot = mod(uv.x*100.0,n);\\n                if(dashed > 0.5 && dot > n*0.5 && dot < n) discard;\\n\\n                if(alpha < 0.2) scale = smoothstep(0.0,smooth_factor,alpha);\\n\\n                gl_FragColor = color*scale;\\n\\n        }else if(flag > 0.5 && flag < 1.5){//arrow\\n                gl_FragColor = color;\\n        }\\n\\n\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/curve/frag.glsl\n// module id = 30\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\n//attribute vec2 a_normal;\\nattribute vec4 a_color;\\n//attribute float a_size;\\nattribute vec2 a_uv;\\nattribute float a_dis;\\nattribute float a_flag;\\nattribute float a_dashed;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\nvarying vec2 uv;\\nvarying float dis;\\nvarying float flag;\\nvarying float dashed;\\n\\nvoid main() {\\n\\n//vec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nuv = a_uv;\\ndis = a_dis;\\nflag = a_flag;\\ncolor = a_color/255.0;\\ndashed = a_dashed;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/curve/vert.glsl\n// module id = 31\n// module chunks = 0","module.exports = \"precision mediump float;\\nvarying vec4 color;\\nvoid main(){\\ngl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-frag.glsl\n// module id = 32\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute vec4 a_color;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\n\\nvoid main() {\\n\\nvec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(pos,1)).xy,0,1);\\n\\ncolor = a_color/255.0;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-vert.glsl\n// module id = 33\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/node-label-vert.glsl\n// module id = 34\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\n\\n\\nuniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n\\n\\n\\n\\n\\n//todo\\nvec4 getSampleColore(int index,vec2 uv){\\n    vec4 c;\\n    if(index == 0){\\n        c = texture2D(u_textures[0],uv);\\n    }else if(index == 1){\\n        c = texture2D(u_textures[1],uv);\\n    }else if(index == 2){\\n        c = texture2D(u_textures[2],uv);\\n    }else if(index == 3){\\n        c = texture2D(u_textures[3],uv);\\n    }else if(index == 4){\\n        c = texture2D(u_textures[4],uv);\\n    }else if(index == 5){\\n        c = texture2D(u_textures[5],uv);\\n    }\\n    return c;\\n}\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = 0.05 ,\\n   border = 0.75 ;\\n\\nif(flag > 0.5 && flag < 1.5) //flag =1\\n{\\n    vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    r = length(cxy);\\n\\n    if(r > 1.0 ){\\n        discard;\\n    }\\n\\n    if(img >= 0.0){\\n        nodecolor = getSampleColore(int(img),uv);\\n    }\\n\\n     if( selected > 0.5  && r > border && r < border + blur){\\n        nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n    }\\n\\n     if( selected > 0.5  &&  r >= border + blur){\\n        nodecolor = borderColor;\\n     }\\n\\n      gl_FragColor = nodecolor * alpha;\\n\\n}else if(flag > 1.5 && flag < 2.5) {//flag =2\\n    gl_FragColor = texture2D(u_icons_texture,uv).w * vec4(1,1,1,1);\\n}\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/default/default-frag.glsl\n// module id = 35\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_img;\\nattribute vec2 a_uv;\\nattribute float a_selected;\\nattribute float a_flag;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\n\\n\\nvoid main() {\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\nuv = a_uv;\\nflag = a_flag;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/default/default-vert.glsl\n// module id = 36\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\n\\n\\nuniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n//todo\\nvec4 getSampleColore(int index,vec2 uv){\\n    vec4 c;\\n    if(index == 0){\\n        c = texture2D(u_textures[0],uv);\\n    }else if(index == 1){\\n        c = texture2D(u_textures[1],uv);\\n    }else if(index == 2){\\n        c = texture2D(u_textures[2],uv);\\n    }else if(index == 3){\\n        c = texture2D(u_textures[3],uv);\\n    }else if(index == 4){\\n        c = texture2D(u_textures[4],uv);\\n    }else if(index == 5){\\n        c = texture2D(u_textures[5],uv);\\n    }\\n    return c;\\n}\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = 0.05 ,\\n   border = 0.75 ;\\n\\n\\nif(flag > 0.5 && flag < 1.5) //flag =1\\n{\\n    vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    r = length(cxy);\\n\\n    if(img >= 0.0){\\n        nodecolor = getSampleColore(int(img),uv);\\n    }\\n\\n     if( selected > 0.5  && r > border && r < border + blur){\\n        nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n    }\\n\\n     if( selected > 0.5  &&  r >= border + blur){\\n        nodecolor = borderColor;\\n     }\\n\\n      gl_FragColor = nodecolor * alpha;\\n\\n}else if(flag > 1.5 && flag < 2.5) {//flag =2\\n    gl_FragColor = texture2D(u_icons_texture,uv).w * vec4(1,1,1,1);\\n}\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/rect/frag.glsl\n// module id = 37\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_img;\\nattribute vec2 a_uv;\\nattribute float a_selected;\\nattribute float a_flag;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\n\\n\\nvoid main() {\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\nuv = a_uv;\\nflag = a_flag;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/rect/vert.glsl\n// module id = 38\n// module chunks = 0","export {default as Graph} from './core/Graph'\nexport {WebGLRender} from './render/index'\n// export {default as quadtree} from './test/src/quadtree'\nexport {default as Quad} from './base/Quad'\nexport {default as Event} from './core/Event'\nexport {default as GraphView} from './core/index'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}