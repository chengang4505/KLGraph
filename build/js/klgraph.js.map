{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f91880a672d1303a35ba","webpack:///./src/util.js","webpack:///./src/base/EventEmitter.js","webpack:///./src/animation/tween.js","webpack:///./src/base/GLUtil.js","webpack:///./src/base/Matrix.js","webpack:///./src/render/webgl/label/glsl/label-frag.glsl","webpack:///./src/core/Graph.js","webpack:///./src/render/webgl/render.js","webpack:///./src/render/webgl/label/glsl/edge-label-vert.glsl","webpack:///./src/core/index.js","webpack:///./src/render/index.js","webpack:///./src/base/timer.js","webpack:///./src/core/Event.js","webpack:///./src/core/Selection.js","webpack:///./src/core/config.js","webpack:///./src/layout/CircularLayout.js","webpack:///./src/layout/ColaLayout.js","webpack:///./src/layout/DargeLayout.js","webpack:///./src/layout/FlowLayout.js","webpack:///./src/layout/ForceD3Layout.js","webpack:///./src/layout/Grid.js","webpack:///./src/layout/index.js","webpack:///./src/render/webgl/TextSDF.js","webpack:///./src/render/webgl/TextureIcon.js","webpack:///./src/render/webgl/TextureLoader.js","webpack:///./src/render/webgl/TextureText.js","webpack:///./src/render/webgl/defaultConfig/customOverRender.js","webpack:///./src/render/webgl/defaultConfig/index.js","webpack:///./src/render/webgl/edge/curve/render.js","webpack:///./src/render/webgl/edge/render.js","webpack:///./src/render/webgl/label/EdgeLabel.js","webpack:///./src/render/webgl/label/NodeLabel.js","webpack:///./src/render/webgl/label/curveLabel/render.js","webpack:///./src/render/webgl/node/default/render.js","webpack:///./src/render/webgl/node/rect/render.js","webpack:///./src/render/webgl/defaultConfig/frag.glsl","webpack:///./src/render/webgl/defaultConfig/vert.glsl","webpack:///./src/render/webgl/edge/curve/frag.glsl","webpack:///./src/render/webgl/edge/curve/vert.glsl","webpack:///./src/render/webgl/edge/glsl/default-frag.glsl","webpack:///./src/render/webgl/edge/glsl/default-vert.glsl","webpack:///./src/render/webgl/label/glsl/node-label-vert.glsl","webpack:///./src/render/webgl/node/default/default-frag.glsl","webpack:///./src/render/webgl/node/default/default-vert.glsl","webpack:///./src/render/webgl/node/rect/frag.glsl","webpack:///./src/render/webgl/node/rect/vert.glsl","webpack:///./src/index.js"],"names":["typeofstr","typeofobj","typeoffn","utils","uuid","a","b","Math","random","toString","isArray","obj","Array","isString","isObject","isFunction","extend","i","k","res","l","arguments","length","getDistance","x1","y1","x2","y2","dx","dy","sqrt","normalize","vector","len","getAngle","cos","acos","inRect","posx","posy","x","y","w","h","inLine","lineSize","A","B","C","D","dot","len_sq","param","xx","yy","dis","reI","reN","reHex6","reRgbaInteger","RegExp","parseColor","format","trim","toLowerCase","m","n","exec","parseInt","r","g","getNodeSizeX","node","size","type","width","getNodeSizeY","height","getBBox","nodes","x0","Infinity","y0","forEach","e","getPointOnQuadraticCurve","t","xi","yi","pow","getPointTangentOnQuadraticCurve","pos1","pos2","isPointOnQuadraticCurve","cpx","cpy","epsilon","dP1P2","abs","dP1","dP2","rThreshold","pt","dt","old_dt","getControlPos","count","order","factor","ratio","norV","EventEmitter","_listener","cb","listener","push","splice","args","fn","slice","apply","interpolateNumber","Tween","objs","interpolates","timer","timerHandle","bind","_duration","list","elapsed","min","attr","attrInterpolater","emit","stop","time","toObjs","console","error","remove","getActiveAttributes","getActiveUniforms","calTypeOffset","vertexAttribPointer","checkAttrValid","calculateStrip","setUniforms","loadShader","loadProgram","GLComType","FLOAT","glType","bytes","BYTE","SHORT","UNSIGNED_BYTE","UNSIGNED_SHORT","GlType","components","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","getType","gl","typeNum","name","program","shaderAttrInfos","numAttribs","getProgramParameter","ACTIVE_ATTRIBUTES","attribInfo","getActiveAttrib","location","getAttribLocation","shaderUniformInfos","numUniforms","ACTIVE_UNIFORMS","uniformInfo","getActiveUniform","substr","getUniformLocation","activeAttributes","config","offsetConfig","strip","num","start","err","enableVertexAttribArray","join","data","hasOwnProperty","undefined","attributes","uniformSetter","v","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1iv","uniform1i","activeUniforms","uniforms","shaderSource","shaderType","compiled","shader","createShader","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","shaders","attribs","loc","linked","createProgram","attachShader","bindAttribLocation","locations","opt_attribs","linkProgram","LINK_STATUS","getProgramInfoLog","deleteProgram","mat3","matrixFromTranslate","matrixFromRotation","angle","sin","matrixFromScale","invert","a11","a12","a13","a21","a22","a23","a31","a32","a33","del","multiply","a00","a01","a02","a10","a20","b00","b01","b02","b10","b11","b12","b20","b21","b22","transformPoint","p","rotateVector","multiMatrix","matrixs","reduce","pre","cur","Graph","options","read","edges","nodesIndex","edgesIndex","inEdgesIndex","outEdgesIndex","curveGroup","clear","id","source","target","createEdgeCurveCount","map","edge","counter","_curveGroup","curveCount","curveOrder","ids","nodeid","removeEdge","log","edgeid","updatePos","oldpos","quad","point","insert","root","mouseType","MOVE","DEFAULT","POINTER","WebGLRender","context","container","graph","needUpdate","sampleRatio","textureIcon","textureText","initGl","initEvent","initIconTexture","initTextTexture","projectMatrix","camera","scale","positionX","positionY","rotation","saveDataFrame","saveDataTex","renderCache","layers","index","flag","clearAllFlag","renderLayerMap","renderLayersConfig","defaultLayersConfig","initRenderLayer","updateLayerData","call","option","preserveDrawingBuffer","premultipliedAlpha","alpha","antialias","canvas","getContext","getExtension","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","enable","BLEND","disable","DEPTH_TEST","clearColor","style","cursor","_this","on","dirtyAttr","updateNodeRenderData","updateEdgeRenderData","clearRenderCache","addtexts","getAddText","addTexts","attachGl","infos","textinfo","char","texts","label","charAt","chars","split","createCanvasImg","icons","icon","createIcons","layer","subLayers","subLayer","show","custom","cacheOldData","render","shaderVert","VERTEX_SHADER","shaderFrag","FRAGMENT_SHADER","vertexBuffer","createBuffer","indexBuffer","indexN","mainLayer","initBuffer","tempVertex","tempIndex","check","resizeCanvas","updateLayerUniformData","draw","timeEnd","layerIndex","COLOR_BUFFER_BIT","j","useProgram","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","Error","drawElements","TRIANGLES","UNSIGNED_INT","forceUpdate","cacheIndex","temp","points","contextRelativeLayers","cache","getRenderData","oldData","bufferSubData","vertexStart","Float32Array","vertices","indices","datas","updateCacheByData","bufferData","DYNAMIC_DRAW","Uint32Array","STATIC_DRAW","updateContextCache","getUniforms","matrix","getCameraMatrix","forceRender","updateCache","isInvert","mat","multiplier","clientWidth","clientHeight","viewport","pos","camPos","isVector","animation","newscale","zoomMin","zoomMax","offset","zoomToAnimation","removeByType","to","duration","createFramebuffer","bindFramebuffer","FRAMEBUFFER","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texImage2D","RGBA","framebufferTexture2D","COLOR_ATTACHMENT0","pixels","Uint8Array","readPixels","document","createElement","ctx","imageData","createImageData","putImageData","toBlob","blob","saveAs","Core","initCanvas","selection","mouse","off","_start","_initEvent","position","appendChild","display","tag","ele","left","top","border","oncontextmenu","preventDefault","frames","state","_render","requestAnimationFrame","resize","isNodeSelected","selectNodes","shiftKey","unSelectNode","max","getFitOptions","layout","layoutConfig","getEdges","setNodeData","fit","bbox","bbox1","offsetX","offsetY","nodeLabel","edgeLabel","default","rect","curve","now","Timer","timerFlush","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","performance","Date","setFrame","f","setTimeout","clearNow","_call","_time","_next","prototype","constructor","restart","callback","delay","TypeError","sleep","wake","nap","poke","t0","t1","t2","clearTimeout","clearInterval","setInterval","mouseDown","mouseMove","disableMove","overInfo","currentNode","currentEdge","events","mousemove","handlerWrap","_moveHandler","mousedown","_downHandler","mouseup","_upHandler","mousewheel","_wheelHandler","DOMMouseScroll","addEventListener","click","_clickHandler","trigger","event","defaultNodeCheck","sizeX","sizeY","defaultNodeSize","defaultEdgeCheck","ctrolP","defaultEdgeSize","checkInNode","customNodeCheck","checkInEdge","customEdgeCheck","getNode","findNode","getNodes","getEdge","findEdge","graphPos","toGraphPos","cameraX","cameraY","enableEdgeEvent","isRight","which","button","handleDrag","isCamera","isDown","startx","starty","onmousemove","offsetx","offsety","setMouseType","newgraphPos","onmouseup","onmouseout","removeEventListener","enableOverEvent","old","value","wheelDelta","detail","zoomRatio","zoomTo","handle","toCameraPos","camearaX","camearaY","update","Selection","initGraphEvent","clearRect","fillStyle","selectionFillStyle","strokeStyle","selectionStrokeStyle","beginPath","closePath","fill","stroke","dataType","filter","mouseUp","renderRect","nodesid","filterNodes","isAdd","sendMsg","selected","edgesid","setEdgeData","newSelected","selects","domPos","graphToDomPos","isPointInPath","removeNode","defaultNodeBorder","defaultNodeColor","defaultEdgeColor","defaultEdgeArrowSize","textureIconWidth","textureIconHeight","enableSelectEdge","CircularLayout","posSet","depthPosSet","drawnBiComps","bc","nodeHeights","node2BiComp","init","createBicconnects","__layout","oldNodes","oldLinks","tempNodes","_index","links","s","states","dfsn","low","edgesStack","biComponents","dfs","current","neigh","neighNodes","singleComponent","pop","biconncts","maxIndex","delete","maxSize","radius","PI","deltaAngle","startX","startY","sortInnerCircle","test","SetOuterCircle","icNodes","greedyNodes","modestNodes","forFunct","tmp","NoOfChildren","toReturn","gNo","mNo","deltaM","deltaG","nodeId","outerCircle","currNeigh","compIndex","innerCircleRadius","firstTouched","outerNodesCount","rnc","iter","currNeighbour","outerRadius","tryCount","outerDeltaAngle","outerPositionsTaken","outerPositionsOwners","pointX","pointY","theAngle","theAngleHlp","innerDeltaAngle","asin","idPos","addedNeighbours","currentNeighbour","noOfNeighbours","startPos","BestFreePositionsForAll","startAngle","holeDepth","EachNodeHeight","DFSSetPos","idealPosition","noOfPos","innerCirclePos","innerCSize","alreadyFound","startOfAlFound","found","goDown","goUp","goUpCount","biggestGap","bestStartPos","thisGap","nodeID","noOfChildren","theRadius","component","comp","centerX","centerY","currAngle","oneAtLeast","neighboursCount","min1","min2","min1Id","min2Id","maxId","remStartAngle","rTry","hlp","setOffset","ColaLayout","cola","Layout","convergenceThreshold","_init","symmetricDiffLinkLengths","_nodes","_edges","DargeLayout","dagre","graphlib","setGraph","rankdir","nodesep","ranksep","ranker","setDefaultEdgeLabel","setNode","setEdge","d","FlowLayout","flowLayout","filterEdges","first","breadFirst","d3","forceSimulation","simulation","force","forceManyBody","forceLink","distance","forceCollide","forceCenter","tick","Grid","nx","ny","circular","d3force","flow","darge","grid","TextSDF","INF","fontSize","buffer","cutoff","fontFamily","font","textBaseline","gridOuter","Float64Array","gridInner","z","Int16Array","middle","round","navigator","userAgent","indexOf","fillText","charSize","measureText","imgData","getImageData","edt","c","charWidth","edt1d","q","TextureIcon","texture","iconinfo","iconsToCreate","fontLoaded","fillRect","textAlign","img","createIcon","computeAlpha","warn","uvs","TEXTURE11","updateGPUTexture","empty","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","save","restore","TextureLoader","textures","texturesIndex","urls","url","_load","image","src","onload","tx","defaultTexture","NEAREST","TextureText","sdf","ceil","px","py","TEXTURE10","strs","nodeOverCustom","renderLayerData","layerIndexMap","renderBg","grayBg","color","bgColor","positionLocation","uniform4f","bgLocation","Int32Array","selectedNodes","overNode","overNodes","overEdges","over","edgeCount","layerCheckDefault","layerCheck","not","a_position","a_uv","a_dis","a_flag","a_color","a_dashed","a_size","a_ratio","textureLoader","u_matrix","u_camera_scale","defaultSize","renderData","tNodeW","tNodeH","tSize","aSize","arrowSize","vX","vY","tX","tY","ctrlP","dis1","arrowPosRatio","arrowPos","aTangent","arrowX","arrowY","scalePos","scaleTrangles","scaleUV","dashed","addData","addIndices","arr","attrData","attrIndex","p1_x","p1_y","p2_x","p2_y","p3_x","p3_y","avg_x","avg_y","p1_x_new","p1_y_new","p2_x_new","p2_y_new","p3_x_new","p3_y_new","a_normal","crossVector","targetSize","u_image","str","charHeight","uv","totalWidht","rotate","tangent","center","a_selected","a_showicon","a_center","u_borderColor","u_sample_ratio","u_icons_texture","isSelected","Object","keys","oldVertices","hasIcon","bgScale","a_img","iconSize","bgSize","GLUtil"],"mappings":"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","file":"klgraph.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"KLGraph\"] = factory();\n\telse\n\t\troot[\"KLGraph\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 46);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f91880a672d1303a35ba","/**\n * Created by chengang on 17-3-17.\n */\n\nvar typeofstr = typeof '';\nvar typeofobj = typeof {};\nvar typeoffn = typeof function(){};\n\nvar utils = {};\n\n\nutils.uuid = function(a,b){\n    for(               // loop :)\n        b=a='';        // b - result , a - numeric variable\n        a++<36;        //\n        b+=a*51&52  // if \"a\" is not 9 or 14 or 19 or 24\n            ?  //  return a random number or 4\n            (\n                a^15      // if \"a\" is not 15\n                    ?      // genetate a random number from 0 to 15\n                    8^Math.random()*\n                    (a^20?16:4)  // unless \"a\" is 20, in which case a random number from 8 to 11\n                    :\n                    4            //  otherwise 4\n            ).toString(16)\n            :\n            '-'            //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n    );\n    return b;\n};\n\n\n//is tool\nutils.isArray = function( obj ){\n    return Array.isArray ? Array.isArray( obj ) : obj != null && obj instanceof Array;\n};\nutils.isString = function( obj ){\n    return obj != null && typeof obj == typeofstr;\n};\nutils.isObject = function( obj ){\n    return obj != null && typeof obj === typeofobj;\n};\nutils.isFunction =  function( obj ){\n    return obj != null && typeof obj === typeoffn;\n};\n\n\nutils.extend = function() {\n    var i,\n        k,\n        res = {},\n        l = arguments.length;\n\n    for (i = l - 1; i >= 0; i--)\n        for (k in arguments[i])\n            res[k] = arguments[i][k];\n\n    return res;\n};\n\n// math tool\n\nutils.getDistance = function (x1,y1,x2,y2) {\n    var dx =x1 - x2;\n    var dy =y1 - y2;\n    return Math.sqrt(dx*dx+dy*dy);\n};\n\nutils.normalize = function (vector) {\n  var len = Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]);\n  if(len == 0) return [0,0];\n  return [vector[0]/len,vector[1]/len];\n};\n\nutils.getAngle = function (x1,y1,x2,y2) {\n    var cos = (x1*x2+y1*y2)/(Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2));\n    return Math.acos(cos);\n};\n\nutils.inRect = function (posx,posy,x,y,w,h) {\n  return posx >= x && posx <= x+w && posy >= y && posy <= y+h;\n};\n\nutils.inLine = function (x,y,x1,y1,x2,y2,lineSize) {\n    var A = x - x1;\n    var B = y - y1;\n    var C = x2 - x1;\n    var D = y2 - y1;\n\n    var dot = A * C + B * D;\n    var len_sq = C * C + D * D;\n\n    if(dot < 0 || len_sq < 0.1) return false;\n\n    if(dot * dot  / len_sq > len_sq) return false;\n\n    var param = -1;\n    param = dot / len_sq;\n\n    var xx, yy;\n\n    xx = x1 + param * C;\n    yy = y1 + param * D;\n\n    var dx = x - xx;\n    var dy = y - yy;\n    var dis =  Math.sqrt(dx * dx + dy * dy);\n\n   return dis <= lineSize;\n};\n\n\n//color parse\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\";\nvar reHex6 = /^#([0-9a-f]{6})$/;\nvar reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\");\nutils.parseColor = function (format) {\n    format = (format + \"\").trim().toLowerCase();\n    var m,n;\n    if(m = reHex6.exec(format)){\n        n = parseInt(m[1], 16);\n        return{\n            r:n >> 16 & 0xff,\n            g: n >> 8 & 0xff,\n            b: n & 0xff,\n            a:255\n        }\n    }else if(m = reRgbaInteger.exec(format)){\n        return{\n            r:+m[1],\n            g:+m[2],\n            b:+m[3],\n            a:+m[4]*255\n        }\n    }else {\n        throw 'not valid color format';\n    }\n}\n\n\nutils.getNodeSizeX = function (node) {\n    var size = node.size ;\n    if(node.type == 'rect' && node.width) size = node.width;\n\n    return size;\n};\n\nutils.getNodeSizeY = function (node) {\n    var size = node.size ;\n    if(node.type == 'rect' && node.height) size = node.height;\n\n    return size;\n};\n\nutils.getBBox = function (nodes) {\n    var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n    nodes.forEach(function (e) {\n        if (e.x < x0) x0 = e.x;\n        if (e.x > x1) x1 = e.x;\n        if (e.y < y0) y0 = e.y;\n        if (e.y > y1) y1 = e.y;\n    });\n\n    return {\n        x:x0,\n        y:y0,\n        w:x1-x0,\n        h:y1-y0\n    }\n};\n\n\n\n\n/**\n * Compute the coordinates of the point positioned\n * at length t in the quadratic bezier curve.\n *\n * @param  {number} t  In [0,1] the step percentage to reach\n *                     the point in the curve from the context point.\n * @param  {number} x1 The X coordinate of the context point.\n * @param  {number} y1 The Y coordinate of the context point.\n * @param  {number} x2 The X coordinate of the ending point.\n * @param  {number} y2 The Y coordinate of the ending point.\n * @param  {number} xi The X coordinate of the control point.\n * @param  {number} yi The Y coordinate of the control point.\n * @return {object}    {x,y}.\n */\nutils.getPointOnQuadraticCurve = function(t, x1, y1, x2, y2, xi, yi) {\n    // http://stackoverflow.com/a/5634528\n    return [\n        Math.pow(1 - t, 2) * x1 + 2 * (1 - t) * t * xi + Math.pow(t, 2) * x2,\n        Math.pow(1 - t, 2) * y1 + 2 * (1 - t) * t * yi + Math.pow(t, 2) * y2\n    ];\n};\n\nutils.getPointTangentOnQuadraticCurve = function(t, x1, y1, x2, y2, xi, yi) {\n    var pos1 = utils.getPointOnQuadraticCurve(t, x1, y1, x2, y2, xi, yi);\n    var pos2 = utils.getPointOnQuadraticCurve(t+0.001, x1, y1, x2, y2, xi, yi);\n    return utils.normalize([pos2[0]-pos1[0],pos2[1] - pos1[1]]);\n};\n\n/**\n * Check if a point is on a quadratic bezier curve segment with a thickness.\n *\n * @param  {number} x       The X coordinate of the point to check.\n * @param  {number} y       The Y coordinate of the point to check.\n * @param  {number} x1      The X coordinate of the curve start point.\n * @param  {number} y1      The Y coordinate of the curve start point.\n * @param  {number} x2      The X coordinate of the curve end point.\n * @param  {number} y2      The Y coordinate of the curve end point.\n * @param  {number} cpx     The X coordinate of the curve control point.\n * @param  {number} cpy     The Y coordinate of the curve control point.\n * @param  {number} epsilon The precision (consider the line thickness).\n * @return {boolean}        True if (x,y) is on the curve segment,\n *                          false otherwise.\n */\nutils.isPointOnQuadraticCurve = function (x, y, x1, y1, x2, y2, cpx, cpy, epsilon) {\n    // Fails if the point is too far from the extremities of the segment,\n    // preventing for more costly computation:\n    var dP1P2 = utils.getDistance(x1, y1, x2, y2);\n    if (Math.abs(x - x1) > dP1P2 || Math.abs(y - y1) > dP1P2) {\n        return false;\n    }\n\n    var dP1 = utils.getDistance(x, y, x1, y1),\n        dP2 = utils.getDistance(x, y, x2, y2),\n        t = 0.5,\n        r = (dP1 < dP2) ? -0.01 : 0.01,\n        rThreshold = 0.001,\n        i = 100,\n        pt = utils.getPointOnQuadraticCurve(t, x1, y1, x2, y2, cpx, cpy),\n        dt = utils.getDistance(x, y, pt[0], pt[1]),\n        old_dt;\n\n    // This algorithm minimizes the distance from the point to the curve. It\n    // find the optimal t value where t=0 is the start point and t=1 is the end\n    // point of the curve, starting from t=0.5.\n    // It terminates because it runs a maximum of i interations.\n    while (i-- > 0 &&\n    t >= 0 && t <= 1 &&\n    (dt > epsilon) &&\n    (r > rThreshold || r < -rThreshold)) {\n        old_dt = dt;\n        pt = utils.getPointOnQuadraticCurve(t, x1, y1, x2, y2, cpx, cpy);\n        dt = utils.getDistance(x, y, pt[0], pt[1]);\n\n        if (dt > old_dt) {\n            // not the right direction:\n            // halfstep in the opposite direction\n            r = -r / 2;\n            t += r;\n        }\n        else if (t + r < 0 || t + r > 1) {\n            // oops, we've gone too far:\n            // revert with a halfstep\n            r = r / 2;\n            dt = old_dt;\n        }\n        else {\n            // progress:\n            t += r;\n        }\n    }\n\n    return dt < epsilon;\n}\n\n\nutils.getControlPos = function(x1,y1,x2,y2,count,order) {\n    // var dis = utils.getDistance(x1,y1,x2,y2);\n    // var factor = dis/8;\n    var factor = 20;\n\n    var ratio = (count)%2 == 1 ? 1 : -1;\n    ratio *= order ? 1 : -1;\n\n    factor *= ratio * ((count + 1) >> 1);\n\n    var norV = utils.normalize([y1-y2,x2-x1]);\n    return [norV[0]*factor+(x1+x2)/2,norV[1]*factor+(y1+y2)/2];\n};\n\n\nexport  default utils ;\n\n// window.utils = utils;\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nexport default class EventEmitter {\n    constructor(){\n        this._listener = {};\n    }\n\n    on(type,cb){\n        if(!type || !cb) return;\n        this._listener[type] = this._listener[type] || [];\n\n        var listener = this._listener[type];\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]) return;\n        }\n\n        this._listener[type].push(cb);\n        return this;\n    }\n\n    off(type,cb){\n        if(!type) return;\n        var listener;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        if(cb){\n            for(var i = 0,len = listener.length; i < len;i++){\n                if(cb == listener[i]){\n                    listener.splice(i,1);\n                    break;\n                }\n            }\n        }else {\n            this._listener[type] = [];\n        }\n    }\n\n    emit(type,args){\n        if(!type) return;\n        var listener,fn;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        listener = listener.slice();\n\n        for(var i = 0,len = listener.length;i< len;i++){\n            fn = listener[i];\n            fn.apply(null,args);\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/EventEmitter.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nimport EventEmitter from '../base/EventEmitter';\nimport timer from '../base/timer'\n\n/**\n * from d3-interpolate\n */\nfunction interpolateNumber(a, b) {\n    return a = +a, b -= a, function(t) {\n        return a + b * t;\n    };\n}\n\n\n\nexport  default class Tween extends  EventEmitter{\n\n    static list = [];\n\n    constructor(objs,type){\n        super();\n        if(!objs) throw 'must have a obj';\n\n        type = type || '';\n\n        this.objs = objs;\n        this.type = type;\n        this.interpolates = null;\n        this.timer = timer(this.timerHandle.bind(this));\n        this._duration = 0;\n\n        Tween.list.push(this);\n    }\n\n\n    timerHandle(elapsed) {\n        var t = elapsed / this._duration;\n\n        t = Math.min(t,1);\n\n        var obj,attr,attrInterpolater;\n        if(Array.isArray(this.interpolates)){\n            for(var i = 0,len = this.interpolates.length;i< len;i++){\n                obj = this.objs[i];\n                attrInterpolater = this.interpolates[i];\n                for(attr in attrInterpolater){\n                    obj[attr] = attrInterpolater[attr](t);\n                }\n            }\n        }else {\n            obj = this.objs;\n            attrInterpolater = this.interpolates;\n            for(attr in attrInterpolater){\n                obj[attr] = attrInterpolater[attr](t);\n            }\n        }\n\n        this.emit('change',[t]);\n\n        if(elapsed >=this._duration){\n            this.stop();\n            this.emit('end');\n        }\n\n    }\n\n\n    duration(time) {\n        this._duration = time;\n        return this;\n    }\n\n    to(toObjs) {\n        if(Array.isArray(toObjs) && toObjs.length !== this.objs.length){\n            console.error('toObjs lenght not eq objs length');\n            this.stop();\n            return this;\n        }\n\n        var obj,attr,attrInterpolater;\n        if(Array.isArray(toObjs)){\n            this.interpolates = [];\n            for(var i = 0,len = toObjs.length;i<len;i++){\n                obj = toObjs[i];\n                attrInterpolater = {};\n                for(attr in obj){\n                    attrInterpolater[attr] = interpolateNumber(this.objs[i][attr],obj[attr]);\n                }\n                this.interpolates.push(attrInterpolater);\n            }\n        }else {\n            obj = toObjs;\n            attrInterpolater = {};\n            for(attr in obj){\n                attrInterpolater[attr] = interpolateNumber(this.objs[attr],obj[attr]);\n            }\n            this.interpolates = attrInterpolater;\n        }\n\n        return this;\n\n    };\n\n    stop() {\n        if(this.timer){\n            this.timer.stop();\n            this.timer = null;\n            this.objs = null;\n            this.interpolates = null;\n\n            Tween.remove(this.objs);\n        }\n    }\n\n    static remove(obj){\n        var list = Tween.list;\n        Tween.list = [];\n        list.forEach(function (e) {\n            if(e.objs == obj){\n                e.stop();\n            }else {\n                Tween.list.push(e);\n            }\n        })\n    }\n\n    static removeByType(type){\n        var list = Tween.list;\n        Tween.list = [];\n        list.forEach(function (e) {\n            if(e.type === type){\n                e.stop();\n            }else {\n                Tween.list.push(e);\n            }\n        })\n    }\n\n    static removeAll(){\n        Tween.list.forEach(function (e) {\n            e.stop();\n        })\n\n        Tween.list = [];\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/animation/tween.js","'use strict';\n\nimport util from '../util'\n\n\nexport var GLComType = {\n    FLOAT:{glType:'FLOAT',bytes:4},\n    BYTE:{glType:'BYTE',bytes:1},\n    SHORT:{glType:'SHORT',bytes:2},\n    UNSIGNED_BYTE:{glType:'UNSIGNED_BYTE',bytes:1},\n    UNSIGNED_SHORT:{glType:'UNSIGNED_SHORT',bytes:2},\n};\n\nexport var GlType = {\n    FLOAT:{components:1,glType:'FLOAT'},\n    FLOAT_VEC2:{components:2,glType:'FLOAT_VEC2'},\n    FLOAT_VEC3:{components:3,glType:'FLOAT_VEC3'},\n    FLOAT_VEC4:{components:4,glType:'FLOAT_VEC4'},\n    INT:{components:1,glType:'INT'},\n    INT_VEC2:{components:2,glType:'INT_VEC2'},\n    INT_VEC3:{components:3,glType:'INT_VEC3'},\n    INT_VEC4:{components:4,glType:'INT_VEC4'},\n    BOOL:{components:1,glType:'BOOL'},\n    BOOL_VEC2:{components:2,glType:'BOOL_VEC2'},\n    BOOL_VEC3:{components:3,glType:'BOOL_VEC3'},\n    BOOL_VEC4:{components:4,glType:'BOOL_VEC4'},\n    FLOAT_MAT2:{components:4,glType:'FLOAT_MAT2'},\n    FLOAT_MAT3:{components:9,glType:'FLOAT_MAT3'},\n    FLOAT_MAT4:{components:16,glType:'FLOAT_MAT4'},\n    SAMPLER_2D:{components:1,glType:'SAMPLER_2D'},\n    SAMPLER_CUBE:{components:1,glType:'SAMPLER_CUBE'},\n};\n\nfunction getType(gl,typeNum) {\n    var type = 'FLOAT';\n    for(var name in GlType){\n        if(gl[name] == typeNum) return name;\n    }\n    console.error('gl type not found');\n    return type;\n}\n\n\nexport  function getActiveAttributes (gl,program) {\n    var shaderAttrInfos = {};\n    var numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (var i = 0; i < numAttribs; ++i) {\n        var attribInfo = gl.getActiveAttrib(program, i);\n        if (!attribInfo) {\n            continue;\n        }\n\n        shaderAttrInfos[attribInfo.name] = {};\n        shaderAttrInfos[attribInfo.name].type = getType(gl,attribInfo.type);\n        shaderAttrInfos[attribInfo.name].size = attribInfo.size;\n        shaderAttrInfos[attribInfo.name].location = gl.getAttribLocation(program, attribInfo.name);\n    }\n    return shaderAttrInfos;\n}\n\nexport function getActiveUniforms (gl,program) {\n    var shaderUniformInfos = {};\n    var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (var i = 0; i < numUniforms; ++i) {\n        var uniformInfo = gl.getActiveUniform(program, i);\n        if (!uniformInfo) {\n            continue;\n        }\n\n        var name = uniformInfo.name;\n        // remove the array suffix.\n        if (name.substr(-3) === \"[0]\") {\n            name = name.substr(0, name.length - 3);\n        }\n\n        shaderUniformInfos[name] = {};\n        shaderUniformInfos[name].type = getType(gl,uniformInfo.type);\n        shaderUniformInfos[name].size = uniformInfo.size;\n        shaderUniformInfos[name].location = gl.getUniformLocation(program, name);\n    }\n    return shaderUniformInfos;\n}\n\nexport function calTypeOffset(activeAttributes,config) {\n    config = config || {};\n    var offsetConfig = {\n        config:{},\n        strip:0\n    };\n    var type,num = 0;\n    for(var attr in activeAttributes){\n        type = activeAttributes[attr].type;\n        offsetConfig.config[attr] = {};\n        offsetConfig.config[attr].start = num;\n        offsetConfig.config[attr].components = GlType[type].components;\n        num += GlType[type].components;\n    }\n    offsetConfig.strip = num;\n    return offsetConfig;\n}\n\nexport function vertexAttribPointer(gl,activeAttributes,offsetConfig) {\n    // debugger\n    var config = offsetConfig.config;\n    var strip = offsetConfig.strip;\n    var err = [];\n    for(var attr in activeAttributes){\n        if(!config[attr]){\n            err.push(`shader need attribute: ${attr}`);\n            continue;\n        }\n        gl.vertexAttribPointer(\n            activeAttributes[attr].location,\n            config[attr].components,\n            gl.FLOAT, false, strip*4, config[attr].start*4\n        );\n        gl.enableVertexAttribArray(activeAttributes[attr].location);\n    }\n    return err.length ? err.join('\\n') : null;\n}\n\nexport function checkAttrValid(config,data){\n\n    var type;\n    var err = [];\n    for(var attr in config){\n        if(!config.hasOwnProperty(attr)){\n            err.push('shader need attribute: ' + attr);\n            continue;\n        }\n\n        if(data[attr] == undefined){\n            err.push('attribute ['+attr+']: is undefined');\n            continue;\n        }\n\n        type = config[attr].type;\n        if(util.isArray(data[attr]) && data[attr].length != GlType[type].components*config[attr].size){\n            err.push('attribute ['+attr+']: size need ' + GlType[type].components);\n        }\n    }\n\n    return err.length ? err : null;\n}\n\nexport function calculateStrip(attributes) {\n    var strip = 0;\n    for(var attr in attributes){\n        strip += attributes[attr].components;\n    }\n    return strip;\n}\n\n\nvar uniformSetter = {\n    FLOAT:function (gl,location,v) {gl.uniform1f(location, v);} ,\n    FLOAT_VEC2:function (gl,location,v) {gl.uniform2fv(location, v);} ,\n    FLOAT_VEC3:function (gl,location,v) {gl.uniform3fv(location, v);} ,\n    FLOAT_VEC4:function (gl,location,v) {gl.uniform4fv(location, v);} ,\n    FLOAT_MAT2:function (gl,location,v) {gl.uniformMatrix2fv(location, false, v);} ,\n    FLOAT_MAT3:function (gl,location,v) {gl.uniformMatrix3fv(location, false, v);} ,\n    FLOAT_MAT4:function (gl,location,v) {gl.uniformMatrix4fv(location, false, v);} ,\n    SAMPLER_2D:function (gl,location,v) {\n        if(v.length) gl.uniform1iv(location, v);\n        else gl.uniform1i(location, v);\n    } ,\n};\nexport  function setUniforms(gl,activeUniforms,uniforms){\n    var type;\n    for(var attr in activeUniforms){\n        type = activeUniforms[attr].type;\n        uniformSetter[type](gl,activeUniforms[attr].location,uniforms[attr]);\n    }\n}\n\n//webgl shader tool\nexport function loadShader(gl, shaderSource, shaderType, error) {\n    var compiled,\n        shader = gl.createShader(shaderType);\n\n    // Load the shader source\n    gl.shaderSource(shader, shaderSource);\n\n    // Compile the shader\n    gl.compileShader(shader);\n\n    // Check the compile status\n    compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    // If something went wrong:\n    if (!compiled) {\n        if (error) {\n            error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        }\n\n        console.error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n};\n\nexport function loadProgram(gl, shaders, attribs, loc, error) {\n    var i,\n        linked,\n        program = gl.createProgram();\n\n    for (i = 0; i < shaders.length; ++i)\n        gl.attachShader(program, shaders[i]);\n\n    if (attribs)\n        for (i = 0; i < attribs.length; ++i)\n            gl.bindAttribLocation(\n                program,\n                locations ? locations[i] : i,\n                opt_attribs[i]\n            );\n\n    gl.linkProgram(program);\n\n    // Check the link status\n    linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        if (error)\n            error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        console.error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n        return null;\n    }\n\n    return program;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/GLUtil.js","/**\n * Created by chengang on 17-3-28.\n */\n\n'use strict';\n\n\nvar mat3 = {};\n\nmat3.normalize = function () {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromTranslate = function(dx, dy) {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        dx, dy, 1\n    ];\n};\n\nmat3.matrixFromRotation = function(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle);\n\n    return  [\n        cos, sin, 0,\n        -sin, cos, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromScale = function(x,y) {\n    return  [\n        x, 0, 0,\n        0, y, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.invert = function (a) {\n    var l =  3,\n        a11 = a[0 * l + 0],\n        a12 = a[0 * l + 1],\n        a13 = a[0 * l + 2],\n        a21 = a[1 * l + 0],\n        a22 = a[1 * l + 1],\n        a23 = a[1 * l + 2],\n        a31 = a[2 * l + 0],\n        a32 = a[2 * l + 1],\n        a33 = a[2 * l + 2];\n\n    var del = a11*(a22*a33-a23*a32)-a12*(a21*a33-a23*a31)+a13*(a21*a32-a22*a31);\n\n    return [\n        (a22*a33-a23*a32)/del,(a13*a32-a12*a33)/del,(a12*a23-a13*a22)/del,\n        (a23*a31-a21*a33)/del,(a11*a33-a13*a31)/del,(a13*a21-a11*a23)/del,\n        (a21*a32-a22*a31)/del,(a12*a31-a11*a32)/del,(a11*a22-a12*a21)/del\n    ];\n}\n\nmat3.multiply = function(a, b) {\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2],\n        b00 = b[0 * l + 0],\n        b01 = b[0 * l + 1],\n        b02 = b[0 * l + 2],\n        b10 = b[1 * l + 0],\n        b11 = b[1 * l + 1],\n        b12 = b[1 * l + 2],\n        b20 = b[2 * l + 0],\n        b21 = b[2 * l + 1],\n        b22 = b[2 * l + 2];\n\n    return [\n        a00 * b00 + a01 * b10 + a02 * b20,\n        a00 * b01 + a01 * b11 + a02 * b21,\n        a00 * b02 + a01 * b12 + a02 * b22,\n        a10 * b00 + a11 * b10 + a12 * b20,\n        a10 * b01 + a11 * b11 + a12 * b21,\n        a10 * b02 + a11 * b12 + a12 * b22,\n        a20 * b00 + a21 * b10 + a22 * b20,\n        a20 * b01 + a21 * b11 + a22 * b21,\n        a20 * b02 + a21 * b12 + a22 * b22\n    ];\n};\n\nmat3.transformPoint = function (p,a) {\n    var x = p[0],\n        y = p[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10+a20,x*a01+y*a11+a21];\n}\n\nmat3.rotateVector = function (v,a) {\n    var x = v[0],\n        y = v[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10,x*a01+y*a11];\n};\n\n\nmat3.multiMatrix = function (matrixs) {\n    return matrixs.reduce(function (pre,cur) {\n        return mat3.multiply(pre,cur);\n    })\n};\n\nexport default mat3;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/Matrix.js","module.exports = \" precision mediump float;\\n\\nvec4 color = vec4(77, 72, 91,255);\\n\\nvarying vec2 v_texCoord;\\nvarying float size;\\n\\n\\nuniform sampler2D u_image;\\nuniform float u_camera_scale;\\n\\n\\nvoid main() {\\n    color = color / 255.0;\\n\\n    float cutoff = 0.76;\\n    float offset = 6.0/size * u_camera_scale;\\n\\n    offset = pow(offset,1.2);\\n\\n    offset = min((1.0-cutoff),offset);\\n\\n   float dist = texture2D(u_image, v_texCoord).r;\\n   float alpha = smoothstep(cutoff - offset, cutoff + offset, dist);\\n   gl_FragColor = color *alpha;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/label-frag.glsl\n// module id = 5\n// module chunks = 0","\n'use strict';\n\n\nimport  utils  from '../util.js'\n// import  Quad from '../base/Quad'\nimport EventEmitter from '../base/EventEmitter'\n\nclass Graph extends EventEmitter{\n\n    constructor(options) {\n\n        super();\n\n        options = options || {};\n\n        // this.quad = new Quad();\n\n        this.read(options);\n\n    }\n\n    clear(){\n        /**\n         * node edge data\n         */\n        this.nodes = [];\n        this.edges = [];\n\n        /**\n         * node edge index\n         */\n        this.nodesIndex = {};\n        this.edgesIndex = {};\n\n        /**\n         *nodes degrees info\n         */\n        this.inEdgesIndex = {};\n        this.outEdgesIndex = {};\n        \n        this.curveGroup = null;\n    }\n\n    /**\n     *  node ,edge \n     * @param options\n     */\n    read(options) {\n\n        this.clear();\n\n        (options.nodes || []).forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            e.id += '';\n            this.nodesIndex[e.id] = e;\n            this.nodes.push(e);\n        }.bind(this));\n\n        (options.edges || []).forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n\n            if (!e.source || !this.nodesIndex[e.source + ''])\n            {\n                // console.log(e);\n                console.error('some edge has not source id or not a node of the id') ;\n                return\n            }\n            if (!e.target || !this.nodesIndex[e.target + '']){\n                // console.log(e);\n                console.error('some edge has not target id or not a node of the id');\n                return\n            }\n\n            this.edgesIndex['' + e.id] = e;\n\n            e.source += '';\n            e.target += '';\n\n            this.inEdgesIndex[e.target] = this.inEdgesIndex[e.target] || [];\n            this.inEdgesIndex[e.target].push(e.id);\n\n            this.outEdgesIndex[e.source] = this.outEdgesIndex[e.source] || [];\n            this.outEdgesIndex[e.source].push(e.id);\n\n            this.edges.push(e);\n\n        }.bind(this));\n\n        this.createEdgeCurveCount();\n\n        this.emit('reset');\n\n        // this.quad.index(this.nodes);\n\n    }\n\n    createEdgeCurveCount(){\n        \n        var map = this.curveGroup = {};\n        \n        var source,target,attr;\n        this.edges.forEach(function (edge) {\n            source = this.nodesIndex[edge.source];\n            target = this.nodesIndex[edge.target];\n            attr = edge.source+edge.target;\n            if(!map[attr]) map[attr] = map[edge.target+edge.source] = {counter:0,source:edge.source};\n\n            edge._curveGroup = map[attr];\n\n            edge.curveCount = map[attr].counter;\n            map[attr].counter++;\n            edge.curveOrder = edge.source == map[attr].source;\n        }.bind(this));\n    }\n\n    /**\n     * add nodes\n     * @param nodes\n     */\n    addNode(nodes) {\n        nodes = nodes || [];\n\n        if(nodes.length == 0) return;\n\n        if (!utils.isArray(nodes)) nodes = [nodes];\n\n        var node;\n        for (var i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            if (!node.id) node.id = utils.uuid();\n            if (this.nodesIndex[node.id]) {\n                throw 'node has existed.'\n            }\n            this.nodes.push(node);\n            this.nodesIndex[node.id] = node;\n        }\n\n        var ids = nodes.map(function (e) {return e.id});\n        this.emit('add',['node',ids]);\n    }\n\n\n    /**\n     * remove node\n     * @param nodeid\n     */\n    removeNode(nodeid) {\n        if (!nodeid || !this.nodesIndex[nodeid]) return;\n\n        var nodes = this.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].id == nodeid) {\n                nodes.splice(i, 1);\n                break\n            }\n        }\n        var edges;\n        edges = this.inEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        edges = this.outEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        this.nodesIndex[nodeid] = null;\n        this.inEdgesIndex[nodeid] = null;\n        this.outEdgesIndex[nodeid] = null;\n\n        this.emit('remove',['node',nodeid]);\n\n    }\n\n\n    /**\n     * add edges ,\n     * @param edges\n     */\n    addEdge(edges) {\n        edges = edges || [];\n\n        if(edges.length  == 0) return;\n\n        if (!utils.isArray(edges)) edges = [edges];\n\n        var edge;\n        for (var i = 0; i < edges.length; i++) {\n            edge = edges[i];\n            if (!edge.id) edge.id = utils.uuid();\n            if (this.edgesIndex[edge.id]){\n                // debugger\n                throw 'edge has existed.';\n            }\n            if (!edge.source || !this.nodesIndex[edge.source + '']){\n                console.log(edge);\n                throw 'some edge has not source id or not a node of the id';\n            }\n            if (!edge.target || !this.nodesIndex[edge.target + '']) {\n                console.log(edge);\n                throw 'some edge has not target id or not a node of the id';\n            }\n\n            this.edges.push(edge);\n            this.edgesIndex[edge.id] = edge;\n\n            edge.source += '';\n            edge.target += '';\n\n            this.inEdgesIndex[edge.target] = this.inEdgesIndex[edge.target] || [];\n            this.inEdgesIndex[edge.target].push(edge.id);\n\n            this.outEdgesIndex[edge.source] = this.outEdgesIndex[edge.source] || [];\n            this.outEdgesIndex[edge.source].push(edge.id);\n        }\n\n        var ids = edges.map(function (e) {return e.id});\n        this.emit('add',['edge',ids]);\n    }\n\n\n    removeEdge(edgeid) {\n        if (!edgeid || !this.edgesIndex[edgeid]) return;\n\n        var edge = this.edgesIndex[edgeid], edges;\n        var outEdgesIndex, inEdgesIndex;\n\n\n        outEdgesIndex = this.outEdgesIndex[edge.source];\n        if (outEdgesIndex.length > 0) {\n            for (var i = 0; i < outEdgesIndex.length; i++) {\n                if (outEdgesIndex[i] == edgeid) {\n                    outEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        inEdgesIndex = this.inEdgesIndex[edge.target];\n        if (inEdgesIndex.length > 0) {\n            for (var i = 0; i < inEdgesIndex.length; i++) {\n                if (inEdgesIndex[i] == edgeid) {\n                    inEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n\n        edges = this.edges;\n        for (var i = 0; i < edges.length; i++) {\n            if (edges[i].id == edgeid) {\n                edges.splice(i, 1);\n                break;\n            }\n        }\n\n        this.edgesIndex[edgeid] = null;\n        this.emit('remove',['edge',edgeid]);\n    }\n\n    getNodes(){\n        return this.nodes;\n    }\n\n    setNodeData(id,obj){\n        // console.time('setNodeData')\n        var node = this.nodesIndex[id];\n\n        var updatePos = false;\n        if(obj.hasOwnProperty('x') || obj.hasOwnProperty('y')) updatePos = true;\n\n        for(var attr in obj){\n            node[attr] = obj[attr];\n            obj[attr] = true;\n        }\n\n        this.emit('change',['node',id,obj]);\n        if(updatePos){\n            obj = {source:true,target:true};\n            this.inEdgesIndex[id] && this.inEdgesIndex[id].length > 0 && this.emit('change',['edge',this.inEdgesIndex[id],obj]);\n            this.outEdgesIndex[id] && this.outEdgesIndex[id].length > 0 && this.emit('change',['edge',this.outEdgesIndex[id],obj]);\n        }\n        // console.timeEnd('setNodeData')\n\n    }\n\n    setEdgeData(id,obj){\n        var edge = this.edgesIndex[id];\n        for(var attr in obj){\n            edge[attr] = obj[attr];\n            obj[attr] = true;\n        }\n        this.emit('change',['edge',id,obj])\n    }\n\n    updateNodeQuad(id,oldpos){\n        var nodes = this.quad.point(oldpos.x,oldpos.y);\n        if(nodes.length > 0){\n            for(var i = 0,len = nodes.length;i<len;i++){\n                if(nodes[i].id == id){\n                    nodes.splice(i,1);\n                    break;\n                }\n            }\n            this.quad.insert(this.nodesIndex[id],this.quad.root);\n        }\n    }\n}\n\nexport default Graph;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Graph.js","\n'use strict';\n\nimport util from '../../util'\nimport mat3 from '../../base/Matrix'\nimport EventEmitter from '../../base/EventEmitter'\nimport TextureLoader from './TextureLoader'\nimport TextureText from './TextureText'\nimport TextureIcon from './TextureIcon'\nimport initEvent from '../../core/Event'\nimport Tween from '../../animation/tween'\nimport {\n    loadProgram,\n    loadShader,\n    getActiveUniforms,\n    getActiveAttributes,\n    vertexAttribPointer,\n    setUniforms,\n    checkAttrValid,\n    calculateStrip\n} from '../../base/GLUtil'\n\nconst mouseType = {\n    MOVE:'move',\n    DEFAULT:'default',\n    POINTER:'pointer'\n};\n\n\nclass WebGLRender extends EventEmitter{\n    constructor(context,container) {\n        super();\n\n        this.context = context;\n        this.config = this.context.config;\n\n        this.container = container;\n        this.graph = context.graph;\n\n        this.needUpdate = true;\n        this.sampleRatio = 1;\n\n\n        // this.initTexture = false;\n        // this.textureLoader = new TextureLoader();\n        this.textureIcon = new TextureIcon(this.config);\n        this.textureText = new TextureText();\n\n        this.mouseType = mouseType;\n        this.initGl();\n        this.initEvent();\n\n        this.initIconTexture();\n        this.initTextTexture();\n\n        this.projectMatrix = null;\n\n        this.camera = {\n            scale:1,\n            positionX:0,\n            positionY:0,\n            rotation:0\n        };\n\n        this.saveDataFrame = null;\n        this.saveDataTex = null;\n\n        /**\n         * layers:layer\n         * index: cache map\n         * flag:\n         */\n        this.renderCache = {\n            graph:{layers:[],index:{},flag:false},\n            node:{layers:[],index:{},flag:false},\n            edge:{layers:[],index:{},flag:false}\n        };\n        this.clearAllFlag = true;\n        this.renderLayerMap = {};\n        this.renderLayersConfig = this.config.renderLayersConfig || WebGLRender.defaultLayersConfig;\n        this.initRenderLayer();\n\n        this.updateLayerData();\n\n        // debugger\n        initEvent.call(this);\n\n    }\n\n    initGl() {\n        var option = {\n            preserveDrawingBuffer:true,\n            premultipliedAlpha:true,\n            alpha:true,\n            antialias:true\n        }\n\n        var canvas = this.container,gl;\n        \n        gl = canvas.getContext('experimental-webgl',option) || canvas.getContext('webgl',option);\n\n\n        if (!gl) {\n            throw 'browser not support webGl!';\n        }\n\n        gl.getExtension('OES_standard_derivatives');\n        gl.getExtension('OES_element_index_uint');\n\n        // gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        // gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);\n        // gl.enable(gl.DEPTH_TEST);\n        gl.enable(gl.BLEND);\n        gl.disable(gl.DEPTH_TEST);\n        gl.clearColor(1,1,1,1);\n        // gl.clearColor(0,0,0,0);\n\n        \n        this.gl = gl;\n    }\n\n    setMouseType(type){\n        // if(mouseType[type]){\n            this.container.style.cursor = type;\n        // }\n    }\n\n    initEvent(){\n        var _this = this;\n        this.graph.on('change',function (type,ids,dirtyAttr) {\n            if(type =='node'){\n                 _this.updateNodeRenderData(ids,dirtyAttr);\n            }else if(type == 'edge'){\n                 _this.updateEdgeRenderData(ids,dirtyAttr);\n            }\n\n        });\n        this.graph.on('reset',function () {\n            _this.clearRenderCache();\n            _this.initIconTexture();\n            _this.initTextTexture();\n        });\n        this.graph.on('add',function (type,ids) {\n            if(!util.isArray(ids)) ids = [ids];\n\n            var objs = null;\n\n            if(type == 'node') objs = ids.map(function (e) {return _this.graph.nodesIndex[e]});\n            else objs = ids.map(function (e) {return _this.graph.edgesIndex[e]});\n\n            var addtexts = getAddText(objs);\n            if(addtexts.length > 0){\n                _this.textureText.addTexts(addtexts);\n                _this.textureText.attachGl(_this.gl);\n            }\n            _this.clearRenderCache();\n\n        });\n        this.graph.on('remove',function (type,ids) {\n            _this.clearRenderCache();\n        });\n\n\n        function getAddText(objs) {\n            var infos = _this.textureText.textinfo.infos;\n            var char,len;\n            var texts = [];\n            objs.forEach(function (e) {\n                if(!e.label) return;\n                len = e.label.length;\n                for(var i = 0;i< len;i++){\n                    char = e.label.charAt(i);\n                    if(!infos[char]){\n                        texts.push(char);\n                    }\n                }\n            });\n\n            return texts;\n        }\n\n    }\n    initTextTexture(){\n\n        this.textureText.clear();\n\n        var nodes = this.graph.nodes;\n        var edges = this.graph.edges;\n\n        var map = {};\n        var texts = [];\n        nodes.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        edges.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        this.textureText.createCanvasImg(texts);\n\n        this.textureText.attachGl(this.gl);\n    }\n    initIconTexture(){\n\n        this.textureIcon.clear();\n\n        var nodes = this.graph.nodes;\n\n        var map = {};\n        var icons = [];\n        nodes.forEach(function (e) {\n            if(e.icon){\n                if(!map[e.icon]){\n                    map[e.icon] = true;\n                    icons.push(e.icon);\n                }\n            }\n        });\n\n        this.textureIcon.createIcons(icons);\n\n        this.textureIcon.attachGl(this.gl);\n\n    }\n    initRenderLayer(){\n        var  renderLayerMap = this.renderLayerMap;\n        var gl = this.gl;\n        var program,strip = 0;\n\n        var _this = this;\n\n\n        this.renderLayersConfig.forEach(function (layer) {\n\n            layer.subLayers.forEach(function (subLayer) {\n\n                if(subLayer.enable == undefined) subLayer.enable = true;\n                if(subLayer.show == undefined) subLayer.show = true;\n                if(subLayer.option == undefined) subLayer.option = {};\n\n                renderLayerMap[subLayer.name] = subLayer;\n\n                if(subLayer.custom) return;\n\n                if(subLayer.cacheOldData == undefined) subLayer.cacheOldData = true;\n\n                program = loadProgram(gl, [\n                    loadShader(gl, subLayer.render.shaderVert, gl.VERTEX_SHADER),\n                    loadShader(gl, subLayer.render.shaderFrag, gl.FRAGMENT_SHADER)\n                ]);\n\n                program.activeAttributes = getActiveAttributes(gl,program);\n                program.activeUniforms = getActiveUniforms(gl,program);\n\n                strip = subLayer.render.strip;\n\n                if(!subLayer.render.strip) strip = calculateStrip(subLayer.render.attributes);\n\n                program.offsetConfig = {config:subLayer.render.attributes,strip:strip};\n                program.vertexBuffer = gl.createBuffer();\n                program.indexBuffer = gl.createBuffer();\n                program.indexN = 0;\n\n                subLayer.mainLayer = layer.name;\n                subLayer.program = program;\n                subLayer.uniforms = null;\n                subLayer.initBuffer = false;\n                subLayer.tempVertex = [];\n                subLayer.tempIndex = [];\n                subLayer.index = [];\n\n                if(subLayer.check == undefined) subLayer.check = function () {return true};\n\n                _this.renderCache[subLayer.context].layers.push(subLayer.name);\n\n            })\n        }.bind(this));\n    }\n    //render\n    render() {\n        // debugger\n        this.resizeCanvas();\n        // setTimeout(this.render2.bind(this),500);\n        console.time('render');\n\n        this.updateLayerData();\n\n        // console.time('updateLayerUniformData');\n        this.updateLayerUniformData();\n        // console.timeEnd('updateLayerUniformData');\n\n        // console.time('draw');\n        try {\n            this.draw();\n        }catch (e) {\n            console.error(e);\n        }\n\n        // console.timeEnd('draw');\n        console.timeEnd('render');\n\n        this.needUpdate = false;\n\n    }\n    draw(){\n\n        var num = 0;\n        var mainLayer, subLayers, layer, gl,err,\n            renderLayerMap, program, layerIndex, data, uniforms;\n        renderLayerMap = this.renderLayerMap;\n\n        gl = this.gl;\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        // gl.enable(gl.DEPTH_TEST);\n        // gl.depthFunc(gl.LEQUAL);\n        // gl.depthMask(true);\n\n        for (var i = 0; i < this.renderLayersConfig.length; i++) {\n            mainLayer = this.renderLayersConfig[i];\n            subLayers = mainLayer.subLayers;\n\n            for (var j = 0; j < subLayers.length; j++) {\n\n                if(!subLayers[j].enable || !subLayers[j].show) continue;\n\n                //custom render\n                if(subLayers[j].custom && subLayers[j].render){\n                    subLayers[j].render.call(subLayers[j],this,subLayers[j].option);\n                    continue;\n                }\n\n                layer = subLayers[j].name;\n\n                program = renderLayerMap[layer].program;\n\n                if(program.indexN == 0) continue;\n\n                gl.useProgram(program);\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, program.vertexBuffer);\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, program.indexBuffer);\n\n                layerIndex = renderLayerMap[layer].index;\n\n                if(err = vertexAttribPointer(gl, program.activeAttributes, program.offsetConfig)){\n                    throw new Error(`render layer[ ${layer} ] err:\\n ${err}`);\n                }\n                setUniforms(gl, program.activeUniforms, renderLayerMap[layer].uniforms);\n\n                gl.drawElements(gl.TRIANGLES, program.indexN, gl.UNSIGNED_INT, 0);\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, null);\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n            }\n        }\n        // console.log('render count:',num);\n    }\n\n    updateCacheByData(context,data,dirtyAttr,forceUpdate){\n\n        var cacheIndex,temp,points;\n        var contextRelativeLayers = this.renderCache[context].layers;\n        var renderLayerMap = this.renderLayerMap;\n        var gl = this.gl;\n\n        cacheIndex = this.renderCache[context].index[data.id] =  this.renderCache[context].index[data.id]  || {};\n\n        // debugger\n        contextRelativeLayers.forEach(function(layer) {\n\n            if(!renderLayerMap[layer].check(data) || !renderLayerMap[layer].enable) return;\n\n            if (!forceUpdate && renderLayerMap[layer].cache) return;\n\n            temp = renderLayerMap[layer].render.getRenderData({\n                dirtyAttr:dirtyAttr,\n                oldData:cacheIndex[layer] ? cacheIndex[layer].data : null,\n                data: data,\n                config:this.config,\n                graph: this.graph,\n                textureText: this.textureText,\n                // textureLoader: this.textureLoader,\n                textureIcon: this.textureIcon\n            });\n\n            if(renderLayerMap[layer].initBuffer){\n                gl.bindBuffer(gl.ARRAY_BUFFER, renderLayerMap[layer].program.vertexBuffer);\n                gl.bufferSubData(gl.ARRAY_BUFFER, cacheIndex[layer].vertexStart,new Float32Array(temp.vertices));\n\n                renderLayerMap[layer].cacheOldData && (cacheIndex[layer].data.vertices = temp.vertices);//cache old data\n            }else {\n                points = renderLayerMap[layer].tempVertex.length / renderLayerMap[layer].program.offsetConfig.strip;\n\n                cacheIndex[layer] = cacheIndex[layer] || {vertexStart:0,data:null};\n\n                renderLayerMap[layer].cacheOldData && (cacheIndex[layer].data = temp);//cache old data\n\n                cacheIndex[layer].vertexStart = renderLayerMap[layer].tempVertex.length*4;\n                temp.vertices.forEach(function (e) {renderLayerMap[layer].tempVertex.push(e)});\n                temp.indices.forEach(function (e,i) {\n                    temp.indices[i] = e+points;\n                    renderLayerMap[layer].tempIndex.push(temp.indices[i])\n                });\n            }\n\n        }.bind(this))\n    }\n    updateContextCache(context){\n        if(context != 'node' &&  context != 'edge' && context != 'graph') return;\n\n        if(this.renderCache[context].flag)  return;\n\n        var datas,contextRelativeLayers;\n        var gl = this.gl;\n        var  renderLayerMap = this.renderLayerMap;\n\n        if(context === 'graph'){\n\n        }else {\n            datas = context == 'node' ? this.graph.nodes : this.graph.edges;\n            for(var i = 0,len = datas.length;i < len ; i++){\n                this.updateCacheByData(context,datas[i]);\n            }\n\n            contextRelativeLayers = this.renderCache[context].layers;\n\n            contextRelativeLayers.forEach(function (layer) {\n\n                if(!renderLayerMap[layer].enable || renderLayerMap[layer].initBuffer) return;\n\n                if(renderLayerMap[layer].tempVertex.length == 0) return;\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, renderLayerMap[layer].program.vertexBuffer);\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, renderLayerMap[layer].program.indexBuffer);\n\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(renderLayerMap[layer].tempVertex), gl.DYNAMIC_DRAW);\n                gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint32Array(renderLayerMap[layer].tempIndex), gl.STATIC_DRAW);\n\n                renderLayerMap[layer].program.indexN = renderLayerMap[layer].tempIndex.length;\n                renderLayerMap[layer].initBuffer = true;\n                renderLayerMap[layer].cache = true;\n\n                renderLayerMap[layer].tempVertex = [];\n                renderLayerMap[layer].tempIndex = [];\n            })\n        }\n\n        this.renderCache[context].flag = true;\n    }\n    updateLayerData(){\n        // console.time('updateContextCacheNode');\n        this.updateContextCache('node');\n        // console.timeEnd('updateContextCacheNode');\n\n        // console.time('updateContextCacheEdge');\n        this.updateContextCache('edge');\n        // console.timeEnd('updateContextCacheEdge');\n\n        this.clearAllFlag = false;\n\n\n    }\n    updateLayerUniformData(){\n        var uniforms,err;\n        var renderLayerMap = this.renderLayerMap;\n\n        for(var layer in renderLayerMap){\n            if(renderLayerMap[layer].custom) continue;\n            uniforms = renderLayerMap[layer].render.getUniforms({\n                matrix: mat3.multiMatrix([this.getCameraMatrix(true), this.projectMatrix]),\n                camera: this.camera,\n                config: this.config,\n                sampleRatio: this.sampleRatio,\n                // textureLoader: this.textureLoader,\n            });\n\n            if (err = checkAttrValid(renderLayerMap[layer].program.activeUniforms, uniforms)) {\n                throw err.join('\\n');\n            }\n\n            renderLayerMap[layer].uniforms = uniforms;\n        }\n    }\n    updateNodeRenderData(id,dirtyAttr){\n        // debugger\n        this.forceRender();\n        if(this.clearAllFlag) return;\n        this.updateCacheByData('node',this.graph.nodesIndex[id],dirtyAttr,true);\n    }\n    updateEdgeRenderData(ids,dirtyAttr){\n        this.forceRender();\n        if(this.clearAllFlag) return;\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateCacheByData('edge',this.graph.edgesIndex[id],dirtyAttr,true);\n        }.bind(this));\n    }\n    //cache update\n    clearRenderCache(layers){\n        this.forceRender();\n        var _this = this;\n        if(layers){\n            if(!util.isArray(layers)) layers = [layers];\n            layers.forEach(function (layer) {\n                _this.renderLayerMap[layer].initBuffer = false;\n                _this.renderLayerMap[layer].cache = false;\n                _this.renderCache[_this.renderLayerMap[layer].context].flag = false\n            });\n        }else {\n            for(var layer in _this.renderLayerMap){\n                _this.renderLayerMap[layer].initBuffer = false;\n                _this.renderLayerMap[layer].cache = false;\n            }\n            _this.renderCache.graph.flag = false;\n            _this.renderCache.graph.index = {};\n            _this.renderCache.node.flag = false;\n            _this.renderCache.node.index = {};\n            _this.renderCache.edge.flag = false;\n            _this.renderCache.edge.index = {};\n            _this.clearAllFlag = true;\n        }\n    }\n    disableRenderLayer(layers){\n        this.forceRender();\n\n        var renderLayerMap = this.renderLayerMap;\n\n        if(!util.isArray(layers)) layers = [layers];\n\n        layers.forEach(function (layer) {\n            if(renderLayerMap[layer]){\n                renderLayerMap[layer].enable = false;\n            }\n        });\n    }\n    enableRenderLayer(layers,updateCache = true){\n        this.forceRender();\n\n        var renderLayerMap = this.renderLayerMap;\n        var renderCache = this.renderCache;\n\n        if(!util.isArray(layers)) layers = [layers];\n\n        layers.forEach(function (layer) {\n            if(renderLayerMap[layer])\n            {\n                renderLayerMap[layer].enable = true;\n                if(updateCache){\n                    renderCache[renderLayerMap[layer].context].flag = false;\n                    renderLayerMap[layer].cache = false;\n                }\n            }\n        });\n    }\n    hideRenderLayer(layers){\n        this.forceRender();\n\n        var renderLayerMap = this.renderLayerMap;\n\n        if(!util.isArray(layers)) layers = [layers];\n        layers.forEach(function (layer) {\n            if(renderLayerMap[layer]){\n                renderLayerMap[layer].show = false;\n            }\n        });\n    }\n\n    setLayerOption(layer,option){\n        var renderLayerMap = this.renderLayerMap;\n        if(!renderLayerMap[layer]) return;\n\n        this.forceRender();\n\n        for(var attr in option){\n            renderLayerMap[layer].option[attr] = option[attr];\n        }\n    }\n\n\n    showRenderLayer(layers){\n        this.forceRender();\n\n        var renderLayerMap = this.renderLayerMap;\n\n        if(!util.isArray(layers)) layers = [layers];\n        layers.forEach(function (layer) {\n            if(renderLayerMap[layer]){\n                renderLayerMap[layer].show = true;\n            }\n        });\n    }\n\n    getCameraMatrix(isInvert){\n        var mat = mat3.multiMatrix([\n            mat3.matrixFromScale(this.camera.scale,this.camera.scale),\n            mat3.matrixFromRotation(this.camera.rotation),\n            mat3.matrixFromTranslate(this.camera.positionX,this.camera.positionY)\n        ]);\n        return isInvert  ? mat3.invert(mat) : mat;\n    }\n    resizeCanvas() {\n        var canvas;\n        var multiplier = this.sampleRatio;\n        canvas =this.container;\n        var width = canvas.clientWidth * multiplier | 0;\n        var height = canvas.clientHeight * multiplier | 0;\n        if (canvas.width !== width || canvas.height !== height) {\n            canvas.width = width;\n            canvas.height = height;\n            this.gl.viewport(0, 0,canvas.width, canvas.height);\n        }\n        this.projectMatrix = mat3.matrixFromScale(2/(this.container.clientWidth),2/(this.container.clientHeight));\n    }\n\n    graphToDomPos(pos){\n        var container = this.container;\n        var camPos =  mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix(true));\n        return {x:camPos[0]+container.clientWidth/2,y:container.clientHeight/2-camPos[1]};\n    }\n    toCameraPos(pos){\n        var container = this.container;\n        return {x:pos.x-container.clientWidth/2,y:container.clientHeight/2-pos.y};\n    }\n    toGraphPos(pos,isVector){\n        var p = isVector ?\n            mat3.rotateVector([pos.x,pos.y],this.getCameraMatrix())\n            :\n            mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix());\n        return {x:p[0],y:p[1]};\n    }\n\n    forceRender(){\n        this.needUpdate = true;\n    }\n    zoomTo(ratio,x,y,animation){\n        // debugger\n\n        var scale = this.camera.scale;\n        var positionX,positionY;\n\n        var newscale = ratio * scale;\n        if(newscale < this.config.zoomMin) newscale = this.config.zoomMin;\n        if(newscale > this.config.zoomMax) newscale = this.config.zoomMax;\n\n        if (x != null && y != null) {\n            var offset = mat3.rotateVector([x * (newscale - scale)/scale, y *(newscale - scale)/scale], this.getCameraMatrix());\n            positionX = this.camera.positionX - offset[0] ;\n            positionY = this.camera.positionY - offset[1];\n        }\n\n        if(animation){\n            this.zoomToAnimation({\n                positionX:positionX,\n                positionY:positionY,\n                scale:newscale\n            });\n        }else {\n            this.camera.positionX = positionX;\n            this.camera.positionY = positionY;\n            this.camera.scale = newscale;\n        }\n    }\n\n    zoomToAnimation(option,time){\n        Tween.removeByType('camera');\n        time = time || 100;\n\n        var _this = this;\n        new Tween(this.camera,'camera').to(option).duration(time).on('change',function () {\n            _this.forceRender();\n        });\n\n    }\n\n    saveData(){\n        // debugger\n        var gl = this.gl;\n\n        this.sampleRatio = 16;\n        var width = this.container.clientWidth*this.sampleRatio;\n        var height =  this.container.clientHeight*this.sampleRatio;\n\n        this.gl.viewport(0, 0,width,height);\n\n\n        if(!this.saveDataFrame){\n            this.saveDataFrame = gl.createFramebuffer();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.saveDataFrame);\n            this.saveDataTex = gl.createTexture();\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, this.saveDataTex);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.saveDataTex, 0);\n            gl.bindTexture(gl.TEXTURE_2D, null);\n\n        }\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.saveDataFrame);\n        this.render();\n        var pixels = new Uint8Array(width * height * 4);\n        gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n        // console.log(pixels);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n        this.sampleRatio = 1;\n        this.gl.viewport(0, 0,this.container.clientWidth, this.container.clientHeight);\n\n\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        var ctx = canvas.getContext('2d');\n        var imageData = ctx.createImageData(width, height);\n        for(var i = 0,len = imageData.data.length;i < len;i++)imageData.data[i] = pixels[i];\n        ctx.putImageData(imageData,0,0);\n\n        canvas.toBlob(function(blob) {\n            saveAs(blob, \"test.png\");\n        });\n\n    }\n\n}\n\nexport default WebGLRender;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/render.js","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\nsize = a_size;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/edge-label-vert.glsl\n// module id = 8\n// module chunks = 0","/**\n * Created by chengang on 17-4-6.\n */\n\n'use strict';\n\nimport Graph from './Graph'\nimport WebGLRender from  '../render/webgl/render'\nimport utils from '../util'\n\nimport Tween from '../animation/tween'\nimport Selection from './Selection'\nimport layout from '../layout/index'\nimport defaultConfig from './config'\n\nexport  default  class Core {\n\n    static layout = layout;\n\n    constructor(option) {\n        option = option || {};\n\n        this.container = option.container;\n\n        this.config = utils.extend(option.config || {},defaultConfig);\n\n        this.graph = new Graph({\n            nodes: option.nodes,\n            edges: option.edges\n        });\n\n        this.canvas = {};\n        this.initCanvas();\n\n        this.render = new WebGLRender(this, this.canvas.render);\n\n        this.selection = new Selection(this,this.canvas.mouse);\n\n        this.on = this.render.on.bind(this.render);\n        this.off = this.render.off.bind(this.render);\n\n        this._start();\n\n        this._initEvent();\n    }\n\n    initCanvas() {\n\n        this.container.style.position = 'relative';\n        this.canvas.render = this.createElement('canvas');\n        this.container.appendChild(this.canvas.render);\n\n        this.canvas.mouse = this.createElement('canvas');\n        this.canvas.mouse.style.display = 'none';\n        this.canvas.mouse.style.cursor = 'crosshair';\n\n        this.container.appendChild(this.canvas.mouse);\n    }\n\n    createElement(tag) {\n        var ele = document.createElement(tag);\n        ele.style.position = 'absolute';\n        ele.style.left = '0px';\n        ele.style.top = '0px';\n        ele.style.width = '100%';\n        ele.style.height = '100%';\n        ele.style.border = 'none';\n        ele.width = this.container.clientWidth;\n        ele.height = this.container.clientHeight;\n\n        ele.oncontextmenu = function (e) {\n            e.preventDefault();\n            return false;\n        };\n\n        return ele;\n    }\n\n    _start() {\n        var _this = this;\n        var frames = state();\n\n        function state() {\n            var n = -1, start = 0;\n            return function (time) {\n                n++;\n                time = time / 1000;\n                if ((time - start) > 1) {\n                    // console.log(n);\n                    n = -1;\n                    start = time;\n                }\n\n            }\n        }\n\n        function render(time) {\n            _this._render();\n            frames(time);\n            requestAnimationFrame(render)\n        }\n\n        requestAnimationFrame(render);\n    }\n\n    _render() {\n        this.resize();\n\n        if (this.render && this.render.needUpdate) {\n            // console.time('render')\n            // debugger\n            this.render.render();\n            // console.timeEnd('render')\n        }\n\n\n    }\n\n\n    _initEvent() {\n        var _this = this;\n        this.render.on('nodeMouseDown', function (node, e) {\n            // debugger\n            if (!_this.selection.isNodeSelected(node.id))\n                _this.selection.selectNodes(node.id,e.shiftKey);\n            else if(e.shiftKey) _this.selection.unSelectNode(node.id);\n        });\n\n        this.render.on('nodeRightClick', function (type,node, e) {\n            if (type == 'node' && !_this.selection.isNodeSelected(node))\n                _this.selection.selectNodes(node);\n        });\n    }\n\n    resize() {\n        if (this.canvas.mouse.width != this.container.clientWidth || this.canvas.mouse.height != this.container.clientHeight) {\n            this.canvas.mouse.width = this.container.clientWidth;\n            this.canvas.mouse.height = this.container.clientHeight;\n            this.render.forceRender();\n        }\n    }\n\n\n    getFitOptions(nodes) {\n        var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n        nodes.forEach(function (e) {\n            if (e.x < x0) x0 = e.x;\n            if (e.x > x1) x1 = e.x;\n            if (e.y < y0) y0 = e.y;\n            if (e.y > y1) y1 = e.y;\n        });\n\n        return {\n            scale:Math.max((x1-x0)/this.render.container.clientWidth,(y1-y0)/this.render.container.clientHeight),\n            positionX:(x0+x1)/2,\n            positionY:(y0+y1)/2,\n        }\n    }\n\n    fit(duration,option){\n        var _this = this;\n        Tween.removeByType('camera');\n        duration = duration || 1000;\n        option = option || this.getFitOptions(this.graph.nodes);\n        new Tween(this.render.camera,'camera').to(option).duration(duration).on('change',function () {\n            _this.render.forceRender();\n        });\n    }\n\n\n    makeLayout(type,nodes,cb) {\n\n        var _this = this;\n        var layout, data;\n        var layoutConfig = Core.layout;\n\n        Tween.removeByType('layout');\n\n        var edges = null;\n        if(nodes == null){\n            nodes =  this.graph.nodes;\n            edges =  this.graph.edges;\n        }else {\n            edges = getEdges(nodes);\n        }\n\n        if (!type || type == 'preset') {\n            this.graph.nodes.forEach(function (e) {\n                if (!('x' in e)) e.x = Math.random() * _this.render.gl.clientWidth;\n                if (!('y' in e)) e.y = Math.random() * _this.render.gl.clientWidth;\n            });\n            this.render.clearRenderCache();\n        } else if (layout = layoutConfig[type]) {\n\n            layout = new layoutConfig[type]();\n            data = layout.layout(nodes,edges);\n\n            if(data.length > this.graph.nodes.length * 4/5){\n                new Tween(nodes, 'layout').to(data).duration(1000)\n                    .on('change', function (t) {\n                        // console.time('layout')\n                        nodes.forEach(function (node) {\n                            // debugger\n                            _this.graph.setNodeData(node.id, {x: node.x, y: node.y});\n                        });\n                        // console.timeEnd('layout')\n                    })\n                    .on('end', cb);\n\n                this.fit(1000,this.getFitOptions(data));\n            }else {\n\n                var bbox = utils.getBBox(nodes);\n                var bbox1 = utils.getBBox(data);\n\n                var offsetX = bbox.x+bbox.w/2 - (bbox1.x + bbox1.w/2);\n                var offsetY = bbox.y+bbox.h/2 - (bbox1.y + bbox1.h/2);\n\n                data.forEach(function (e) {\n                    e.x += offsetX;\n                    e.y += offsetY;\n                });\n\n                new Tween(nodes, 'layout').to(data).duration(1000)\n                    .on('change', function (t) {\n                        nodes.forEach(function (node) {\n                            _this.graph.setNodeData(node.id, {x: node.x, y: node.y});\n                        });\n                    })\n                    .on('end', cb);\n            }\n\n        }\n\n\n        function getEdges(nodes) {\n            var map = {};\n            var edges = [];\n            nodes.forEach(function (e) {\n                map[e.id] = true;\n            });\n\n            _this.graph.edges.forEach(function (e) {\n                if(map[e.source] && map[e.target])\n                    edges.push(e);\n            });\n\n            return edges;\n\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","\n\nimport WebGLRender from './webgl/render'\nWebGLRender.node = {};\nWebGLRender.edge = {};\nWebGLRender.nodeLabel = {};\nWebGLRender.edgeLabel = {};\n\nimport node from './webgl/node/default/render'\nimport rect from './webgl/node/rect/render'\nWebGLRender.node.default = node;\nWebGLRender.node.rect = rect;\n\n\nimport NodeLabel from './webgl/label/NodeLabel'\nWebGLRender.nodeLabel.default = NodeLabel;\n\nimport edge from './webgl/edge/render'\nimport curve from './webgl/edge/curve/render'\nWebGLRender.edge.default = edge;\nWebGLRender.edge.curve = curve;\n\n\nimport EdgeLabel from './webgl/label/EdgeLabel'\nimport curveLabel from './webgl/label/curveLabel/render'\nWebGLRender.edgeLabel.default = EdgeLabel;\nWebGLRender.edgeLabel.curve = curveLabel;\n\n\nimport initDefaultConfig from  './webgl/defaultConfig/index'\ninitDefaultConfig(WebGLRender);\n\nexport default WebGLRender\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","/**\n *from d3-timer\n */\n\n'use strict';\n\n\nvar frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : function (f) {\n            // setTimeout(f, 17);\n            setTimeout(f, 30);\n        };//\n\nexport function now() {\n    return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n    clockNow = 0;\n}\n\nexport function Timer() {\n    this._call = this._time = this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n    constructor: Timer,\n    restart: function (callback, delay, time) {\n        if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n        time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n        if (!this._next && taskTail !== this) {\n            if (taskTail) taskTail._next = this;\n            else taskHead = this;\n            taskTail = this;\n        }\n        this._call = callback;\n        this._time = time;\n        sleep();\n    },\n    stop: function () {\n        if (this._call) {\n            this._call = null;\n            this._time = Infinity;\n            sleep();\n        }\n    }\n};\n\nexport default  function timer(callback, delay, time) {\n    var t = new Timer;\n    t.restart(callback, delay, time);\n    return t;\n}\n\nexport function timerFlush() {\n    now(); // Get the current time, if not already set.\n    ++frame; // Pretend weve set an alarm, if we havent already.\n    var t = taskHead, e;\n    while (t) {\n        if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n        t = t._next;\n    }\n    --frame;\n}\n\nfunction wake() {\n    clockNow = (clockLast = clock.now()) + clockSkew;\n    frame = timeout = 0;\n    try {\n        timerFlush();\n    } finally {\n        frame = 0;\n        nap();\n        clockNow = 0;\n    }\n}\n\nfunction poke() {\n    var now = clock.now(), delay = now - clockLast;\n    if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n    var t0, t1 = taskHead, t2, time = Infinity;\n    while (t1) {\n        if (t1._call) {\n            if (time > t1._time) time = t1._time;\n            t0 = t1, t1 = t1._next;\n        } else {\n            t2 = t1._next, t1._next = null;\n            t1 = t0 ? t0._next = t2 : taskHead = t2;\n        }\n    }\n    taskTail = t0;\n    sleep(time);\n}\n\nfunction sleep(time) {\n    if (frame) return; // Soonest alarm already set, or will be.\n    if (timeout) timeout = clearTimeout(timeout);\n    var delay = time - clockNow;\n    if (delay > 24) {\n        if (time < Infinity) timeout = setTimeout(wake, delay);\n        if (interval) interval = clearInterval(interval);\n    } else {\n        if (!interval) interval = setInterval(poke, pokeDelay);\n        frame = 1, setFrame(wake);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/timer.js","\n'use strict';\n\nimport util from '../util'\n\n\n\nexport default function initEvent() {\n\n    var _this = this;\n    var mouseDown= false,\n        mouseMove = false,\n        disableMove = false,\n        //over info\n        overInfo = {\n            currentNode:null,\n            currentEdge:null,\n        };\n    var config = _this.context.config;\n\n    _this.context.overInfo = overInfo;\n\n\n    var events = {\n        // click:handlerWrap(_clickHandler),\n        mousemove:handlerWrap(_moveHandler),\n        mousedown:handlerWrap(_downHandler),\n        mouseup:handlerWrap(_upHandler),\n        mousewheel:handlerWrap(_wheelHandler),\n        DOMMouseScroll:handlerWrap(_wheelHandler),//firfox\n    };\n    for(var e in events)    this.container.addEventListener(e, events[e], false);\n    events.click = handlerWrap(_clickHandler);\n\n    //some little situation maybe need the trigger function.\n    this.trigger = function (type,event) {\n        if(events[type]) events[type](event);\n    };\n\n    //default check function\n    function defaultNodeCheck(posx,posy,node) {\n        var check = false;\n        var dis,sizeX,sizeY,size;\n        if(node.type == 'rect'){\n            sizeX = util.getNodeSizeX(node) || config.defaultNodeSize;\n            sizeY = util.getNodeSizeY(node) || config.defaultNodeSize;\n            check = util.inRect(posx,posy,node.x-sizeX,node.y-sizeY,sizeX*2,sizeY*2);\n        }else {\n            dis = util.getDistance(posx, posy, node.x, node.y);\n            size = node.size || config.defaultNodeSize;\n            check = dis <= size;\n        }\n        return check;\n    }\n    function defaultEdgeCheck(posx,posy,edge) {\n        var check = false;\n        var source = _this.graph.nodesIndex[edge.source];\n        var target = _this.graph.nodesIndex[edge.target];\n        var ctrolP;\n\n        if(edge.curveCount == 0){\n            check = util.inLine(posx,posy,source.x,source.y,target.x,target.y,(edge.size || config.defaultEdgeSize)/2);\n        }else {\n            // debugger\n            ctrolP = util.getControlPos(source.x,source.y,target.x,target.y,edge.curveCount,edge.curveOrder);\n            check = util.isPointOnQuadraticCurve(\n                posx,posy,\n                source.x,source.y,\n                target.x,target.y,\n                ctrolP[0],ctrolP[1],\n                (edge.size || config.defaultEdgeSize) / 2\n            )\n        }\n\n        return check;\n    }\n\n    function checkInNode(posx,posy,node) {\n        if(_this.context.customNodeCheck && util.isFunction(_this.context.customNodeCheck)){\n            return _this.context.customNodeCheck(posx,posy,node,defaultNodeCheck);\n        }\n        else return defaultNodeCheck(posx,posy,node);\n    }\n    function checkInEdge(posx,posy,edge) {\n        if(_this.context.customEdgeCheck && util.isFunction(_this.context.customEdgeCheck)){\n            return _this.context.customEdgeCheck(posx,posy,edge,defaultEdgeCheck);\n        }\n        else return defaultEdgeCheck(posx,posy,edge);\n    }\n\n    function getNode(pos) {\n        // console.time('getNode')\n        var nodes = _this.graph.nodes;\n\n        var node, dis;\n        var findNode = null;\n\n        var selectNodes = _this.context.selection.getNodes();\n\n        if(selectNodes.length > 0){\n            for(var i = selectNodes.length-1;i >= 0;i--){\n                node = selectNodes[i];\n                if (checkInNode(pos.x,pos.y,node)) {\n                    findNode = node;\n                    break;\n                }\n            }\n        }\n\n\n        if (!findNode && nodes.length > 0) {\n            for (var i = nodes.length - 1; i >= 0; i--) {\n                node = nodes[i];\n                // node = _this.graph.nodesIndex[node.id];\n                if (checkInNode(pos.x,pos.y,node)) {\n                    findNode = node;\n                    break;\n                }\n            }\n        }\n        // console.timeEnd('getNode')\n        return findNode;\n    }\n\n    function getEdge(pos) {\n        // console.time('getEdge')\n        var edges = _this.graph.edges;\n\n        var findEdge = null;\n        var edge;\n\n        if (edges.length > 0) {\n            for (var i = edges.length - 1; i >= 0; i--) {\n                edge = edges[i];\n                if (checkInEdge(pos.x,pos.y,edge)) {\n                    findEdge = edge;\n                    break;\n                }\n            }\n        }\n        // console.timeEnd('getEdge')\n        return findEdge;\n    }\n\n\n\n    function _clickHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var edge ,node;\n\n       node = getNode(graphPos);\n       if(node){\n           _this.emit('nodeClick',[node,e]);\n       }else if(config.enableEdgeEvent && (edge = getEdge(graphPos))){\n           _this.emit('edgeClick',[edge,e]);\n       }else {\n           _this.emit('stageClick',[e]);\n       }\n\n    }\n\n    function _downHandler(e) {\n\n        var isRight = (e.which && e.which == 3) || (e.button && e.button == 2);\n\n        if(isRight) return;\n\n        mouseDown = true;\n        disableMove = true;\n\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n\n        if(node) _this.emit('nodeMouseDown',[node,e]);\n\n         handleDrag(!node);\n        // _this.forceRender();\n\n        function handleDrag(isCamera) {\n            var isDown = true;\n            var startx = graphPos.x,starty = graphPos.y;\n\n            var onmousemove =handlerWrap(function(e) {\n                if(!isDown) return;\n                // console.time('move')\n\n                _this.forceRender();\n\n                var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY}),temp;\n                var offsetx = graphPos.x - startx;\n                var offsety = graphPos.y - starty;\n\n                if(isCamera){\n                    _this.camera.positionX -= offsetx;\n                    _this.camera.positionY -= offsety;\n                    _this.setMouseType(_this.mouseType.MOVE);\n                }else {\n\n                    if(_this.context.selection.isNodeSelected(node.id)){\n                        _this.context.selection.data.nodes.forEach(function (id) {\n                            temp = _this.context.graph.nodesIndex[id];\n                            _this.graph.setNodeData(id,{x:temp.x+offsetx,y:temp.y+offsety});\n                        });\n                    }else _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n\n                    // fit(e);\n                }\n\n\n                if(isCamera){\n                    var newgraphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                    startx = newgraphPos.x;\n                    starty = newgraphPos.y;\n                }else {\n                    startx = graphPos.x;\n                    starty = graphPos.y;\n                }\n                // console.timeEnd('move')\n            });\n\n            var onmouseup = handlerWrap(function(e) {\n                e.preventDefault();\n                isDown = false;\n                clear();\n            });\n\n            var onmouseout = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n\n            _this.container.addEventListener('mousemove',onmousemove);\n            _this.container.addEventListener('mouseup',onmouseup);\n            _this.container.addEventListener('mouseout',onmouseout);\n\n\n            function clear() {\n                disableMove = false;\n                // _this.setMouseType(_this.mouseType.DEFAULT);\n                onmousemove&&_this.container.removeEventListener('mousemove',onmousemove);\n                onmouseup&&_this.container.removeEventListener('mouseup',onmouseup);\n                onmouseout&&_this.container.removeEventListener('mouseout',onmouseout);\n                onmousemove = onmouseup = onmouseout= null;\n            }\n\n\n        }\n\n    }\n\n    function _moveHandler(e) {\n        if(mouseDown)   mouseMove = true;\n        \n        if(disableMove || !_this.config.enableOverEvent) return;\n\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n        var old;\n\n        if(node && node !== overInfo.currentNode){\n            old = overInfo.currentNode;\n            overInfo.currentNode = node;\n\n           if(old) _this.emit('nodeOut', [old,e]);\n           if(overInfo.currentEdge){\n               old = overInfo.currentEdge;\n               overInfo.currentEdge = null;\n               _this.emit('edgeOut',[old,e]);\n           }\n            _this.emit('nodeOver', [node,e]);\n\n        }else if(!node && overInfo.currentNode){\n            old = overInfo.currentNode;\n            overInfo.currentNode = null;\n            _this.emit('nodeOut', [old,e]);\n        }\n\n        var edge;\n        if(!node && config.enableEdgeEvent){\n            edge = getEdge(graphPos);\n            if(edge && edge !== overInfo.currentEdge){\n                old = overInfo.currentEdge;\n                overInfo.currentEdge = edge;\n\n                if(old) _this.emit('edgeOut',[old,e]);\n                _this.emit('edgeOver',[edge,e]);\n            }else if(!edge && overInfo.currentEdge){\n                old = overInfo.currentEdge;\n                overInfo.currentEdge = null;\n                _this.emit('edgeOut',[old,e]);\n            }\n        }\n\n        if(node || edge){\n            _this.setMouseType(_this.mouseType.POINTER);\n        }else {\n            _this.setMouseType(_this.mouseType.DEFAULT);\n        }\n\n    }\n\n    function _upHandler(e) {\n\n        var isRight = (e.which && e.which == 3) || (e.button && e.button == 2);\n\n        if(mouseDown && !mouseMove && !isRight){\n            _clickHandler(e);\n        }\n\n\n        if (isRight){\n            var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n            var node = getNode(graphPos);\n            var edge;\n            if(node){\n                _this.emit('nodeRightClick',[node,e]);\n            }else if(edge = getEdge(graphPos)) {\n                _this.emit('edgeRightClick',[edge,e]);\n            }else {\n                _this.emit('stageRightClick',[e]);\n            }\n        }\n\n        mouseDown = false;\n        mouseMove = false;\n\n    }\n\n    function _wheelHandler(e) {\n        var value = (\n            (e.wheelDelta !== undefined && e.wheelDelta) ||\n            (e.detail !== undefined && -e.detail)\n        );\n\n        if(value == 0) return; // Mac OS maybe -0;\n\n\n        _this.forceRender();\n        var ratio = _this.config.zoomRatio;\n\n\n        if(value > 0){\n            _this.zoomTo(1/ratio,e.cameraX,e.cameraY);\n            _this.emit('zoom',[1/ratio,_this.camera.scale,e])\n        }else {\n            _this.zoomTo(ratio,e.cameraX,e.cameraY);\n            _this.emit('zoom',[ratio,_this.camera.scale,e])\n        }\n    }\n\n    //drag\n\n    function handlerWrap(handle) {\n        return function (e) {\n            var pos = _this.toCameraPos({x: e.offsetX, y: e.offsetY});\n            e.cameraX = pos.x;\n            e.cameraY = pos.y;\n            handle(e);\n        }\n    }\n\n    function fit(e) {\n        var x = e.offsetX,y = e.offsetY;\n\n        var camearaX = _this.camera.positionX;\n        var camearaY = _this.camera.positionY;\n        var scale = _this.camera.scale;\n\n        var offset = 20/scale;\n        var update = false;\n\n        if(x < 100 ){\n            update = true;\n            camearaX -= offset;\n        }\n        if(x > _this.container.clientWidth - 100){\n            update = true;\n            camearaX += offset;\n        }\n\n        if(y < 100){\n            update = true;\n            camearaY += offset;\n        }\n\n        if(y > _this.container.clientHeight - 100){\n            update = true;\n            camearaY -= offset;\n        }\n\n        // if(update) _this.zoomToAnimation({\n        //     positionX:camearaX,\n        //     positionY:camearaY,\n        //     scale:scale\n        // });\n\n        if(update) _this.zoomTo(1.01,e.cameraX,e.cameraY,true);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Event.js","/**\n * Created by chengang on 17-4-19.\n */\n\n'use strict';\n\nimport  EventEmitter from '../base/EventEmitter'\nimport  utils from '../util'\n\nexport default class Selection extends EventEmitter{\n    constructor(context,canvas){\n        super();\n\n        this.context = context;\n\n        this.canvas = canvas;\n        this.ctx = this.canvas.getContext('2d');\n\n        this.canvas.addEventListener('mousedown',this.mouseDown.bind(this));\n\n        this.rect = null;\n\n        this.data = {\n            edges:[],\n            nodes:[]\n        };\n\n        this.initGraphEvent();\n    }\n\n    enable(){\n        this.canvas.style.display = 'block';\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n\n    renderRect(){\n        var rect = this.rect;\n        var ctx = this.ctx;\n        var config = this.context.config;\n        ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n        ctx.fillStyle = config.selectionFillStyle;\n        ctx.strokeStyle= config.selectionStrokeStyle;\n        ctx.beginPath();\n        ctx.rect(rect.x,rect.y,rect.w,rect.h);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n    }\n\n    disable(){\n        this.canvas.style.display = 'none';\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n\n    initGraphEvent(){\n        var _this = this;\n        var map,dataType;\n        this.context.graph.on('remove',function (type,ids) {\n            dataType = type == 'node' ? 'nodes' : 'edges';\n            if(utils.isArray(ids) && ids.length > 1){\n                map = {};\n                ids.forEach( id =>{ map[id] = true});\n                _this.data[dataType] = _this.data[dataType].filter( id => !map[id]);\n            }else {\n                ids = utils.isArray(ids) ? ids[0] : ids;\n                for(var i = 0;i<_this.data[dataType].length;i++){\n                    if(_this.data[dataType][i] == ids){\n                        _this.data[dataType].splice(i,1);\n                        break;\n                    }\n                }\n            }\n        });\n\n        this.context.graph.on('reset',function () {\n            _this.data = {\n                edges:[],\n                nodes:[]\n            };\n        })\n    }\n\n    mouseDown(e){\n        var _this = this;\n\n        this.rect = {x:0, y:0, w:0, h:0};\n\n        this.rect.x = e.offsetX;\n        this.rect.y = e.offsetY;\n\n        _this.emit('selectStart',[_this]);\n\n        document.addEventListener('mousemove',mouseMove);\n        document.addEventListener('mouseup',mouseUp);\n        function mouseMove(e) {\n            _this.rect.w = e.offsetX - _this.rect.x;\n            _this.rect.h = e.offsetY - _this.rect.y;\n\n            _this.renderRect();\n        }\n        function mouseUp(e) {\n            mouseMove(e);\n\n            document.removeEventListener('mousemove',mouseMove);\n            document.removeEventListener('mouseup',mouseUp);\n            var nodesid = _this.filterNodes(_this.ctx);\n\n            _this.disable();\n            _this.selectNodes(nodesid);\n            _this.emit('selectEnd',[_this]);\n        }\n    }\n\n    selectNodes(nodesid,isAdd,sendMsg = true){\n        var _this = this;\n\n        if(!utils.isArray(nodesid)) nodesid = [nodesid];\n\n        if(isAdd){\n            nodesid.forEach(function (id) {\n                _this.context.graph.setNodeData(id,{selected:true});\n                _this.data.nodes.push(id);\n            });\n\n        }else {\n\n            _this.data.nodes.forEach(function (id) {\n                if(_this.context.graph.nodesIndex[id])\n                    _this.context.graph.setNodeData(id,{selected:false});\n            });\n\n            nodesid.forEach(function (id) {\n                _this.context.graph.setNodeData(id,{selected:true});\n            });\n\n            _this.data.nodes = nodesid;\n\n        }\n\n        sendMsg && _this.emit('select',['node',_this.getNodes()]);\n    }\n    selectEdges(edgesid,isAdd,sendMsg = true){\n        var _this = this;\n\n        if(!utils.isArray(edgesid)) edgesid = [edgesid];\n\n        if(isAdd){\n            edgesid.forEach(function (id) {\n                _this.context.graph.setEdgeData(id,{selected:true});\n                _this.data.edges.push(id);\n            });\n\n        }else {\n\n            _this.data.edges.forEach(function (id) {\n                if(_this.context.graph.edgesIndex[id])\n                    _this.context.graph.setEdgeData(id,{selected:false});\n            });\n\n            edgesid.forEach(function (id) {\n                _this.context.graph.setEdgeData(id,{selected:true});\n            });\n\n            _this.data.edges = edgesid;\n\n        }\n\n        sendMsg && _this.emit('select',['edge',_this.getEdges()]);\n    }\n\n    unSelectNode(nodesid){\n\n        if(this.data.nodes.length == 0 || !nodesid) return;\n\n        var _this = this;\n        if(!utils.isArray(nodesid)) nodesid = [nodesid];\n\n        var map = {};\n\n        nodesid.forEach(function (id) {\n            map[id] = true;\n        });\n\n        var newSelected = [];\n        this.data.nodes.forEach(function (id) {\n            if(map[id]) _this.context.graph.setNodeData(id,{selected:false});\n            else newSelected.push(id);\n        });\n\n        this.data.nodes = newSelected;\n\n        _this.emit('select',[_this.getNodes()]);\n    }\n    getNodes(){\n        return this.data.nodes.map( id => this.context.graph.nodesIndex[id]);\n    }\n    getEdges(){\n        return this.data.edges.map( id => this.context.graph.edgesIndex[id]);\n    }\n\n\n    isNodeSelected(id){\n        var nodes = this.data.nodes;\n        for(var i = 0;i< nodes.length;i++){\n            if(nodes[i] == id){\n                return true\n            }\n        }\n        return false;\n    }\n    isEdgeSelected(id){\n        var edges = this.data.edges;\n        for(var i = 0;i< edges.length;i++){\n            if(edges[i] == id){\n                return true\n            }\n        }\n        return false;\n    }\n\n    filterNodes(ctx){\n        var nodes = this.context.graph.nodes;\n        var selects = [];\n        var domPos;\n        nodes.forEach(function (node) {\n            domPos = this.context.render.graphToDomPos({x:node.x,y:node.y});\n            if(ctx.isPointInPath(domPos.x,domPos.y)) selects.push(node.id);\n        }.bind(this));\n\n        return selects;\n    }\n\n    delete(){\n        var _this = this;\n        var nodes = this.data.nodes;\n        this.data.nodes = [];\n        nodes.forEach(function (id) {\n            _this.context.graph.removeNode(id);\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Selection.js","'use strict';\n\nexport default {\n\n    //default\n    defaultNodeBorder:'#d4525f',\n    // node\n    defaultNodeSize:10,\n    defaultNodeColor:\"#3a82a8\",\n    //edge\n    defaultEdgeColor:\"#69a2a8\",\n    defaultEdgeSize:1.6,\n    defaultEdgeArrowSize:5,\n\n    zoomRatio:1.2,\n    zoomMin:0.05,\n    zoomMax:20,\n\n    textureIconWidth:1024,\n    textureIconHeight:1024,\n\n    enableOverEvent:true,\n    enableEdgeEvent:true,\n    enableSelectEdge:false,\n\n    //selection\n    selectionFillStyle:'rgba(58, 75, 89, 0.3)',\n    selectionStrokeStyle:'#4b7598',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","/**\n * Created by chengang on 17-2-20.\n */\nfunction CircularLayout() {\n    this.nodes = null;\n    // this.links = null;\n     this.posSet = null;\n     this.depthPosSet = null;\n     this.drawnBiComps =null;\n     this.bc = null;\n     this.nodeHeights = {};\n     this.node2BiComp = {};\n\n     this.width = 60;\n\n}\n\nvar p = CircularLayout.prototype;\n\n//\np.layout = function (nodes,edges) {\n    this.init(nodes,edges);\n\n    this.posSet = new Array(this.nodes.length);\n    this.depthPosSet = new Array(this.nodes.length);\n\n    this.bc = this.createBicconnects();\n    // var test = this.bc.filter(function (e) {\n    //     return e.length > 3;\n    // });\n    this.__layout(this.bc);\n    return this.nodes.map(function (e) {\n        return {x: e.x || 0,y:e.y || 0};\n    })\n};\np.init = function (nodes,edges) {\n    var oldNodes = nodes,oldLinks = edges;\n    var tempNodes = [],map = {},temp;\n    oldNodes.forEach(function (e,i) {\n        temp = {\n            id:e.id,\n            _index:i,\n            links:[]\n        };\n        tempNodes.push(temp);\n        map[temp.id] = temp;\n    })\n\n    var s,t;\n    oldLinks.forEach(function (e,i) {\n        s = map[e.source];\n        t = map[e.target];\n\n        s.links = s.links || [];\n        s.links.push(t._index);\n\n        t.links = t.links || [];\n        t.links.push(s._index);\n    });\n\n    this.nodes = tempNodes;\n};\np.createBicconnects = function() {\n    var nodes = this.nodes;\n    var states = new Array(this.nodes.length),\n        dfsn = new Array(this.nodes.length),\n        low = new Array(this.nodes.length),\n        edgesStack = [],\n        pre = new Array(this.nodes.length);\n\n    var biComponents = [];\n\n    pre[0] = -1;\n    var num = 0;\n    for (var i = 0; i < this.nodes.length; i++) {\n        states[i] = 0;\n    }\n\n    dfs(0);\n    return biComponents;\n\n    function dfs(current) {\n        states[current] = 1;\n        low[current] = dfsn[current] = ++num;\n\n        var neigh;\n        var neighNodes = nodes[current].links;\n\n        for (var i = 0; i < neighNodes.length; i++) {\n            neigh = neighNodes[i];\n\n            if (states[neigh] == 0) {\n                pre[neigh] = current;\n                edgesStack.push({source: current, target: neigh});\n                dfs(neigh);\n                low[current] = Math.min(low[current], low[neigh]);\n\n                if ((pre[current] == -1 && nodes[current].links.length >= 2) || low[neigh] >= dfsn[current]) {\n//                        var children = nodes[current].links;\n//                        if(children.length >=2){\n                    var singleComponent = [];\n                    var map = {};\n                    singleComponent.push(edgesStack[edgesStack.length - 1].target);\n                    map[edgesStack[edgesStack.length - 1].target] = true;\n                    while (edgesStack[edgesStack.length - 1].source != current) {\n                        var edge = edgesStack.pop();\n                        if (!map[edge.source]) {\n                            singleComponent.push(edge.source);\n                            map[edge.source] = true;\n                        }\n                        if (!map[edge.target]) {\n                            singleComponent.push(edge.target);\n                            map[edge.target] = true;\n                        }\n                    }\n                    edgesStack.pop();\n                    if (!map[current]) {\n                        singleComponent.push(current);\n                        map[current] = true;\n                    }\n                    /*singleComponent.length > 2 && */biComponents.push(singleComponent);\n//                        }\n                }\n//                    states[neigh]\n            } else if (neigh != pre[current]) {\n                low[current] = Math.min(low[current], low[neigh]);\n            }\n        }\n\n\n    }\n};\np.__layout = function(biconncts) {\n\n\n    var max = -1;\n    var maxIndex = null;\n    var nodes = this.nodes;\n\n    biconncts.forEach(function (e, i) {\n        if (e.length > max) {\n            max = e.length;\n            maxIndex = i;\n        }\n    });\n\n    biconncts[maxIndex].forEach(function (e) {\n        nodes[e].delete = true;\n    });\n\n    for (var i = 0; i < biconncts.length; i++)\n        if (biconncts[i].length > 3) {\n            for (var j = 0; j < biconncts[i].length; j++) {\n                this.node2BiComp[biconncts[i][j]] = i;\n            }\n        }\n\n    var bc = biconncts[maxIndex];\n\n    this.drawnBiComps = new Array(bc.length);\n    this.drawnBiComps[maxIndex] = true;\n\n\n\n    var maxSize = bc.length;\n    var radius = (this.width * maxSize) / (Math.PI * 2);\n    var deltaAngle = (2 * Math.PI) / maxSize;\n    var angle = 0;\n\n    var startX = radius | 0;\n    var startY = radius | 0;\n\n\n    bc = this.sortInnerCircle(bc);\n\n    for (var i = 0; i < bc.length; i++) {\n        nodes[bc[i]].test = i;\n        nodes[bc[i]].x = startX + Math.cos(angle) * radius;\n        nodes[bc[i]].y = startY - Math.sin(angle) * radius;\n        this.posSet[bc[i]] = true;\n        angle += deltaAngle;\n    }\n\n    this.SetOuterCircle(maxIndex, radius, startX, startY, -1);\n};\np.sortInnerCircle = function(icNodes) {\n    var greedyNodes = [];\n    var modestNodes = [];\n\n    var forFunct = {};\n\n    for (var i = 0; i < icNodes.length; i++)\n        forFunct[icNodes[i]] = true;\n\n    for (var i = 0; i < icNodes.length; i++) {\n        var tmp = this.NoOfChildren(icNodes[i], forFunct);\n\n        if (tmp > 4)\n            greedyNodes.push(icNodes[i]);\n        else\n            modestNodes.push(icNodes[i]);\n    }\n\n    var toReturn = new Array(icNodes.length);\n    var gNo = greedyNodes.length;\n    var mNo = modestNodes.length;\n    var deltaM;\n    var deltaG;\n\n    if (gNo == 0) {\n        deltaM = mNo;\n        deltaG = 0;\n    } else if (mNo == 0) {\n        deltaG = gNo;\n        deltaM = 0;\n    } else if (gNo > mNo) {\n        deltaM = 1;\n        deltaG = (gNo / mNo) | 0 ;\n    } else {\n        deltaG = 1;\n        deltaM = (mNo / gNo ) | 0;\n    }\n\n    var x = 0;\n    var i, g, m;\n    for (g = 0, m = 0; g < greedyNodes.length && m < modestNodes.length;) {\n        for (i = 0; i < deltaG && g < greedyNodes.length; i++)\n            toReturn[x++] = greedyNodes[g++];\n\n        for (i = 0; i < deltaM && m < modestNodes.length; i++)\n            toReturn[x++] = modestNodes[m++];\n    }\n\n    while (g < greedyNodes.length)\n        toReturn[x++] = greedyNodes[g++];\n\n    while (m < modestNodes.length)\n        toReturn[x++] = modestNodes[m++];\n    return toReturn;\n\n};\np.NoOfChildren = function(nodeId, outerCircle) {\n    var toReturn = 0;\n    var nodes = this.nodes;\n    var links = nodes[nodeId].links;\n\n    for (var i = 0; i < links.length; i++) {\n        var currNeigh = links[i];\n\n        if (!this.posSet[currNeigh] && !outerCircle[currNeigh])\n            toReturn++;\n    }\n\n    if (toReturn > 7)\n        toReturn = 7;\n\n    return toReturn;\n};\np.SetOuterCircle = function(compIndex, innerCircleRadius, startX, startY, firstTouched) {\n    var nodes = this.nodes;\n    var outerNodesCount = 0;\n    var rnc = 0;\n    var iter;\n    var outerCircle = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        for (var j = 0 ;j< iter.length;j++) {\n            var currNeighbour = iter[j];\n\n            if (!this.posSet[currNeighbour]) {\n                outerNodesCount += (this.NoOfChildren(currNeighbour, outerCircle) + 1);\n                outerCircle[currNeighbour] = true;\n                rnc++;\n            }\n        }\n    }\n\n    var outerRadius = 1.5 * innerCircleRadius;\n\n    // + 5 * nodeHorizontalSpacing;\n    var tryCount = ((2 * Math.PI * outerRadius) / 32) | 0;\n    var outerDeltaAngle = (2 * Math.PI) / tryCount;\n\n    if (tryCount < (1.2 * outerNodesCount)) {\n        outerRadius = (1.2 * 32 * outerNodesCount) / (2 * Math.PI);\n        outerDeltaAngle = (2 * Math.PI) / (1.2 * outerNodesCount);\n        outerNodesCount *= 1.2;\n    } else\n        outerNodesCount = tryCount;\n\n    if ((outerNodesCount > 10) && (firstTouched != -1))\n        outerNodesCount += 5;\n\n    // 5 places on outer circle for connection with other biconn. comp.\n    //System.out.println(\"tryCount = \" + tryCount);\n\n    // setting nodes on outer circle\n    outerNodesCount = outerNodesCount | 0;\n    var outerPositionsTaken = new Array(outerNodesCount);\n    var outerPositionsOwners = new Array(outerNodesCount);\n\n    for (var i = 0; i < outerPositionsTaken.length; i++) {\n        outerPositionsTaken[i] = -1;\n        outerPositionsOwners[i] = -1;\n    }\n\n    var pointX;\n    var pointY;\n    var theAngle;\n    var theAngleHlp;\n    var innerDeltaAngle;\n    innerDeltaAngle = (2 * Math.PI) / this.bc[compIndex].length;\n\n    if (firstTouched != -1) {\n        pointX = nodes[firstTouched].x;\n        pointY = nodes[firstTouched].y;\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n        var idPos = ((theAngle / outerDeltaAngle) | 0) % outerPositionsTaken.length;\n        outerPositionsTaken[idPos] = (theAngle / innerDeltaAngle) | 0;\n        outerPositionsOwners[idPos] = -2; // must not be even moved because that node is coming from another bicomp.\n\n        if (outerPositionsTaken.length > 10) {\n            outerPositionsTaken[(idPos + 1) % outerPositionsTaken.length] = (theAngle / innerDeltaAngle) | 0;\n            outerPositionsTaken[(idPos + 2) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 1 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 2 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n\n            outerPositionsOwners[(idPos + 1) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos + 2) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 1 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 2 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n        }\n    }\n\n    var addedNeighbours = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n        var noOfNeighbours = 0;\n\n        for (var j = 0; j < iter.length;j++) {\n            currentNeighbour = iter[j];\n\n            if (!this.posSet[currentNeighbour]) {\n                noOfNeighbours += (this.NoOfChildren(currentNeighbour, addedNeighbours) + 1);\n                addedNeighbours[currentNeighbour]= true;\n            }\n        }\n\n        if (noOfNeighbours == 0)\n            continue;\n\n        pointX = nodes[this.bc[compIndex][i]].x;\n        pointY = nodes[this.bc[compIndex][i]].y;\n\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n//\t\t\titer = edgesFrom[this.bc[compIndex][i]].iterator();\n\n        var startPos = this.BestFreePositionsForAll(0| ((theAngle / outerDeltaAngle)\n            - (noOfNeighbours / 2.0)), outerPositionsTaken,\n            outerPositionsOwners, noOfNeighbours,\n            0| (theAngle / innerDeltaAngle), startX,\n            startY, outerDeltaAngle, outerRadius,\n            this.bc[compIndex].length);\n        var startAngle = startPos * outerDeltaAngle;\n\n        if (startAngle < 0)\n            continue;\n\n//\t\t\titer = nodes[this.bc[compIndex][i]].iterator();\n\n        for (var m = 0;m< iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour]) {\n                this.posSet[currentNeighbour] = true;\n\n                var holeDepth = this.NoOfChildren(currentNeighbour, addedNeighbours);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    // free but it must not be used (add. space for tree-like struct.)\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n\n\n                nodes[currentNeighbour].x = startX + (Math.cos(startAngle) * outerRadius);\n                nodes[currentNeighbour].y = startY - (Math.sin(startAngle) * outerRadius);\n\n                outerPositionsOwners[(startPos) % outerPositionsOwners.length] = currentNeighbour;\n                outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                startPos++;\n                startAngle += outerDeltaAngle;\n\n                if (startAngle > (2 * Math.PI))\n                    startAngle -= (2 * Math.PI);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n            }\n        }\n    }\n\n    // laying out the rest of nodes\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!addedNeighbours[currentNeighbour]) {\n                continue;\n            }\n\n            pointX = nodes[currentNeighbour].x;\n            pointY = nodes[currentNeighbour].y;\n\n            theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n            theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n\n            if (theAngleHlp > (Math.PI / 2))\n                theAngle = Math.PI - theAngle;\n\n            if (theAngle < 0)\n                theAngle += (2 * Math.PI);\n\n            for (var j = 0; j < this.posSet.length; j++)\n                this.depthPosSet[j] = this.posSet[j];\n\n            this.EachNodeHeight(currentNeighbour);\n\n            this.DFSSetPos(currentNeighbour, theAngle, outerRadius - innerCircleRadius);\n        }\n    }\n};\np.BestFreePositionsForAll = function(idealPosition, outerPositionsTaken, outerPositionsOwners, noOfPos,\n                                 innerCirclePos, startX, startY,\n                                 outerDeltaAngle, outerRadius, innerCSize) {\n    var startPos = idealPosition;\n    var nodes = this.nodes;\n\n    if (idealPosition < 0)\n        startPos += outerPositionsTaken.length;\n\n    var i = 0;\n    var alreadyFound = 0;\n    var startOfAlFound = -1;\n    var found = false;\n    var goDown = false;\n    var goUp = false;\n\n    //An infinite loop occurs when there is no place in the outerPositionsTaken array where all the number\n    //of positions that we need (noOfPos) can fit contiguously. In such a case, an infinite loop occurs.\n    //Experiment: Create a count. If the count exceeds outPositionsTaken.length, then we have looked at every\n    //possible startPos. Set startPos to the best startPos (meaning, the most contingious spaces) and set found\n    //to true.\n\n    //Experiment: int goUpCount = 0;\n    var goUpCount = 0;\n    //Experiment: int biggestGap = 0;\n    var biggestGap = 0;\n    //Experiment: int bestStartPos;\n    var bestStartPos = 0;\n\n    while (!found && !(goUp && goDown)) {\n        //System.out.print(startPos + \" \");\n        for (i = startPos;\n             (i < (startPos + noOfPos))\n             && (outerPositionsTaken[i % outerPositionsTaken.length] == -1); i++) {\n        }\n\n        if (i < (startPos + noOfPos)) {\n            if (((outerPositionsTaken[i % outerPositionsTaken.length] > innerCirclePos)\n                && ((outerPositionsTaken[i % outerPositionsTaken.length] - innerCirclePos) < (0.7 * innerCSize)))\n                || ((innerCirclePos - outerPositionsTaken[i % outerPositionsTaken.length]) > (0.7 * innerCSize))) {\n                alreadyFound = (i - startPos + outerPositionsTaken.length) % outerPositionsTaken.length;\n                startOfAlFound = startPos;\n                startPos -= (noOfPos - alreadyFound);\n\n                if (startPos < 0)\n                    startPos += outerPositionsTaken.length;\n\n                goDown = true;\n            } else {\n                //Experiment: goUpCount++;\n                goUpCount++;\n                //Experiment: int thisGap = i - startPos;\n                var thisGap = i - startPos;\n                //Experiment: if( thisGap > biggestGap )\n                if (thisGap > biggestGap) {\n                    biggestGap = thisGap;\n                    bestStartPos = startPos;\n                }\n                //Experiment: if( count > outerPositionsTaken.length )\n                if (goUpCount > outerPositionsTaken.length * 3) {\n                    startPos = bestStartPos;\n                    found = true;\n                }\n                //Experiment: else\n                else {\n                    startPos = (i + 1) % outerPositionsTaken.length;\n                    goUp = true;\n                }\n            }\n        } else\n            found = true;\n    }\n\n    if (goUp && goDown) {\n        i = startOfAlFound - 1;\n\n        var j = i - 1;\n        var count = 0;\n        //System.out.print(j + \" \");\n\n        var index = (i % outerPositionsTaken.length + outerPositionsTaken.length) % outerPositionsTaken.length;\n        if (((outerPositionsTaken[index] > innerCirclePos)\n            && ((outerPositionsTaken[index] - innerCirclePos) < (0.7 * innerCSize)))\n            || ((innerCirclePos - outerPositionsTaken[index]) > (0.7 * innerCSize))) {\n            j--;\n            i--;\n        }\n\n        while (count < (noOfPos - alreadyFound)) {\n            //System.out.print(j + \" \");\n\n            if (outerPositionsTaken[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -1) {\n                // move all for one place left\n                //\tSystem.out.print(\" moving \");\n                if (outerPositionsOwners[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -2) {\n                    //System.out.println(\"BUUUUUUUUUUUUUUUUUUU\");\n\n                    return -1;\n                }\n\n                for (var k = j; k < (i - count); k++) {\n                    if (outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length] > 0)\n                    {\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].x = startX + (Math.cos(outerDeltaAngle * k) * outerRadius);\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].y = startY - (Math.sin(outerDeltaAngle * k) * outerRadius);\n                    }\n\n\n                    outerPositionsOwners[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                    outerPositionsTaken[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsTaken[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                }\n\n                count++;\n            }\n\n            j--;\n        }\n\n        startPos = (i - count + 1 + outerPositionsOwners.length) % outerPositionsOwners.length;\n    }\n\n    /*    for (i = startPos; i < startPos + noOfPos; i++)\n     {\n     outerPositionsTaken[i % outerPositionsTaken.length] = innerCirclePos;\n     }*/\n    return startPos;\n\n};\np.EachNodeHeight = function(nodeID) {\n    var nodes = this.nodes;\n    var links = nodes[nodeID].links;\n    var currentNeighbour;\n    var noOfChildren = 0;\n    var tmp = {};\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (!this.depthPosSet[currentNeighbour] && !tmp[currentNeighbour]) {\n            this.depthPosSet[currentNeighbour] = true;\n            tmp[currentNeighbour] = true;\n        }\n    }\n\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (tmp[currentNeighbour]) {\n            noOfChildren += this.EachNodeHeight(currentNeighbour);\n        }\n    }\n\n//\t\tif (this.nodeHeights[nodeID])\n//\t\t\tthis.nodeHeights.remove(Integer.valueOf(nodeID));\n\n    this.nodeHeights[nodeID] = noOfChildren;\n\n    return (noOfChildren + 1);\n};\np.DFSSetPos = function( nodeID, theAngle,  theRadius) {\n    var component = this.node2BiComp[nodeID];\n    var nodes = this.nodes;\n    if (component != undefined && !this.drawnBiComps[component]) {\n        var comp = component;\n        var centerX =nodes[nodeID].x;\n        var centerY = nodes[nodeID].y;\n        var radius = (this.width * this.bc[comp].length) / (2 * Math.PI);\n        var deltaAngle = (2 * Math.PI) / this.bc[comp].length;\n        var currAngle = theAngle - Math.PI - deltaAngle;\n\n        if (currAngle < 0)\n            currAngle += (2 * Math.PI);\n\n        centerX += (Math.cos(theAngle) * radius * 4.0);\n        centerY -= (Math.sin(theAngle) * radius * 4.0);\n\n        this.drawnBiComps[comp] = true;\n\n        // sorting nodes on inner circle\n        this.bc[comp] = this.sortInnerCircle(this.bc[comp]);\n\n        /*if (this.bc[comp].length > 20)\n         this.bc[comp] = ReduceInnerCircleCrossings(this.bc[comp]);*/\n        var oneAtLeast = false;\n\n        for (var i = 0; i < this.bc[comp].length; i++) {\n            if (this.posSet[this.bc[comp][i]])\n                continue;\n\n\n            nodes[this.bc[comp][i]].x = centerX + (Math.cos(currAngle) * radius);\n            nodes[this.bc[comp][i]].y = centerY - (Math.sin(currAngle) * radius);\n\n            this.posSet[this.bc[comp][i]] = true;\n\n            oneAtLeast = true;\n            currAngle -= deltaAngle;\n\n            if (currAngle < 0)\n                currAngle += (2 * Math.PI);\n        }\n\n        if (oneAtLeast) {\n\n            nodes[nodeID].x += Math.cos(theAngle) * 3 * radius;\n            nodes[nodeID].y -= Math.sin(theAngle) * 3 * radius;\n\n\n            this.SetOuterCircle(comp, radius, centerX, centerY, nodeID);\n        }\n    } else {\n        var iter = nodes[nodeID].links;\n        var currentNeighbour;\n        var startAngle = theAngle + (Math.PI / 2);\n\n        if (startAngle > (2 * Math.PI))\n            startAngle -= (2 * Math.PI);\n\n        var neighboursCount = 0;\n        var min1 = 1000;\n        var min2 = 1000;\n        var max = -1;\n        var min1Id = -1;\n        var min2Id = -2;\n        var maxId = -3;\n        var tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                neighboursCount++;\n                tmp[currentNeighbour]=true;\n\n                if (this.nodeHeights[currentNeighbour] < min1) {\n                    min2 = min1;\n                    min2Id = min1Id;\n                    min1 = this.nodeHeights[currentNeighbour];\n                    min1Id = currentNeighbour;\n                } else if (this.nodeHeights[currentNeighbour] < min2) {\n                    min2 = this.nodeHeights[currentNeighbour];\n                    min2Id = currentNeighbour;\n                }\n\n                if (this.nodeHeights[currentNeighbour] >= max)//&& currentNeighbour != min2Id && currentNeighbour != min1Id)\n                {\n                    max = this.nodeHeights[currentNeighbour];\n                    maxId = currentNeighbour;\n                }\n            }\n        }\n\n        if (neighboursCount == 0)\n            return;\n\n        var deltaAngle = Math.PI / (neighboursCount + 1);\n\n        startAngle -= deltaAngle;\n\n        if (startAngle < 0)\n            startAngle += (2 * Math.PI);\n\n        var remStartAngle = startAngle;\n\n        if (neighboursCount > 2) {\n            deltaAngle = (2 * Math.PI) / neighboursCount;\n            startAngle = (theAngle + Math.PI) - ((3 * deltaAngle) / 2);\n\n            if (startAngle > (2 * Math.PI))\n                startAngle -= (2 * Math.PI);\n\n            remStartAngle = (theAngle + Math.PI) - (deltaAngle / 2);\n\n            if (remStartAngle > (2 * Math.PI))\n                remStartAngle -= (2 * Math.PI);\n        }\n\n        iter = nodes[nodeID].links;\n\n        var r = 72;\n        var rTry;\n\n        if (((this.width * neighboursCount) / (2 * Math.PI)) > r)\n            r = (this.width * neighboursCount) / (2 * Math.PI);\n\n        rTry = r;\n\n        var hlp = 100.0;\n        var startX = nodes[nodeID].x;\n        var startY = nodes[nodeID].y;\n\n        if (neighboursCount > 2) {\n            nodes[nodeID].x = startX + (Math.cos(theAngle) * r * ((min2 + 1) % 100));\n            nodes[nodeID].y = startY - (Math.sin(theAngle) * r * ((min2 + 1) % 100));\n\n            startX = nodes[nodeID].x;\n            startY = nodes[nodeID].y;\n\n            //System.out.println(\"theAngle = \" + theAngle + \", startAngle = \" + startAngle + \", remStartAngle = \" + remStartAngle + \", deltaAngle = \" + deltaAngle);\n            //System.out.println(\"min1Id = \" + min1Id + \", min2Id\" + min2Id + \", maxId\" + maxId);\n            setOffset(nodes[min1Id], startX + (Math.cos(remStartAngle) * r),\n                startY - (Math.sin(remStartAngle) * r));\n            nodes[min1Id].test = 'min1'\n            setOffset(nodes[min2Id], startX + (Math.cos(remStartAngle + deltaAngle) * r),\n                startY - (Math.sin(remStartAngle + deltaAngle) * r));\n            nodes[min2Id].test = 'min2'\n\n            if (this.nodeHeights[maxId] > 8)\n                r = 256;\n\n            setOffset(nodes[maxId],\n                startX + (Math.cos(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r),\n                startY - (Math.sin(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r));\n            nodes[maxId].test = 'maxId'\n\n            //System.out.println(\"Ugao za maxID \"\n            //                  + (remStartAngle - ((neighboursCount / 2) * deltaAngle)));\n        }\n\n        tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                if (this.nodeHeights[currentNeighbour] > 8)\n                    r = 256;\n                else\n                    r = rTry;\n\n                this.posSet[currentNeighbour] = true;\n                tmp[currentNeighbour] = true;\n\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    setOffset(nodes[currentNeighbour], startX + (Math.cos(startAngle) * r),\n                        startY - (Math.sin(startAngle) * r));\n\n                    startAngle -= deltaAngle;\n\n                    if (startAngle < 0)\n                        startAngle += (2 * Math.PI);\n\n                    if (((Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle))) < 0.0001)\n                        || (Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle)\n                            + (2 * Math.PI))) < 0.0001)) && (neighboursCount > 2)) {\n                        startAngle -= deltaAngle;\n\n                        if (startAngle < 0)\n                            startAngle += (2 * Math.PI);\n                    }\n                }\n            }\n        }\n\n        iter = nodes[nodeID].links;\n\n        if (neighboursCount > 2) {\n            this.DFSSetPos(min1Id, remStartAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(min2Id, remStartAngle + deltaAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(maxId, remStartAngle - ((neighboursCount / 2) * deltaAngle),\n                theRadius * Math.sin(deltaAngle / 2));\n            hlp = remStartAngle;\n            remStartAngle -= deltaAngle;\n        }\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (tmp[currentNeighbour]) {\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    this.DFSSetPos(currentNeighbour, remStartAngle,\n                        theRadius * Math.sin(deltaAngle / 2));\n\n                    remStartAngle -= deltaAngle;\n\n                    if (((remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)))\n                        || (remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)\n                        + (2 * Math.PI)))) && (neighboursCount > 2))\n                        startAngle -= deltaAngle;\n\n                    if (remStartAngle < 0)\n                        remStartAngle += (2 * Math.PI);\n                }\n            }\n        }\n    }\n};\n\nfunction setOffset(node,x,y) {\n    node.x = x;\n    node.y = y;\n}\n\nexport default CircularLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/CircularLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class ColaLayout{\n    layout(nodes,edges){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 1000]);\n\n        var data = this._init(nodes,edges);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .symmetricDiffLinkLengths(30)\n            .start(60,0,0,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:e.y};\n        })\n    }\n\n    _init(_nodes,_edges){\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        _nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        _edges.forEach(function (e, i) {\n            if (map.hasOwnProperty(e.source) && map.hasOwnProperty(e.target))\n                edges.push({\n                    source: map[e.source],\n                    target: map[e.target],\n                });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/ColaLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class DargeLayout{\n    layout(nodes,edges){\n        // debugger\n        if(!dagre || !dagre.graphlib) throw 'please add dagre lib first';\n        var g = new dagre.graphlib.Graph();\n\n        g.setGraph({\n            rankdir:'TB',\n            nodesep:15,\n            ranksep:40,\n            ranker:'longest-path'//network-simplex  longest-path tight-tree\n        });\n\n        g.setDefaultEdgeLabel(function() { return {}; });\n\n        nodes.forEach(function (e) {\n            g.setNode(e.id,{width:20,height:20});\n        });\n\n        edges.forEach(function (e) {\n            g.setEdge(e.source,e.target);\n        });\n\n        dagre.layout(g);\n\n        var data = g.nodes().map(function (e) {\n            var d = g.node(e);\n            return {x:d.x,y:-1*d.y};\n        });\n\n        return data;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/DargeLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class FlowLayout{\n    layout(nodes,edges){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(nodes,edges);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .flowLayout(\"y\", 30)\n            .symmetricDiffLinkLengths(30)\n            .start(10,20,20,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:-1*e.y};\n        })\n    }\n\n    _init(_nodes,_edges){\n\n        // var filterEdge = this._filterEdge(nodes,edges);\n\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        _nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        _edges.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n\n    _filterEdge(nodes,edges){\n        var filterEdges = [];\n\n        var flag = {};\n        var first = nodes[0];\n\n        breadFirst(first);\n\n        return filterEdges;\n\n        function breadFirst(node) {\n            // debugger\n            flag[node.id] = true;\n\n            var nodes = [];\n\n            var edges = graph.inEdgesIndex[node.id],edge;\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.source]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.source]);\n                    }\n                });\n            }\n\n            edges = graph.outEdgesIndex[node.id];\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.target]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.target]);\n                    }\n                });\n            }\n\n            nodes.forEach(function (e) {\n                breadFirst(e);\n            })\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/FlowLayout.js","\n'use strict';\n\nfunction id(d) {\n    return d.id;\n}\n\n\nexport default class ColaLayout{\n    layout(nodes,edges){\n        if(!d3 || !d3.forceSimulation) throw 'please add d3 lib first';\n\n        var data = this._init(nodes,edges);\n\n        this.simulation = d3.forceSimulation(data.nodes)\n            .force(\"charge\", d3.forceManyBody(-50))\n            .force(\"link\", d3.forceLink(data.edges).id(id).distance(100))\n            .force(\"collide\",d3.forceCollide(20))\n            .force(\"center\", d3.forceCenter());\n\n        this.simulation.stop();\n\n        var n = 100;\n        while (n--) this.simulation.tick();\n\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:e.y};\n        })\n    }\n\n    _init(_nodes,_edges){\n        var nodes = [];\n        var edges = [];\n        _nodes.forEach(function (e,i) {\n            nodes.push({\n                id:e.id\n            });\n        });\n\n        _edges.forEach(function (e, i) {\n            edges.push({\n                source:e.source,\n                target:e.target,\n            });\n        });\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/ForceD3Layout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class Grid{\n    layout(_nodes,_edges){\n\n        var nodes = [];\n\n        var width = 50;\n        var height = 50;\n\n        var num = (Math.sqrt(_nodes.length) | 0) + 1;\n\n        var nx,ny;\n\n        _nodes.forEach(function (e,id) {\n            nx = (id % num) | 0;\n            ny = (id / num) | 0;\n            nodes.push({\n                x:  nx * width,\n                y:  ny * height,\n            });\n        });\n\n        return nodes;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/Grid.js","/**\n * Created by chengang on 17-2-20.\n */\n\nimport CircularLayout from './CircularLayout'\nimport ColaLayout from './ColaLayout'\nimport FlowLayout from './FlowLayout'\nimport DargeLayout from './DargeLayout'\nimport ForceD3Layout from './ForceD3Layout'\nimport Grid from './Grid'\n\nexport default {\n    circular:CircularLayout,\n    d3force:ForceD3Layout,\n    cola:ColaLayout,\n    flow:FlowLayout,\n    darge:DargeLayout,\n    grid:Grid,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layout/index.js","'use strict';\n\nvar INF = 1e20;\n\nexport  default  function TextSDF(fontSize, buffer, radius, cutoff, fontFamily) {\n    this.fontSize = fontSize || 24;\n    this.buffer = buffer === undefined ? 3 : buffer;\n    this.cutoff = cutoff || 0.25;\n    this.fontFamily = fontFamily || 'sans-serif';\n    this.radius = radius || 8;\n    var size = this.size = this.fontSize + this.buffer * 2;\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.canvas.height = size;\n\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.font = fontSize + 'px ' + this.fontFamily;\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillStyle = 'black';\n\n    // temporary arrays for the distance transform\n    this.gridOuter = new Float64Array(size * size);\n    this.gridInner = new Float64Array(size * size);\n    this.f = new Float64Array(size);\n    this.d = new Float64Array(size);\n    this.z = new Float64Array(size + 1);\n    this.v = new Int16Array(size);\n\n    // hack around https://bugzilla.mozilla.org/show_bug.cgi?id=737852\n    this.middle = Math.round((size / 2) * (navigator.userAgent.indexOf('Gecko/') >= 0 ? 1.2 : 1));\n}\n\nTextSDF.prototype.draw = function (char) {\n    this.ctx.clearRect(0, 0, this.size, this.size);\n    this.ctx.fillText(char, this.buffer, this.middle);\n\n    var charSize = (this.ctx.measureText(char).width+1)|0;\n    var imgData = this.ctx.getImageData(0, 0, this.size, this.size);\n    var data = imgData.data;\n\n    for (var i = 0; i < this.size * this.size; i++) {\n        var a = data[i * 4 + 3] / 255; // alpha value\n        this.gridOuter[i] = a === 1 ? 0 : a === 0 ? INF : Math.pow(Math.max(0, 0.5 - a), 2);\n        this.gridInner[i] = a === 1 ? INF : a === 0 ? 0 : Math.pow(Math.max(0, a - 0.5), 2);\n    }\n\n    edt(this.gridOuter, this.size, this.size, this.f, this.d, this.v, this.z);\n    edt(this.gridInner, this.size, this.size, this.f, this.d, this.v, this.z);\n\n    for (i = 0; i < this.size * this.size; i++) {\n        var d = this.gridOuter[i] - this.gridInner[i];\n        var c = Math.max(0, Math.min(255, Math.round(255 - 255 * (d / this.radius + this.cutoff))));\n        data[4 * i + 0] = c;\n        data[4 * i + 1] = c;\n        data[4 * i + 2] = c;\n        data[4 * i + 3] = 255;\n    }\n\n    return {\n        data:imgData,\n        charWidth:charSize+this.buffer*2\n    };\n};\n\n// 2D Euclidean distance transform by Felzenszwalb & Huttenlocher https://cs.brown.edu/~pff/dt/\nfunction edt(data, width, height, f, d, v, z) {\n    for (var x = 0; x < width; x++) {\n        for (var y = 0; y < height; y++) {\n            f[y] = data[y * width + x];\n        }\n        edt1d(f, d, v, z, height);\n        for (y = 0; y < height; y++) {\n            data[y * width + x] = d[y];\n        }\n    }\n    for (y = 0; y < height; y++) {\n        for (x = 0; x < width; x++) {\n            f[x] = data[y * width + x];\n        }\n        edt1d(f, d, v, z, width);\n        for (x = 0; x < width; x++) {\n            data[y * width + x] = Math.sqrt(d[x]);\n        }\n    }\n}\n\n// 1D squared distance transform\nfunction edt1d(f, d, v, z, n) {\n    v[0] = 0;\n    z[0] = -INF;\n    z[1] = +INF;\n\n    for (var q = 1, k = 0; q < n; q++) {\n        var s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k]);\n        while (s <= z[k]) {\n            k--;\n            s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k]);\n        }\n        k++;\n        v[k] = q;\n        z[k] = s;\n        z[k + 1] = +INF;\n    }\n\n    for (q = 0, k = 0; q < n; q++) {\n        while (z[k + 1] < q) k++;\n        d[q] = (q - v[k]) * (q - v[k]) + f[v[k]];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextSDF.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureIcon extends EventEmitter{\n    constructor(option){\n        super();\n\n        // this.gl = gl;\n        this.texture = null;\n\n        this.textureIconWidth = option.textureIconWidth;\n        this.textureIconHeight = option.textureIconHeight;\n\n        this.fontSize = 60;\n        this.fontFamily = 'FontAwesome';\n\n        this.border = 2;\n        this.width = 70;//char width\n        this.height = 80;\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n\n        this.canvas = null;\n        this.iconinfo = null;\n        this.icons = [];\n        this.iconsToCreate = [];\n\n        this.fontLoaded  = true;\n\n        this._init();\n\n        // this.updateGPUTexture(true);\n\n        // var _this = this;\n        // if (document.fonts) {\n        //     debugger\n        //     var fontsReady = document.fonts.ready;\n        //     if (typeof(fontsReady) == \"function\") {\n        //         fontsReady = document.fonts.ready();\n        //     }\n        //     fontsReady.then(function () {\n        //         _this.fontLoaded  = true;\n        //         _this.createIcons();\n        //         _this.emit('load')\n        //     });\n        // }\n    }\n\n    _init(){\n        this.canvas = document.createElement('canvas');\n\n        this.canvas.width  = this.textureIconWidth;\n        this.canvas.height  = this.textureIconHeight;\n\n        var ctx = this.canvas.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        ctx.font = `${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = \"#ff0000\";\n\n        this.iconinfo =  {\n            fontSize:this.fontSize,\n            img:this.canvas,\n            width:this.width,\n            height:this.height,\n            infos:{}\n        };\n\n        this.ctx = ctx;\n\n    }\n\n    createIcons(icons) {\n\n        icons = icons || this.iconsToCreate;\n\n        if(icons.length == 0) return;\n\n        if(!this.fontLoaded){\n            icons.forEach(function (e) {\n                this.iconsToCreate.push(e);\n            }.bind(this));\n            return;\n        }\n\n        for (var i = 0; i < icons.length; i++) {\n            this.createIcon(icons[i]);\n        }\n        this.computeAlpha();\n\n\n        // document.body.appendChild(this.canvas);\n        // this.updateGPUTexture();\n    }\n\n    createIcon(icon){\n\n        var ctx = this.ctx,\n            c = this.canvas;\n\n        if(this.iconinfo && this.iconinfo.infos[icon]) return;\n\n        if(this.startx + this.width + this.border > c.width){\n            this.startx = this.border;\n            this.starty += this.height + this.border;\n\n            if(this.starty + this.height > c.height){\n                console.warn('icon texture no space');\n                return;\n            }\n        }\n\n\n        ctx.fillText(icon, this.startx, this.starty);\n        this.iconinfo.infos[icon] = {\n            uvs:[\n                (this.startx-this.width/2)/c.width, (this.starty - this.height/2)/c.height,\n                (this.startx + this.width/2)/c.width, (this.starty + this.height/2)/c.height,\n            ],\n            width:this.width/this.width\n        };\n\n        this.icons.push(icon);\n\n        this.startx += this.width + this.border;\n    }\n\n\n    computeAlpha() {\n\n        var ctx = this.ctx;\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n        ctx.putImageData(imgData,0,0);\n    }\n\n    attachGl(gl){\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.createTexture(this.icons.length == 0,gl));\n    }\n\n    addIcons(icons){\n        var char;\n        var map = {};\n        for(var i = 0,len = icons.length;i< len;i++){\n            char = icons[i];\n            if(!this.iconinfo.infos[char] && !map[char]){\n                if(this.fontLoaded){\n                    this.createIcon(char);\n                }else {\n                    this.iconsToCreate.push(char);\n                }\n                map[char] = true;\n            }\n        }\n        this.updateGPUTexture();\n    }\n\n    createTexture(empty,gl){\n\n        var texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        if(empty)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 4, 4, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.iconinfo.img);\n        return texture;\n    }\n\n    clear(){\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n        this.icons = [];\n        this.iconsToCreate = [];\n        this.iconinfo.infos = {};\n\n        var ctx = this.ctx;\n        ctx.save();\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.restore();\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureIcon.js","/**\n * Created by chengang on 17-4-5.\n */\nimport EventEmitter from '../../base/EventEmitter'\n\nexport  default  class  TextureLoader extends EventEmitter {\n    constructor(){\n        super();\n        this.cache = {};\n        this.textures = [];\n        // this.defaultTexture = this.createTexture();\n        this.texturesIndex = [0,1,2,3,4,5,6,7,8,9];\n        // this.updateGPUTexture();\n    }\n\n    loadImgs(urls){\n        if(Array.isArray(urls)){\n            urls.forEach(function (url) {\n                this._load(url);\n            }.bind(this));\n        }else {\n            this._load(urls);\n        }\n    }\n\n    _load(url){\n        if(!this.cache[url]){\n            var image = document.createElement('IMG');\n            // image.setAttribute('crossOrigin', imgCrossOrigin);\n            image.src = url;\n            image.onload = function() {\n                var tx = this.createTexture(image);\n                this.cache[url] = this.textures.length;//index\n                this.textures.push(tx);\n                this.updateGPUTexture();\n                this.emit('load',[url]);\n            }.bind(this);\n        }\n    }\n\n    attachGl(gl){\n        this.defaultTexture = this.createTexture(gl);\n        this.texturesIndex.forEach(function (e) {\n            gl.activeTexture(gl['TEXTURE'+e]);\n            if(e > this.textures.length - 1){\n                gl.bindTexture(gl.TEXTURE_2D, this.defaultTexture);\n            }else {\n                gl.bindTexture(gl.TEXTURE_2D, this.textures[e]);\n            }\n        }.bind(this));\n    }\n\n    createTexture(gl,img){\n        var texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        if(img)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        return texture;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureLoader.js","\n\nimport EventEmitter from '../../base/EventEmitter'\nimport TextSDF from './TextSDF'\n\nexport default class TextureText extends EventEmitter{\n    constructor(){\n        super();\n\n        this.border = 2;\n\n        this.fontSize = 48;\n        this.fontFamily = 'Arial';\n\n        this.canvas = null;\n\n        this.textinfo = null;\n\n        this.texts = [];\n\n        this.sdf = new TextSDF(this.fontSize, this.fontSize/8, this.fontSize/3,null,this.fontFamily);\n\n\n        // test();\n    }\n\n    createCanvasImg(texts) {\n\n        if(!this.canvas) this.canvas = document.createElement('canvas');\n\n        var c = this.canvas;\n\n\n        var width = this.sdf.size;\n        var height = width;\n        var num = Math.ceil(Math.sqrt(texts.length));\n\n        c.width  = (num + 1) * (width) + 2* this.border;\n        c.height  = (num +1 ) * (height) + 2* this.border;\n\n\n        var ctx = c.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, c.width, c.height);\n\n        ctx.font = `bold ${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"top\";\n        ctx.fillStyle = \"#ff0000\";\n\n\n        var startx =this.border;\n        var starty =this.border;\n        var infos = {}, px, py, charWidth,data;\n\n        this.texts = [];\n\n        for (var i = 0; i < texts.length; i++) {\n\n            if(this.textinfo && this.textinfo.infos[texts[i]]) continue;\n\n            data = this.sdf.draw(texts[i]);\n            charWidth = data.charWidth;\n\n            // charWidth = ctx.measureText(texts[i]).width;\n\n            if(startx + charWidth > c.width){\n                startx = this.border;\n                starty += height\n            }\n\n            ctx.putImageData(data.data, startx, starty,0,0,charWidth,data.data.height);\n\n            // ctx.fillText(texts[i], startx, starty);\n\n\n            infos[texts[i]] = {\n                uvs:[\n                    startx/c.width, starty/c.height,\n                    (startx + charWidth)/c.width, (starty + height)/c.height,\n                ],\n                width:charWidth/width\n            };\n\n            this.texts.push(texts[i]);\n\n            startx += charWidth;\n        }\n        // this.computeAlpha(ctx);\n        this.textinfo =  {\n            fontSize:this.fontSize,\n            img:c,\n            width:c.width,\n            height:c.height,\n            infos:infos\n        };\n\n        // document.body.appendChild(c);\n        // c.style.position = 'absolute';\n        // c.style.top = '100px';\n\n        // this.updateGPUTexture();\n    }\n\n    computeAlpha(ctx) {\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n\n        ctx.putImageData(imgData,0,0);\n\n    }\n\n    attachGl(gl){\n\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.createTexture(gl));\n    }\n\n    addTexts(strs){\n        if(strs.length == 0) return;\n\n        strs.forEach(function (e) {\n            this.texts.push(e);\n        }.bind(this));\n\n        var texts = this.texts;\n\n       this.clear();\n        this.createCanvasImg(texts);\n\n    }\n\n    createTexture(gl){\n\n\n        var texture = gl.createTexture();\n\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textinfo.img);\n\n        return texture;\n    }\n\n    clear(){\n        this.textinfo = null;\n        this.texts = [];\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureText.js","'use strict';\n\nimport util from '../../../util'\nimport {\n    loadShader,loadProgram,\n    vertexAttribPointer,\n    setUniforms\n} from '../../../base/GLUtil'\n\n\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\n\n\nfunction renderLayerData({data,cacheIndex,gl,layers,renderLayerMap}) {\n\n    var temp,program;\n    var layerIndexMap = {};\n    var _this = this;\n\n    data.forEach(function (e) {\n        layers.forEach(function (layer) {\n            if(!cacheIndex[e.id][layer] || !renderLayerMap[layer].enable || !renderLayerMap[layer].show) return;\n\n            layerIndexMap[layer] = layerIndexMap[layer] || [];\n            temp = cacheIndex[e.id][layer].data.indices;\n            temp && temp.forEach(function (index) {\n                layerIndexMap[layer].push(index);\n            });\n        });\n    });\n\n    layers.forEach(function (layer) {\n        if (!layerIndexMap[layer] || layerIndexMap[layer].length == 0) return;\n\n        program = renderLayerMap[layer].program;\n\n        gl.useProgram(program);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, program.vertexBuffer);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, _this.indexBuffer);\n\n        vertexAttribPointer(gl, program.activeAttributes, program.offsetConfig);\n        setUniforms(gl, program.activeUniforms, renderLayerMap[layer].uniforms);\n\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint32Array(layerIndexMap[layer]), gl.STATIC_DRAW);\n        gl.drawElements(gl.TRIANGLES, layerIndexMap[layer].length, gl.UNSIGNED_INT, 0);\n\n    });\n}\nfunction renderBg(gl,grayBg,option) {\n    var color = util.parseColor(option.bgColor || 'rgba(255,255,255,0.8)');\n    gl.useProgram(grayBg.program);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, grayBg.vertexBuffer);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, grayBg.indexBuffer);\n\n    gl.vertexAttribPointer(\n        grayBg.positionLocation,\n        2,\n        gl.FLOAT, false, 0,0\n    );\n    gl.enableVertexAttribArray(grayBg.positionLocation);\n\n    gl.uniform4f(grayBg.bgLocation,color.r,color.g,color.b,color.a);\n\n    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_INT, 0);\n}\n\nexport default  function nodeOverCustom(render,option) {\n    var renderLayerMap = render.renderLayerMap;\n    var gl = render.gl;\n\n    option = option || {};\n\n    if(!this.indexBuffer) this.indexBuffer = gl.createBuffer();\n\n    if(!this.grayBg){\n        this.grayBg = {};\n        this.grayBg.program = loadProgram(gl, [\n            loadShader(gl, vert, gl.VERTEX_SHADER),\n            loadShader(gl, frag, gl.FRAGMENT_SHADER)\n        ]);\n        this.grayBg.vertexBuffer = gl.createBuffer();\n        this.grayBg.indexBuffer = gl.createBuffer();\n\n        this.grayBg.positionLocation = gl.getAttribLocation(this.grayBg.program, 'a_position');\n        this.grayBg.bgLocation = gl.getUniformLocation(this.grayBg.program, 'u_bg_color');\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.grayBg.vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1,-1,1,1,-1,1,1]), gl.STATIC_DRAW);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.grayBg.indexBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int32Array([0,1,2,1,2,3]), gl.STATIC_DRAW);\n\n    }\n\n    var edgesid,selectedNodes;\n    var overNode = render.context.overInfo.currentNode;\n    var overNodes = [] ,overEdges = [];\n    var graph = render.context.graph;\n\n    selectedNodes = render.context.selection.getNodes();\n\n    if(overNode && !(option && option.over === false)){\n\n        if(edgesid = graph.inEdgesIndex[overNode.id]){\n            edgesid.forEach(function (id) {\n                overEdges.push(graph.edgesIndex[id]);\n                overNodes.push(graph.nodesIndex[graph.edgesIndex[id].source]);\n            });\n        }\n\n        if(edgesid = graph.outEdgesIndex[overNode.id]){\n            edgesid.forEach(function (id) {\n                overEdges.push(graph.edgesIndex[id]);\n                overNodes.push(graph.nodesIndex[graph.edgesIndex[id].target]);\n            });\n        }\n\n        overNodes.push(overNode);\n\n        //draw gray background\n        renderBg(gl,this.grayBg,option);\n\n        if(overEdges.length){\n            renderLayerData.call(this,{\n                data:overEdges,\n                cacheIndex:render.renderCache.edge.index,\n                gl,\n                layers:['edge','edgeCurve','edgeLabel','edgeCurveLabel'],\n                renderLayerMap\n            });\n        }\n\n        renderLayerData.call(this,{\n            data:overNodes,\n            cacheIndex:render.renderCache.node.index,\n            gl,\n            layers:['node','rectNode'],\n            renderLayerMap\n        });\n\n        if(selectedNodes.length){\n            renderLayerData.call(this,{\n                data:selectedNodes,\n                cacheIndex:render.renderCache.node.index,\n                gl,\n                layers:['node','rectNode'],\n                renderLayerMap\n            });\n\n        }\n\n        renderLayerData.call(this,{\n            data:overNodes,\n            cacheIndex:render.renderCache.node.index,\n            gl,\n            layers:['nodeLabel'],\n            renderLayerMap\n        });\n\n    }else {\n        if(selectedNodes.length){\n            renderLayerData.call(this,{\n                data:selectedNodes,\n                cacheIndex:render.renderCache.node.index,\n                gl,\n                layers:['node','rectNode'],\n                renderLayerMap\n            });\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/defaultConfig/customOverRender.js","\nimport nodeOverCustom from './customOverRender'\n\nfunction layerCheckDefault() {\n    return function (data) {\n        return !data.type || data.type == 'default';\n    }\n}\nfunction layerCheck(type) {\n    return function (data) {\n        return data.type == type;\n    }\n}\n\nfunction edgeCount(count,not) {\n    returnfunction (data) {\n        var check = (!data.type || data.type == 'default') && data.curveCount == count;\n        return not ? !check : check;\n    }\n}\n\nexport default function (WebGLRender) {\n    WebGLRender.defaultLayersConfig = [\n        {\n            name:'base',\n            subLayers:[\n                {name:'edge',context:'edge',render:WebGLRender.edge.default,check:edgeCount(0)},\n                {name:'edgeCurve',context:'edge',render:WebGLRender.edge.curve,check:edgeCount(0,true)},\n\n                {name:'edgeLabel',context:'edge',render:WebGLRender.edgeLabel.default,check:edgeCount(0)},\n                {name:'edgeCurveLabel',context:'edge',render:WebGLRender.edgeLabel.curve,check:edgeCount(0,true)},\n\n                {name:'node',context:'node',render:WebGLRender.node.default,check:layerCheckDefault()},\n                {name:'rectNode',context:'node',render:WebGLRender.node.rect,check:layerCheck('rect')},\n\n                {name:'nodeLabel',context:'node',render:WebGLRender.nodeLabel.default},\n\n                {name:'nodeOver',custom:true,render:nodeOverCustom,option:{over:false}},\n            ]\n        },\n    ];\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/defaultConfig/index.js","\n'use strict'\n\nimport util from '../../../../util'\n\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    attributes: {\n        a_position: {components:2,start:0},\n        a_uv: {components:2,start:2},\n        a_dis: {components:1,start:4},\n        a_flag: {components:1,start:5},\n        a_color: {components:4,start:6},\n        a_dashed:{components:1,start:10},\n        a_size:{components:1,start:11},\n        a_ratio:{components:1,start:12},\n    },\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale\n        }\n    },\n    getRenderData({data,config, textureLoader, textureIcon,graph}){\n        var target = graph.nodesIndex[data.target];\n        var source = graph.nodesIndex[data.source];\n\n        var defaultSize = config.defaultNodeSize;\n\n        var renderData = [];\n        var indices = [];\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var tNodeW,tNodeH,tSize;\n        tNodeW = util.getNodeSizeX(target);\n        tNodeH = util.getNodeSizeY(target);\n\n        if(tNodeH && tNodeW && tNodeH == tNodeW){\n            tSize = tNodeW;\n        }else {\n            tSize = Math.sqrt(Math.pow((tNodeW || defaultSize),2)+Math.pow((tNodeH || defaultSize),2));\n        }\n\n        var size = (data.size || config.defaultEdgeSize)/2;\n        var aSize = data.arrowSize || config.defaultEdgeArrowSize;\n        var vX, vY;\n\n        // var tX = target.x - tSize / dis * dx;\n        // var tY = target.y - tSize / dis * dy;\n        var tX = target.x;\n        var tY = target.y;\n\n\n        var ctrlP = util.getControlPos(source.x,source.y,tX,tY,data.curveCount,data.curveOrder);\n\n        //arrow\n        var dis1 = util.getDistance(tX,tY,ctrlP[0],ctrlP[1]);\n        var arrowPosRatio = (1 - (tSize + aSize)/dis1)*0.5 + 0.5;\n        var arrowPos = util.getPointOnQuadraticCurve(arrowPosRatio,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n        var aTangent = util.getPointTangentOnQuadraticCurve(arrowPosRatio,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n        vX =aTangent[0]*aSize;\n        vY =aTangent[1]*aSize;\n\n        var arrowX = arrowPos[0],\n            arrowY = arrowPos[1];\n\n\n        //curve\n        var color = util.parseColor(data.color||source.color || config.defaultEdgeColor);\n\n        var scalePos = scaleTrangles([source.x,source.y,ctrlP[0],ctrlP[1],tX,tY]);\n        var scaleUV = scaleTrangles([1,1,0.5,0,0,0]);\n\n\n        var dashed = data.dashed ? 1:0;\n        // debugger\n        //curve\n        addData(renderData,[scalePos[0],scalePos[1],scaleUV[0],scaleUV[1],dis,0,color.r,color.g,color.b,color.a,dashed,size,arrowPosRatio]);\n        addData(renderData,[scalePos[2],scalePos[3],scaleUV[2],scaleUV[3],dis,0,color.r,color.g,color.b,color.a,dashed,size,arrowPosRatio]);\n        addData(renderData,[scalePos[4],scalePos[5],scaleUV[4],scaleUV[5],dis,0,color.r,color.g,color.b,color.a,dashed,size,arrowPosRatio]);\n\n        addIndices(indices,[0,1,2]);\n\n        //arrow\n        addData(renderData,[arrowX+vX,arrowY+vY,0,0,0,1,color.r,color.g,color.b,color.a,dashed,size,arrowPosRatio]);\n        addData(renderData,[arrowX + vY * 0.6,arrowY - vX * 0.6,0,0,0,1,color.r,color.g,color.b,color.a,dashed,size,arrowPosRatio]);\n        addData(renderData,[arrowX - vY * 0.6,arrowY + vX * 0.6,0,0,0,1,color.r,color.g,color.b,color.a,dashed,size,arrowPosRatio]);\n\n        addIndices(indices,[3,4,5]);\n\n        return {\n            vertices:renderData,\n            indices:indices,\n        };\n    }\n\n}\n\nfunction addData(arr,attrData) {\n    for(var i = 0;i< attrData.length;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nfunction addIndices(indices,attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\nfunction scaleTrangles(points, scale) {\n    scale = scale || 1.6;\n    var p1_x = points[0],\n        p1_y = points[1],\n        p2_x = points[2],\n        p2_y = points[3],\n        p3_x = points[4],\n        p3_y = points[5];\n\n    var avg_x = (p1_x + p2_x + p3_x) / 3,\n        avg_y = (p1_y + p2_y + p3_y) / 3;\n\n    var p1_x_new = avg_x + (p1_x - avg_x) * scale,\n        p1_y_new = avg_y + (p1_y - avg_y) * scale,\n        p2_x_new = avg_x + (p2_x - avg_x) * scale,\n        p2_y_new = avg_y + (p2_y - avg_y) * scale,\n        p3_x_new = avg_x + (p3_x - avg_x) * scale,\n        p3_y_new = avg_y + (p3_y - avg_y) * scale;\n\n    return [p1_x_new, p1_y_new, p2_x_new, p2_y_new, p3_x_new, p3_y_new];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/curve/render.js","/**\n * Created by chengang on 17-3-31.\n */\n\nimport util from '../../../util'\n\nimport edgeVert from './glsl/default-vert.glsl'\nimport edgeFrag from './glsl/default-frag.glsl'\n\n\nexport default {\n    shaderVert: edgeVert,\n    shaderFrag: edgeFrag,\n    attributes: {\n        a_position: {components:2,start:0},\n        a_normal:{components:2,start:2},\n        a_size: {components:1,start:4},\n        a_color: {components:4,start:5},\n    },\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix\n        }\n    },\n    getRenderData({data,config, textureLoader, textureIcon,graph}){\n        var target = graph.nodesIndex[data.target];\n        var source = graph.nodesIndex[data.source];\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var defaultSize = config.defaultNodeSize;\n\n        var size = (data.size || config.defaultEdgeSize)/2,\n            arrowSize = data.arrowSize || config.defaultEdgeArrowSize;\n        var crossVector = util.normalize([-dy,dx]);\n\n        //arrow\n        var tNodeW,tNodeH,targetSize;\n        tNodeW = util.getNodeSizeX(target);\n        tNodeH = util.getNodeSizeY(target);\n\n        if(tNodeH && tNodeW && tNodeH == tNodeW){\n            targetSize = tNodeW;\n        }else {\n            targetSize = Math.sqrt(Math.pow((tNodeW || defaultSize),2)+Math.pow((tNodeH || defaultSize),2));\n        }\n\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var arrowX = target.x - (targetSize + arrowSize)/dis * dx;\n        var arrowY = target.y - (targetSize + arrowSize)/dis * dy;\n\n        var color = util.parseColor(edge.color||source.color || config.defaultEdgeColor);\n\n        var renderData = [];\n        var indices = [];\n\n        addData(renderData,[source.x,source.y,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(renderData,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(renderData,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(renderData,[arrowX,arrowY,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n\n        addIndices(indices,[0,1,2,1,2,3]);\n        //arrow\n        addData(renderData,[arrowX,arrowY,crossVector[0],crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(renderData,[arrowX,arrowY,-crossVector[0],-crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(renderData,[arrowX,arrowY,arrowSize/dis * dx,arrowSize/dis * dy,1,color.r,color.g,color.b,color.a]);\n\n        addIndices(indices,[4,5,6]);\n\n        return {\n            vertices:renderData,\n            indices:indices,\n        };\n    }\n\n}\n\nfunction addData(arr,attrData) {\n    for(var i = 0;i< attrData.length;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nfunction addIndices(indices,attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/render.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../util'\nimport mat3 from '../../../base/Matrix'\n\nimport vert from './glsl/edge-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    attributes: {\n        a_position: {components:2,start:0},\n        a_uv:{components:2,start:2},\n        a_size: {components:1,start:4},\n    },\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_image:10,\n        }\n    },\n    getRenderData({data,config, textureLoader, textureIcon,textureText,graph}){\n        var target = graph.nodesIndex[data.target];\n        var source = graph.nodesIndex[data.source];\n\n        if(!data.label) return null;\n\n        var defaultSize = config.defaultNodeSize;\n\n        // debugger\n        var str = data.label.split('');\n\n        var renderData = [];\n        var indices = [];\n\n        var size = data.fontSize ||  Math.max(util.getNodeSizeX(source) || defaultSize,util.getNodeSizeY(source) || defaultSize)/3;\n        var infos = textureText.textinfo.infos,\n            charWidth = size,\n            charHeight = size,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var centerX = (source.x + target.x)/2, centerY = (source.y + target.y)/2;\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n        var points = 0;\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(renderData,[startx,starty,x1,y1,width],centerX,centerY,angle);\n            addData(renderData,[startx,starty-charHeight,x1,y2,width],centerX,centerY,angle);\n            addData(renderData,[startx+width,starty,x2,y1,width],centerX,centerY,angle);\n            addData(renderData,[startx+width,starty-charHeight,x2,y2,width],centerX,centerY,angle);\n\n            addIndices(indices,[\n                points+0,points+1,points+2,\n                points+1,points+2,points+3\n            ]);\n\n            startx += width*7/8;\n            points += 4;\n        }\n\n        return {\n            vertices:renderData,\n            indices:indices,\n        };\n    }\n\n}\n\nfunction addData(arr,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n    for(var i = 0;i< attrData.length;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nfunction addIndices(indices,attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/EdgeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\nimport vert from './glsl/node-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\nimport util from '../../../util'\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    attributes: {\n        a_position: {components:2,start:0},\n        a_uv:{components:2,start:2},\n        a_size: {components:1,start:4},\n    },\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_image:10,\n        }\n    },\n    getRenderData({data,config, textureLoader, textureIcon,textureText,graph}){\n        // debugger\n        if(!data.label) return null;\n\n        var defaultSize = config.defaultNodeSize;\n\n        var str = data.label.split('');\n\n        var renderData = [];\n        var indices = [];\n\n        var sizeX = util.getNodeSizeX(data) || defaultSize,sizeY = util.getNodeSizeY(data) || defaultSize;\n        var size = Math.max(sizeX,sizeY);\n        var infos = textureText.textinfo.infos,\n            charWidth = size/2,\n            charHeight = size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                // console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n\n        var startx = totalWidht/2 * -1 + data.x;\n        var starty =  data.y - sizeY;\n        var x1,y1,x2,y2;\n\n        var points = 0;\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                // console.log(1);\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(renderData,[startx,starty,x1,y1,width]);\n            addData(renderData,[startx,starty-charHeight,x1,y2,width]);\n            addData(renderData,[startx+width,starty,x2,y1,width]);\n            addData(renderData,[startx+width,starty-charHeight,x2,y2,width]);\n\n            addIndices(indices,[\n                points+0,points+1,points+2,\n                points+1,points+2,points+3\n            ]);\n\n            startx += width*7/8;\n            points += 4;\n        }\n        return {\n            vertices:renderData,\n            indices:indices,\n        };\n    }\n\n}\n\n\nfunction addData(arr,attrData) {\n    for(var i = 0;i< attrData.length;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nfunction addIndices(indices,attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/NodeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../../util'\nimport mat3 from '../../../../base/Matrix'\n\nimport vert from './../glsl/edge-label-vert.glsl'\nimport frag from './../glsl/label-frag.glsl'\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    attributes: {\n        a_position: {components:2,start:0},\n        a_uv:{components:2,start:2},\n        a_size: {components:1,start:4},\n    },\n    getUniforms({matrix, camera, sampleRatio, textureLoader}){\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            u_image:10,\n        }\n    },\n    getRenderData({data,config, textureLoader, textureIcon,textureText,graph}){\n        var target = graph.nodesIndex[data.target];\n        var source = graph.nodesIndex[data.source];\n\n        if(!data.label) return null;\n\n        var defaultSize = config.defaultNodeSize;\n\n        // debugger\n        var str = data.label.split('');\n\n        var renderData = [];\n        var indices = [];\n\n        var size = data.fontSize ||  Math.max(util.getNodeSizeX(source)||defaultSize,util.getNodeSizeY(source)||defaultSize)/3;\n        var infos = textureText.textinfo.infos,\n            charWidth = size,\n            charHeight = size,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        //curve\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var tSize = Math.max(util.getNodeSizeX(target),util.getNodeSizeY(target));\n\n        var tX = target.x;\n        var tY = target.y;\n\n        var ctrlP = util.getControlPos(source.x,source.y,tX,tY,data.curveCount,data.curveOrder);\n\n        var tangent = util.getPointTangentOnQuadraticCurve(0.5,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n        dx = tangent[0],dy = tangent[1];\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var center = util.getPointOnQuadraticCurve(0.5,source.x,source.y,tX,tY,ctrlP[0],ctrlP[1]);\n\n\n        var centerX = center[0], centerY = center[1];\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n        var points = 0;\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(renderData,[startx,starty,x1,y1,width],centerX,centerY,angle);\n            addData(renderData,[startx,starty-charHeight,x1,y2,width],centerX,centerY,angle);\n            addData(renderData,[startx+width,starty,x2,y1,width],centerX,centerY,angle);\n            addData(renderData,[startx+width,starty-charHeight,x2,y2,width],centerX,centerY,angle);\n\n            addIndices(indices,[\n                points+0,points+1,points+2,\n                points+1,points+2,points+3\n            ]);\n\n            startx += width*7/8;\n            points += 4;\n        }\n        \n        return {\n            vertices:renderData,\n            indices:indices,\n        };\n    }\n\n}\n\nfunction addData(arr,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n    for(var i = 0;i< attrData.length;i++){\n        arr.push(attrData[i]);\n    }\n}\n\n\nfunction addIndices(indices,attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/curveLabel/render.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../../util'\nimport nodeVert from './default-vert.glsl'\nimport nodeFrag from './default-frag.glsl'\n\nexport default {\n    shaderVert: nodeVert,\n    shaderFrag: nodeFrag,\n    attributes: {\n        a_position: {components:2,start:0},\n        a_color: {components:4,start:2},\n        a_uv:{components:2,start:6},\n        a_selected: {components:1,start:8},\n        a_flag: {components:1,start:9},\n        a_size: {components:1,start:10},\n        a_showicon: {components:1,start:11},\n        a_center: {components:2,start:12},\n    },\n    getUniforms({matrix, camera,config, sampleRatio, textureLoader}){\n        var color = utils.parseColor(config.defaultNodeBorder);\n        return {\n            u_matrix:matrix,\n            u_camera_scale:camera.scale,\n            // u_textures:textureLoader.texturesIndex,\n            u_borderColor: [color.r, color.g, color.b, color.a],\n            u_sample_ratio:sampleRatio,\n            u_icons_texture:11,\n        }\n    },\n    getRenderData({data,config, textureLoader, textureIcon,oldData,dirtyAttr}){\n\n        data.size = data.size || config.defaultNodeSize;\n        var isSelected = data.selected ? 1.0 : 0.0;\n        var color = utils.parseColor(data.color || config.defaultNodeColor);\n\n        // debugger\n        // var img = -1;\n        // if (data.img && textureLoader.cache[data.img])\n        //     img = textureLoader.cache[data.img];\n\n        if(oldData && dirtyAttr\n            && Object.keys(dirtyAttr).length == 2\n            && dirtyAttr.hasOwnProperty('x')\n            && dirtyAttr.hasOwnProperty('y')\n        ){\n            // debugger\n            var offset = 14;\n            var oldVertices = oldData.vertices;\n            for(var i = 0;i< oldVertices.length;i+=offset){\n                oldVertices[i+12] = data.x;\n                oldVertices[i+13] = data.y;\n            }\n            return {\n                vertices:oldVertices,\n            };\n        }\n\n        var hasIcon = data.icon && textureIcon.iconinfo.infos[data.icon],uvs;\n        uvs = hasIcon ? textureIcon.iconinfo.infos[data.icon].uvs : [0,0];\n        hasIcon = hasIcon ? 1:0;\n\n        var vertices = [];\n        var indices = [];\n\n        var points = 0;\n        var bgScale = 1.35;\n\n        // debugger\n\n        //background\n        addData(vertices,[-1*data.size*bgScale,+1*data.size*bgScale,color.r,color.g,color.b,color.a,0,0,isSelected,0,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[+1*data.size*bgScale,+1*data.size*bgScale,color.r,color.g,color.b,color.a,1,0,isSelected,0,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[-1*data.size*bgScale,-1*data.size*bgScale,color.r,color.g,color.b,color.a,0,1,isSelected,0,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[+1*data.size*bgScale,-1*data.size*bgScale,color.r,color.g,color.b,color.a,1,1,isSelected,0,data.size,hasIcon,data.x,data.y]);\n\n        addIndices(indices,[\n            points+0,points+1,points+2,\n            points+1,points+2,points+3\n        ]);\n        points += 4;\n\n\n        //base\n        addData(vertices,[-1*data.size,+1*data.size,color.r,color.g,color.b,color.a,0,0,isSelected,1,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[+1*data.size,+1*data.size,color.r,color.g,color.b,color.a,1,0,isSelected,1,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[-1*data.size,-1*data.size,color.r,color.g,color.b,color.a,0,1,isSelected,1,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[+1*data.size,-1*data.size,color.r,color.g,color.b,color.a,1,1,isSelected,1,data.size,hasIcon,data.x,data.y]);\n\n        addIndices(indices,[\n            points+0,points+1,points+2,\n            points+1,points+2,points+3\n        ]);\n        points += 4;\n\n\n        var scale = 0.7;\n\n        //icon\n        addData(vertices,[-1*data.size*scale,+1*data.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[1],isSelected,2,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[+1*data.size*scale,+1*data.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[1],isSelected,2,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[-1*data.size*scale,-1*data.size*scale,color.r,color.g,color.b,color.a,uvs[0],uvs[3],isSelected,2,data.size,hasIcon,data.x,data.y]);\n        addData(vertices,[+1*data.size*scale,-1*data.size*scale,color.r,color.g,color.b,color.a,uvs[2],uvs[3],isSelected,2,data.size,hasIcon,data.x,data.y]);\n\n        addIndices(indices,[\n            points+0,points+1,points+2,\n            points+1,points+2,points+3\n        ]);\n        points += 4;\n\n        \n        \n        return {\n            vertices:vertices,\n            indices:indices,\n        };\n    }\n\n}\n\nfunction addData(vertices,attrData) {\n    attrData.forEach(function (data) {\n        vertices.push(data);\n    });\n}\n\nfunction addIndices(indices,attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/default/render.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../../util'\nimport vert from './vert.glsl'\nimport frag from './frag.glsl'\n\n\nexport default {\n    shaderVert: vert,\n    shaderFrag: frag,\n    attributes: {\n        a_position: {components: 2, start: 0},\n        a_color: {components: 4, start: 2},\n        a_uv: {components: 2, start: 6},\n        a_img: {components: 1, start: 8},\n        a_selected: {components: 1, start: 9},\n        a_flag: {components: 1, start: 10},\n        a_showicon: {components: 1, start: 11},\n    },\n    getUniforms({matrix, camera,config, sampleRatio,textureLoader}){\n        var color = utils.parseColor(config.defaultNodeBorder);\n        return {\n            u_matrix: matrix,\n            u_camera_scale: camera.scale,\n            // u_textures:textureLoader.texturesIndex,\n            u_borderColor: [color.r, color.g, color.b, color.a],\n            u_sample_ratio: sampleRatio,\n            u_icons_texture: 11,\n        }\n    },\n    getRenderData({data, config, textureLoader, textureIcon, graph}){\n\n        var color = utils.parseColor(data.color || config.defaultNodeColor);\n\n        var img = -1;\n        if (data.img && textureLoader.cache.hasOwnProperty(data.img))\n            img = textureLoader.cache[data.img];\n\n        var sizeX = data.width || data.size || config.defaultNodeSize;\n        var sizeY = data.height || data.size || config.defaultNodeSize;\n        var iconSize = Math.min(sizeX, sizeY);\n        var bgSize = Math.max(sizeX, sizeY) * 1.414;\n        var isSelected = data.selected ? 1.0 : 0.0;\n\n        var hasIcon = data.icon && textureIcon.iconinfo.infos[data.icon], uvs;\n        uvs = hasIcon ? textureIcon.iconinfo.infos[data.icon].uvs : [0, 0];\n        hasIcon = hasIcon ? 1 : 0;\n\n        var renderData = [];\n        var indices = [];\n\n        var points = 0;\n        var bgScale = 1.2;\n\n\n        addData(renderData, [data.x - bgSize * bgScale, data.y + bgSize * bgScale, color.r, color.g, color.b, color.a, 0, 0, img, isSelected, 0, hasIcon]);\n        addData(renderData, [data.x + bgSize * bgScale, data.y + bgSize * bgScale, color.r, color.g, color.b, color.a, 1, 0, img, isSelected, 0, hasIcon]);\n        addData(renderData, [data.x - bgSize * bgScale, data.y - bgSize * bgScale, color.r, color.g, color.b, color.a, 0, 1, img, isSelected, 0, hasIcon]);\n        addData(renderData, [data.x + bgSize * bgScale, data.y - bgSize * bgScale, color.r, color.g, color.b, color.a, 1, 1, img, isSelected, 0, hasIcon]);\n\n        addIndices(indices, [\n            points + 0, points + 1, points + 2,\n            points + 1, points + 2, points + 3\n        ]);\n        points += 4;\n\n\n        //base\n        addData(renderData, [data.x - sizeX, data.y + sizeY, color.r, color.g, color.b, color.a, 0, 0, img, isSelected, 1, hasIcon]);\n        addData(renderData, [data.x + sizeX, data.y + sizeY, color.r, color.g, color.b, color.a, 1, 0, img, isSelected, 1, hasIcon]);\n        addData(renderData, [data.x - sizeX, data.y - sizeY, color.r, color.g, color.b, color.a, 0, 1, img, isSelected, 1, hasIcon]);\n        addData(renderData, [data.x + sizeX, data.y - sizeY, color.r, color.g, color.b, color.a, 1, 1, img, isSelected, 1, hasIcon]);\n\n        addIndices(indices, [\n            points + 0, points + 1, points + 2,\n            points + 1, points + 2, points + 3\n        ]);\n        points += 4;\n\n\n        var scale = 0.85;\n        //icon\n\n        // debugger\n        addData(renderData, [data.x - iconSize * scale, data.y + iconSize * scale, color.r, color.g, color.b, color.a, uvs[0], uvs[1], -2, isSelected, 2, hasIcon]);\n        addData(renderData, [data.x + iconSize * scale, data.y + iconSize * scale, color.r, color.g, color.b, color.a, uvs[2], uvs[1], -2, isSelected, 2, hasIcon]);\n        addData(renderData, [data.x - iconSize * scale, data.y - iconSize * scale, color.r, color.g, color.b, color.a, uvs[0], uvs[3], -2, isSelected, 2, hasIcon]);\n        addData(renderData, [data.x + iconSize * scale, data.y - iconSize * scale, color.r, color.g, color.b, color.a, uvs[2], uvs[3], -2, isSelected, 2, hasIcon]);\n\n        addIndices(indices, [\n            points + 0, points + 1, points + 2,\n            points + 1, points + 2, points + 3\n        ]);\n        points += 4;\n\n\n        return {\n            vertices: renderData,\n            indices: indices,\n        };\n    }\n\n}\n\nfunction addData(arr, attrData) {\n    for (var i = 0; i < attrData.length; i++) {\n        arr.push(attrData[i]);\n    }\n}\n\n\nfunction addIndices(indices, attrIndex) {\n    attrIndex.forEach(function (data) {\n        indices.push(data);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/rect/render.js","module.exports = \" precision mediump float;\\n\\nvec4 color = vec4(0.8,0.8,0.8,0.8);\\n\\n\\nuniform vec4 u_bg_color;\\n\\n\\nvoid main() {\\n    vec4 color = u_bg_color / 255.0;\\n    color = vec4(color.rgb * color.a,color.a);\\n   gl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/defaultConfig/frag.glsl\n// module id = 35\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\n//attribute vec2 a_uv;\\n\\n//varying vec2 v_texCoord;\\n//varying float size;\\n\\nvoid main() {\\ngl_Position = vec4(a_position,0,1);\\n//v_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/defaultConfig/vert.glsl\n// module id = 36\n// module chunks = 0","module.exports = \"#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n#endif\\n\\nprecision mediump float;\\nvarying vec4 color;\\nvarying vec2 uv;\\nvarying float dis;\\nvarying float flag;\\nvarying float dashed;\\nvarying float size;\\nvarying float ratio;\\n\\nuniform float u_camera_scale;\\n\\n\\n\\nvoid main(){\\n        float width = size / u_camera_scale;\\n        float blur = clamp(0.6,0.05,width*1.0) ;\\n        width = width + blur;\\n        float blur_ratio = blur / width;\\n        float scale = 1.0;\\n\\n        if(flag > -0.5 && flag < 0.5){//curve\\n                vec2 px = dFdx(uv);\\n                vec2 py = dFdy(uv);\\n\\n                float fx = 2.0 * uv.x * px.x - px.y;\\n                float fy = 2.0 * uv.y * py.x - py.y;\\n\\n                float sd = (uv.x * uv.x - uv.y) / sqrt(fx * fx + fy * fy);\\n\\n                float alpha = 1.0 - abs(sd) / width;\\n                if (alpha < 0.0 || uv.x < ratio || uv.x > 1.0) discard;\\n\\n                float n = 800.0/dis;\\n                float dot = mod(uv.x*100.0,n);\\n                if(dashed > 0.5 && dot > n*0.5 && dot < n) discard;\\n\\n                if(alpha < blur_ratio) scale = smoothstep(0.0,blur_ratio,alpha);\\n\\n                gl_FragColor = color*scale;\\n\\n        }else if(flag > 0.5 && flag < 1.5){//arrow\\n                gl_FragColor = color;\\n        }\\n\\n\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/curve/frag.glsl\n// module id = 37\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\n//attribute vec2 a_normal;\\nattribute vec4 a_color;\\n//attribute float a_size;\\nattribute vec2 a_uv;\\nattribute float a_dis;\\nattribute float a_flag;\\nattribute float a_dashed;\\nattribute float a_size;\\nattribute float a_ratio;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\nvarying vec2 uv;\\nvarying float dis;\\nvarying float flag;\\nvarying float dashed;\\nvarying float size;\\nvarying float ratio;\\n\\nvoid main() {\\n\\n//vec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nuv = a_uv;\\ndis = a_dis;\\nflag = a_flag;\\ncolor = a_color/255.0;\\ncolor = vec4(color.rgb * color.a,color.a);\\ndashed = a_dashed;\\nsize = a_size;\\nratio = 1.0 - a_ratio;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/curve/vert.glsl\n// module id = 38\n// module chunks = 0","module.exports = \"precision mediump float;\\nvarying vec4 color;\\nvoid main(){\\ngl_FragColor = vec4(color.rgb * color.a,color.a);\\n//gl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-frag.glsl\n// module id = 39\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute vec4 a_color;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\n\\nvoid main() {\\n\\nvec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(pos,1)).xy,0,1);\\n\\ncolor = a_color/255.0;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-vert.glsl\n// module id = 40\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\nsize = a_size;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/node-label-vert.glsl\n// module id = 41\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying vec4 color;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\nvarying float size;\\nvarying float showicon;\\n\\n\\n\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0;\\n   float alpha = 1.0;\\n   float blur = min(0.05,4.0/size) ;\\n   float border = min(0.75,0.06*size) ;\\n\\nif(flag > 0.5 && flag < 1.5) //flag =1 base\\n{\\n    vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    r = length(cxy);\\n\\n    if(r > 1.0 ){\\n        discard;\\n    }\\n\\n    if(r > 1.0-blur){\\n        alpha = 1.0 -  smoothstep(1.0-blur, 1.0, r) ;\\n     }\\n\\n\\n     if( selected > 0.5  && r > border && r < border + blur){\\n        nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n    }\\n\\n     if( selected > 0.5  &&  r >= border + blur){\\n        nodecolor = borderColor;\\n     }\\n\\n      gl_FragColor = nodecolor * alpha;\\n\\n}else if(flag > 1.5 && flag < 2.5) {//flag =2 icon\\n    if(showicon < 0.5) discard;\\n    gl_FragColor = texture2D(u_icons_texture,uv).w * vec4(1,1,1,1);\\n}else if((flag > -0.5 && flag < 0.5)){//flat = 0 selected bg\\n\\n    if(selected < 0.5) discard;\\n\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    r = length(cxy);\\n\\n    if(r > 1.0 ){\\n        discard;\\n    }\\n\\n    r = smoothstep(0.7,1.0,r);\\n\\n     gl_FragColor = vec4(borderColor.rgb,0.8)*(1.0-r);\\n//     gl_FragColor = vec4(1.0,0.0,0.0,0.8);\\n}\\n\\n\\n//     gl_FragColor = vec4(1.0,0.0,0.0,1.0);\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/default/default-frag.glsl\n// module id = 42\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute vec2 a_uv;\\nattribute float a_selected;\\nattribute float a_flag;\\nattribute float a_size;\\nattribute float a_showicon;\\nattribute vec2 a_center;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying vec4 color;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\nvarying float size;\\nvarying float showicon;\\n\\n\\nvoid main() {\\n\\nfloat zindex = 0.1;\\n\\nif(a_selected > 0.5) zindex = 0.05;\\n\\n\\ngl_Position = vec4((u_matrix*vec3((a_position+a_center),1)).xy,zindex,1);\\ncolor = a_color/255.0;\\nselected = a_selected;\\nuv = a_uv;\\nflag = a_flag;\\n\\nsize = a_size / u_camera_scale ;\\nshowicon = a_showicon;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/default/default-vert.glsl\n// module id = 43\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\nvarying float showicon;\\n\\n\\n//uniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = 0.05 ,\\n   border = 0.75 ;\\n\\n\\nif(flag > 0.5 && flag < 1.5) //flag =1\\n{\\n    vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * uv - 1.0;\\n    cxy = abs(cxy);\\n\\n\\n//     if( selected > 0.5  && r > border && r < border + blur){\\n//        nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n//    }\\n\\n     if(  selected > 0.5 && (cxy.x > 0.65  ||  cxy.y > 0.65)){\\n        nodecolor = borderColor;\\n     }\\n\\n      gl_FragColor = nodecolor * alpha;\\n\\n}else if(flag > 1.5 && flag < 2.5) {//flag =2\\n    if(showicon < 0.5) discard;\\n    gl_FragColor = texture2D(u_icons_texture,uv).w * vec4(1,1,1,1);\\n}else if((flag > -0.5 && flag < 0.5)){//flat = 0 selected background\\n\\n    if(selected < 0.5) discard;\\n\\n     vec2 cxy = 2.0 * uv - 1.0;\\n     r = length(cxy);\\n\\n     if(r > 1.0 ){\\n         discard;\\n     }\\n\\n     r = smoothstep(0.6,1.0,r);\\n\\n      gl_FragColor = vec4(borderColor.rgb,0.8)*(1.0-r);\\n }\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/rect/frag.glsl\n// module id = 44\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_img;\\nattribute vec2 a_uv;\\nattribute float a_selected;\\nattribute float a_flag;\\nattribute float a_showicon;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\nvarying vec2 uv;\\nvarying float flag;\\nvarying float showicon;\\n\\n\\nvoid main() {\\n\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\nuv = a_uv;\\nflag = a_flag;\\nshowicon = a_showicon;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/rect/vert.glsl\n// module id = 45\n// module chunks = 0","export {default as Graph} from './core/Graph'\nexport {default as WebGLRender} from './render/index'\nexport {default as GraphView} from './core/index'\nexport {default as util} from './util'\nexport * as GLUtil from './base/GLUtil'\nexport {default as Tween} from './animation/tween'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}