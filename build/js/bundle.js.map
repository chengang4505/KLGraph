{"version":3,"sources":["webpack:///webpack/bootstrap 1fb0e35855d492777cc4","webpack:///./src/util.js","webpack:///./src/base/EventEmitter.js","webpack:///./src/base/Quad.js","webpack:///./src/core/Event.js","webpack:///./src/core/Graph.js","webpack:///./src/render/webgl/render.js","webpack:///./src/render/webgl/label/glsl/label-frag.glsl","webpack:///./src/core/index.js","webpack:///./src/render/index.js","webpack:///./src/animation/tween.js","webpack:///./src/base/Matrix.js","webpack:///./src/core/config.js","webpack:///./src/graph/eventEmiter.js","webpack:///./src/layout/CircularLayout.js","webpack:///./src/layout/ColaLayout.js","webpack:///./src/layout/DargeLayout.js","webpack:///./src/layout/FlowLayout.js","webpack:///./src/layout/index.js","webpack:///./src/render/webgl/TextureLoader.js","webpack:///./src/render/webgl/TextureText.js","webpack:///./src/render/webgl/edge/default.js","webpack:///./src/render/webgl/label/EdgeLabel.js","webpack:///./src/render/webgl/label/NodeLabel.js","webpack:///./src/render/webgl/node/Flag.js","webpack:///./src/render/webgl/node/default.js","webpack:///./src/render/webgl/node/index.js","webpack:///./src/render/webgl/edge/glsl/default-frag.glsl","webpack:///./src/render/webgl/edge/glsl/default-vert.glsl","webpack:///./src/render/webgl/label/glsl/edge-label-vert.glsl","webpack:///./src/render/webgl/label/glsl/node-label-vert.glsl","webpack:///./src/render/webgl/node/glsl/default-frag.glsl","webpack:///./src/render/webgl/node/glsl/default-vert.glsl","webpack:///./src/render/webgl/node/glsl/flag-frag.glsl","webpack:///./src/render/webgl/node/glsl/flag-vert.glsl","webpack:///./src/index.js","webpack:///./src/render/webgl/TextureIcon.js","webpack:///./src/render/webgl/node/Icon.js","webpack:///./src/render/webgl/node/glsl/icon-frag.glsl","webpack:///./src/render/webgl/node/glsl/icon-vert.glsl"],"names":["utils","typeofstr","typeofobj","typeoffn","uuid","a","b","Math","random","toString","isArray","obj","Array","isString","isObject","isFunction","loadShader","gl","shaderSource","shaderType","error","compiled","shader","createShader","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","console","deleteShader","loadProgram","shaders","attribs","loc","i","linked","program","createProgram","length","attachShader","bindAttribLocation","locations","opt_attribs","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","extend","k","res","l","arguments","getDistance","x1","y1","x2","y2","dx","dy","sqrt","normalize","vector","len","getAngle","cos","acos","reI","reN","reHex6","reRgbaInteger","RegExp","parseColor","format","trim","toLowerCase","m","n","exec","parseInt","r","g","window","EventEmitter","_listener","type","cb","listener","push","splice","args","fn","slice","apply","defaultConfig","maxLevel","indexN","x","y","rect","x0","y0","w","h","right","top","indexNs","pointRect","points","map","forEach","e","getIndexRect","index","createNode","level","elements","children","size","Quad","option","root","nodes","time","Infinity","insert","bind","timeEnd","data","pointR","indexs","id","_point","initEvent","_this","container","addEventListener","handlerWrap","_clickHandler","_moveHandler","_downHandler","_upHandler","_wheelHandler","handle","pos","toCameraPos","offsetX","offsetY","cameraX","cameraY","getNode","graph","node","dis","findNode","graphPos","toGraphPos","emit","handleDrag","forceRender","isCamera","isDown","startx","starty","onmousemove","offsetx","offsety","camera","position","setNodeData","newgraphPos","onmouseup","clear","onmouseout","removeEventListener","ratio","zoomRatio","wheelDelta","zoomTo","Graph","options","edges","nodesIndex","edgesIndex","inEdgesIndex","outEdgesIndex","read","source","target","ids","nodeid","removeEdge","edge","edgeid","updatePos","hasOwnProperty","attr","oldpos","quad","point","WebGLRender","needUpdate","sampleRatio","initRender","initGraphChangeEvent","initTexture","textureLoader","on","textureUpdate","initTextureText","textureText","initTextTexture","projectMatrix","matrixFromScale","canvas","clientWidth","clientHeight","scale","rotation","renderType","cache","nodeLabel","edgeLabel","call","COLOR_BUFFER_BIT","imgs","img","loadImgs","Object","keys","renderEdge","renderEdgeLabel","renderNode","renderNodeLabel","createRenderCache","textureIcon","renderCacheData","layers","name","counter","rootType","argFn","nodeData","cacheIndex","start","offset","rootType1","clearClusterCacheCounter","initRenderLayers","render","getRenderData","fixClusterCacheLength","camMatrixInvert","order","getCameraMatrix","useProgram","matrix","multiMatrix","getContext","getExtension","resizeCanvas","viewport","width","height","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","disable","DEPTH_TEST","clearColor","updateNodeRenderData","updateNodeLabelRenderData","updateEdgeRenderData","updateEdgeLabelRenderData","clearRenderCache","objs","addTexts","getAddText","text","label","texts","chars","split","createCanvasImg","typeRoot","renderRoot","temp","layersConfig","layer","config","shaderVert","VERTEX_SHADER","shaderFrag","FRAGMENT_SHADER","icons","icon","createIcons","isInvert","mat","matrixFromRotation","matrixFromTranslate","invert","multiplier","isVector","p","rotateVector","transformPoint","newscale","zoomMin","zoomMax","url","renderData","updateRenderData","Core","selected","off","makeLayout","layout","_start","_initEvent","frames","state","_render","requestAnimationFrame","layoutConfig","to","duration","t","filter","default","Tween","init","interpolates","timer","d3","timerHandle","_duration","prototype","elapsed","min","attrInterpolater","stop","toObjs","interpolateNumber","mat3","angle","sin","a11","a12","a13","a21","a22","a23","a31","a32","a33","del","multiply","a00","a01","a02","a10","a20","b00","b01","b02","b10","b11","b12","b20","b21","b22","v","matrixs","reduce","pre","cur","textureIconWidth","textureIconHeight","dispatch","CircularLayout","posSet","depthPosSet","drawnBiComps","bc","nodeHeights","node2BiComp","createBicconnects","__layout","oldNodes","oldLinks","tempNodes","_index","s","links","states","dfsn","low","edgesStack","biComponents","num","dfs","current","neigh","neighNodes","singleComponent","pop","biconncts","max","maxIndex","delete","j","maxSize","radius","PI","deltaAngle","startX","startY","sortInnerCircle","test","SetOuterCircle","icNodes","greedyNodes","modestNodes","forFunct","tmp","NoOfChildren","toReturn","gNo","mNo","deltaM","deltaG","nodeId","outerCircle","currNeigh","compIndex","innerCircleRadius","firstTouched","outerNodesCount","rnc","iter","currNeighbour","outerRadius","tryCount","outerDeltaAngle","outerPositionsTaken","outerPositionsOwners","pointX","pointY","theAngle","theAngleHlp","innerDeltaAngle","asin","idPos","addedNeighbours","currentNeighbour","noOfNeighbours","startPos","BestFreePositionsForAll","startAngle","holeDepth","EachNodeHeight","DFSSetPos","idealPosition","noOfPos","innerCirclePos","innerCSize","alreadyFound","startOfAlFound","found","goDown","goUp","goUpCount","biggestGap","bestStartPos","thisGap","count","nodeID","noOfChildren","theRadius","component","undefined","comp","centerX","centerY","currAngle","oneAtLeast","neighboursCount","min1","min2","min1Id","min2Id","maxId","remStartAngle","rTry","hlp","setOffset","abs","ColaLayout","cola","Layout","convergenceThreshold","_init","symmetricDiffLinkLengths","DargeLayout","dagre","graphlib","setGraph","rankdir","nodesep","ranksep","ranker","setDefaultEdgeLabel","setNode","setEdge","d","FlowLayout","flowLayout","filterEdge","_filterEdge","filterEdges","flag","first","breadFirst","circular","flow","darge","TextureLoader","textures","defaultTexture","createTexture","texturesIndex","updateGPUTexture","urls","_load","image","document","createElement","src","onload","tx","activeTexture","bindTexture","TEXTURE_2D","texture","TEXTURE0","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","TextureText","border","fontSize","fontFamily","textinfo","c","ceil","ctx","fillStyle","fillRect","font","textAlign","textBaseline","infos","px","py","charWidth","measureText","fillText","uvs","computeAlpha","imgData","getImageData","putImageData","TEXTURE10","strs","char","charAt","LINEAR","addData","arr","attributes","attrData","Edge","POINTS","ATTRIBUTES","arrayBuffer","dataBuffer","strip","arrowSize","crossVector","arrowX","arrowY","color","createBuffer","positionLocation","getAttribLocation","normalLocation","colorLocation","sizeLocation","matrixLocation","getUniformLocation","byteLength","ArrayBuffer","float32View","Float32Array","Uint8View","Uint8Array","offset32","offset8","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniformMatrix3fv","drawArrays","TRIANGLES","rotate","NodeLabel","str","charHeight","uv","totalWidht","log","uvLocation","imageLocation","uniform1i","Flag","cameraScaleLocation","sampleRatioLocation","uniform1f","Node","isSelected","imgLocation","selectedLocation","texturesLocation","borderColorLocation","int8View","uniform4f","uniform1iv","TextureIcon","iconinfo","iconsToCreate","fontLoaded","fonts","fontsReady","ready","then","createIcon","warn","TEXTURE11","Icon","iconx1","icony1","iconx2","icony2","hasIcon","iconUVLocation1","iconUVLocation2","iconUVLocation3","iconUVLocation4","iconTextureLocation"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1fb0e35855d492777cc4","/**\n * Created by chengang on 17-3-17.\n */\n\nvar utils = {};\n\nvar typeofstr = typeof '';\nvar typeofobj = typeof {};\nvar typeoffn = typeof function(){};\n\nutils.uuid = function(a,b){\n    for(               // loop :)\n        b=a='';        // b - result , a - numeric variable\n        a++<36;        //\n        b+=a*51&52  // if \"a\" is not 9 or 14 or 19 or 24\n            ?  //  return a random number or 4\n            (\n                a^15      // if \"a\" is not 15\n                    ?      // genetate a random number from 0 to 15\n                    8^Math.random()*\n                    (a^20?16:4)  // unless \"a\" is 20, in which case a random number from 8 to 11\n                    :\n                    4            //  otherwise 4\n            ).toString(16)\n            :\n            '-'            //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n    );\n    return b;\n};\n\n\nutils.isArray = function( obj ){\n    return Array.isArray ? Array.isArray( obj ) : obj != null && obj instanceof Array;\n};\n\nutils.isString = function( obj ){\n    return obj != null && typeof obj == typeofstr;\n};\n\nutils.isObject = function( obj ){\n    return obj != null && typeof obj === typeofobj;\n};\n\nutils.isFunction =  function( obj ){\n    return obj != null && typeof obj === typeoffn;\n};\n\n\n\nutils.loadShader = function(gl, shaderSource, shaderType, error) {\n    var compiled,\n        shader = gl.createShader(shaderType);\n\n    // Load the shader source\n    gl.shaderSource(shader, shaderSource);\n\n    // Compile the shader\n    gl.compileShader(shader);\n\n    // Check the compile status\n    compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    // If something went wrong:\n    if (!compiled) {\n        if (error) {\n            error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        }\n\n        console.error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n};\n\n\n\nutils.loadProgram = function(gl, shaders, attribs, loc, error) {\n    var i,\n        linked,\n        program = gl.createProgram();\n\n    for (i = 0; i < shaders.length; ++i)\n        gl.attachShader(program, shaders[i]);\n\n    if (attribs)\n        for (i = 0; i < attribs.length; ++i)\n            gl.bindAttribLocation(\n                program,\n                locations ? locations[i] : i,\n                opt_attribs[i]\n            );\n\n    gl.linkProgram(program);\n\n    // Check the link status\n    linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        if (error)\n            error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        console.error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n        return null;\n    }\n\n    return program;\n};\n\n\nutils.extend = function() {\n    var i,\n        k,\n        res = {},\n        l = arguments.length;\n\n    for (i = l - 1; i >= 0; i--)\n        for (k in arguments[i])\n            res[k] = arguments[i][k];\n\n    return res;\n};\n\nutils.getDistance = function (x1,y1,x2,y2) {\n    var dx =x1 - x2;\n    var dy =y1 - y2;\n    return Math.sqrt(dx*dx+dy*dy);\n};\n\nutils.normalize = function (vector) {\n  var len = Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]);\n  if(len == 0) return [0,0];\n  return [vector[0]/len,vector[1]/len];\n};\n\nutils.getAngle = function (x1,y1,x2,y2) {\n    var cos = (x1*x2+y1*y2)/(Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2));\n    return Math.acos(cos);\n};\n\n\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\";\nvar reHex6 = /^#([0-9a-f]{6})$/;\nvar reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\");\nutils.parseColor = function (format) {\n    format = (format + \"\").trim().toLowerCase();\n    var m,n;\n    if(m = reHex6.exec(format)){\n        n = parseInt(m[1], 16);\n        return{\n            r:n >> 16 & 0xff,\n            g: n >> 8 & 0xff,\n            b: n & 0xff,\n            a:255\n        }\n    }else if(m = reRgbaInteger.exec(format)){\n        return{\n            r:+m[1],\n            g:+m[2],\n            b:+m[3],\n            a:+m[4]\n        }\n    }else {\n        throw 'not valid color format';\n    }\n}\n\n\nexport  default utils ;\n\nwindow.utils = utils;\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n * Created by chengang on 17-2-16.\n */\n\nexport default class EventEmitter {\n    constructor(){\n        this._listener = {};\n    }\n\n    on(type,cb){\n        if(!type || !cb) return;\n        this._listener[type] = this._listener[type] || [];\n\n        var listener = this._listener[type];\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]) return;\n        }\n\n        this._listener[type].push(cb);\n        return cb;\n    }\n\n    off(type,cb){\n        if(!type) return;\n        var listener;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        if(cb){\n            for(var i = 0,len = listener.length; i < len;i++){\n                if(cb == listener[i]){\n                    listener.splice(i,1);\n                    break;\n                }\n            }\n        }else {\n            this._listener[type] = [];\n        }\n    }\n\n    emit(type,args){\n        if(!type) return;\n        var listener,fn;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        listener = listener.slice();\n\n        for(var i = 0,len = listener.length;i< len;i++){\n            fn = listener[i];\n            fn.apply(null,args);\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/EventEmitter.js","/**\n * Created by chengang on 17-3-29.\n */\n\nimport util from '../util'\n\nvar defaultConfig = {\n    maxLevel:2,\n};\n\nfunction indexN(x,y,rect) {\n    var x0 = rect.x,y0 = rect.y, w = rect.w, h = rect.h;\n    var right = x > (x0+w/2);\n    var top = y > (y0+h/2);\n    return top << 1 | right;\n}\n\nfunction indexNs(pointRect,rect) {\n    var points = [\n        [pointRect.x,pointRect.y],\n        [pointRect.x+pointRect.w/2,pointRect.y],\n        [pointRect.x,pointRect.y+pointRect.h/2],\n        [pointRect.x+pointRect.w/2,pointRect.y+pointRect.h/2],\n    ];\n    var map = {},n;\n    points.forEach(function (e) {\n        n = indexN(e[0],e[1],rect);\n        map[n] = true;\n    })\n\n    return map;\n}\n\nfunction getIndexRect(index,rect) {\n    var r;\n    switch(index){\n        case 0:\n            r = {x:rect.x,y:rect.y,w:rect.w/2,h:rect.h/2};\n            break;\n        case 1:\n            r = {x:rect.x+rect.w/2,y:rect.y,w:rect.w/2,h:rect.h/2};\n            break;\n        case 2:\n            r = {x:rect.x,y:rect.y+rect.h/2,w:rect.w/2,h:rect.h/2};\n            break;\n        case 3:\n            r = {x:rect.x+rect.w/2,y:rect.y+rect.h/2,w:rect.w/2,h:rect.h/2};\n            break;\n    }\n\n    return r;\n}\n\n\nfunction createNode(level,rect) {\n    return {\n        level:level||0,\n        rect:rect,\n        elements:[],\n        children:null,\n    }\n}\n\nfunction pointRect(n) {\n    return {\n        x: n.x - n.size,\n        y: n.y - n.size,\n        w:n.size*2,\n        h:n.size*2,\n    };\n}\n\nexport  default class Quad{\n    constructor(option){\n        this.option = util.extend(defaultConfig,option||{});\n        this.root =null;\n    }\n\n    index(nodes,option){\n        console.time('quadindex');\n        option = option || {};\n\n        var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n        if(!option.rect){\n            nodes.forEach(function (e) {\n                if(e.x < x0) x0 = e.x;\n                if(e.x > x1) x1 = e.x;\n                if(e.y < y0) y0 = e.y;\n                if(e.y > y1) y1 = e.y;\n            });\n            option.rect = {x:x0,y:y0,w:x1-x0,h:y1-y0};\n        }\n\n\n        this.root = createNode(0,option.rect);\n\n        nodes.forEach(function (e) {\n            this.insert(e,this.root);\n        }.bind(this));\n        console.timeEnd('quadindex');\n\n    }\n\n    insert(data,root){\n        var pointR = pointRect(data);\n        if(root.level < this.option.maxLevel){\n            root.children = root.children || new Array(4);\n            var indexs = indexNs(pointR,root.rect);\n            var e ;\n            for(var i in indexs) {\n                e = +i;\n                if(!root.children[e]) root.children[e] = createNode(root.level+1,getIndexRect(e,root.rect));\n                this.insert(data,root.children[e]);\n            }\n        }else {\n            root.elements.push({x:data.x,y:data.y,id:data.id});\n        }\n    }\n\n    point(x,y){\n        return this._point(x,y,this.root);\n    }\n\n    _point(x,y,root){\n        if(root.children){\n            var index = indexN(x,y,root.rect);\n            return  root.children[index] ?  this._point(x,y,root.children[index]) : [];\n        }else {\n            return root.elements;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/Quad.js","/**\n * Created by chengang on 17-3-29.\n */\nimport util from '../util'\n\nexport default function initEvent() {\n    var _this = this;\n    this.container.addEventListener('click', handlerWrap(_clickHandler), false);\n    this.container.addEventListener('mousemove', handlerWrap(_moveHandler), false);\n    this.container.addEventListener('mousedown', handlerWrap(_downHandler), false);\n    this.container.addEventListener('mouseup', handlerWrap(_upHandler), false);\n    this.container.addEventListener('mousewheel', handlerWrap(_wheelHandler), false);\n\n    function handlerWrap(handle) {\n        return function (e) {\n            var pos = _this.toCameraPos({x: e.offsetX, y: e.offsetY});\n            e.cameraX = pos.x;\n            e.cameraY = pos.y;\n            handle(e);\n        }\n    }\n\n    function getNode(pos) {\n        // var nodes = _this.graph.quad.point(pos.x, pos.y);\n        var nodes = _this.graph.nodes;\n\n        var node, dis;\n        var findNode = null;\n        if (nodes.length > 0) {\n            for (var i = nodes.length - 1; i >= 0; i--) {\n                node = nodes[i];\n                // node = _this.graph.nodesIndex[node.id];\n                dis = util.getDistance(pos.x, pos.y, node.x, node.y);\n                if (dis <= node.size) {\n                    findNode = node;\n                    break;\n                }\n            }\n        }\n        return findNode;\n    }\n\n\n\n    function _clickHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n        if(node) _this.emit('nodeclick',[node,e]);\n        else _this.emit('stageclick',[e]);\n    }\n\n    function _moveHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n    }\n\n\n    function _downHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n         handleDrag(!node);\n        _this.forceRender();\n\n        function handleDrag(isCamera) {\n            var isDown = true;\n            var startx = graphPos.x,starty = graphPos.y;\n\n            var onmousemove =handlerWrap(function(e) {\n                if(!isDown) return;\n                // console.time('move')\n\n                _this.forceRender();\n\n                var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                var offsetx = graphPos.x - startx;\n                var offsety = graphPos.y - starty;\n\n                if(isCamera){\n                    _this.camera.position.x -= offsetx;\n                    _this.camera.position.y -= offsety;\n                }else {\n                    _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n                }\n\n\n                if(isCamera){\n                    var newgraphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                    startx = newgraphPos.x;\n                    starty = newgraphPos.y;\n                }else {\n                    startx = graphPos.x;\n                    starty = graphPos.y;\n                }\n                // console.timeEnd('move')\n            });\n\n            var onmouseup = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n            var onmouseout = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n\n            _this.container.addEventListener('mousemove',onmousemove);\n            _this.container.addEventListener('mouseup',onmouseup);\n            _this.container.addEventListener('mouseout',onmouseout);\n\n\n            function clear() {\n                onmousemove&&_this.container.removeEventListener('mousemove',onmousemove);\n                onmouseup&&_this.container.removeEventListener('mouseup',onmouseup);\n                onmouseout&&_this.container.removeEventListener('mouseout',onmouseout);\n                onmousemove = onmouseup = onmouseout= null;\n            }\n\n        }\n\n    }\n\n    function _upHandler(e) {\n    }\n\n    function _wheelHandler(e) {\n        _this.forceRender();\n        var ratio = _this.option.zoomRatio;\n        if(e.wheelDelta > 0){\n            _this.zoomTo(1/ratio,e.cameraX,e.cameraY);\n        }else {\n            _this.zoomTo(ratio,e.cameraX,e.cameraY);\n        }\n\n    }\n\n    //drag\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Event.js","/**\n * Created by chengang on 17-3-17.\n */\n\nimport  utils  from '../util.js'\nimport  Quad from '../base/Quad'\nimport EventEmitter from '../base/EventEmitter'\n\nclass Graph extends EventEmitter{\n\n    constructor(options) {\n\n        super();\n\n        options = options || {};\n\n        /**\n         * node edge data\n         */\n        this.nodes = [];\n        this.edges = [];\n\n        /**\n         * node edge index\n         */\n        this.nodesIndex = {};\n        this.edgesIndex = {};\n\n        /**\n         *nodes degrees info\n         */\n        this.inEdgesIndex = {};\n        this.outEdgesIndex = {};\n\n\n        // this.quad = new Quad();\n\n        if (options.nodes || options.edges) this.read(options);\n\n    }\n\n    /**\n     * 读取 node ,edge 信息\n     * @param options\n     */\n    read(options) {\n        this.nodes = options.nodes || [];\n        this.edges = options.edges || [];\n\n        this.nodes.forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            e.id += '';\n            this.nodesIndex[e.id] = e;\n        }.bind(this));\n\n        this.edges.forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            this.edgesIndex['' + e.id] = e;\n\n            if (!e.source || !this.nodesIndex[e.source + '']) throw 'some edge has not source id or not a node of the id';\n            if (!e.target || !this.nodesIndex[e.target + '']) throw 'some edge has not target id or not a node of the id';\n\n            e.source += '';\n            e.target += '';\n\n            this.inEdgesIndex[e.target] = this.inEdgesIndex[e.target] || [];\n            this.inEdgesIndex[e.target].push(e.id);\n\n            this.outEdgesIndex[e.source] = this.outEdgesIndex[e.source] || [];\n            this.outEdgesIndex[e.source].push(e.id);\n\n        }.bind(this));\n\n        this.emit('reset');\n\n        // this.quad.index(this.nodes);\n\n    }\n\n    /**\n     * add nodes\n     * @param nodes\n     */\n    addNode(nodes) {\n        nodes = nodes || [];\n\n        if(nodes.length == 0) return;\n\n        if (!utils.isArray(nodes)) nodes = [nodes];\n\n        var node;\n        for (var i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            if (!node.id) node.id = utils.uuid();\n            if (this.nodesIndex[node.id]) throw 'node has existed.'\n            this.nodes.push(node);\n            this.nodesIndex[node.id] = node;\n        }\n\n        var ids = nodes.map(function (e) {return e.id});\n        this.emit('add',['node',ids]);\n    }\n\n\n    /**\n     * remove node\n     * @param nodeid\n     */\n    removeNode(nodeid) {\n        if (!nodeid || !this.nodesIndex[nodeid]) return;\n\n        var nodes = this.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].id == nodeid) {\n                nodes.splice(i, 1);\n                break\n            }\n        }\n        var edges;\n        edges = this.inEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        edges = this.outEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        this.nodesIndex[nodeid] = null;\n        this.inEdgesIndex[nodeid] = null;\n        this.outEdgesIndex[nodeid] = null;\n\n        this.emit('remove',['node',nodeid]);\n\n    }\n\n\n    /**\n     * add edges ,\n     * @param edges\n     */\n    addEdge(edges) {\n        edges = edges || [];\n\n        if(edges.length  == 0) return;\n\n        if (!utils.isArray(edges)) edges = [edges];\n\n        var edge;\n        for (var i = 0; i < edges.length; i++) {\n            edge = edges[i];\n            if (!edge.id) edge.id = utils.uuid();\n            if (this.edgesIndex[edge.id]) throw 'edge has existed.';\n            if (!edge.source || !this.nodesIndex[edge.source + '']) throw 'some edge has not source id or not a node of the id';\n            if (!edge.target || !this.nodesIndex[edge.target + '']) throw 'some edge has not target id or not a node of the id';\n\n            this.edges.push(edge);\n            this.edgesIndex[edge.id] = edge;\n\n            edge.source += '';\n            edge.target += '';\n\n            this.inEdgesIndex[edge.target] = this.inEdgesIndex[edge.target] || [];\n            this.inEdgesIndex[edge.target].push(edge.id);\n\n            this.outEdgesIndex[edge.source] = this.outEdgesIndex[edge.source] || [];\n            this.outEdgesIndex[edge.source].push(edge.id);\n        }\n\n        var ids = edges.map(function (e) {return e.id});\n        this.emit('add',['edge',ids]);\n    }\n\n\n    removeEdge(edgeid) {\n        if (!edgeid || !this.edgesIndex[edgeid]) return;\n\n        var edge = this.edgesIndex[edgeid], edges;\n        var outEdgesIndex, inEdgesIndex;\n\n\n        outEdgesIndex = this.outEdgesIndex[edge.source];\n        if (outEdgesIndex.length > 0) {\n            for (var i = 0; i < outEdgesIndex.length; i++) {\n                if (outEdgesIndex[i] == edgeid) {\n                    outEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        inEdgesIndex = this.inEdgesIndex[edge.target];\n        if (inEdgesIndex.length > 0) {\n            for (var i = 0; i < inEdgesIndex.length; i++) {\n                if (inEdgesIndex[i] == edgeid) {\n                    inEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n\n        edges = this.edges;\n        for (var i = 0; i < edges.length; i++) {\n            if (edges[i].id == edgeid) {\n                edges.splice(i, 1);\n                break;\n            }\n        }\n\n        this.edgesIndex[edgeid] = null;\n        this.emit('remove',['edge',edgeid]);\n    }\n\n    getNodes(){\n        return this.nodes;\n    }\n\n    setNodeData(id,obj){\n        var node = this.nodesIndex[id];\n\n        var updatePos = false;\n        if(obj.hasOwnProperty('x') || obj.hasOwnProperty('y')) updatePos = true;\n\n        for(var attr in obj) node[attr] = obj[attr];\n\n        this.emit('change',['node',id]);\n        if(updatePos){\n            this.inEdgesIndex[id] && this.inEdgesIndex[id].length > 0 && this.emit('change',['edge',this.inEdgesIndex[id]]);\n            this.outEdgesIndex[id] && this.outEdgesIndex[id].length > 0 && this.emit('change',['edge',this.outEdgesIndex[id]]);\n        }\n    }\n\n    updateNodeQuad(id,oldpos){\n        var nodes = this.quad.point(oldpos.x,oldpos.y);\n        if(nodes.length > 0){\n            for(var i = 0,len = nodes.length;i<len;i++){\n                if(nodes[i].id == id){\n                    nodes.splice(i,1);\n                    break;\n                }\n            }\n            this.quad.insert(this.nodesIndex[id],this.quad.root);\n        }\n    }\n}\n\nexport default Graph;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Graph.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport util from '../../util'\nimport mat3 from '../../base/Matrix'\nimport EventEmitter from '../../base/EventEmitter'\nimport TextureLoader from './TextureLoader'\nimport TextureText from './TextureText'\nimport TextureIcon from './TextureIcon'\nimport initEvent from '../../core/Event'\n\n\nclass WebGLRender extends EventEmitter{\n    constructor(graph,option) {\n        super();\n\n        this.option = option;\n\n        this.container = option.container;\n        this.graph = graph;\n        this.needUpdate = true;\n\n        this.sampleRatio = 1.5;\n\n        this.initRender();\n        this.initGraphChangeEvent();\n\n        this.initTexture = false;\n        this.textureLoader = new TextureLoader(this.gl);\n        this.textureLoader.on('load',this.textureUpdate.bind(this));\n\n        this.initTextureText();\n\n        this.textureText = new TextureText(this.gl);\n        this.initTextTexture();\n\n        this.projectMatrix = mat3.matrixFromScale(2/(this.gl.canvas.clientWidth),2/(this.gl.canvas.clientHeight));\n\n        this.camera = {\n            scale:1,\n            position:{\n                x:0,y:0\n            },\n            rotation:0\n        };\n\n        //cache\n        this.renderType = {\n            node: {index:{},type:{},cache:false},\n            nodeLabel: {index:{},type:{},cache:false},\n            edge: {index:{},type:{},cache:false},\n            edgeLabel: {index:{},type:{},cache:false}\n        };\n\n        initEvent.call(this);\n\n    }\n    //render\n    render() {\n        // debugger\n\n        var gl = this.gl;\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        if(!this.initTexture){\n            var imgs = {};\n            var nodes = this.graph.nodes;\n            nodes.forEach(function (node) {\n                node.img && (imgs[node.img] = true);\n            });\n\n            this.textureLoader.loadImgs(Object.keys(imgs));\n            this.initTexture = true;\n        }\n\n        // console.time('render')\n\n        // console.time('renderEdge');\n        this.option.renderEdge && this.renderEdge();\n        // console.timeEnd('renderEdge');\n\n        // console.time('renderEdgeLabel');\n        this.option.renderEdge && this.option.renderEdgeLabel && this.renderEdgeLabel();\n        // console.timeEnd('renderEdgeLabel');\n\n        // console.time('renderNode');\n        this.option.renderNode && this.renderNode();\n        // console.timeEnd('renderNode');\n\n        // console.time('renderNodeLabel');\n        this.option.renderNode && this.option.renderNodeLabel && this.renderNodeLabel();\n        // console.timeEnd('renderNodeLabel');\n\n\n        // console.timeEnd('render')\n\n\n        this.needUpdate = false;\n    }\n    renderNode(){\n        // debugger\n\n        this.createRenderCache('node',this.graph.nodes,function (data) {\n            return {\n                data:data,\n                textureLoader:this.textureLoader,\n                textureIcon:this.textureIcon\n            }\n        }.bind(this));\n\n        this.renderCacheData('node');\n    }\n    renderNodeLabel(){\n\n        this.createRenderCache('nodeLabel',this.graph.nodes,function (data) {\n            return {\n                data:data,\n                textureText:this.textureText\n            }\n        }.bind(this));\n\n        this.renderCacheData('nodeLabel');\n\n    }\n    renderEdge(){\n        this.createRenderCache('edge',this.graph.edges,function (data) {\n            return {\n                data:data,\n                source:this.graph.nodesIndex[data.source],\n                target:this.graph.nodesIndex[data.target]\n            }\n        }.bind(this));\n\n        this.renderCacheData('edge');\n    }\n    renderEdgeLabel(){\n\n        this.createRenderCache('edgeLabel',this.graph.edges,function (data) {\n            return {\n                data:data,\n                source:this.graph.nodesIndex[data.source],\n                target:this.graph.nodesIndex[data.target],\n                textureText:this.textureText\n            }\n        }.bind(this));\n\n        this.renderCacheData('edgeLabel');\n\n    }\n\n    clearClusterCacheCounter(type) {\n        var renderType = this.renderType[type].type;\n        var layers;\n        for (var e in renderType){\n            layers  = renderType[e].layers;\n            for(var name in layers){\n                layers[name].counter = 0;\n            }\n        }\n    }\n    fixClusterCacheLength(type){\n        var renderType = this.renderType[type].type;\n        var layers;\n        for (var e in renderType){\n            layers  = renderType[e].layers;\n            for(var name in layers){\n                layers[name].data.length = layers[name].counter;\n            }\n        }\n    }\n\n    createRenderCache(rootType,data,argFn){\n\n        var nodeData,cacheIndex;\n        var start,offset,layers,type;\n\n        var rootType1 = this.renderType[rootType].type;\n\n        if(!this.renderType[rootType].cache){\n            this.clearClusterCacheCounter(rootType);\n\n            data.forEach(function (e) {\n\n                type = e.type || 'default';\n                if (!rootType1[type]) this.initRenderLayers(rootType, type);\n\n                //cache info\n                cacheIndex = this.renderType[rootType].index[e.id] = this.renderType[rootType].index[e.id] || {};\n                cacheIndex.type = type;\n                cacheIndex.start = {};//layer start\n\n                layers = rootType1[type].layers;\n                for(var name in layers){\n\n                    start = layers[name].counter;\n                    offset = 0;\n\n                    nodeData = layers[name].render.getRenderData(argFn(e));\n\n                    // no data\n                    if(!nodeData || nodeData.length == 0){\n                        // cacheIndex.start[name] = null;\n                        continue;\n                    }\n\n                    nodeData.forEach(function (data) {\n                        layers[name].data[start+offset] = data;\n                        offset++;\n                    }.bind(this));\n\n                    //cache info\n                    cacheIndex.start[name] = start;\n\n                    layers[name].counter += offset;\n                }\n            }.bind(this));\n\n            this.fixClusterCacheLength(rootType);\n\n            this.renderType[rootType].cache = true;\n        }\n\n    }\n    renderCacheData(rootType){\n        var renderType,type,layers,camMatrixInvert;\n        renderType = this.renderType[rootType].type;\n\n        for(type in renderType){\n\n            layers = renderType[type].layers;\n\n            renderType[type].order.forEach(function (name) {\n\n                if(layers[name].data.length > 0){\n\n                    camMatrixInvert = this.getCameraMatrix(true);\n                    this.gl.useProgram(layers[name].program);\n\n                    layers[name].render.render({\n                        gl: this.gl,\n                        program: layers[name].program,\n                        data: layers[name].data,\n                        matrix: mat3.multiMatrix([camMatrixInvert, this.projectMatrix]),\n                        camera: this.camera,\n                        sampleRatio: this.sampleRatio,\n                        textureLoader: this.textureLoader,\n                    });\n\n                }\n\n            }.bind(this));\n        }\n    }\n\n    initRender() {\n        this.gl = this.container.getContext('experimental-webgl') || this.container.getContext('webgl');\n\n        if (!this.gl) {\n            throw '浏览器不支持webGl';\n        }\n\n        this.gl.getExtension('OES_standard_derivatives');\n\n        this.resizeCanvas(this.gl.canvas);\n        this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.clearColor(1.0, 1.0, 1.0, 1);\n    }\n    initGraphChangeEvent(){\n        var _this = this;\n        this.graph.on('change',function (type,ids) {\n            if(type =='node'){\n                // console.time('updateNode');\n                _this.option.renderNode && _this.updateNodeRenderData(ids);\n                // console.timeEnd('updateNode');\n                // console.time('updateNodeLabel');\n                _this.option.renderNode && _this.option.renderNodeLabel && _this.updateNodeLabelRenderData(ids);\n                // console.timeEnd('updateNodeLabel');\n            }else if(type == 'edge'){\n                // console.time('updateEdge');\n                _this.option.renderEdge && _this.updateEdgeRenderData(ids);\n                // console.timeEnd('updateEdge');\n                // console.time('updateEdgeLabel');\n                _this.option.renderEdge && _this.option.renderEdgeLabel && _this.updateEdgeLabelRenderData(ids);\n                // console.timeEnd('updateEdgeLabel');\n            }\n\n        });\n\n        this.graph.on('reset',function () {\n            _this.clearRenderCache()\n        });\n\n\n        this.graph.on('add',function (type,ids) {\n            if(!util.isArray(ids)) ids = [ids];\n\n            var objs = null;\n\n            if(type == 'node') objs = ids.map(function (e) {return _this.graph.nodesIndex[e]});\n            else objs = ids.map(function (e) {return _this.graph.edgesIndex[e]});\n\n            _this.textureText.addTexts(getAddText(objs));\n            _this.clearRenderCache();\n        });\n\n        this.graph.on('remove',function (type,ids) {\n            _this.clearRenderCache();\n        });\n\n\n        function getAddText(objs) {\n            var text = '';\n            objs.forEach(function (e) {\n                e.label && (text += e.label);\n            });\n\n            return text;\n        }\n        \n    }\n    initTextTexture(){\n        var nodes = this.graph.nodes;\n        var edges = this.graph.edges;\n\n        var map = {};\n        var texts = [];\n        nodes.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        edges.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        this.textureText.createCanvasImg(texts);\n    }\n    initRenderLayers(root, type) {\n        var renderType = type;\n        var typeRoot = WebGLRender[root];\n\n        var renderRoot = this.renderType[root].type;\n\n        if(!typeRoot[type]){\n            console.error(`${root}: no type[${type}],use default`);\n            type = 'default';\n        }\n\n        var temp,layersConfig;\n        if(!renderRoot[renderType]){\n\n            layersConfig = typeRoot[type];\n            if(util.isFunction(layersConfig)){\n                layersConfig = {\n                    layers:[\n                        {name:'base',layer:layersConfig}\n                    ]\n                }\n            }\n            renderRoot[renderType] = {layers:{},order:[]};\n            layersConfig.layers.forEach(function (config) {\n                temp = {};\n                temp.counter = 0;\n                temp.data = [];\n                temp.render = new config.layer();\n                temp.program = util.loadProgram(this.gl, [\n                    util.loadShader(this.gl, temp.render.shaderVert, this.gl.VERTEX_SHADER),\n                    util.loadShader(this.gl, temp.render.shaderFrag, this.gl.FRAGMENT_SHADER)\n                ]);\n                renderRoot[renderType].layers[config.name] = temp;\n                renderRoot[renderType].order.push(config.name);\n            }.bind(this));\n\n        }\n    }\n    initTextureText(){\n\n        var nodes = this.graph.nodes;\n\n        var map = {};\n        var icons = [];\n        nodes.forEach(function (e) {\n            if(e.icon){\n                if(!map[e.icon]){\n                    map[e.icon] = true;\n                    icons.push(e.icon);\n                }\n            }\n        });\n\n        this.textureIcon = new TextureIcon(this.gl,this.option);\n\n        this.textureIcon.createIcons(icons);\n\n        this.textureIcon.on('load',function () {\n            this.clearRenderCache('node');\n        }.bind(this))\n    }\n\n    getCameraMatrix(isInvert){\n        var mat = mat3.multiMatrix([\n            mat3.matrixFromScale(this.camera.scale,this.camera.scale),\n            mat3.matrixFromRotation(this.camera.rotation),\n            mat3.matrixFromTranslate(this.camera.position.x,this.camera.position.y)\n        ]);\n        return isInvert  ? mat3.invert(mat) : mat;\n    }\n    resizeCanvas(canvas) {\n        var multiplier = this.sampleRatio;\n        var width = canvas.clientWidth * multiplier | 0;\n        var height = canvas.clientHeight * multiplier | 0;\n        if (canvas.width !== width || canvas.height !== height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n    }\n\n    toCameraPos(pos){\n        var canvas = this.gl.canvas;\n        return {x:pos.x-canvas.clientWidth/2,y:canvas.clientHeight/2-pos.y};\n    }\n    toGraphPos(pos,isVector){\n        var p = isVector ?\n            mat3.rotateVector([pos.x,pos.y],this.getCameraMatrix())\n            :\n            mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix());\n        return {x:p[0],y:p[1]};\n    }\n\n    forceRender(){\n        this.needUpdate = true;\n    }\n    zoomTo(ratio,x,y){\n\n        var scale = this.camera.scale;\n\n        var newscale = ratio * scale;\n        if(newscale < this.option.zoomMin) newscale = this.option.zoomMin;\n        if(newscale > this.option.zoomMax) newscale = this.option.zoomMax;\n\n        if (x != null && y != null) {\n            var offset = mat3.rotateVector([x * (newscale - scale)/scale, y *(newscale - scale)/scale], this.getCameraMatrix());\n            this.camera.position.x -= offset[0] ;\n            this.camera.position.y -= offset[1];\n        }\n\n        this.camera.scale = newscale;\n    }\n    textureUpdate(url){\n        var nodes = this.graph.nodes;\n        nodes.forEach(function (e) {\n            if(e.img && e.img == url) this.updateNodeRenderData(e.id);\n        }.bind(this));\n    }\n\n    //cache update\n    clearRenderCache(rootType){\n        if(rootType　&& this.renderType[rootType]){\n            this.forceRender();\n            this.renderType[rootType].cache = false;\n        }else if(!rootType){\n            this.forceRender();\n            this.renderType.node.cache = false;\n            this.renderType.nodeLabel.cache = false;\n            this.renderType.edge.cache = false;\n            this.renderType.edgeLabel.cache = false;\n        }\n    }\n    updateRenderData(rootType,id,argFn){\n        if(!this.renderType[rootType].cache) return;\n\n        var cache = this.renderType[rootType].index[id];//\n        var type = cache.type;\n        var start = cache.start;\n\n        var renderType = this.renderType[rootType].type[type];\n\n        for(var layer in renderType.layers){\n            var renderData = renderType.layers[layer].render.getRenderData(argFn());\n\n\n            if (\n                (!renderData || renderData.length == 0)\n                ||\n                (renderData && renderData.length > 0 && start[layer] === null)\n            ) continue;\n\n            renderData.forEach(function (e,i) {\n                renderType.layers[layer].data[start[layer]+i] = e;\n            });\n        }\n    }\n    updateNodeRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('node',id,function () {\n                return {\n                    data:this.graph.nodesIndex[id],\n                    textureLoader:this.textureLoader,\n                    textureIcon:this.textureIcon\n                }\n            }.bind(this));\n\n        }.bind(this));\n\n    }\n    updateNodeLabelRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('nodeLabel',id,function () {\n                return {\n                    data:this.graph.nodesIndex[id],\n                    textureText:this.textureText\n                }\n            }.bind(this));\n        }.bind(this));\n\n    }\n    updateEdgeRenderData(ids){\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('edge',id,function () {\n                return {\n                    data:this.graph.edgesIndex[id],\n                    source:this.graph.nodesIndex[this.graph.edgesIndex[id].source],\n                    target:this.graph.nodesIndex[this.graph.edgesIndex[id].target]\n                }\n            }.bind(this));\n        }.bind(this));\n    }\n    updateEdgeLabelRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('edgeLabel',id,function () {\n                return {\n                    data:this.graph.edgesIndex[id],\n                    source:this.graph.nodesIndex[this.graph.edgesIndex[id].source],\n                    target:this.graph.nodesIndex[this.graph.edgesIndex[id].target],\n                    textureText:this.textureText\n                }\n            }.bind(this));\n        }.bind(this));\n\n    }\n\n\n\n}\n\nexport default WebGLRender;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/render.js","module.exports = \" precision mediump float;\\n\\nvec4 color = vec4(77, 72, 91,255);\\n\\nvarying vec2 v_texCoord;\\nuniform sampler2D u_image;\\n\\n\\nvoid main() {\\n    color = color / 255.0;\\n   vec4 color0 = texture2D(u_image, v_texCoord);\\n   gl_FragColor = color * color0.w;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/label-frag.glsl\n// module id = 6\n// module chunks = 0","/**\n * Created by chengang on 17-4-6.\n */\nimport Graph from './Graph'\nimport WebGLRender from  '../render/webgl/render'\nimport utils from '../util'\n\nimport Tween from '../animation/tween'\n\nimport layout from '../layout/index'\n\nimport defaultConfig from './config'\n\nexport  default  class Core{\n\n    static layout = layout;\n\n    constructor(option){\n        option = option || {};\n\n        this.selected = [];\n\n        this.option = utils.extend(defaultConfig,option.config || {});\n\n        this.graph  = new Graph({\n            nodes:option.nodes,\n            edges:option.edges,\n        });\n\n        this.render = new WebGLRender(\n            this.graph,\n            utils.extend({container:option.container},this.option)\n        );\n\n        this.on = this.render.on.bind(this.render);\n        this.off = this.render.off.bind(this.render);\n\n        this.makeLayout(option.layout || 'preset');\n\n        this._start();\n\n        this._initEvent();\n    }\n\n    _start(){\n        var _this = this;\n        var frames = state();\n        function state() {\n            var n = -1,start = 0;\n            return function (time) {\n                n++;\n                time = time/1000;\n                if((time - start) > 1){\n                    // console.log(n);\n                    n = -1;\n                    start = time;\n                }\n\n            }\n        }\n        function render(time) {\n            _this._render();\n            frames(time);\n            requestAnimationFrame(render)\n        }\n        requestAnimationFrame(render);\n    }\n\n    _render(){\n\n        if(this.render && this.render.needUpdate){\n            // console.time('render')\n            // debugger\n            this.render.render();\n            // console.timeEnd('render')\n        }\n\n\n    }\n\n\n    _initEvent(){\n        var _this = this;\n        this.render.on('nodeclick',function (node,e) {\n            _this.selected.forEach(function (e) {\n                if(_this.graph.nodesIndex[e.id])\n                _this.graph.setNodeData(e.id,{selected:false});\n            });\n\n            _this.selected = [node];\n            _this.graph.setNodeData(node.id,{selected:true});\n        });\n    }\n\n    makeLayout(type){\n\n        var _this = this;\n        var layout,data;\n        var layoutConfig = Core.layout;\n\n        if (type == 'preset') {\n            this.graph.nodes.forEach(function (e) {\n                if (!('x' in e)) e.x = Math.random() * _this.render.gl.clientWidth;\n                if (!('y' in e)) e.y = Math.random() * _this.render.gl.clientWidth;\n            });\n\n            this.graph.emit('reset');\n        } else if (layout = layoutConfig[type]) {\n\n            layout = new layoutConfig[type]();\n            data = layout.layout(this.graph);\n\n            Tween(this.graph.nodes).to(data).duration(2000).on('change', function (t) {\n                _this.graph.emit('reset');\n            })\n        }\n    }\n\n    getSelection(){\n        var _this = this;\n        var nodes = this.selected.filter(function (e) {\n            return _this.graph.nodesIndex[e.id];\n        })\n        return nodes;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","/**\n * Created by chengang on 17-3-28.\n */\n\n\nimport WebGLRender from './webgl/render'\nWebGLRender.node = {};\nWebGLRender.edge = {};\nWebGLRender.nodeLabel = {};\nWebGLRender.edgeLabel = {};\n\nimport node from './webgl/node/index'\nimport edge from './webgl/edge/default'\nWebGLRender.node.default = node;\nWebGLRender.edge.default = edge;\n\nimport NodeLabel from './webgl/label/NodeLabel'\nimport EdgeLabel from './webgl/label/EdgeLabel'\nWebGLRender.nodeLabel.default = NodeLabel;\nWebGLRender.edgeLabel.default = EdgeLabel;\n\n\nexport {\n    WebGLRender\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nimport EventEmiter from '../graph/eventEmiter';\n\nexport  default function Tween(objs) {\n    if(!(this instanceof Tween)){\n        return new Tween(objs);\n    }\n\n    EventEmiter.init(this);\n\n    if(!Array.isArray(objs)) objs = [objs];\n    this.objs = objs;\n    this.interpolates = [];\n    this.timer = d3.timer(this.timerHandle.bind(this));\n    this._duration = 0;\n}\nvar p = Tween.prototype;\n\np.timerHandle = function (elapsed) {\n    var t = elapsed / this._duration;\n\n    t = Math.min(t,1);\n    var obj,attr,attrInterpolater;\n    for(var i = 0,len = Math.min(this.interpolates.length,this.objs.length);i< len;i++){\n        obj = this.objs[i];\n        attrInterpolater = this.interpolates[i];\n        for(attr in attrInterpolater){\n            obj[attr] = attrInterpolater[attr](t);\n        }\n    }\n\n    this.emit('change',[t]);\n\n    if(elapsed >=this._duration) this.stop();\n\n};\n\np.duration = function (time) {\n    this._duration = time;\n    return this;\n};\np.to = function (toObjs) {\n    var interpolateNumber = d3.interpolateNumber;\n    if(!Array.isArray(toObjs)) toObjs = [toObjs];\n\n    var obj,attr,attrInterpolater;\n    for(var i = 0,len = Math.min(toObjs.length,this.objs.length);i<len;i++){\n        obj = toObjs[i];\n        attrInterpolater = {};\n        for(attr in obj){\n            attrInterpolater[attr] = interpolateNumber(this.objs[i][attr],obj[attr]);\n        }\n        this.interpolates.push(attrInterpolater);\n    }\n\n    return this;\n\n};\n\np.stop = function () {\n    this.timer.stop();\n    this.timer = null;\n    this.objs = null;\n    this.interpolates = null\n}\n\n\n// WEBPACK FOOTER //\n// ./src/animation/tween.js","/**\n * Created by chengang on 17-3-28.\n */\nvar mat3 = {};\n\nmat3.normalize = function () {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromTranslate = function(dx, dy) {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        dx, dy, 1\n    ];\n};\n\nmat3.matrixFromRotation = function(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle);\n\n    return  [\n        cos, sin, 0,\n        -sin, cos, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromScale = function(x,y) {\n    return  [\n        x, 0, 0,\n        0, y, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.invert = function (a) {\n    var l =  3,\n        a11 = a[0 * l + 0],\n        a12 = a[0 * l + 1],\n        a13 = a[0 * l + 2],\n        a21 = a[1 * l + 0],\n        a22 = a[1 * l + 1],\n        a23 = a[1 * l + 2],\n        a31 = a[2 * l + 0],\n        a32 = a[2 * l + 1],\n        a33 = a[2 * l + 2];\n\n    var del = a11*(a22*a33-a23*a32)-a12*(a21*a33-a23*a31)+a13*(a21*a32-a22*a31);\n\n    return [\n        (a22*a33-a23*a32)/del,(a13*a32-a12*a33)/del,(a12*a23-a13*a22)/del,\n        (a23*a31-a21*a33)/del,(a11*a33-a13*a31)/del,(a13*a21-a11*a23)/del,\n        (a21*a32-a22*a31)/del,(a12*a31-a11*a32)/del,(a11*a22-a12*a21)/del\n    ];\n}\n\nmat3.multiply = function(a, b) {\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2],\n        b00 = b[0 * l + 0],\n        b01 = b[0 * l + 1],\n        b02 = b[0 * l + 2],\n        b10 = b[1 * l + 0],\n        b11 = b[1 * l + 1],\n        b12 = b[1 * l + 2],\n        b20 = b[2 * l + 0],\n        b21 = b[2 * l + 1],\n        b22 = b[2 * l + 2];\n\n    return [\n        a00 * b00 + a01 * b10 + a02 * b20,\n        a00 * b01 + a01 * b11 + a02 * b21,\n        a00 * b02 + a01 * b12 + a02 * b22,\n        a10 * b00 + a11 * b10 + a12 * b20,\n        a10 * b01 + a11 * b11 + a12 * b21,\n        a10 * b02 + a11 * b12 + a12 * b22,\n        a20 * b00 + a21 * b10 + a22 * b20,\n        a20 * b01 + a21 * b11 + a22 * b21,\n        a20 * b02 + a21 * b12 + a22 * b22\n    ];\n};\n\nmat3.transformPoint = function (p,a) {\n    var x = p[0],\n        y = p[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10+a20,x*a01+y*a11+a21];\n}\n\nmat3.rotateVector = function (v,a) {\n    var x = v[0],\n        y = v[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10,x*a01+y*a11];\n};\n\n\nmat3.multiMatrix = function (matrixs) {\n    return matrixs.reduce(function (pre,cur) {\n        return mat3.multiply(pre,cur);\n    })\n};\n\nexport default mat3;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/Matrix.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default {\n    zoomRatio:1.2,\n    zoomMin:0.2,\n    zoomMax:5,\n\n    renderNode:true,\n    renderNodeLabel:true,\n    renderEdge:true,\n    renderEdgeLabel:true,\n\n    textureIconWidth:400,\n    textureIconHeight:400,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","/**\n * Created by chengang on 17-2-16.\n */\n\nexport default\nfunction EventEmitter() {\n    this._listener = {};\n}\n\nEventEmitter.prototype.on=function (type,cb) {\n    if(!type || !cb) return;\n    this._listener[type] = this._listener[type] || [];\n\n    var listener = this._listener[type];\n    for(var i = 0,len = listener.length; i < len;i++){\n        if(cb == listener[i]) return;\n    }\n\n    this._listener[type].push(cb);\n    return cb;\n};\nEventEmitter.prototype.off = function (type,cb) {\n    if(!type) return;\n    var listener;\n    if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n    if(cb){\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]){\n                listener.splice(i,1);\n                break;\n            }\n        }\n    }else {\n        this._listener[type] = [];\n    }\n};\nEventEmitter.prototype.emit = function (type,args) {\n    if(!type) return;\n    var listener,fn;\n    if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n    listener = listener.slice();\n\n    for(var i = 0,len = listener.length;i< len;i++){\n        fn = listener[i];\n        fn.apply(null,args);\n    }\n};\nEventEmitter.init = function (target){\n    EventEmitter.call(target);\n    var p = EventEmitter.prototype;\n    target.on = p.on;\n    target.off = p.off;\n    target.emit = target.dispatch = p.emit;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/graph/eventEmiter.js","/**\n * Created by chengang on 17-2-20.\n */\nfunction CircularLayout() {\n    this.nodes = null;\n    // this.links = null;\n     this.posSet = null;\n     this.depthPosSet = null;\n     this.drawnBiComps =null;\n     this.bc = null;\n     this.nodeHeights = {};\n     this.node2BiComp = {};\n\n}\n\nvar p = CircularLayout.prototype;\n\n//必须有的方法\np.layout = function (graph) {\n    this.init(graph);\n\n    this.posSet = new Array(this.nodes.length);\n    this.depthPosSet = new Array(this.nodes.length);\n\n    this.bc = this.createBicconnects();\n    // var test = this.bc.filter(function (e) {\n    //     return e.length > 3;\n    // });\n    this.__layout(this.bc);\n    return this.nodes.map(function (e) {\n        return {x:e.x,y:e.y};\n    })\n};\np.init = function (graph) {\n    var oldNodes = graph.nodes,oldLinks = graph.edges;\n    var tempNodes = [],map = {},temp;\n    oldNodes.forEach(function (e,i) {\n        temp = {\n            id:e.id,\n            _index:i\n        };\n        tempNodes.push(temp);\n        map[temp.id] = temp;\n    })\n\n    var s,t;\n    oldLinks.forEach(function (e,i) {\n        s = map[e.source];\n        t = map[e.target];\n        s.links = s.links || [];\n        s.links.push(t._index);\n\n        t.links = t.links || [];\n        t.links.push(s._index);\n    });\n\n    this.nodes = tempNodes;\n};\np.createBicconnects = function() {\n    var nodes = this.nodes;\n    var states = new Array(this.nodes.length),\n        dfsn = new Array(this.nodes.length),\n        low = new Array(this.nodes.length),\n        edgesStack = [],\n        pre = new Array(this.nodes.length);\n\n    var biComponents = [];\n\n    pre[0] = -1;\n    var num = 0;\n    for (var i = 0; i < this.nodes.length; i++) {\n        states[i] = 0;\n    }\n\n    dfs(0);\n    return biComponents;\n\n    function dfs(current) {\n        states[current] = 1;\n        low[current] = dfsn[current] = ++num;\n\n        var neigh;\n        var neighNodes = nodes[current].links;\n\n        for (var i = 0; i < neighNodes.length; i++) {\n            neigh = neighNodes[i];\n\n            if (states[neigh] == 0) {\n                pre[neigh] = current;\n                edgesStack.push({source: current, target: neigh});\n                dfs(neigh);\n                low[current] = Math.min(low[current], low[neigh]);\n\n                if ((pre[current] == -1 && nodes[current].links.length >= 2) || low[neigh] >= dfsn[current]) {\n//                        var children = nodes[current].links;\n//                        if(children.length >=2){\n                    var singleComponent = [];\n                    var map = {};\n                    singleComponent.push(edgesStack[edgesStack.length - 1].target);\n                    map[edgesStack[edgesStack.length - 1].target] = true;\n                    while (edgesStack[edgesStack.length - 1].source != current) {\n                        var edge = edgesStack.pop();\n                        if (!map[edge.source]) {\n                            singleComponent.push(edge.source);\n                            map[edge.source] = true;\n                        }\n                        if (!map[edge.target]) {\n                            singleComponent.push(edge.target);\n                            map[edge.target] = true;\n                        }\n                    }\n                    edgesStack.pop();\n                    if (!map[current]) {\n                        singleComponent.push(current);\n                        map[current] = true;\n                    }\n                    /*singleComponent.length > 2 && */biComponents.push(singleComponent);\n//                        }\n                }\n//                    states[neigh]\n            } else if (neigh != pre[current]) {\n                low[current] = Math.min(low[current], low[neigh]);\n            }\n        }\n\n\n    }\n};\np.__layout = function(biconncts) {\n\n\n    var max = -1;\n    var maxIndex = null;\n    var nodes = this.nodes;\n\n    biconncts.forEach(function (e, i) {\n        if (e.length > max) {\n            max = e.length;\n            maxIndex = i;\n        }\n    });\n\n    biconncts[maxIndex].forEach(function (e) {\n        nodes[e].delete = true;\n    });\n\n    for (var i = 0; i < biconncts.length; i++)\n        if (biconncts[i].length > 3) {\n            for (var j = 0; j < biconncts[i].length; j++) {\n                this.node2BiComp[biconncts[i][j]] = i;\n            }\n        }\n\n    var bc = biconncts[maxIndex];\n\n    this.drawnBiComps = new Array(bc.length);\n    this.drawnBiComps[maxIndex] = true;\n\n\n\n    var maxSize = bc.length;\n    var radius = (48 * maxSize) / (Math.PI * 2);\n    var deltaAngle = (2 * Math.PI) / maxSize;\n    var angle = 0;\n\n    var startX = radius | 0;\n    var startY = radius | 0;\n\n\n    bc = this.sortInnerCircle(bc);\n\n    for (var i = 0; i < bc.length; i++) {\n        nodes[bc[i]].test = i;\n        nodes[bc[i]].x = startX + Math.cos(angle) * radius;\n        nodes[bc[i]].y = startY - Math.sin(angle) * radius;\n        this.posSet[bc[i]] = true;\n        angle += deltaAngle;\n    }\n\n    this.SetOuterCircle(maxIndex, radius, startX, startY, -1);\n};\np.sortInnerCircle = function(icNodes) {\n    var greedyNodes = [];\n    var modestNodes = [];\n\n    var forFunct = {};\n\n    for (var i = 0; i < icNodes.length; i++)\n        forFunct[icNodes[i]] = true;\n\n    for (var i = 0; i < icNodes.length; i++) {\n        var tmp = this.NoOfChildren(icNodes[i], forFunct);\n\n        if (tmp > 4)\n            greedyNodes.push(icNodes[i]);\n        else\n            modestNodes.push(icNodes[i]);\n    }\n\n    var toReturn = new Array(icNodes.length);\n    var gNo = greedyNodes.length;\n    var mNo = modestNodes.length;\n    var deltaM;\n    var deltaG;\n\n    if (gNo == 0) {\n        deltaM = mNo;\n        deltaG = 0;\n    } else if (mNo == 0) {\n        deltaG = gNo;\n        deltaM = 0;\n    } else if (gNo > mNo) {\n        deltaM = 1;\n        deltaG = (gNo / mNo) | 0 ;\n    } else {\n        deltaG = 1;\n        deltaM = (mNo / gNo ) | 0;\n    }\n\n    var x = 0;\n    var i, g, m;\n    for (g = 0, m = 0; g < greedyNodes.length && m < modestNodes.length;) {\n        for (i = 0; i < deltaG && g < greedyNodes.length; i++)\n            toReturn[x++] = greedyNodes[g++];\n\n        for (i = 0; i < deltaM && m < modestNodes.length; i++)\n            toReturn[x++] = modestNodes[m++];\n    }\n\n    while (g < greedyNodes.length)\n        toReturn[x++] = greedyNodes[g++];\n\n    while (m < modestNodes.length)\n        toReturn[x++] = modestNodes[m++];\n    return toReturn;\n\n};\np.NoOfChildren = function(nodeId, outerCircle) {\n    var toReturn = 0;\n    var nodes = this.nodes;\n    var links = nodes[nodeId].links;\n\n    for (var i = 0; i < links.length; i++) {\n        var currNeigh = links[i];\n\n        if (!this.posSet[currNeigh] && !outerCircle[currNeigh])\n            toReturn++;\n    }\n\n    if (toReturn > 7)\n        toReturn = 7;\n\n    return toReturn;\n};\np.SetOuterCircle = function(compIndex, innerCircleRadius, startX, startY, firstTouched) {\n    var nodes = this.nodes;\n    var outerNodesCount = 0;\n    var rnc = 0;\n    var iter;\n    var outerCircle = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        for (var j = 0 ;j< iter.length;j++) {\n            var currNeighbour = iter[j];\n\n            if (!this.posSet[currNeighbour]) {\n                outerNodesCount += (this.NoOfChildren(currNeighbour, outerCircle) + 1);\n                outerCircle[currNeighbour] = true;\n                rnc++;\n            }\n        }\n    }\n\n    var outerRadius = 1.5 * innerCircleRadius;\n\n    // + 5 * nodeHorizontalSpacing;\n    var tryCount = ((2 * Math.PI * outerRadius) / 32) | 0;\n    var outerDeltaAngle = (2 * Math.PI) / tryCount;\n\n    if (tryCount < (1.2 * outerNodesCount)) {\n        outerRadius = (1.2 * 32 * outerNodesCount) / (2 * Math.PI);\n        outerDeltaAngle = (2 * Math.PI) / (1.2 * outerNodesCount);\n        outerNodesCount *= 1.2;\n    } else\n        outerNodesCount = tryCount;\n\n    if ((outerNodesCount > 10) && (firstTouched != -1))\n        outerNodesCount += 5;\n\n    // 5 places on outer circle for connection with other biconn. comp.\n    //System.out.println(\"tryCount = \" + tryCount);\n\n    // setting nodes on outer circle\n    outerNodesCount = outerNodesCount | 0;\n    var outerPositionsTaken = new Array(outerNodesCount);\n    var outerPositionsOwners = new Array(outerNodesCount);\n\n    for (var i = 0; i < outerPositionsTaken.length; i++) {\n        outerPositionsTaken[i] = -1;\n        outerPositionsOwners[i] = -1;\n    }\n\n    var pointX;\n    var pointY;\n    var theAngle;\n    var theAngleHlp;\n    var innerDeltaAngle;\n    innerDeltaAngle = (2 * Math.PI) / this.bc[compIndex].length;\n\n    if (firstTouched != -1) {\n        pointX = nodes[firstTouched].x;\n        pointY = nodes[firstTouched].y;\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n        var idPos = ((theAngle / outerDeltaAngle) | 0) % outerPositionsTaken.length;\n        outerPositionsTaken[idPos] = (theAngle / innerDeltaAngle) | 0;\n        outerPositionsOwners[idPos] = -2; // must not be even moved because that node is coming from another bicomp.\n\n        if (outerPositionsTaken.length > 10) {\n            outerPositionsTaken[(idPos + 1) % outerPositionsTaken.length] = (theAngle / innerDeltaAngle) | 0;\n            outerPositionsTaken[(idPos + 2) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 1 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 2 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n\n            outerPositionsOwners[(idPos + 1) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos + 2) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 1 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 2 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n        }\n    }\n\n    var addedNeighbours = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n        var noOfNeighbours = 0;\n\n        for (var j = 0; j < iter.length;j++) {\n            currentNeighbour = iter[j];\n\n            if (!this.posSet[currentNeighbour]) {\n                noOfNeighbours += (this.NoOfChildren(currentNeighbour, addedNeighbours) + 1);\n                addedNeighbours[currentNeighbour]= true;\n            }\n        }\n\n        if (noOfNeighbours == 0)\n            continue;\n\n        pointX = nodes[this.bc[compIndex][i]].x;\n        pointY = nodes[this.bc[compIndex][i]].y;\n\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n//\t\t\titer = edgesFrom[this.bc[compIndex][i]].iterator();\n\n        var startPos = this.BestFreePositionsForAll(0| ((theAngle / outerDeltaAngle)\n            - (noOfNeighbours / 2.0)), outerPositionsTaken,\n            outerPositionsOwners, noOfNeighbours,\n            0| (theAngle / innerDeltaAngle), startX,\n            startY, outerDeltaAngle, outerRadius,\n            this.bc[compIndex].length);\n        var startAngle = startPos * outerDeltaAngle;\n\n        if (startAngle < 0)\n            continue;\n\n//\t\t\titer = nodes[this.bc[compIndex][i]].iterator();\n\n        for (var m = 0;m< iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour]) {\n                this.posSet[currentNeighbour] = true;\n\n                var holeDepth = this.NoOfChildren(currentNeighbour, addedNeighbours);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    // free but it must not be used (add. space for tree-like struct.)\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n\n\n                nodes[currentNeighbour].x = startX + (Math.cos(startAngle) * outerRadius);\n                nodes[currentNeighbour].y = startY - (Math.sin(startAngle) * outerRadius);\n\n                outerPositionsOwners[(startPos) % outerPositionsOwners.length] = currentNeighbour;\n                outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                startPos++;\n                startAngle += outerDeltaAngle;\n\n                if (startAngle > (2 * Math.PI))\n                    startAngle -= (2 * Math.PI);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n            }\n        }\n    }\n\n    // laying out the rest of nodes\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!addedNeighbours[currentNeighbour]) {\n                continue;\n            }\n\n            pointX = nodes[currentNeighbour].x;\n            pointY = nodes[currentNeighbour].y;\n\n            theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n            theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n\n            if (theAngleHlp > (Math.PI / 2))\n                theAngle = Math.PI - theAngle;\n\n            if (theAngle < 0)\n                theAngle += (2 * Math.PI);\n\n            for (var j = 0; j < this.posSet.length; j++)\n                this.depthPosSet[j] = this.posSet[j];\n\n            this.EachNodeHeight(currentNeighbour);\n\n            this.DFSSetPos(currentNeighbour, theAngle, outerRadius - innerCircleRadius);\n        }\n    }\n};\np.BestFreePositionsForAll = function(idealPosition, outerPositionsTaken, outerPositionsOwners, noOfPos,\n                                 innerCirclePos, startX, startY,\n                                 outerDeltaAngle, outerRadius, innerCSize) {\n    var startPos = idealPosition;\n    var nodes = this.nodes;\n\n    if (idealPosition < 0)\n        startPos += outerPositionsTaken.length;\n\n    var i = 0;\n    var alreadyFound = 0;\n    var startOfAlFound = -1;\n    var found = false;\n    var goDown = false;\n    var goUp = false;\n\n    //An infinite loop occurs when there is no place in the outerPositionsTaken array where all the number\n    //of positions that we need (noOfPos) can fit contiguously. In such a case, an infinite loop occurs.\n    //Experiment: Create a count. If the count exceeds outPositionsTaken.length, then we have looked at every\n    //possible startPos. Set startPos to the best startPos (meaning, the most contingious spaces) and set found\n    //to true.\n\n    //Experiment: int goUpCount = 0;\n    var goUpCount = 0;\n    //Experiment: int biggestGap = 0;\n    var biggestGap = 0;\n    //Experiment: int bestStartPos;\n    var bestStartPos = 0;\n\n    while (!found && !(goUp && goDown)) {\n        //System.out.print(startPos + \" \");\n        for (i = startPos;\n             (i < (startPos + noOfPos))\n             && (outerPositionsTaken[i % outerPositionsTaken.length] == -1); i++) {\n        }\n\n        if (i < (startPos + noOfPos)) {\n            if (((outerPositionsTaken[i % outerPositionsTaken.length] > innerCirclePos)\n                && ((outerPositionsTaken[i % outerPositionsTaken.length] - innerCirclePos) < (0.7 * innerCSize)))\n                || ((innerCirclePos - outerPositionsTaken[i % outerPositionsTaken.length]) > (0.7 * innerCSize))) {\n                alreadyFound = (i - startPos + outerPositionsTaken.length) % outerPositionsTaken.length;\n                startOfAlFound = startPos;\n                startPos -= (noOfPos - alreadyFound);\n\n                if (startPos < 0)\n                    startPos += outerPositionsTaken.length;\n\n                goDown = true;\n            } else {\n                //Experiment: goUpCount++;\n                goUpCount++;\n                //Experiment: int thisGap = i - startPos;\n                var thisGap = i - startPos;\n                //Experiment: if( thisGap > biggestGap )\n                if (thisGap > biggestGap) {\n                    biggestGap = thisGap;\n                    bestStartPos = startPos;\n                }\n                //Experiment: if( count > outerPositionsTaken.length )\n                if (goUpCount > outerPositionsTaken.length * 3) {\n                    startPos = bestStartPos;\n                    found = true;\n                }\n                //Experiment: else\n                else {\n                    startPos = (i + 1) % outerPositionsTaken.length;\n                    goUp = true;\n                }\n            }\n        } else\n            found = true;\n    }\n\n    if (goUp && goDown) {\n        i = startOfAlFound - 1;\n\n        var j = i - 1;\n        var count = 0;\n        //System.out.print(j + \" \");\n\n        var index = (i % outerPositionsTaken.length + outerPositionsTaken.length) % outerPositionsTaken.length;\n        if (((outerPositionsTaken[index] > innerCirclePos)\n            && ((outerPositionsTaken[index] - innerCirclePos) < (0.7 * innerCSize)))\n            || ((innerCirclePos - outerPositionsTaken[index]) > (0.7 * innerCSize))) {\n            j--;\n            i--;\n        }\n\n        while (count < (noOfPos - alreadyFound)) {\n            //System.out.print(j + \" \");\n\n            if (outerPositionsTaken[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -1) {\n                // move all for one place left\n                //\tSystem.out.print(\" moving \");\n                if (outerPositionsOwners[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -2) {\n                    //System.out.println(\"BUUUUUUUUUUUUUUUUUUU\");\n\n                    return -1;\n                }\n\n                for (var k = j; k < (i - count); k++) {\n                    if (outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length] > 0)\n                    {\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].x = startX + (Math.cos(outerDeltaAngle * k) * outerRadius);\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].y = startY - (Math.sin(outerDeltaAngle * k) * outerRadius);\n                    }\n\n\n                    outerPositionsOwners[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                    outerPositionsTaken[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsTaken[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                }\n\n                count++;\n            }\n\n            j--;\n        }\n\n        startPos = (i - count + 1 + outerPositionsOwners.length) % outerPositionsOwners.length;\n    }\n\n    /*    for (i = startPos; i < startPos + noOfPos; i++)\n     {\n     outerPositionsTaken[i % outerPositionsTaken.length] = innerCirclePos;\n     }*/\n    return startPos;\n\n};\np.EachNodeHeight = function(nodeID) {\n    var nodes = this.nodes;\n    var links = nodes[nodeID].links;\n    var currentNeighbour;\n    var noOfChildren = 0;\n    var tmp = {};\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (!this.depthPosSet[currentNeighbour] && !tmp[currentNeighbour]) {\n            this.depthPosSet[currentNeighbour] = true;\n            tmp[currentNeighbour] = true;\n        }\n    }\n\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (tmp[currentNeighbour]) {\n            noOfChildren += this.EachNodeHeight(currentNeighbour);\n        }\n    }\n\n//\t\tif (this.nodeHeights[nodeID])\n//\t\t\tthis.nodeHeights.remove(Integer.valueOf(nodeID));\n\n    this.nodeHeights[nodeID] = noOfChildren;\n\n    return (noOfChildren + 1);\n};\np.DFSSetPos = function( nodeID, theAngle,  theRadius) {\n    var component = this.node2BiComp[nodeID];\n    var nodes = this.nodes;\n    if (component != undefined && !this.drawnBiComps[component]) {\n        var comp = component;\n        var centerX =nodes[nodeID].x;\n        var centerY = nodes[nodeID].y;\n        var radius = (48 * this.bc[comp].length) / (2 * Math.PI);\n        var deltaAngle = (2 * Math.PI) / this.bc[comp].length;\n        var currAngle = theAngle - Math.PI - deltaAngle;\n\n        if (currAngle < 0)\n            currAngle += (2 * Math.PI);\n\n        centerX += (Math.cos(theAngle) * radius * 4.0);\n        centerY -= (Math.sin(theAngle) * radius * 4.0);\n\n        this.drawnBiComps[comp] = true;\n\n        // sorting nodes on inner circle\n        this.bc[comp] = this.sortInnerCircle(this.bc[comp]);\n\n        /*if (this.bc[comp].length > 20)\n         this.bc[comp] = ReduceInnerCircleCrossings(this.bc[comp]);*/\n        var oneAtLeast = false;\n\n        for (var i = 0; i < this.bc[comp].length; i++) {\n            if (this.posSet[this.bc[comp][i]])\n                continue;\n\n\n            nodes[this.bc[comp][i]].x = centerX + (Math.cos(currAngle) * radius);\n            nodes[this.bc[comp][i]].y = centerY - (Math.sin(currAngle) * radius);\n\n            this.posSet[this.bc[comp][i]] = true;\n\n            oneAtLeast = true;\n            currAngle -= deltaAngle;\n\n            if (currAngle < 0)\n                currAngle += (2 * Math.PI);\n        }\n\n        if (oneAtLeast) {\n\n            nodes[nodeID].x += Math.cos(theAngle) * 3 * radius;\n            nodes[nodeID].y -= Math.sin(theAngle) * 3 * radius;\n\n\n            this.SetOuterCircle(comp, radius, centerX, centerY, nodeID);\n        }\n    } else {\n        var iter = nodes[nodeID].links;\n        var currentNeighbour;\n        var startAngle = theAngle + (Math.PI / 2);\n\n        if (startAngle > (2 * Math.PI))\n            startAngle -= (2 * Math.PI);\n\n        var neighboursCount = 0;\n        var min1 = 1000;\n        var min2 = 1000;\n        var max = -1;\n        var min1Id = -1;\n        var min2Id = -2;\n        var maxId = -3;\n        var tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                neighboursCount++;\n                tmp[currentNeighbour]=true;\n\n                if (this.nodeHeights[currentNeighbour] < min1) {\n                    min2 = min1;\n                    min2Id = min1Id;\n                    min1 = this.nodeHeights[currentNeighbour];\n                    min1Id = currentNeighbour;\n                } else if (this.nodeHeights[currentNeighbour] < min2) {\n                    min2 = this.nodeHeights[currentNeighbour];\n                    min2Id = currentNeighbour;\n                }\n\n                if (this.nodeHeights[currentNeighbour] >= max)//&& currentNeighbour != min2Id && currentNeighbour != min1Id)\n                {\n                    max = this.nodeHeights[currentNeighbour];\n                    maxId = currentNeighbour;\n                }\n            }\n        }\n\n        if (neighboursCount == 0)\n            return;\n\n        var deltaAngle = Math.PI / (neighboursCount + 1);\n\n        startAngle -= deltaAngle;\n\n        if (startAngle < 0)\n            startAngle += (2 * Math.PI);\n\n        var remStartAngle = startAngle;\n\n        if (neighboursCount > 2) {\n            deltaAngle = (2 * Math.PI) / neighboursCount;\n            startAngle = (theAngle + Math.PI) - ((3 * deltaAngle) / 2);\n\n            if (startAngle > (2 * Math.PI))\n                startAngle -= (2 * Math.PI);\n\n            remStartAngle = (theAngle + Math.PI) - (deltaAngle / 2);\n\n            if (remStartAngle > (2 * Math.PI))\n                remStartAngle -= (2 * Math.PI);\n        }\n\n        iter = nodes[nodeID].links;\n\n        var r = 72;\n        var rTry;\n\n        if (((48 * neighboursCount) / (2 * Math.PI)) > r)\n            r = (48 * neighboursCount) / (2 * Math.PI);\n\n        rTry = r;\n\n        var hlp = 100.0;\n        var startX = nodes[nodeID].x;\n        var startY = nodes[nodeID].y;\n\n        if (neighboursCount > 2) {\n            nodes[nodeID].x = startX + (Math.cos(theAngle) * r * ((min2 + 1) % 100));\n            nodes[nodeID].y = startY - (Math.sin(theAngle) * r * ((min2 + 1) % 100));\n\n            startX = nodes[nodeID].x;\n            startY = nodes[nodeID].y;\n\n            //System.out.println(\"theAngle = \" + theAngle + \", startAngle = \" + startAngle + \", remStartAngle = \" + remStartAngle + \", deltaAngle = \" + deltaAngle);\n            //System.out.println(\"min1Id = \" + min1Id + \", min2Id\" + min2Id + \", maxId\" + maxId);\n            setOffset(nodes[min1Id], startX + (Math.cos(remStartAngle) * r),\n                startY - (Math.sin(remStartAngle) * r));\n            nodes[min1Id].test = 'min1'\n            setOffset(nodes[min2Id], startX + (Math.cos(remStartAngle + deltaAngle) * r),\n                startY - (Math.sin(remStartAngle + deltaAngle) * r));\n            nodes[min2Id].test = 'min2'\n\n            if (this.nodeHeights[maxId] > 8)\n                r = 256;\n\n            setOffset(nodes[maxId],\n                startX + (Math.cos(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r),\n                startY - (Math.sin(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r));\n            nodes[maxId].test = 'maxId'\n\n            //System.out.println(\"Ugao za maxID \"\n            //                  + (remStartAngle - ((neighboursCount / 2) * deltaAngle)));\n        }\n\n        tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                if (this.nodeHeights[currentNeighbour] > 8)\n                    r = 256;\n                else\n                    r = rTry;\n\n                this.posSet[currentNeighbour] = true;\n                tmp[currentNeighbour] = true;\n\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    setOffset(nodes[currentNeighbour], startX + (Math.cos(startAngle) * r),\n                        startY - (Math.sin(startAngle) * r));\n\n                    startAngle -= deltaAngle;\n\n                    if (startAngle < 0)\n                        startAngle += (2 * Math.PI);\n\n                    if (((Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle))) < 0.0001)\n                        || (Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle)\n                            + (2 * Math.PI))) < 0.0001)) && (neighboursCount > 2)) {\n                        startAngle -= deltaAngle;\n\n                        if (startAngle < 0)\n                            startAngle += (2 * Math.PI);\n                    }\n                }\n            }\n        }\n\n        iter = nodes[nodeID].links;\n\n        if (neighboursCount > 2) {\n            this.DFSSetPos(min1Id, remStartAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(min2Id, remStartAngle + deltaAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(maxId, remStartAngle - ((neighboursCount / 2) * deltaAngle),\n                theRadius * Math.sin(deltaAngle / 2));\n            hlp = remStartAngle;\n            remStartAngle -= deltaAngle;\n        }\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (tmp[currentNeighbour]) {\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    this.DFSSetPos(currentNeighbour, remStartAngle,\n                        theRadius * Math.sin(deltaAngle / 2));\n\n                    remStartAngle -= deltaAngle;\n\n                    if (((remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)))\n                        || (remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)\n                        + (2 * Math.PI)))) && (neighboursCount > 2))\n                        startAngle -= deltaAngle;\n\n                    if (remStartAngle < 0)\n                        remStartAngle += (2 * Math.PI);\n                }\n            }\n        }\n    }\n};\n\nfunction setOffset(node,x,y) {\n    node.x = x;\n    node.y = y;\n}\n\nexport default CircularLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/CircularLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class ColaLayout{\n    layout(graph){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(graph);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .symmetricDiffLinkLengths(50)\n            .start(60,0,0,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:e.y};\n        })\n    }\n\n    _init(graph){\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        graph.nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        graph.edges.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/ColaLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class DargeLayout{\n    layout(graph){\n        // debugger\n        if(!dagre || !dagre.graphlib) throw 'please add dagre lib first';\n        var g = new dagre.graphlib.Graph();\n\n        g.setGraph({\n            rankdir:'TB',\n            nodesep:15,\n            ranksep:100,\n            ranker:'longest-path'//network-simplex  longest-path tight-tree\n        });\n\n        g.setDefaultEdgeLabel(function() { return {}; });\n\n        graph.nodes.forEach(function (e) {\n            g.setNode(e.id,{width:20,height:20});\n        });\n\n        graph.edges.forEach(function (e) {\n            g.setEdge(e.source,e.target);\n        });\n\n        dagre.layout(g);\n\n        var data = g.nodes().map(function (e) {\n            var d = g.node(e);\n            return {x:d.x,y:-1*d.y};\n        });\n\n        return data;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/DargeLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class FlowLayout{\n    layout(graph){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(graph);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .flowLayout(\"y\", 30)\n            .symmetricDiffLinkLengths(30)\n            .start(10,20,20,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:-1*e.y};\n        })\n    }\n\n    _init(graph){\n\n        var filterEdge = this._filterEdge(graph);\n\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        graph.nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        filterEdge.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n\n    _filterEdge(graph){\n        var filterEdges = [];\n\n        var flag = {};\n        var first = graph.nodes[0];\n\n        breadFirst(first);\n\n        return filterEdges;\n\n        function breadFirst(node) {\n            // debugger\n            flag[node.id] = true;\n\n            var nodes = [];\n\n            var edges = graph.inEdgesIndex[node.id],edge;\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.source]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.source]);\n                    }\n                });\n            }\n\n            edges = graph.outEdgesIndex[node.id];\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.target]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.target]);\n                    }\n                });\n            }\n\n            nodes.forEach(function (e) {\n                breadFirst(e);\n            })\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/FlowLayout.js","/**\n * Created by chengang on 17-2-20.\n */\n\nimport CircularLayout from './CircularLayout'\nimport ColaLayout from './ColaLayout'\nimport FlowLayout from './FlowLayout'\nimport DargeLayout from './DargeLayout'\n\nexport default {\n    circular:CircularLayout,\n    cola:ColaLayout,\n    flow:FlowLayout,\n    darge:DargeLayout,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layout/index.js","/**\n * Created by chengang on 17-4-5.\n */\nimport EventEmitter from '../../base/EventEmitter'\n\nexport  default  class  TextureLoader extends EventEmitter {\n    constructor(gl){\n        super();\n        this.gl = gl;\n        this.cache = {};\n        this.textures = [];\n        this.defaultTexture = this.createTexture();\n        this.texturesIndex = [0,1,2,3,4,5,6,7,8,9];\n        this.updateGPUTexture();\n    }\n\n    loadImgs(urls){\n        if(Array.isArray(urls)){\n            urls.forEach(function (url) {\n                this._load(url);\n            }.bind(this));\n        }else {\n            this._load(urls);\n        }\n    }\n\n    _load(url){\n        if(!this.cache[url]){\n            var image = document.createElement('IMG');\n            // image.setAttribute('crossOrigin', imgCrossOrigin);\n            image.src = url;\n            image.onload = function() {\n                var tx = this.createTexture(image);\n                this.cache[url] = this.textures.length;//index\n                this.textures.push(tx);\n                this.updateGPUTexture();\n                this.emit('load',[url]);\n            }.bind(this);\n        }\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n        this.texturesIndex.forEach(function (e) {\n            gl.activeTexture(gl['TEXTURE'+e]);\n            if(e > this.textures.length - 1){\n                gl.bindTexture(gl.TEXTURE_2D, this.defaultTexture);\n            }else {\n                gl.bindTexture(gl.TEXTURE_2D, this.textures[e]);\n            }\n        }.bind(this));\n    }\n\n    createTexture(img){\n        var gl = this.gl;\n        var texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        if(img)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        return texture;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureLoader.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureText extends EventEmitter{\n    constructor(gl){\n        super();\n\n        this.gl = gl;\n\n        this.texture = null;\n\n        this.border = 2;\n\n        this.fontSize = 26;\n        this.fontFamily = 'Arial';\n\n        this.canvas = null;\n\n        this.textinfo = null;\n\n        this.texts = null;\n    }\n\n    createCanvasImg(texts) {\n\n        if(!this.canvas) this.canvas = document.createElement('canvas');\n\n        var c = this.canvas;\n\n\n        var width = this.fontSize + 1;\n        var height = this.fontSize + 1;\n        var num = Math.ceil(Math.sqrt(texts.length));\n\n        c.width  = num * width + 2* this.border;\n        c.height  = num * height + 2* this.border;\n\n\n        var ctx = c.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, c.width, c.height);\n\n        ctx.font = `bold ${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"top\";\n        ctx.fillStyle = \"#ff0000\";\n\n\n        var startx =this.border;\n        var starty =this.border;\n        var infos = {}, px, py, charWidth;\n\n        this.texts = [];\n\n        for (var i = 0; i < texts.length; i++) {\n\n            if(this.textinfo && this.textinfo.infos[texts[i]]) continue;\n\n            charWidth = ctx.measureText(texts[i]).width;\n            if(startx + charWidth + this.border > c.width){\n                startx = this.border;\n                starty += height\n            }\n            ctx.fillText(texts[i], startx, starty);\n            infos[texts[i]] = {\n                uvs:[\n                    startx/c.width, starty/c.height,\n                    (startx + charWidth)/c.width, (starty + height)/c.height,\n                ],\n                width:charWidth/width\n            };\n\n            this.texts.push(texts[i]);\n\n            startx += charWidth + this.border;\n        }\n        this.computeAlpha(ctx);\n        this.textinfo =  {\n            fontSize:this.fontSize,\n            img:c,\n            width:c.width,\n            height:c.height,\n            infos:infos\n        };\n\n        // document.body.appendChild(c);\n        this.updateGPUTexture();\n    }\n\n    computeAlpha(ctx) {\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n\n        ctx.putImageData(imgData,0,0);\n\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n\n        this.createTexture();\n\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addTexts(strs){\n        var len = strs.length;\n        var char,num = 0;\n\n        var texts = this.texts;\n        var map = {};\n        for(var i = 0;i< len;i++){\n            char = strs.charAt(i);\n            if(!this.textinfo.infos[char] && !map[char]){\n                num++;\n                map[char] = true;\n                texts.push(char);\n            }\n        }\n\n        if(num > 0) {\n            this.textinfo = null;\n            this.texts = null;\n            this.createCanvasImg(texts);\n        }\n    }\n\n    createTexture(){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textinfo.img);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureText.js","/**\n * Created by chengang on 17-3-31.\n */\n\nimport util from '../../../util'\n\nimport edgeVert from './glsl/default-vert.glsl'\nimport edgeFrag from './glsl/default-frag.glsl'\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport  default class Edge{\n    constructor(){\n        this.POINTS = 9;\n        this.ATTRIBUTES = 9 ;\n\n        this.shaderVert = edgeVert;\n        this.shaderFrag = edgeFrag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 5*4 + 1*4;\n    }\n\n    getRenderData({data,source,target}){\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var data = [];\n        var size = 0.3,arrowSize =3;\n        var crossVector = util.normalize([-dy,dx]);\n\n        //arrow\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var arrowX = target.x - (target.size + arrowSize)/dis * dx;\n        var arrowY = target.y - (target.size + arrowSize)/dis * dy;\n\n        var color = utils.parseColor(edge.color||source.color || '#b3d2ff');\n\n        addData(data,this.ATTRIBUTES,[source.x,source.y,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n\n        //arrow\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,-crossVector[0],-crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,arrowSize/dis * dx,arrowSize/dis * dy,1,color.r,color.g,color.b,color.a]);\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var normalLocation = gl.getAttribLocation(program, \"a_normal\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n\n            Uint8View[i*offset8+20] = data[i*this.ATTRIBUTES+5];\n            Uint8View[i*offset8+21] = data[i*this.ATTRIBUTES+6];\n            Uint8View[i*offset8+22] = data[i*this.ATTRIBUTES+7];\n            Uint8View[i*offset8+23] = data[i*this.ATTRIBUTES+8];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(normalLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false, this.strip, 5*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(normalLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(colorLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/default.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../util'\nimport mat3 from '../../../base/Matrix'\n\nimport vert from './glsl/edge-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport default class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,source,target,textureText}){\n        var edge = data;\n        if(!edge.label) return [];\n\n        // debugger\n        var str = edge.label.split('');\n\n        var data = [];\n\n        var infos = textureText.textinfo.infos,\n            charWidth = source.size/2,\n            charHeight = source.size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var centerX = (source.x + target.x)/2, centerY = (source.y + target.y)/2;\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2],centerX,centerY,angle);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/EdgeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\nimport vert from './glsl/node-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport default class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,textureText}){\n        var node  = data;\n        if(!node.label) return [];\n\n        // debugger\n        var str = node.label.split('');\n\n        var data = [];\n\n        var infos = textureText.textinfo.infos,\n            charWidth = node.size/2,\n            charHeight = node.size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n\n        var startx = totalWidht/2 * -1 + node.x;\n        var starty =  node.y - node.size;\n        var x1,y1,x2,y2;\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log(1);\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2]);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/NodeLabel.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../util'\nimport vert from './glsl/flag-vert.glsl'\nimport frag from './glsl/flag-frag.glsl'\n\nclass Flag{\n    constructor(){\n        this.POINTS = 1;\n        this.ATTRIBUTES = 3;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 3 * 4;\n    }\n\n    getRenderData({data,textureLoader}){\n        var node = data;\n        return node.flag ? [node.x+node.size*0.5,node.y+node.size*0.5,node.size] : null;\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];//x\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];//y\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];//size\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n\n        gl.drawArrays(gl.POINTS, 0, len);\n\n\n    }\n}\n\n\nexport default Flag;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/Flag.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../util'\nimport nodeVert from './glsl/default-vert.glsl'\nimport nodeFrag from './glsl/default-frag.glsl'\n\nclass Node{\n    constructor(){\n        this.POINTS = 1;\n        this.ATTRIBUTES = 9;\n\n        this.shaderVert = nodeVert;\n        this.shaderFrag = nodeFrag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 + 4 + 4;\n    }\n\n    getRenderData({data,textureLoader,textureIcon}){\n        var node = data;\n        var color = utils.parseColor(node.color || '#ff0000');\n        var img = -1;\n        if(node.img && textureLoader.cache[node.img])\n            img = textureLoader.cache[node.img];\n\n        var size = node.size*2||10*2;\n        var isSelected = node.selected ? 1.0 : 0.0;\n\n        return [\n            node.x,node.y,size,\n            color.r,color.g,color.b,color.a,\n            img,isSelected\n        ];\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n       if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var imgLocation = gl.getAttribLocation(program, \"a_img\");\n        var selectedLocation = gl.getAttribLocation(program, \"a_selected\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var texturesLocation = gl.getUniformLocation(program, \"u_textures\");\n        var borderColorLocation = gl.getUniformLocation(program, \"u_borderColor\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var int8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];//x\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];//y\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];//size\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+7];//img\n            float32View[i*offset32+5] = data[i*this.ATTRIBUTES+8];//selected\n\n            int8View[i*this.strip+12] = data[i*this.ATTRIBUTES+3];//color.r\n            int8View[i*this.strip+13] = data[i*this.ATTRIBUTES+4];//color.g\n            int8View[i*this.strip+14] = data[i*this.ATTRIBUTES+5];//color.b\n            int8View[i*this.strip+15] = data[i*this.ATTRIBUTES+6];//color.a\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false,  this.strip, 3*4);\n        gl.vertexAttribPointer(imgLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(selectedLocation, 1, gl.FLOAT, false, this.strip, 5*4);\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(colorLocation);\n        gl.enableVertexAttribArray(imgLocation);\n        gl.enableVertexAttribArray(selectedLocation);\n\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n        gl.uniform4f(borderColorLocation,194.0, 97.0, 54.0,255.0);\n\n        gl.uniform1iv(texturesLocation,textureLoader.texturesIndex);\n\n        gl.drawArrays(gl.POINTS, 0, len);\n\n\n    }\n}\n\n\nexport default Node;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/default.js","/**\n * Created by chengang on 17-4-13.\n */\n\nimport node from './default'\nimport flag from './Flag'\nimport Icon from './Icon'\n\nexport default {\n    layers:[\n        {name:'base',layer:node},\n        {name:'icon',layer:Icon},\n        {name:'flag',layer:flag},\n    ]\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/index.js","module.exports = \"precision mediump float;\\nvarying vec4 color;\\nvoid main(){\\ngl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-frag.glsl\n// module id = 26\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute vec4 a_color;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\n\\nvoid main() {\\n\\nvec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(pos,1)).xy,0,1);\\n\\ncolor = a_color/255.0;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-vert.glsl\n// module id = 27\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/edge-label-vert.glsl\n// module id = 28\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/node-label-vert.glsl\n// module id = 29\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying float size;\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\n\\nuniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n\\n\\n\\n\\n//todo\\nvec4 getSampleColore(int index,vec2 uv){\\n    vec4 c;\\n    if(index == 0){\\n        c = texture2D(u_textures[0],uv);\\n    }else if(index == 1){\\n        c = texture2D(u_textures[1],uv);\\n    }else if(index == 2){\\n        c = texture2D(u_textures[2],uv);\\n    }else if(index == 3){\\n        c = texture2D(u_textures[3],uv);\\n    }else if(index == 4){\\n        c = texture2D(u_textures[4],uv);\\n    }else if(index == 5){\\n        c = texture2D(u_textures[5],uv);\\n    }\\n    return c;\\n}\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = 4.0 * u_sample_ratio / size ,\\n   border = max(1.0 - 15.0 * u_sample_ratio / size,0.0) ;\\n\\n   vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\n    r = length(cxy);\\n\\n    if(img >= 0.0){\\n        nodecolor = getSampleColore(int(img),gl_PointCoord);\\n    }\\n\\n\\n    //todo\\n    if(selected < 0.5) borderColor = nodecolor;\\n\\n    if(size > 4.0){\\n        if(r > 1.0 ){\\n            discard;\\n        }\\n\\n        if(r > 1.0-blur && r <=1.0){\\n            alpha = 1.0 - smoothstep(1.0-blur, 1.0, r);\\n        }\\n        else if( r > border && r < border + blur){\\n            nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n        }\\n\\n         if( r >= border + blur){\\n            nodecolor = borderColor;\\n         }\\n    }\\n\\n    gl_FragColor = nodecolor * alpha;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/default-frag.glsl\n// module id = 30\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_size;\\nattribute float a_img;\\nattribute float a_selected;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying float size;\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\n\\nvoid main() {\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nsize = gl_PointSize  = 1.0/u_camera_scale * a_size*u_sample_ratio;\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/default-vert.glsl\n// module id = 31\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying float size;\\n\\nuniform float u_sample_ratio;\\n\\n\\nvec4 color = vec4(0.0,1.0,0.0,1.0);\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,blur = 4.0 * u_sample_ratio / size ;\\n   vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\n    r = length(cxy);\\n\\n\\n    if(size > 4.0){\\n        if(r > 1.0 ){\\n            discard;\\n        }\\n\\n        if(r > 1.0-blur && r <=1.0){\\n            alpha = 1.0 - smoothstep(1.0-blur, 1.0, r);\\n        }\\n    }\\n    gl_FragColor = nodecolor * alpha;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/flag-frag.glsl\n// module id = 32\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nsize = gl_PointSize  = 1.0/u_camera_scale * a_size*u_sample_ratio;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/flag-vert.glsl\n// module id = 33\n// module chunks = 0","export {default as Graph} from './core/Graph'\nexport {WebGLRender} from './render/index'\n// export {default as quadtree} from './test/src/quadtree'\nexport {default as Quad} from './base/Quad'\nexport {default as Event} from './core/Event'\nexport {default as GraphView} from './core/index'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureIcon extends EventEmitter{\n    constructor(gl,option){\n        super();\n\n        this.gl = gl;\n        this.texture = null;\n\n        this.textureIconWidth = option.textureIconWidth;\n        this.textureIconHeight = option.textureIconHeight;\n\n        this.fontSize = 60;\n        this.fontFamily = 'FontAwesome';\n\n        this.border = 2;\n        this.width = 70;//char width\n        this.height = 80;\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n\n        this.canvas = null;\n        this.iconinfo = null;\n        this.icons = [];\n        this.iconsToCreate = [];\n\n        this.fontLoaded = false;\n\n        this._init();\n\n        var _this = this;\n        if (document.fonts) {\n            var fontsReady = document.fonts.ready;\n            if (typeof(fontsReady) == \"function\") {\n                fontsReady = document.fonts.ready();\n            }\n            fontsReady.then(function () {\n                _this.fontLoaded  = true;\n                _this.createIcons();\n                _this.emit('load')\n            });\n        }\n    }\n\n    _init(){\n        this.canvas = document.createElement('canvas');\n\n        this.canvas.width  = this.textureIconWidth;\n        this.canvas.height  = this.textureIconHeight;\n\n        var ctx = this.canvas.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        ctx.font = `${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = \"#ff0000\";\n\n        this.iconinfo =  {\n            fontSize:this.fontSize,\n            img:this.canvas,\n            width:this.width,\n            height:this.height,\n            infos:{}\n        };\n\n        this.ctx = ctx;\n\n    }\n\n    createIcons(icons) {\n\n        icons = icons || this.iconsToCreate;\n\n        if(icons.length == 0) return;\n\n        if(!this.fontLoaded){\n            icons.forEach(function (e) {\n                this.iconsToCreate.push(e);\n            }.bind(this));\n            return;\n        }\n\n        for (var i = 0; i < icons.length; i++) {\n            this.createIcon(icons[i]);\n        }\n        this.computeAlpha();\n\n\n        // document.body.appendChild(this.canvas);\n        this.updateGPUTexture();\n    }\n\n    createIcon(icon){\n\n        var ctx = this.ctx,\n            c = this.canvas;\n\n        if(this.iconinfo && this.iconinfo.infos[icon]) return;\n\n        if(this.startx + this.width + this.border > c.width){\n            this.startx = this.border;\n            this.starty += this.height + this.border;\n\n            if(this.starty + this.height > c.height){\n                console.warn('icon texture no space');\n                return;\n            }\n        }\n\n\n        ctx.fillText(icon, this.startx, this.starty);\n        this.iconinfo.infos[icon] = {\n            uvs:[\n                (this.startx-this.width/2)/c.width, (this.starty - this.height/2)/c.height,\n                (this.startx + this.width/2)/c.width, (this.starty + this.height/2)/c.height,\n            ],\n            width:this.width/this.width\n        };\n\n        this.icons.push(icon);\n\n        this.startx += this.width + this.border;\n    }\n\n\n    computeAlpha() {\n\n        var ctx = this.ctx;\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n        ctx.putImageData(imgData,0,0);\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n\n        this.createTexture();\n\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addIcons(icons){\n        var char;\n        var map = {};\n        for(var i = 0,len = icons.length;i< len;i++){\n            char = icons[i];\n            if(!this.iconinfo.infos[char] && !map[char]){\n                if(this.fontLoaded){\n                    this.createIcon(char);\n                }else {\n                    this.iconsToCreate.push(char);\n                }\n                map[char] = true;\n            }\n        }\n        this.updateGPUTexture();\n    }\n\n    createTexture(){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.iconinfo.img);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureIcon.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../util'\nimport vert from './glsl/icon-vert.glsl'\nimport frag from './glsl/icon-frag.glsl'\n\nclass Icon{\n    constructor(){\n        this.POINTS = 1;\n        this.ATTRIBUTES = 7;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 7 * 4;\n    }\n\n    getRenderData({data,textureLoader,textureIcon}){\n        var node = data;\n\n        var iconx1,icony1,iconx2,icony2,uvs;\n        var hasIcon = node.icon && textureIcon.iconinfo.infos[node.icon];\n\n        if(hasIcon){\n            uvs = textureIcon.iconinfo.infos[node.icon].uvs;\n            iconx1 = uvs[0],icony1 = uvs[1],iconx2 = uvs[2], icony2 = uvs[3];\n        }\n\n        return hasIcon ? [node.x,node.y,node.size*2*0.7,iconx1 , icony1 , iconx2 , icony2] : null;\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var iconUVLocation1 = gl.getAttribLocation(program, \"a_icon_uvx1\");\n        var iconUVLocation2 = gl.getAttribLocation(program, \"a_icon_uvy1\");\n        var iconUVLocation3 = gl.getAttribLocation(program, \"a_icon_uvx2\");\n        var iconUVLocation4 = gl.getAttribLocation(program, \"a_icon_uvy2\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n        var iconTextureLocation = gl.getUniformLocation(program, \"u_icons_texture\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n            float32View[i*offset32+5] = data[i*this.ATTRIBUTES+5];\n            float32View[i*offset32+6] = data[i*this.ATTRIBUTES+6];\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(iconUVLocation1, 1, gl.FLOAT, false, this.strip, 3*4);\n        gl.vertexAttribPointer(iconUVLocation2, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(iconUVLocation3, 1, gl.FLOAT, false, this.strip, 5*4);\n        gl.vertexAttribPointer(iconUVLocation4, 1, gl.FLOAT, false, this.strip, 6*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(iconUVLocation1);\n        gl.enableVertexAttribArray(iconUVLocation2);\n        gl.enableVertexAttribArray(iconUVLocation3);\n        gl.enableVertexAttribArray(iconUVLocation4);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n        gl.uniform1i(iconTextureLocation,11);\n\n\n        gl.drawArrays(gl.POINTS, 0, len);\n\n\n    }\n}\n\n\nexport default Icon;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/Icon.js","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying float size;\\nvarying float icons_uv[4];\\n\\n\\nuniform float u_sample_ratio;\\nuniform sampler2D u_icons_texture;\\n\\n\\nvec2 get_icon_uv(vec2 coord){\\n    float x1 = icons_uv[0];\\n    float y1 = icons_uv[1];\\n    float x2 = icons_uv[2];\\n    float y2 = icons_uv[3];\\n\\n    float dx = x2-x1;\\n    float dy = y2-y1;\\n\\n    return vec2(coord.x * dx + x1,coord.y * dy + y1);\\n}\\n\\n\\n\\nvoid main()\\n{\\n    gl_FragColor = texture2D(u_icons_texture,get_icon_uv(gl_PointCoord)).w * vec4(1,1,1,1);\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/icon-frag.glsl\n// module id = 37\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute float a_size;\\n\\nattribute float a_icon_uvx1;\\nattribute float a_icon_uvx2;\\nattribute float a_icon_uvy1;\\nattribute float a_icon_uvy2;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying float icons_uv[4];\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nsize = gl_PointSize  = 1.0/u_camera_scale * a_size*u_sample_ratio;\\n\\nicons_uv[0] = a_icon_uvx1;\\nicons_uv[1] = a_icon_uvy1;\\nicons_uv[2] = a_icon_uvx2;\\nicons_uv[3] = a_icon_uvy2;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/icon-vert.glsl\n// module id = 38\n// module chunks = 0"],"sourceRoot":""}