{"version":3,"sources":["webpack:///webpack/bootstrap 2caa982eacddbccd126a","webpack:///./src/util.js","webpack:///./src/base/EventEmitter.js","webpack:///./src/base/Quad.js","webpack:///./src/core/Event.js","webpack:///./src/core/Graph.js","webpack:///./src/base/Matrix.js","webpack:///./src/render/webgl/render.js","webpack:///./src/render/webgl/label/glsl/label-frag.glsl","webpack:///./src/core/index.js","webpack:///./src/render/index.js","webpack:///./src/animation/tween.js","webpack:///./src/core/config.js","webpack:///./src/graph/eventEmiter.js","webpack:///./src/layout/CircularLayout.js","webpack:///./src/layout/ColaLayout.js","webpack:///./src/layout/DargeLayout.js","webpack:///./src/layout/FlowLayout.js","webpack:///./src/layout/index.js","webpack:///./src/render/webgl/TextureIcon.js","webpack:///./src/render/webgl/TextureLoader.js","webpack:///./src/render/webgl/TextureText.js","webpack:///./src/render/webgl/edge/default.js","webpack:///./src/render/webgl/label/EdgeLabel.js","webpack:///./src/render/webgl/label/NodeLabel.js","webpack:///./src/render/webgl/node/Flag.js","webpack:///./src/render/webgl/node/Icon.js","webpack:///./src/render/webgl/node/default.js","webpack:///./src/render/webgl/node/index.js","webpack:///./src/render/webgl/edge/glsl/default-frag.glsl","webpack:///./src/render/webgl/edge/glsl/default-vert.glsl","webpack:///./src/render/webgl/label/glsl/edge-label-vert.glsl","webpack:///./src/render/webgl/label/glsl/node-label-vert.glsl","webpack:///./src/render/webgl/node/glsl/default-frag.glsl","webpack:///./src/render/webgl/node/glsl/default-vert.glsl","webpack:///./src/render/webgl/node/glsl/flag-frag.glsl","webpack:///./src/render/webgl/node/glsl/flag-vert.glsl","webpack:///./src/render/webgl/node/glsl/icon-frag.glsl","webpack:///./src/render/webgl/node/glsl/icon-vert.glsl","webpack:///./src/index.js"],"names":["utils","typeofstr","typeofobj","typeoffn","uuid","a","b","Math","random","toString","isArray","obj","Array","isString","isObject","isFunction","loadShader","gl","shaderSource","shaderType","error","compiled","shader","createShader","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","console","deleteShader","loadProgram","shaders","attribs","loc","i","linked","program","createProgram","length","attachShader","bindAttribLocation","locations","opt_attribs","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","extend","k","res","l","arguments","getDistance","x1","y1","x2","y2","dx","dy","sqrt","normalize","vector","len","getAngle","cos","acos","reI","reN","reHex6","reRgbaInteger","RegExp","parseColor","format","trim","toLowerCase","m","n","exec","parseInt","r","g","window","EventEmitter","_listener","type","cb","listener","push","splice","args","fn","slice","apply","defaultConfig","maxLevel","indexN","x","y","rect","x0","y0","w","h","right","top","indexNs","pointRect","points","map","forEach","e","getIndexRect","index","createNode","level","elements","children","size","Quad","option","root","nodes","time","Infinity","insert","bind","timeEnd","data","pointR","indexs","id","_point","initEvent","_this","container","addEventListener","handlerWrap","_clickHandler","_moveHandler","_downHandler","_upHandler","_wheelHandler","handle","pos","toCameraPos","offsetX","offsetY","cameraX","cameraY","getNode","graph","node","dis","findNode","graphPos","toGraphPos","emit","handleDrag","forceRender","isCamera","isDown","startx","starty","onmousemove","offsetx","offsety","camera","position","setNodeData","newgraphPos","onmouseup","clear","onmouseout","removeEventListener","ratio","zoomRatio","wheelDelta","zoomTo","Graph","options","edges","nodesIndex","edgesIndex","inEdgesIndex","outEdgesIndex","read","source","target","ids","nodeid","removeEdge","edge","edgeid","updatePos","hasOwnProperty","attr","oldpos","quad","point","mat3","matrixFromTranslate","matrixFromRotation","angle","sin","matrixFromScale","invert","a11","a12","a13","a21","a22","a23","a31","a32","a33","del","multiply","a00","a01","a02","a10","a20","b00","b01","b02","b10","b11","b12","b20","b21","b22","transformPoint","p","rotateVector","v","multiMatrix","matrixs","reduce","pre","cur","WebGLRender","needUpdate","sampleRatio","initRender","initGraphChangeEvent","initTexture","textureLoader","on","textureUpdate","initTextureText","textureText","initTextTexture","projectMatrix","canvas","clientWidth","clientHeight","scale","rotation","renderType","cache","nodeLabel","edgeLabel","call","COLOR_BUFFER_BIT","imgs","img","loadImgs","Object","keys","renderEdge","renderEdgeLabel","renderNode","renderNodeLabel","createRenderCache","textureIcon","renderCacheData","layers","name","counter","rootType","argFn","nodeData","cacheIndex","start","offset","rootType1","clearClusterCacheCounter","initRenderLayers","render","getRenderData","fixClusterCacheLength","camMatrixInvert","order","getCameraMatrix","useProgram","matrix","getContext","getExtension","resizeCanvas","viewport","width","height","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","disable","DEPTH_TEST","clearColor","updateNodeRenderData","updateNodeLabelRenderData","updateEdgeRenderData","updateEdgeLabelRenderData","clearRenderCache","objs","addTexts","getAddText","text","label","texts","chars","split","createCanvasImg","typeRoot","renderRoot","temp","layersConfig","layer","config","shaderVert","VERTEX_SHADER","shaderFrag","FRAGMENT_SHADER","icons","icon","createIcons","isInvert","mat","multiplier","isVector","newscale","zoomMin","zoomMax","url","renderData","updateRenderData","Core","selected","off","makeLayout","layout","_start","_initEvent","frames","state","log","_render","requestAnimationFrame","layoutConfig","to","duration","t","filter","default","Tween","init","interpolates","timer","d3","timerHandle","_duration","prototype","elapsed","min","attrInterpolater","stop","toObjs","interpolateNumber","textureIconWidth","textureIconHeight","dispatch","CircularLayout","posSet","depthPosSet","drawnBiComps","bc","nodeHeights","node2BiComp","createBicconnects","__layout","oldNodes","oldLinks","tempNodes","_index","s","links","states","dfsn","low","edgesStack","biComponents","num","dfs","current","neigh","neighNodes","singleComponent","pop","biconncts","max","maxIndex","delete","j","maxSize","radius","PI","deltaAngle","startX","startY","sortInnerCircle","test","SetOuterCircle","icNodes","greedyNodes","modestNodes","forFunct","tmp","NoOfChildren","toReturn","gNo","mNo","deltaM","deltaG","nodeId","outerCircle","currNeigh","compIndex","innerCircleRadius","firstTouched","outerNodesCount","rnc","iter","currNeighbour","outerRadius","tryCount","outerDeltaAngle","outerPositionsTaken","outerPositionsOwners","pointX","pointY","theAngle","theAngleHlp","innerDeltaAngle","asin","idPos","addedNeighbours","currentNeighbour","noOfNeighbours","startPos","BestFreePositionsForAll","startAngle","holeDepth","EachNodeHeight","DFSSetPos","idealPosition","noOfPos","innerCirclePos","innerCSize","alreadyFound","startOfAlFound","found","goDown","goUp","goUpCount","biggestGap","bestStartPos","thisGap","count","nodeID","noOfChildren","theRadius","component","undefined","comp","centerX","centerY","currAngle","oneAtLeast","neighboursCount","min1","min2","min1Id","min2Id","maxId","remStartAngle","rTry","hlp","setOffset","abs","ColaLayout","cola","Layout","convergenceThreshold","_init","symmetricDiffLinkLengths","DargeLayout","dagre","graphlib","setGraph","rankdir","nodesep","ranksep","ranker","setDefaultEdgeLabel","setNode","setEdge","d","FlowLayout","flowLayout","filterEdge","_filterEdge","filterEdges","flag","first","breadFirst","circular","flow","darge","TextureIcon","texture","fontSize","fontFamily","border","iconinfo","iconsToCreate","fontLoaded","document","fonts","fontsReady","ready","then","createElement","ctx","fillStyle","fillRect","font","textAlign","textBaseline","infos","createIcon","computeAlpha","updateGPUTexture","c","warn","fillText","uvs","imgData","getImageData","putImageData","createTexture","activeTexture","TEXTURE11","bindTexture","TEXTURE_2D","char","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","TextureLoader","textures","defaultTexture","texturesIndex","urls","_load","image","src","onload","tx","TEXTURE0","NEAREST","TextureText","textinfo","ceil","px","py","charWidth","measureText","TEXTURE10","strs","charAt","addData","arr","attributes","attrData","Edge","POINTS","ATTRIBUTES","arrayBuffer","dataBuffer","strip","arrowSize","crossVector","arrowX","arrowY","color","createBuffer","positionLocation","getAttribLocation","normalLocation","colorLocation","sizeLocation","matrixLocation","getUniformLocation","byteLength","ArrayBuffer","float32View","Float32Array","Uint8View","Uint8Array","offset32","offset8","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniformMatrix3fv","drawArrays","TRIANGLES","rotate","NodeLabel","str","charHeight","uv","totalWidht","uvLocation","imageLocation","uniform1i","Flag","cameraScaleLocation","sampleRatioLocation","uniform1f","Icon","iconx1","icony1","iconx2","icony2","hasIcon","iconUVLocation1","iconUVLocation2","iconUVLocation3","iconUVLocation4","iconTextureLocation","Node","isSelected","imgLocation","selectedLocation","texturesLocation","borderColorLocation","int8View","uniform4f","uniform1iv"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 38);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2caa982eacddbccd126a","/**\n * Created by chengang on 17-3-17.\n */\n\nvar utils = {};\n\nvar typeofstr = typeof '';\nvar typeofobj = typeof {};\nvar typeoffn = typeof function(){};\n\nutils.uuid = function(a,b){\n    for(               // loop :)\n        b=a='';        // b - result , a - numeric variable\n        a++<36;        //\n        b+=a*51&52  // if \"a\" is not 9 or 14 or 19 or 24\n            ?  //  return a random number or 4\n            (\n                a^15      // if \"a\" is not 15\n                    ?      // genetate a random number from 0 to 15\n                    8^Math.random()*\n                    (a^20?16:4)  // unless \"a\" is 20, in which case a random number from 8 to 11\n                    :\n                    4            //  otherwise 4\n            ).toString(16)\n            :\n            '-'            //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n    );\n    return b;\n};\n\n\nutils.isArray = function( obj ){\n    return Array.isArray ? Array.isArray( obj ) : obj != null && obj instanceof Array;\n};\n\nutils.isString = function( obj ){\n    return obj != null && typeof obj == typeofstr;\n};\n\nutils.isObject = function( obj ){\n    return obj != null && typeof obj === typeofobj;\n};\n\nutils.isFunction =  function( obj ){\n    return obj != null && typeof obj === typeoffn;\n};\n\n\n\nutils.loadShader = function(gl, shaderSource, shaderType, error) {\n    var compiled,\n        shader = gl.createShader(shaderType);\n\n    // Load the shader source\n    gl.shaderSource(shader, shaderSource);\n\n    // Compile the shader\n    gl.compileShader(shader);\n\n    // Check the compile status\n    compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    // If something went wrong:\n    if (!compiled) {\n        if (error) {\n            error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        }\n\n        console.error('Error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n};\n\n\n\nutils.loadProgram = function(gl, shaders, attribs, loc, error) {\n    var i,\n        linked,\n        program = gl.createProgram();\n\n    for (i = 0; i < shaders.length; ++i)\n        gl.attachShader(program, shaders[i]);\n\n    if (attribs)\n        for (i = 0; i < attribs.length; ++i)\n            gl.bindAttribLocation(\n                program,\n                locations ? locations[i] : i,\n                opt_attribs[i]\n            );\n\n    gl.linkProgram(program);\n\n    // Check the link status\n    linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        if (error)\n            error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        console.error('Error in program linking: ' + gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n        return null;\n    }\n\n    return program;\n};\n\n\nutils.extend = function() {\n    var i,\n        k,\n        res = {},\n        l = arguments.length;\n\n    for (i = l - 1; i >= 0; i--)\n        for (k in arguments[i])\n            res[k] = arguments[i][k];\n\n    return res;\n};\n\nutils.getDistance = function (x1,y1,x2,y2) {\n    var dx =x1 - x2;\n    var dy =y1 - y2;\n    return Math.sqrt(dx*dx+dy*dy);\n};\n\nutils.normalize = function (vector) {\n  var len = Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]);\n  if(len == 0) return [0,0];\n  return [vector[0]/len,vector[1]/len];\n};\n\nutils.getAngle = function (x1,y1,x2,y2) {\n    var cos = (x1*x2+y1*y2)/(Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2));\n    return Math.acos(cos);\n};\n\n\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\";\nvar reHex6 = /^#([0-9a-f]{6})$/;\nvar reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\");\nutils.parseColor = function (format) {\n    format = (format + \"\").trim().toLowerCase();\n    var m,n;\n    if(m = reHex6.exec(format)){\n        n = parseInt(m[1], 16);\n        return{\n            r:n >> 16 & 0xff,\n            g: n >> 8 & 0xff,\n            b: n & 0xff,\n            a:255\n        }\n    }else if(m = reRgbaInteger.exec(format)){\n        return{\n            r:+m[1],\n            g:+m[2],\n            b:+m[3],\n            a:+m[4]\n        }\n    }else {\n        throw 'not valid color format';\n    }\n}\n\n\nexport  default utils ;\n\nwindow.utils = utils;\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n * Created by chengang on 17-2-16.\n */\n\nexport default class EventEmitter {\n    constructor(){\n        this._listener = {};\n    }\n\n    on(type,cb){\n        if(!type || !cb) return;\n        this._listener[type] = this._listener[type] || [];\n\n        var listener = this._listener[type];\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]) return;\n        }\n\n        this._listener[type].push(cb);\n        return cb;\n    }\n\n    off(type,cb){\n        if(!type) return;\n        var listener;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        if(cb){\n            for(var i = 0,len = listener.length; i < len;i++){\n                if(cb == listener[i]){\n                    listener.splice(i,1);\n                    break;\n                }\n            }\n        }else {\n            this._listener[type] = [];\n        }\n    }\n\n    emit(type,args){\n        if(!type) return;\n        var listener,fn;\n        if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n        listener = listener.slice();\n\n        for(var i = 0,len = listener.length;i< len;i++){\n            fn = listener[i];\n            fn.apply(null,args);\n        }\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/EventEmitter.js","/**\n * Created by chengang on 17-3-29.\n */\n\nimport util from '../util'\n\nvar defaultConfig = {\n    maxLevel:2,\n};\n\nfunction indexN(x,y,rect) {\n    var x0 = rect.x,y0 = rect.y, w = rect.w, h = rect.h;\n    var right = x > (x0+w/2);\n    var top = y > (y0+h/2);\n    return top << 1 | right;\n}\n\nfunction indexNs(pointRect,rect) {\n    var points = [\n        [pointRect.x,pointRect.y],\n        [pointRect.x+pointRect.w/2,pointRect.y],\n        [pointRect.x,pointRect.y+pointRect.h/2],\n        [pointRect.x+pointRect.w/2,pointRect.y+pointRect.h/2],\n    ];\n    var map = {},n;\n    points.forEach(function (e) {\n        n = indexN(e[0],e[1],rect);\n        map[n] = true;\n    })\n\n    return map;\n}\n\nfunction getIndexRect(index,rect) {\n    var r;\n    switch(index){\n        case 0:\n            r = {x:rect.x,y:rect.y,w:rect.w/2,h:rect.h/2};\n            break;\n        case 1:\n            r = {x:rect.x+rect.w/2,y:rect.y,w:rect.w/2,h:rect.h/2};\n            break;\n        case 2:\n            r = {x:rect.x,y:rect.y+rect.h/2,w:rect.w/2,h:rect.h/2};\n            break;\n        case 3:\n            r = {x:rect.x+rect.w/2,y:rect.y+rect.h/2,w:rect.w/2,h:rect.h/2};\n            break;\n    }\n\n    return r;\n}\n\n\nfunction createNode(level,rect) {\n    return {\n        level:level||0,\n        rect:rect,\n        elements:[],\n        children:null,\n    }\n}\n\nfunction pointRect(n) {\n    return {\n        x: n.x - n.size,\n        y: n.y - n.size,\n        w:n.size*2,\n        h:n.size*2,\n    };\n}\n\nexport  default class Quad{\n    constructor(option){\n        this.option = util.extend(defaultConfig,option||{});\n        this.root =null;\n    }\n\n    index(nodes,option){\n        console.time('quadindex');\n        option = option || {};\n\n        var x0 = Infinity, y0 = Infinity, x1 = -Infinity, y1 = -Infinity;\n        if(!option.rect){\n            nodes.forEach(function (e) {\n                if(e.x < x0) x0 = e.x;\n                if(e.x > x1) x1 = e.x;\n                if(e.y < y0) y0 = e.y;\n                if(e.y > y1) y1 = e.y;\n            });\n            option.rect = {x:x0,y:y0,w:x1-x0,h:y1-y0};\n        }\n\n\n        this.root = createNode(0,option.rect);\n\n        nodes.forEach(function (e) {\n            this.insert(e,this.root);\n        }.bind(this));\n        console.timeEnd('quadindex');\n\n    }\n\n    insert(data,root){\n        var pointR = pointRect(data);\n        if(root.level < this.option.maxLevel){\n            root.children = root.children || new Array(4);\n            var indexs = indexNs(pointR,root.rect);\n            var e ;\n            for(var i in indexs) {\n                e = +i;\n                if(!root.children[e]) root.children[e] = createNode(root.level+1,getIndexRect(e,root.rect));\n                this.insert(data,root.children[e]);\n            }\n        }else {\n            root.elements.push({x:data.x,y:data.y,id:data.id});\n        }\n    }\n\n    point(x,y){\n        return this._point(x,y,this.root);\n    }\n\n    _point(x,y,root){\n        if(root.children){\n            var index = indexN(x,y,root.rect);\n            return  root.children[index] ?  this._point(x,y,root.children[index]) : [];\n        }else {\n            return root.elements;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/Quad.js","/**\n * Created by chengang on 17-3-29.\n */\nimport util from '../util'\n\nexport default function initEvent() {\n    var _this = this;\n    this.container.addEventListener('click', handlerWrap(_clickHandler), false);\n    this.container.addEventListener('mousemove', handlerWrap(_moveHandler), false);\n    this.container.addEventListener('mousedown', handlerWrap(_downHandler), false);\n    this.container.addEventListener('mouseup', handlerWrap(_upHandler), false);\n    this.container.addEventListener('mousewheel', handlerWrap(_wheelHandler), false);\n\n    function handlerWrap(handle) {\n        return function (e) {\n            var pos = _this.toCameraPos({x: e.offsetX, y: e.offsetY});\n            e.cameraX = pos.x;\n            e.cameraY = pos.y;\n            handle(e);\n        }\n    }\n\n    function getNode(pos) {\n        // var nodes = _this.graph.quad.point(pos.x, pos.y);\n        var nodes = _this.graph.nodes;\n\n        var node, dis;\n        var findNode = null;\n        if (nodes.length > 0) {\n            for (var i = nodes.length - 1; i >= 0; i--) {\n                node = nodes[i];\n                // node = _this.graph.nodesIndex[node.id];\n                dis = util.getDistance(pos.x, pos.y, node.x, node.y);\n                if (dis <= node.size) {\n                    findNode = node;\n                    break;\n                }\n            }\n        }\n        return findNode;\n    }\n\n\n\n    function _clickHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n        if(node) _this.emit('nodeclick',[node,e]);\n        else _this.emit('stageclick',[e]);\n    }\n\n    function _moveHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n    }\n\n\n    function _downHandler(e) {\n        var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n        var node = getNode(graphPos);\n         handleDrag(!node);\n        _this.forceRender();\n\n        function handleDrag(isCamera) {\n            var isDown = true;\n            var startx = graphPos.x,starty = graphPos.y;\n\n            var onmousemove =handlerWrap(function(e) {\n                if(!isDown) return;\n                // console.time('move')\n\n                _this.forceRender();\n\n                var graphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                var offsetx = graphPos.x - startx;\n                var offsety = graphPos.y - starty;\n\n                if(isCamera){\n                    _this.camera.position.x -= offsetx;\n                    _this.camera.position.y -= offsety;\n                }else {\n                    _this.graph.setNodeData(node.id,{x:node.x+offsetx,y:node.y+offsety});\n                }\n\n\n                if(isCamera){\n                    var newgraphPos = _this.toGraphPos({x:e.cameraX,y:e.cameraY});\n                    startx = newgraphPos.x;\n                    starty = newgraphPos.y;\n                }else {\n                    startx = graphPos.x;\n                    starty = graphPos.y;\n                }\n                // console.timeEnd('move')\n            });\n\n            var onmouseup = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n            var onmouseout = handlerWrap(function(e) {\n                isDown = false;\n                clear();\n            });\n\n\n            _this.container.addEventListener('mousemove',onmousemove);\n            _this.container.addEventListener('mouseup',onmouseup);\n            _this.container.addEventListener('mouseout',onmouseout);\n\n\n            function clear() {\n                onmousemove&&_this.container.removeEventListener('mousemove',onmousemove);\n                onmouseup&&_this.container.removeEventListener('mouseup',onmouseup);\n                onmouseout&&_this.container.removeEventListener('mouseout',onmouseout);\n                onmousemove = onmouseup = onmouseout= null;\n            }\n\n        }\n\n    }\n\n    function _upHandler(e) {\n    }\n\n    function _wheelHandler(e) {\n        _this.forceRender();\n        var ratio = _this.option.zoomRatio;\n        if(e.wheelDelta > 0){\n            _this.zoomTo(1/ratio,e.cameraX,e.cameraY);\n        }else {\n            _this.zoomTo(ratio,e.cameraX,e.cameraY);\n        }\n\n    }\n\n    //drag\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Event.js","/**\n * Created by chengang on 17-3-17.\n */\n\nimport  utils  from '../util.js'\nimport  Quad from '../base/Quad'\nimport EventEmitter from '../base/EventEmitter'\n\nclass Graph extends EventEmitter{\n\n    constructor(options) {\n\n        super();\n\n        options = options || {};\n\n        /**\n         * node edge data\n         */\n        this.nodes = [];\n        this.edges = [];\n\n        /**\n         * node edge index\n         */\n        this.nodesIndex = {};\n        this.edgesIndex = {};\n\n        /**\n         *nodes degrees info\n         */\n        this.inEdgesIndex = {};\n        this.outEdgesIndex = {};\n\n\n        // this.quad = new Quad();\n\n        if (options.nodes || options.edges) this.read(options);\n\n    }\n\n    /**\n     * 读取 node ,edge 信息\n     * @param options\n     */\n    read(options) {\n        this.nodes = options.nodes || [];\n        this.edges = options.edges || [];\n\n        this.nodes.forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            e.id += '';\n            this.nodesIndex[e.id] = e;\n        }.bind(this));\n\n        this.edges.forEach(function (e) {\n            if (!e.id) e.id = utils.uuid();\n            this.edgesIndex['' + e.id] = e;\n\n            if (!e.source || !this.nodesIndex[e.source + '']) throw 'some edge has not source id or not a node of the id';\n            if (!e.target || !this.nodesIndex[e.target + '']) throw 'some edge has not target id or not a node of the id';\n\n            e.source += '';\n            e.target += '';\n\n            this.inEdgesIndex[e.target] = this.inEdgesIndex[e.target] || [];\n            this.inEdgesIndex[e.target].push(e.id);\n\n            this.outEdgesIndex[e.source] = this.outEdgesIndex[e.source] || [];\n            this.outEdgesIndex[e.source].push(e.id);\n\n        }.bind(this));\n\n        this.emit('reset');\n\n        // this.quad.index(this.nodes);\n\n    }\n\n    /**\n     * add nodes\n     * @param nodes\n     */\n    addNode(nodes) {\n        nodes = nodes || [];\n\n        if(nodes.length == 0) return;\n\n        if (!utils.isArray(nodes)) nodes = [nodes];\n\n        var node;\n        for (var i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            if (!node.id) node.id = utils.uuid();\n            if (this.nodesIndex[node.id]) throw 'node has existed.'\n            this.nodes.push(node);\n            this.nodesIndex[node.id] = node;\n        }\n\n        var ids = nodes.map(function (e) {return e.id});\n        this.emit('add',['node',ids]);\n    }\n\n\n    /**\n     * remove node\n     * @param nodeid\n     */\n    removeNode(nodeid) {\n        if (!nodeid || !this.nodesIndex[nodeid]) return;\n\n        var nodes = this.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].id == nodeid) {\n                nodes.splice(i, 1);\n                break\n            }\n        }\n        var edges;\n        edges = this.inEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        edges = this.outEdgesIndex[nodeid];\n        if (edges && edges.length > 0) {\n            edges = edges.slice();\n            edges.forEach(function (e) {\n                this.removeEdge(e);\n            }.bind(this));\n        }\n\n        this.nodesIndex[nodeid] = null;\n        this.inEdgesIndex[nodeid] = null;\n        this.outEdgesIndex[nodeid] = null;\n\n        this.emit('remove',['node',nodeid]);\n\n    }\n\n\n    /**\n     * add edges ,\n     * @param edges\n     */\n    addEdge(edges) {\n        edges = edges || [];\n\n        if(edges.length  == 0) return;\n\n        if (!utils.isArray(edges)) edges = [edges];\n\n        var edge;\n        for (var i = 0; i < edges.length; i++) {\n            edge = edges[i];\n            if (!edge.id) edge.id = utils.uuid();\n            if (this.edgesIndex[edge.id]) throw 'edge has existed.';\n            if (!edge.source || !this.nodesIndex[edge.source + '']) throw 'some edge has not source id or not a node of the id';\n            if (!edge.target || !this.nodesIndex[edge.target + '']) throw 'some edge has not target id or not a node of the id';\n\n            this.edges.push(edge);\n            this.edgesIndex[edge.id] = edge;\n\n            edge.source += '';\n            edge.target += '';\n\n            this.inEdgesIndex[edge.target] = this.inEdgesIndex[edge.target] || [];\n            this.inEdgesIndex[edge.target].push(edge.id);\n\n            this.outEdgesIndex[edge.source] = this.outEdgesIndex[edge.source] || [];\n            this.outEdgesIndex[edge.source].push(edge.id);\n        }\n\n        var ids = edges.map(function (e) {return e.id});\n        this.emit('add',['edge',ids]);\n    }\n\n\n    removeEdge(edgeid) {\n        if (!edgeid || !this.edgesIndex[edgeid]) return;\n\n        var edge = this.edgesIndex[edgeid], edges;\n        var outEdgesIndex, inEdgesIndex;\n\n\n        outEdgesIndex = this.outEdgesIndex[edge.source];\n        if (outEdgesIndex.length > 0) {\n            for (var i = 0; i < outEdgesIndex.length; i++) {\n                if (outEdgesIndex[i] == edgeid) {\n                    outEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        inEdgesIndex = this.inEdgesIndex[edge.target];\n        if (inEdgesIndex.length > 0) {\n            for (var i = 0; i < inEdgesIndex.length; i++) {\n                if (inEdgesIndex[i] == edgeid) {\n                    inEdgesIndex.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n\n        edges = this.edges;\n        for (var i = 0; i < edges.length; i++) {\n            if (edges[i].id == edgeid) {\n                edges.splice(i, 1);\n                break;\n            }\n        }\n\n        this.edgesIndex[edgeid] = null;\n        this.emit('remove',['edge',edgeid]);\n    }\n\n    getNodes(){\n        return this.nodes;\n    }\n\n    setNodeData(id,obj){\n        var node = this.nodesIndex[id];\n\n        var updatePos = false;\n        if(obj.hasOwnProperty('x') || obj.hasOwnProperty('y')) updatePos = true;\n\n        for(var attr in obj) node[attr] = obj[attr];\n\n        this.emit('change',['node',id]);\n        if(updatePos){\n            this.inEdgesIndex[id] && this.inEdgesIndex[id].length > 0 && this.emit('change',['edge',this.inEdgesIndex[id]]);\n            this.outEdgesIndex[id] && this.outEdgesIndex[id].length > 0 && this.emit('change',['edge',this.outEdgesIndex[id]]);\n        }\n    }\n\n    updateNodeQuad(id,oldpos){\n        var nodes = this.quad.point(oldpos.x,oldpos.y);\n        if(nodes.length > 0){\n            for(var i = 0,len = nodes.length;i<len;i++){\n                if(nodes[i].id == id){\n                    nodes.splice(i,1);\n                    break;\n                }\n            }\n            this.quad.insert(this.nodesIndex[id],this.quad.root);\n        }\n    }\n}\n\nexport default Graph;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Graph.js","/**\n * Created by chengang on 17-3-28.\n */\nvar mat3 = {};\n\nmat3.normalize = function () {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromTranslate = function(dx, dy) {\n    return [\n        1, 0, 0,\n        0, 1, 0,\n        dx, dy, 1\n    ];\n};\n\nmat3.matrixFromRotation = function(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle);\n\n    return  [\n        cos, sin, 0,\n        -sin, cos, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.matrixFromScale = function(x,y) {\n    return  [\n        x, 0, 0,\n        0, y, 0,\n        0, 0, 1\n    ];\n};\n\nmat3.invert = function (a) {\n    var l =  3,\n        a11 = a[0 * l + 0],\n        a12 = a[0 * l + 1],\n        a13 = a[0 * l + 2],\n        a21 = a[1 * l + 0],\n        a22 = a[1 * l + 1],\n        a23 = a[1 * l + 2],\n        a31 = a[2 * l + 0],\n        a32 = a[2 * l + 1],\n        a33 = a[2 * l + 2];\n\n    var del = a11*(a22*a33-a23*a32)-a12*(a21*a33-a23*a31)+a13*(a21*a32-a22*a31);\n\n    return [\n        (a22*a33-a23*a32)/del,(a13*a32-a12*a33)/del,(a12*a23-a13*a22)/del,\n        (a23*a31-a21*a33)/del,(a11*a33-a13*a31)/del,(a13*a21-a11*a23)/del,\n        (a21*a32-a22*a31)/del,(a12*a31-a11*a32)/del,(a11*a22-a12*a21)/del\n    ];\n}\n\nmat3.multiply = function(a, b) {\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2],\n        b00 = b[0 * l + 0],\n        b01 = b[0 * l + 1],\n        b02 = b[0 * l + 2],\n        b10 = b[1 * l + 0],\n        b11 = b[1 * l + 1],\n        b12 = b[1 * l + 2],\n        b20 = b[2 * l + 0],\n        b21 = b[2 * l + 1],\n        b22 = b[2 * l + 2];\n\n    return [\n        a00 * b00 + a01 * b10 + a02 * b20,\n        a00 * b01 + a01 * b11 + a02 * b21,\n        a00 * b02 + a01 * b12 + a02 * b22,\n        a10 * b00 + a11 * b10 + a12 * b20,\n        a10 * b01 + a11 * b11 + a12 * b21,\n        a10 * b02 + a11 * b12 + a12 * b22,\n        a20 * b00 + a21 * b10 + a22 * b20,\n        a20 * b01 + a21 * b11 + a22 * b21,\n        a20 * b02 + a21 * b12 + a22 * b22\n    ];\n};\n\nmat3.transformPoint = function (p,a) {\n    var x = p[0],\n        y = p[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10+a20,x*a01+y*a11+a21];\n}\n\nmat3.rotateVector = function (v,a) {\n    var x = v[0],\n        y = v[1];\n    var l =  3,\n        a00 = a[0 * l + 0],\n        a01 = a[0 * l + 1],\n        a02 = a[0 * l + 2],\n        a10 = a[1 * l + 0],\n        a11 = a[1 * l + 1],\n        a12 = a[1 * l + 2],\n        a20 = a[2 * l + 0],\n        a21 = a[2 * l + 1],\n        a22 = a[2 * l + 2];\n\n    return [x*a00+y*a10,x*a01+y*a11];\n};\n\n\nmat3.multiMatrix = function (matrixs) {\n    return matrixs.reduce(function (pre,cur) {\n        return mat3.multiply(pre,cur);\n    })\n};\n\nexport default mat3;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/Matrix.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport util from '../../util'\nimport mat3 from '../../base/Matrix'\nimport EventEmitter from '../../base/EventEmitter'\nimport TextureLoader from './TextureLoader'\nimport TextureText from './TextureText'\nimport TextureIcon from './TextureIcon'\nimport initEvent from '../../core/Event'\n\n\nclass WebGLRender extends EventEmitter{\n    constructor(graph,option) {\n        super();\n\n        this.option = option;\n\n        this.container = option.container;\n        this.graph = graph;\n        this.needUpdate = true;\n\n        this.sampleRatio = 1.5;\n\n        this.initRender();\n        this.initGraphChangeEvent();\n\n        this.initTexture = false;\n        this.textureLoader = new TextureLoader(this.gl);\n        this.textureLoader.on('load',this.textureUpdate.bind(this));\n\n        this.initTextureText();\n\n        this.textureText = new TextureText(this.gl);\n        this.initTextTexture();\n\n        this.projectMatrix = mat3.matrixFromScale(2/(this.gl.canvas.clientWidth),2/(this.gl.canvas.clientHeight));\n\n        this.camera = {\n            scale:1,\n            position:{\n                x:0,y:0\n            },\n            rotation:0\n        };\n\n        //cache\n        this.renderType = {\n            node: {index:{},type:{},cache:false},\n            nodeLabel: {index:{},type:{},cache:false},\n            edge: {index:{},type:{},cache:false},\n            edgeLabel: {index:{},type:{},cache:false}\n        };\n\n        initEvent.call(this);\n\n    }\n    //render\n    render() {\n        // debugger\n\n        var gl = this.gl;\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        if(!this.initTexture){\n            var imgs = {};\n            var nodes = this.graph.nodes;\n            nodes.forEach(function (node) {\n                node.img && (imgs[node.img] = true);\n            });\n\n            this.textureLoader.loadImgs(Object.keys(imgs));\n            this.initTexture = true;\n        }\n\n        // console.time('render')\n\n        // console.time('renderEdge');\n        this.option.renderEdge && this.renderEdge();\n        // console.timeEnd('renderEdge');\n\n        // console.time('renderEdgeLabel');\n        this.option.renderEdge && this.option.renderEdgeLabel && this.renderEdgeLabel();\n        // console.timeEnd('renderEdgeLabel');\n\n        // console.time('renderNode');\n        this.option.renderNode && this.renderNode();\n        // console.timeEnd('renderNode');\n\n        // console.time('renderNodeLabel');\n        this.option.renderNode && this.option.renderNodeLabel && this.renderNodeLabel();\n        // console.timeEnd('renderNodeLabel');\n\n\n        // console.timeEnd('render')\n\n\n        this.needUpdate = false;\n    }\n    renderNode(){\n        // debugger\n\n        this.createRenderCache('node',this.graph.nodes,function (data) {\n            return {\n                data:data,\n                textureLoader:this.textureLoader,\n                textureIcon:this.textureIcon\n            }\n        }.bind(this));\n\n        this.renderCacheData('node');\n    }\n    renderNodeLabel(){\n\n        this.createRenderCache('nodeLabel',this.graph.nodes,function (data) {\n            return {\n                data:data,\n                textureText:this.textureText\n            }\n        }.bind(this));\n\n        this.renderCacheData('nodeLabel');\n\n    }\n    renderEdge(){\n        this.createRenderCache('edge',this.graph.edges,function (data) {\n            return {\n                data:data,\n                source:this.graph.nodesIndex[data.source],\n                target:this.graph.nodesIndex[data.target]\n            }\n        }.bind(this));\n\n        this.renderCacheData('edge');\n    }\n    renderEdgeLabel(){\n\n        this.createRenderCache('edgeLabel',this.graph.edges,function (data) {\n            return {\n                data:data,\n                source:this.graph.nodesIndex[data.source],\n                target:this.graph.nodesIndex[data.target],\n                textureText:this.textureText\n            }\n        }.bind(this));\n\n        this.renderCacheData('edgeLabel');\n\n    }\n\n    clearClusterCacheCounter(type) {\n        var renderType = this.renderType[type].type;\n        var layers;\n        for (var e in renderType){\n            layers  = renderType[e].layers;\n            for(var name in layers){\n                layers[name].counter = 0;\n            }\n        }\n    }\n    fixClusterCacheLength(type){\n        var renderType = this.renderType[type].type;\n        var layers;\n        for (var e in renderType){\n            layers  = renderType[e].layers;\n            for(var name in layers){\n                layers[name].data.length = layers[name].counter;\n            }\n        }\n    }\n\n    createRenderCache(rootType,data,argFn){\n\n        var nodeData,cacheIndex;\n        var start,offset,layers,type;\n\n        var rootType1 = this.renderType[rootType].type;\n\n        if(!this.renderType[rootType].cache){\n            this.clearClusterCacheCounter(rootType);\n\n            data.forEach(function (e) {\n\n                type = e.type || 'default';\n                if (!rootType1[type]) this.initRenderLayers(rootType, type);\n\n                //cache info\n                cacheIndex = this.renderType[rootType].index[e.id] = this.renderType[rootType].index[e.id] || {};\n                cacheIndex.type = type;\n                cacheIndex.start = {};//layer start\n\n                layers = rootType1[type].layers;\n                for(var name in layers){\n\n                    start = layers[name].counter;\n                    offset = 0;\n\n                    nodeData = layers[name].render.getRenderData(argFn(e));\n\n                    // no data\n                    if(!nodeData || nodeData.length == 0){\n                        // cacheIndex.start[name] = null;\n                        continue;\n                    }\n\n                    nodeData.forEach(function (data) {\n                        layers[name].data[start+offset] = data;\n                        offset++;\n                    }.bind(this));\n\n                    //cache info\n                    cacheIndex.start[name] = start;\n\n                    layers[name].counter += offset;\n                }\n            }.bind(this));\n\n            this.fixClusterCacheLength(rootType);\n\n            this.renderType[rootType].cache = true;\n        }\n\n    }\n    renderCacheData(rootType){\n        var renderType,type,layers,camMatrixInvert;\n        renderType = this.renderType[rootType].type;\n\n        for(type in renderType){\n\n            layers = renderType[type].layers;\n\n            renderType[type].order.forEach(function (name) {\n\n                if(layers[name].data.length > 0){\n\n                    camMatrixInvert = this.getCameraMatrix(true);\n                    this.gl.useProgram(layers[name].program);\n\n                    layers[name].render.render({\n                        gl: this.gl,\n                        program: layers[name].program,\n                        data: layers[name].data,\n                        matrix: mat3.multiMatrix([camMatrixInvert, this.projectMatrix]),\n                        camera: this.camera,\n                        sampleRatio: this.sampleRatio,\n                        textureLoader: this.textureLoader,\n                    });\n\n                }\n\n            }.bind(this));\n        }\n    }\n\n    initRender() {\n        this.gl = this.container.getContext('experimental-webgl') || this.container.getContext('webgl');\n\n        if (!this.gl) {\n            throw '浏览器不支持webGl';\n        }\n\n        this.gl.getExtension('OES_standard_derivatives');\n\n        this.resizeCanvas(this.gl.canvas);\n        this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.clearColor(1.0, 1.0, 1.0, 1);\n    }\n    initGraphChangeEvent(){\n        var _this = this;\n        this.graph.on('change',function (type,ids) {\n            if(type =='node'){\n                // console.time('updateNode');\n                _this.option.renderNode && _this.updateNodeRenderData(ids);\n                // console.timeEnd('updateNode');\n                // console.time('updateNodeLabel');\n                _this.option.renderNode && _this.option.renderNodeLabel && _this.updateNodeLabelRenderData(ids);\n                // console.timeEnd('updateNodeLabel');\n            }else if(type == 'edge'){\n                // console.time('updateEdge');\n                _this.option.renderEdge && _this.updateEdgeRenderData(ids);\n                // console.timeEnd('updateEdge');\n                // console.time('updateEdgeLabel');\n                _this.option.renderEdge && _this.option.renderEdgeLabel && _this.updateEdgeLabelRenderData(ids);\n                // console.timeEnd('updateEdgeLabel');\n            }\n\n        });\n\n        this.graph.on('reset',function () {\n            _this.clearRenderCache()\n        });\n\n\n        this.graph.on('add',function (type,ids) {\n            if(!util.isArray(ids)) ids = [ids];\n\n            var objs = null;\n\n            if(type == 'node') objs = ids.map(function (e) {return _this.graph.nodesIndex[e]});\n            else objs = ids.map(function (e) {return _this.graph.edgesIndex[e]});\n\n            _this.textureText.addTexts(getAddText(objs));\n            _this.clearRenderCache();\n        });\n\n        this.graph.on('remove',function (type,ids) {\n            _this.clearRenderCache();\n        });\n\n\n        function getAddText(objs) {\n            var text = '';\n            objs.forEach(function (e) {\n                e.label && (text += e.label);\n            });\n\n            return text;\n        }\n        \n    }\n    initTextTexture(){\n        var nodes = this.graph.nodes;\n        var edges = this.graph.edges;\n\n        var map = {};\n        var texts = [];\n        nodes.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        edges.forEach(function (e) {\n            if(e.label){\n                var chars = e.label.split('');\n                chars.forEach(function (e) {\n                    if(e && !map[e]){\n                        map[e] = true;\n                        texts.push(e);\n                    }\n                })\n            }\n        });\n\n\n        this.textureText.createCanvasImg(texts);\n    }\n    initRenderLayers(root, type) {\n        var renderType = type;\n        var typeRoot = WebGLRender[root];\n\n        var renderRoot = this.renderType[root].type;\n\n        if(!typeRoot[type]){\n            console.error(`${root}: no type[${type}],use default`);\n            type = 'default';\n        }\n\n        var temp,layersConfig;\n        if(!renderRoot[renderType]){\n\n            layersConfig = typeRoot[type];\n            if(util.isFunction(layersConfig)){\n                layersConfig = {\n                    layers:[\n                        {name:'base',layer:layersConfig}\n                    ]\n                }\n            }\n            renderRoot[renderType] = {layers:{},order:[]};\n            layersConfig.layers.forEach(function (config) {\n                temp = {};\n                temp.counter = 0;\n                temp.data = [];\n                temp.render = new config.layer();\n                temp.program = util.loadProgram(this.gl, [\n                    util.loadShader(this.gl, temp.render.shaderVert, this.gl.VERTEX_SHADER),\n                    util.loadShader(this.gl, temp.render.shaderFrag, this.gl.FRAGMENT_SHADER)\n                ]);\n                renderRoot[renderType].layers[config.name] = temp;\n                renderRoot[renderType].order.push(config.name);\n            }.bind(this));\n\n        }\n    }\n    initTextureText(){\n\n        var nodes = this.graph.nodes;\n\n        var map = {};\n        var icons = [];\n        nodes.forEach(function (e) {\n            if(e.icon){\n                if(!map[e.icon]){\n                    map[e.icon] = true;\n                    icons.push(e.icon);\n                }\n            }\n        });\n\n        this.textureIcon = new TextureIcon(this.gl,this.option);\n\n        this.textureIcon.createIcons(icons);\n\n        this.textureIcon.on('load',function () {\n            this.clearRenderCache('node');\n        }.bind(this))\n    }\n\n    getCameraMatrix(isInvert){\n        var mat = mat3.multiMatrix([\n            mat3.matrixFromScale(this.camera.scale,this.camera.scale),\n            mat3.matrixFromRotation(this.camera.rotation),\n            mat3.matrixFromTranslate(this.camera.position.x,this.camera.position.y)\n        ]);\n        return isInvert  ? mat3.invert(mat) : mat;\n    }\n    resizeCanvas(canvas) {\n        var multiplier = this.sampleRatio;\n        var width = canvas.clientWidth * multiplier | 0;\n        var height = canvas.clientHeight * multiplier | 0;\n        if (canvas.width !== width || canvas.height !== height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n    }\n\n    toCameraPos(pos){\n        var canvas = this.gl.canvas;\n        return {x:pos.x-canvas.clientWidth/2,y:canvas.clientHeight/2-pos.y};\n    }\n    toGraphPos(pos,isVector){\n        var p = isVector ?\n            mat3.rotateVector([pos.x,pos.y],this.getCameraMatrix())\n            :\n            mat3.transformPoint([pos.x,pos.y],this.getCameraMatrix());\n        return {x:p[0],y:p[1]};\n    }\n\n    forceRender(){\n        this.needUpdate = true;\n    }\n    zoomTo(ratio,x,y){\n\n        var scale = this.camera.scale;\n\n        var newscale = ratio * scale;\n        if(newscale < this.option.zoomMin) newscale = this.option.zoomMin;\n        if(newscale > this.option.zoomMax) newscale = this.option.zoomMax;\n\n        if (x != null && y != null) {\n            var offset = mat3.rotateVector([x * (newscale - scale)/scale, y *(newscale - scale)/scale], this.getCameraMatrix());\n            this.camera.position.x -= offset[0] ;\n            this.camera.position.y -= offset[1];\n        }\n\n        this.camera.scale = newscale;\n    }\n    textureUpdate(url){\n        var nodes = this.graph.nodes;\n        nodes.forEach(function (e) {\n            if(e.img && e.img == url) this.updateNodeRenderData(e.id);\n        }.bind(this));\n    }\n\n    //cache update\n    clearRenderCache(rootType){\n        if(rootType　&& this.renderType[rootType]){\n            this.forceRender();\n            this.renderType[rootType].cache = false;\n        }else if(!rootType){\n            this.forceRender();\n            this.renderType.node.cache = false;\n            this.renderType.nodeLabel.cache = false;\n            this.renderType.edge.cache = false;\n            this.renderType.edgeLabel.cache = false;\n        }\n    }\n    updateRenderData(rootType,id,argFn){\n        // this.clearRenderCache();return;\n\n        if(!this.renderType[rootType].cache) return;\n\n        var cache = this.renderType[rootType].index[id];//\n        var type = cache.type;\n        var start = cache.start;\n\n        var renderType = this.renderType[rootType].type[type];\n\n        for(var layer in renderType.layers){\n            var renderData = renderType.layers[layer].render.getRenderData(argFn());\n\n\n            if (\n                (!renderData || renderData.length == 0)\n                ||\n                (renderData && renderData.length > 0 && start[layer] === null)\n            ) continue;\n\n            renderData.forEach(function (e,i) {\n                renderType.layers[layer].data[start[layer]+i] = e;\n            });\n        }\n    }\n    updateNodeRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('node',id,function () {\n                return {\n                    data:this.graph.nodesIndex[id],\n                    textureLoader:this.textureLoader,\n                    textureIcon:this.textureIcon\n                }\n            }.bind(this));\n\n        }.bind(this));\n\n    }\n    updateNodeLabelRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('nodeLabel',id,function () {\n                return {\n                    data:this.graph.nodesIndex[id],\n                    textureText:this.textureText\n                }\n            }.bind(this));\n        }.bind(this));\n\n    }\n    updateEdgeRenderData(ids){\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('edge',id,function () {\n                return {\n                    data:this.graph.edgesIndex[id],\n                    source:this.graph.nodesIndex[this.graph.edgesIndex[id].source],\n                    target:this.graph.nodesIndex[this.graph.edgesIndex[id].target]\n                }\n            }.bind(this));\n        }.bind(this));\n    }\n    updateEdgeLabelRenderData(ids){\n        // debugger\n        this.forceRender();\n        if(!Array.isArray(ids)) ids = [ids];\n        ids.forEach(function (id) {\n            this.updateRenderData('edgeLabel',id,function () {\n                return {\n                    data:this.graph.edgesIndex[id],\n                    source:this.graph.nodesIndex[this.graph.edgesIndex[id].source],\n                    target:this.graph.nodesIndex[this.graph.edgesIndex[id].target],\n                    textureText:this.textureText\n                }\n            }.bind(this));\n        }.bind(this));\n\n    }\n\n\n\n}\n\nexport default WebGLRender;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/render.js","module.exports = \" precision mediump float;\\n\\nvec4 color = vec4(77, 72, 91,255);\\n\\nvarying vec2 v_texCoord;\\nuniform sampler2D u_image;\\n\\n\\nvoid main() {\\n    color = color / 255.0;\\n   vec4 color0 = texture2D(u_image, v_texCoord);\\n   gl_FragColor = color * color0.w;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/label-frag.glsl\n// module id = 7\n// module chunks = 0","/**\n * Created by chengang on 17-4-6.\n */\nimport Graph from './Graph'\nimport WebGLRender from  '../render/webgl/render'\nimport utils from '../util'\n\nimport Tween from '../animation/tween'\n\nimport layout from '../layout/index'\n\nimport defaultConfig from './config'\n\nexport  default  class Core{\n\n    static layout = layout;\n\n    constructor(option){\n        option = option || {};\n\n        this.selected = [];\n\n        this.option = utils.extend(defaultConfig,option.config || {});\n\n        this.graph  = new Graph({\n            nodes:option.nodes,\n            edges:option.edges,\n        });\n\n        this.render = new WebGLRender(\n            this.graph,\n            utils.extend({container:option.container},this.option)\n        );\n\n        this.on = this.render.on.bind(this.render);\n        this.off = this.render.off.bind(this.render);\n\n        this.makeLayout(option.layout || 'preset');\n\n        this._start();\n\n        this._initEvent();\n    }\n\n    _start(){\n        var _this = this;\n        var frames = state();\n        function state() {\n            var n = -1,start = 0;\n            return function (time) {\n                n++;\n                time = time/1000;\n                if((time - start) > 1){\n                    console.log(n);\n                    n = -1;\n                    start = time;\n                }\n\n            }\n        }\n        function render(time) {\n            _this._render();\n            frames(time);\n            requestAnimationFrame(render)\n        }\n        requestAnimationFrame(render);\n    }\n\n    _render(){\n\n        if(this.render && this.render.needUpdate){\n            // console.time('render')\n            // debugger\n            this.render.render();\n            // console.timeEnd('render')\n        }\n\n\n    }\n\n\n    _initEvent(){\n        var _this = this;\n        this.render.on('nodeclick',function (node,e) {\n            _this.selected.forEach(function (e) {\n                if(_this.graph.nodesIndex[e.id])\n                _this.graph.setNodeData(e.id,{selected:false});\n            });\n\n            _this.selected = [node];\n            _this.graph.setNodeData(node.id,{selected:true});\n        });\n    }\n\n    makeLayout(type){\n\n        var _this = this;\n        var layout,data;\n        var layoutConfig = Core.layout;\n\n        if (type == 'preset') {\n            this.graph.nodes.forEach(function (e) {\n                if (!('x' in e)) e.x = Math.random() * _this.render.gl.clientWidth;\n                if (!('y' in e)) e.y = Math.random() * _this.render.gl.clientWidth;\n            });\n\n            this.graph.emit('reset');\n        } else if (layout = layoutConfig[type]) {\n\n            layout = new layoutConfig[type]();\n            data = layout.layout(this.graph);\n\n            Tween(this.graph.nodes).to(data).duration(2000).on('change', function (t) {\n                _this.graph.emit('reset');\n            })\n        }\n    }\n\n    getSelection(){\n        var _this = this;\n        var nodes = this.selected.filter(function (e) {\n            return _this.graph.nodesIndex[e.id];\n        })\n        return nodes;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","/**\n * Created by chengang on 17-3-28.\n */\n\n\nimport WebGLRender from './webgl/render'\nWebGLRender.node = {};\nWebGLRender.edge = {};\nWebGLRender.nodeLabel = {};\nWebGLRender.edgeLabel = {};\n\nimport node from './webgl/node/index'\nimport edge from './webgl/edge/default'\nWebGLRender.node.default = node;\nWebGLRender.edge.default = edge;\n\nimport NodeLabel from './webgl/label/NodeLabel'\nimport EdgeLabel from './webgl/label/EdgeLabel'\nWebGLRender.nodeLabel.default = NodeLabel;\nWebGLRender.edgeLabel.default = EdgeLabel;\n\n\nexport {\n    WebGLRender\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","/**\n * Created by chengang on 17-2-16.\n */\n\n'use strict';\n\nimport EventEmiter from '../graph/eventEmiter';\n\nexport  default function Tween(objs) {\n    if(!(this instanceof Tween)){\n        return new Tween(objs);\n    }\n\n    EventEmiter.init(this);\n\n    if(!Array.isArray(objs)) objs = [objs];\n    this.objs = objs;\n    this.interpolates = [];\n    this.timer = d3.timer(this.timerHandle.bind(this));\n    this._duration = 0;\n}\nvar p = Tween.prototype;\n\np.timerHandle = function (elapsed) {\n    var t = elapsed / this._duration;\n\n    t = Math.min(t,1);\n    var obj,attr,attrInterpolater;\n    for(var i = 0,len = Math.min(this.interpolates.length,this.objs.length);i< len;i++){\n        obj = this.objs[i];\n        attrInterpolater = this.interpolates[i];\n        for(attr in attrInterpolater){\n            obj[attr] = attrInterpolater[attr](t);\n        }\n    }\n\n    this.emit('change',[t]);\n\n    if(elapsed >=this._duration) this.stop();\n\n};\n\np.duration = function (time) {\n    this._duration = time;\n    return this;\n};\np.to = function (toObjs) {\n    var interpolateNumber = d3.interpolateNumber;\n    if(!Array.isArray(toObjs)) toObjs = [toObjs];\n\n    var obj,attr,attrInterpolater;\n    for(var i = 0,len = Math.min(toObjs.length,this.objs.length);i<len;i++){\n        obj = toObjs[i];\n        attrInterpolater = {};\n        for(attr in obj){\n            attrInterpolater[attr] = interpolateNumber(this.objs[i][attr],obj[attr]);\n        }\n        this.interpolates.push(attrInterpolater);\n    }\n\n    return this;\n\n};\n\np.stop = function () {\n    this.timer.stop();\n    this.timer = null;\n    this.objs = null;\n    this.interpolates = null\n}\n\n\n// WEBPACK FOOTER //\n// ./src/animation/tween.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default {\n    zoomRatio:1.2,\n    zoomMin:0.2,\n    zoomMax:5,\n\n    renderNode:true,\n    renderNodeLabel:true,\n    renderEdge:true,\n    renderEdgeLabel:true,\n\n    textureIconWidth:400,\n    textureIconHeight:400,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","/**\n * Created by chengang on 17-2-16.\n */\n\nexport default\nfunction EventEmitter() {\n    this._listener = {};\n}\n\nEventEmitter.prototype.on=function (type,cb) {\n    if(!type || !cb) return;\n    this._listener[type] = this._listener[type] || [];\n\n    var listener = this._listener[type];\n    for(var i = 0,len = listener.length; i < len;i++){\n        if(cb == listener[i]) return;\n    }\n\n    this._listener[type].push(cb);\n    return cb;\n};\nEventEmitter.prototype.off = function (type,cb) {\n    if(!type) return;\n    var listener;\n    if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n    if(cb){\n        for(var i = 0,len = listener.length; i < len;i++){\n            if(cb == listener[i]){\n                listener.splice(i,1);\n                break;\n            }\n        }\n    }else {\n        this._listener[type] = [];\n    }\n};\nEventEmitter.prototype.emit = function (type,args) {\n    if(!type) return;\n    var listener,fn;\n    if(!(listener = this._listener[type]) || listener.length < 1) return;\n\n    listener = listener.slice();\n\n    for(var i = 0,len = listener.length;i< len;i++){\n        fn = listener[i];\n        fn.apply(null,args);\n    }\n};\nEventEmitter.init = function (target){\n    EventEmitter.call(target);\n    var p = EventEmitter.prototype;\n    target.on = p.on;\n    target.off = p.off;\n    target.emit = target.dispatch = p.emit;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/graph/eventEmiter.js","/**\n * Created by chengang on 17-2-20.\n */\nfunction CircularLayout() {\n    this.nodes = null;\n    // this.links = null;\n     this.posSet = null;\n     this.depthPosSet = null;\n     this.drawnBiComps =null;\n     this.bc = null;\n     this.nodeHeights = {};\n     this.node2BiComp = {};\n\n}\n\nvar p = CircularLayout.prototype;\n\n//必须有的方法\np.layout = function (graph) {\n    this.init(graph);\n\n    this.posSet = new Array(this.nodes.length);\n    this.depthPosSet = new Array(this.nodes.length);\n\n    this.bc = this.createBicconnects();\n    // var test = this.bc.filter(function (e) {\n    //     return e.length > 3;\n    // });\n    this.__layout(this.bc);\n    return this.nodes.map(function (e) {\n        return {x:e.x,y:e.y};\n    })\n};\np.init = function (graph) {\n    var oldNodes = graph.nodes,oldLinks = graph.edges;\n    var tempNodes = [],map = {},temp;\n    oldNodes.forEach(function (e,i) {\n        temp = {\n            id:e.id,\n            _index:i\n        };\n        tempNodes.push(temp);\n        map[temp.id] = temp;\n    })\n\n    var s,t;\n    oldLinks.forEach(function (e,i) {\n        s = map[e.source];\n        t = map[e.target];\n        s.links = s.links || [];\n        s.links.push(t._index);\n\n        t.links = t.links || [];\n        t.links.push(s._index);\n    });\n\n    this.nodes = tempNodes;\n};\np.createBicconnects = function() {\n    var nodes = this.nodes;\n    var states = new Array(this.nodes.length),\n        dfsn = new Array(this.nodes.length),\n        low = new Array(this.nodes.length),\n        edgesStack = [],\n        pre = new Array(this.nodes.length);\n\n    var biComponents = [];\n\n    pre[0] = -1;\n    var num = 0;\n    for (var i = 0; i < this.nodes.length; i++) {\n        states[i] = 0;\n    }\n\n    dfs(0);\n    return biComponents;\n\n    function dfs(current) {\n        states[current] = 1;\n        low[current] = dfsn[current] = ++num;\n\n        var neigh;\n        var neighNodes = nodes[current].links;\n\n        for (var i = 0; i < neighNodes.length; i++) {\n            neigh = neighNodes[i];\n\n            if (states[neigh] == 0) {\n                pre[neigh] = current;\n                edgesStack.push({source: current, target: neigh});\n                dfs(neigh);\n                low[current] = Math.min(low[current], low[neigh]);\n\n                if ((pre[current] == -1 && nodes[current].links.length >= 2) || low[neigh] >= dfsn[current]) {\n//                        var children = nodes[current].links;\n//                        if(children.length >=2){\n                    var singleComponent = [];\n                    var map = {};\n                    singleComponent.push(edgesStack[edgesStack.length - 1].target);\n                    map[edgesStack[edgesStack.length - 1].target] = true;\n                    while (edgesStack[edgesStack.length - 1].source != current) {\n                        var edge = edgesStack.pop();\n                        if (!map[edge.source]) {\n                            singleComponent.push(edge.source);\n                            map[edge.source] = true;\n                        }\n                        if (!map[edge.target]) {\n                            singleComponent.push(edge.target);\n                            map[edge.target] = true;\n                        }\n                    }\n                    edgesStack.pop();\n                    if (!map[current]) {\n                        singleComponent.push(current);\n                        map[current] = true;\n                    }\n                    /*singleComponent.length > 2 && */biComponents.push(singleComponent);\n//                        }\n                }\n//                    states[neigh]\n            } else if (neigh != pre[current]) {\n                low[current] = Math.min(low[current], low[neigh]);\n            }\n        }\n\n\n    }\n};\np.__layout = function(biconncts) {\n\n\n    var max = -1;\n    var maxIndex = null;\n    var nodes = this.nodes;\n\n    biconncts.forEach(function (e, i) {\n        if (e.length > max) {\n            max = e.length;\n            maxIndex = i;\n        }\n    });\n\n    biconncts[maxIndex].forEach(function (e) {\n        nodes[e].delete = true;\n    });\n\n    for (var i = 0; i < biconncts.length; i++)\n        if (biconncts[i].length > 3) {\n            for (var j = 0; j < biconncts[i].length; j++) {\n                this.node2BiComp[biconncts[i][j]] = i;\n            }\n        }\n\n    var bc = biconncts[maxIndex];\n\n    this.drawnBiComps = new Array(bc.length);\n    this.drawnBiComps[maxIndex] = true;\n\n\n\n    var maxSize = bc.length;\n    var radius = (48 * maxSize) / (Math.PI * 2);\n    var deltaAngle = (2 * Math.PI) / maxSize;\n    var angle = 0;\n\n    var startX = radius | 0;\n    var startY = radius | 0;\n\n\n    bc = this.sortInnerCircle(bc);\n\n    for (var i = 0; i < bc.length; i++) {\n        nodes[bc[i]].test = i;\n        nodes[bc[i]].x = startX + Math.cos(angle) * radius;\n        nodes[bc[i]].y = startY - Math.sin(angle) * radius;\n        this.posSet[bc[i]] = true;\n        angle += deltaAngle;\n    }\n\n    this.SetOuterCircle(maxIndex, radius, startX, startY, -1);\n};\np.sortInnerCircle = function(icNodes) {\n    var greedyNodes = [];\n    var modestNodes = [];\n\n    var forFunct = {};\n\n    for (var i = 0; i < icNodes.length; i++)\n        forFunct[icNodes[i]] = true;\n\n    for (var i = 0; i < icNodes.length; i++) {\n        var tmp = this.NoOfChildren(icNodes[i], forFunct);\n\n        if (tmp > 4)\n            greedyNodes.push(icNodes[i]);\n        else\n            modestNodes.push(icNodes[i]);\n    }\n\n    var toReturn = new Array(icNodes.length);\n    var gNo = greedyNodes.length;\n    var mNo = modestNodes.length;\n    var deltaM;\n    var deltaG;\n\n    if (gNo == 0) {\n        deltaM = mNo;\n        deltaG = 0;\n    } else if (mNo == 0) {\n        deltaG = gNo;\n        deltaM = 0;\n    } else if (gNo > mNo) {\n        deltaM = 1;\n        deltaG = (gNo / mNo) | 0 ;\n    } else {\n        deltaG = 1;\n        deltaM = (mNo / gNo ) | 0;\n    }\n\n    var x = 0;\n    var i, g, m;\n    for (g = 0, m = 0; g < greedyNodes.length && m < modestNodes.length;) {\n        for (i = 0; i < deltaG && g < greedyNodes.length; i++)\n            toReturn[x++] = greedyNodes[g++];\n\n        for (i = 0; i < deltaM && m < modestNodes.length; i++)\n            toReturn[x++] = modestNodes[m++];\n    }\n\n    while (g < greedyNodes.length)\n        toReturn[x++] = greedyNodes[g++];\n\n    while (m < modestNodes.length)\n        toReturn[x++] = modestNodes[m++];\n    return toReturn;\n\n};\np.NoOfChildren = function(nodeId, outerCircle) {\n    var toReturn = 0;\n    var nodes = this.nodes;\n    var links = nodes[nodeId].links;\n\n    for (var i = 0; i < links.length; i++) {\n        var currNeigh = links[i];\n\n        if (!this.posSet[currNeigh] && !outerCircle[currNeigh])\n            toReturn++;\n    }\n\n    if (toReturn > 7)\n        toReturn = 7;\n\n    return toReturn;\n};\np.SetOuterCircle = function(compIndex, innerCircleRadius, startX, startY, firstTouched) {\n    var nodes = this.nodes;\n    var outerNodesCount = 0;\n    var rnc = 0;\n    var iter;\n    var outerCircle = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        for (var j = 0 ;j< iter.length;j++) {\n            var currNeighbour = iter[j];\n\n            if (!this.posSet[currNeighbour]) {\n                outerNodesCount += (this.NoOfChildren(currNeighbour, outerCircle) + 1);\n                outerCircle[currNeighbour] = true;\n                rnc++;\n            }\n        }\n    }\n\n    var outerRadius = 1.5 * innerCircleRadius;\n\n    // + 5 * nodeHorizontalSpacing;\n    var tryCount = ((2 * Math.PI * outerRadius) / 32) | 0;\n    var outerDeltaAngle = (2 * Math.PI) / tryCount;\n\n    if (tryCount < (1.2 * outerNodesCount)) {\n        outerRadius = (1.2 * 32 * outerNodesCount) / (2 * Math.PI);\n        outerDeltaAngle = (2 * Math.PI) / (1.2 * outerNodesCount);\n        outerNodesCount *= 1.2;\n    } else\n        outerNodesCount = tryCount;\n\n    if ((outerNodesCount > 10) && (firstTouched != -1))\n        outerNodesCount += 5;\n\n    // 5 places on outer circle for connection with other biconn. comp.\n    //System.out.println(\"tryCount = \" + tryCount);\n\n    // setting nodes on outer circle\n    outerNodesCount = outerNodesCount | 0;\n    var outerPositionsTaken = new Array(outerNodesCount);\n    var outerPositionsOwners = new Array(outerNodesCount);\n\n    for (var i = 0; i < outerPositionsTaken.length; i++) {\n        outerPositionsTaken[i] = -1;\n        outerPositionsOwners[i] = -1;\n    }\n\n    var pointX;\n    var pointY;\n    var theAngle;\n    var theAngleHlp;\n    var innerDeltaAngle;\n    innerDeltaAngle = (2 * Math.PI) / this.bc[compIndex].length;\n\n    if (firstTouched != -1) {\n        pointX = nodes[firstTouched].x;\n        pointY = nodes[firstTouched].y;\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n        var idPos = ((theAngle / outerDeltaAngle) | 0) % outerPositionsTaken.length;\n        outerPositionsTaken[idPos] = (theAngle / innerDeltaAngle) | 0;\n        outerPositionsOwners[idPos] = -2; // must not be even moved because that node is coming from another bicomp.\n\n        if (outerPositionsTaken.length > 10) {\n            outerPositionsTaken[(idPos + 1) % outerPositionsTaken.length] = (theAngle / innerDeltaAngle) | 0;\n            outerPositionsTaken[(idPos + 2) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 1 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n            outerPositionsTaken[(idPos - 2 + outerPositionsTaken.length) % outerPositionsTaken.length] = 0| (theAngle / innerDeltaAngle);\n\n            outerPositionsOwners[(idPos + 1) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos + 2) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 1 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n            outerPositionsOwners[(idPos - 2 + outerPositionsOwners.length) % outerPositionsOwners.length] = -2;\n        }\n    }\n\n    var addedNeighbours = {};\n\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n        var noOfNeighbours = 0;\n\n        for (var j = 0; j < iter.length;j++) {\n            currentNeighbour = iter[j];\n\n            if (!this.posSet[currentNeighbour]) {\n                noOfNeighbours += (this.NoOfChildren(currentNeighbour, addedNeighbours) + 1);\n                addedNeighbours[currentNeighbour]= true;\n            }\n        }\n\n        if (noOfNeighbours == 0)\n            continue;\n\n        pointX = nodes[this.bc[compIndex][i]].x;\n        pointY = nodes[this.bc[compIndex][i]].y;\n\n        theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n        theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                - startX))\n                + ((pointY - startY) * (pointY\n                - startY))));\n\n        if (theAngleHlp > (Math.PI / 2))\n            theAngle = Math.PI - theAngle;\n\n        if (theAngle < 0)\n            theAngle += (2 * Math.PI);\n\n//\t\t\titer = edgesFrom[this.bc[compIndex][i]].iterator();\n\n        var startPos = this.BestFreePositionsForAll(0| ((theAngle / outerDeltaAngle)\n            - (noOfNeighbours / 2.0)), outerPositionsTaken,\n            outerPositionsOwners, noOfNeighbours,\n            0| (theAngle / innerDeltaAngle), startX,\n            startY, outerDeltaAngle, outerRadius,\n            this.bc[compIndex].length);\n        var startAngle = startPos * outerDeltaAngle;\n\n        if (startAngle < 0)\n            continue;\n\n//\t\t\titer = nodes[this.bc[compIndex][i]].iterator();\n\n        for (var m = 0;m< iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour]) {\n                this.posSet[currentNeighbour] = true;\n\n                var holeDepth = this.NoOfChildren(currentNeighbour, addedNeighbours);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    // free but it must not be used (add. space for tree-like struct.)\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n\n\n                nodes[currentNeighbour].x = startX + (Math.cos(startAngle) * outerRadius);\n                nodes[currentNeighbour].y = startY - (Math.sin(startAngle) * outerRadius);\n\n                outerPositionsOwners[(startPos) % outerPositionsOwners.length] = currentNeighbour;\n                outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                startPos++;\n                startAngle += outerDeltaAngle;\n\n                if (startAngle > (2 * Math.PI))\n                    startAngle -= (2 * Math.PI);\n\n                for (var j = 0; j < (holeDepth / 2); j++) {\n                    outerPositionsOwners[(startPos) % outerPositionsOwners.length] = -3;\n                    outerPositionsTaken[(startPos) % outerPositionsOwners.length] = 0| (theAngle / innerDeltaAngle);\n                    startPos++;\n                    startAngle += outerDeltaAngle;\n\n                    if (startAngle > (2 * Math.PI))\n                        startAngle -= (2 * Math.PI);\n                }\n            }\n        }\n    }\n\n    // laying out the rest of nodes\n    for (var i = 0; i < this.bc[compIndex].length; i++) {\n        iter = nodes[this.bc[compIndex][i]].links;\n\n        var currentNeighbour;\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!addedNeighbours[currentNeighbour]) {\n                continue;\n            }\n\n            pointX = nodes[currentNeighbour].x;\n            pointY = nodes[currentNeighbour].y;\n\n            theAngle = Math.asin((startY - pointY) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n            theAngleHlp = Math.acos((pointX - startX) / Math.sqrt(((pointX - startX) * (pointX\n                    - startX))\n                    + ((pointY - startY) * (pointY\n                    - startY))));\n\n            if (theAngleHlp > (Math.PI / 2))\n                theAngle = Math.PI - theAngle;\n\n            if (theAngle < 0)\n                theAngle += (2 * Math.PI);\n\n            for (var j = 0; j < this.posSet.length; j++)\n                this.depthPosSet[j] = this.posSet[j];\n\n            this.EachNodeHeight(currentNeighbour);\n\n            this.DFSSetPos(currentNeighbour, theAngle, outerRadius - innerCircleRadius);\n        }\n    }\n};\np.BestFreePositionsForAll = function(idealPosition, outerPositionsTaken, outerPositionsOwners, noOfPos,\n                                 innerCirclePos, startX, startY,\n                                 outerDeltaAngle, outerRadius, innerCSize) {\n    var startPos = idealPosition;\n    var nodes = this.nodes;\n\n    if (idealPosition < 0)\n        startPos += outerPositionsTaken.length;\n\n    var i = 0;\n    var alreadyFound = 0;\n    var startOfAlFound = -1;\n    var found = false;\n    var goDown = false;\n    var goUp = false;\n\n    //An infinite loop occurs when there is no place in the outerPositionsTaken array where all the number\n    //of positions that we need (noOfPos) can fit contiguously. In such a case, an infinite loop occurs.\n    //Experiment: Create a count. If the count exceeds outPositionsTaken.length, then we have looked at every\n    //possible startPos. Set startPos to the best startPos (meaning, the most contingious spaces) and set found\n    //to true.\n\n    //Experiment: int goUpCount = 0;\n    var goUpCount = 0;\n    //Experiment: int biggestGap = 0;\n    var biggestGap = 0;\n    //Experiment: int bestStartPos;\n    var bestStartPos = 0;\n\n    while (!found && !(goUp && goDown)) {\n        //System.out.print(startPos + \" \");\n        for (i = startPos;\n             (i < (startPos + noOfPos))\n             && (outerPositionsTaken[i % outerPositionsTaken.length] == -1); i++) {\n        }\n\n        if (i < (startPos + noOfPos)) {\n            if (((outerPositionsTaken[i % outerPositionsTaken.length] > innerCirclePos)\n                && ((outerPositionsTaken[i % outerPositionsTaken.length] - innerCirclePos) < (0.7 * innerCSize)))\n                || ((innerCirclePos - outerPositionsTaken[i % outerPositionsTaken.length]) > (0.7 * innerCSize))) {\n                alreadyFound = (i - startPos + outerPositionsTaken.length) % outerPositionsTaken.length;\n                startOfAlFound = startPos;\n                startPos -= (noOfPos - alreadyFound);\n\n                if (startPos < 0)\n                    startPos += outerPositionsTaken.length;\n\n                goDown = true;\n            } else {\n                //Experiment: goUpCount++;\n                goUpCount++;\n                //Experiment: int thisGap = i - startPos;\n                var thisGap = i - startPos;\n                //Experiment: if( thisGap > biggestGap )\n                if (thisGap > biggestGap) {\n                    biggestGap = thisGap;\n                    bestStartPos = startPos;\n                }\n                //Experiment: if( count > outerPositionsTaken.length )\n                if (goUpCount > outerPositionsTaken.length * 3) {\n                    startPos = bestStartPos;\n                    found = true;\n                }\n                //Experiment: else\n                else {\n                    startPos = (i + 1) % outerPositionsTaken.length;\n                    goUp = true;\n                }\n            }\n        } else\n            found = true;\n    }\n\n    if (goUp && goDown) {\n        i = startOfAlFound - 1;\n\n        var j = i - 1;\n        var count = 0;\n        //System.out.print(j + \" \");\n\n        var index = (i % outerPositionsTaken.length + outerPositionsTaken.length) % outerPositionsTaken.length;\n        if (((outerPositionsTaken[index] > innerCirclePos)\n            && ((outerPositionsTaken[index] - innerCirclePos) < (0.7 * innerCSize)))\n            || ((innerCirclePos - outerPositionsTaken[index]) > (0.7 * innerCSize))) {\n            j--;\n            i--;\n        }\n\n        while (count < (noOfPos - alreadyFound)) {\n            //System.out.print(j + \" \");\n\n            if (outerPositionsTaken[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -1) {\n                // move all for one place left\n                //\tSystem.out.print(\" moving \");\n                if (outerPositionsOwners[(j + outerPositionsTaken.length) % outerPositionsTaken.length] == -2) {\n                    //System.out.println(\"BUUUUUUUUUUUUUUUUUUU\");\n\n                    return -1;\n                }\n\n                for (var k = j; k < (i - count); k++) {\n                    if (outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length] > 0)\n                    {\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].x = startX + (Math.cos(outerDeltaAngle * k) * outerRadius);\n                        nodes[outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length]].y = startY - (Math.sin(outerDeltaAngle * k) * outerRadius);\n                    }\n\n\n                    outerPositionsOwners[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsOwners[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                    outerPositionsTaken[(k + outerPositionsTaken.length) % outerPositionsTaken.length] = outerPositionsTaken[(k + 1 + outerPositionsTaken.length) % outerPositionsTaken.length];\n                }\n\n                count++;\n            }\n\n            j--;\n        }\n\n        startPos = (i - count + 1 + outerPositionsOwners.length) % outerPositionsOwners.length;\n    }\n\n    /*    for (i = startPos; i < startPos + noOfPos; i++)\n     {\n     outerPositionsTaken[i % outerPositionsTaken.length] = innerCirclePos;\n     }*/\n    return startPos;\n\n};\np.EachNodeHeight = function(nodeID) {\n    var nodes = this.nodes;\n    var links = nodes[nodeID].links;\n    var currentNeighbour;\n    var noOfChildren = 0;\n    var tmp = {};\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (!this.depthPosSet[currentNeighbour] && !tmp[currentNeighbour]) {\n            this.depthPosSet[currentNeighbour] = true;\n            tmp[currentNeighbour] = true;\n        }\n    }\n\n\n    for (var m = 0;m < links.length;m++) {\n        currentNeighbour = links[m];\n\n        if (tmp[currentNeighbour]) {\n            noOfChildren += this.EachNodeHeight(currentNeighbour);\n        }\n    }\n\n//\t\tif (this.nodeHeights[nodeID])\n//\t\t\tthis.nodeHeights.remove(Integer.valueOf(nodeID));\n\n    this.nodeHeights[nodeID] = noOfChildren;\n\n    return (noOfChildren + 1);\n};\np.DFSSetPos = function( nodeID, theAngle,  theRadius) {\n    var component = this.node2BiComp[nodeID];\n    var nodes = this.nodes;\n    if (component != undefined && !this.drawnBiComps[component]) {\n        var comp = component;\n        var centerX =nodes[nodeID].x;\n        var centerY = nodes[nodeID].y;\n        var radius = (48 * this.bc[comp].length) / (2 * Math.PI);\n        var deltaAngle = (2 * Math.PI) / this.bc[comp].length;\n        var currAngle = theAngle - Math.PI - deltaAngle;\n\n        if (currAngle < 0)\n            currAngle += (2 * Math.PI);\n\n        centerX += (Math.cos(theAngle) * radius * 4.0);\n        centerY -= (Math.sin(theAngle) * radius * 4.0);\n\n        this.drawnBiComps[comp] = true;\n\n        // sorting nodes on inner circle\n        this.bc[comp] = this.sortInnerCircle(this.bc[comp]);\n\n        /*if (this.bc[comp].length > 20)\n         this.bc[comp] = ReduceInnerCircleCrossings(this.bc[comp]);*/\n        var oneAtLeast = false;\n\n        for (var i = 0; i < this.bc[comp].length; i++) {\n            if (this.posSet[this.bc[comp][i]])\n                continue;\n\n\n            nodes[this.bc[comp][i]].x = centerX + (Math.cos(currAngle) * radius);\n            nodes[this.bc[comp][i]].y = centerY - (Math.sin(currAngle) * radius);\n\n            this.posSet[this.bc[comp][i]] = true;\n\n            oneAtLeast = true;\n            currAngle -= deltaAngle;\n\n            if (currAngle < 0)\n                currAngle += (2 * Math.PI);\n        }\n\n        if (oneAtLeast) {\n\n            nodes[nodeID].x += Math.cos(theAngle) * 3 * radius;\n            nodes[nodeID].y -= Math.sin(theAngle) * 3 * radius;\n\n\n            this.SetOuterCircle(comp, radius, centerX, centerY, nodeID);\n        }\n    } else {\n        var iter = nodes[nodeID].links;\n        var currentNeighbour;\n        var startAngle = theAngle + (Math.PI / 2);\n\n        if (startAngle > (2 * Math.PI))\n            startAngle -= (2 * Math.PI);\n\n        var neighboursCount = 0;\n        var min1 = 1000;\n        var min2 = 1000;\n        var max = -1;\n        var min1Id = -1;\n        var min2Id = -2;\n        var maxId = -3;\n        var tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                neighboursCount++;\n                tmp[currentNeighbour]=true;\n\n                if (this.nodeHeights[currentNeighbour] < min1) {\n                    min2 = min1;\n                    min2Id = min1Id;\n                    min1 = this.nodeHeights[currentNeighbour];\n                    min1Id = currentNeighbour;\n                } else if (this.nodeHeights[currentNeighbour] < min2) {\n                    min2 = this.nodeHeights[currentNeighbour];\n                    min2Id = currentNeighbour;\n                }\n\n                if (this.nodeHeights[currentNeighbour] >= max)//&& currentNeighbour != min2Id && currentNeighbour != min1Id)\n                {\n                    max = this.nodeHeights[currentNeighbour];\n                    maxId = currentNeighbour;\n                }\n            }\n        }\n\n        if (neighboursCount == 0)\n            return;\n\n        var deltaAngle = Math.PI / (neighboursCount + 1);\n\n        startAngle -= deltaAngle;\n\n        if (startAngle < 0)\n            startAngle += (2 * Math.PI);\n\n        var remStartAngle = startAngle;\n\n        if (neighboursCount > 2) {\n            deltaAngle = (2 * Math.PI) / neighboursCount;\n            startAngle = (theAngle + Math.PI) - ((3 * deltaAngle) / 2);\n\n            if (startAngle > (2 * Math.PI))\n                startAngle -= (2 * Math.PI);\n\n            remStartAngle = (theAngle + Math.PI) - (deltaAngle / 2);\n\n            if (remStartAngle > (2 * Math.PI))\n                remStartAngle -= (2 * Math.PI);\n        }\n\n        iter = nodes[nodeID].links;\n\n        var r = 72;\n        var rTry;\n\n        if (((48 * neighboursCount) / (2 * Math.PI)) > r)\n            r = (48 * neighboursCount) / (2 * Math.PI);\n\n        rTry = r;\n\n        var hlp = 100.0;\n        var startX = nodes[nodeID].x;\n        var startY = nodes[nodeID].y;\n\n        if (neighboursCount > 2) {\n            nodes[nodeID].x = startX + (Math.cos(theAngle) * r * ((min2 + 1) % 100));\n            nodes[nodeID].y = startY - (Math.sin(theAngle) * r * ((min2 + 1) % 100));\n\n            startX = nodes[nodeID].x;\n            startY = nodes[nodeID].y;\n\n            //System.out.println(\"theAngle = \" + theAngle + \", startAngle = \" + startAngle + \", remStartAngle = \" + remStartAngle + \", deltaAngle = \" + deltaAngle);\n            //System.out.println(\"min1Id = \" + min1Id + \", min2Id\" + min2Id + \", maxId\" + maxId);\n            setOffset(nodes[min1Id], startX + (Math.cos(remStartAngle) * r),\n                startY - (Math.sin(remStartAngle) * r));\n            nodes[min1Id].test = 'min1'\n            setOffset(nodes[min2Id], startX + (Math.cos(remStartAngle + deltaAngle) * r),\n                startY - (Math.sin(remStartAngle + deltaAngle) * r));\n            nodes[min2Id].test = 'min2'\n\n            if (this.nodeHeights[maxId] > 8)\n                r = 256;\n\n            setOffset(nodes[maxId],\n                startX + (Math.cos(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r),\n                startY - (Math.sin(remStartAngle - ((neighboursCount / 2) * deltaAngle)) * r));\n            nodes[maxId].test = 'maxId'\n\n            //System.out.println(\"Ugao za maxID \"\n            //                  + (remStartAngle - ((neighboursCount / 2) * deltaAngle)));\n        }\n\n        tmp = {};\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (!this.posSet[currentNeighbour] && !tmp[currentNeighbour]) {\n                if (this.nodeHeights[currentNeighbour] > 8)\n                    r = 256;\n                else\n                    r = rTry;\n\n                this.posSet[currentNeighbour] = true;\n                tmp[currentNeighbour] = true;\n\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    setOffset(nodes[currentNeighbour], startX + (Math.cos(startAngle) * r),\n                        startY - (Math.sin(startAngle) * r));\n\n                    startAngle -= deltaAngle;\n\n                    if (startAngle < 0)\n                        startAngle += (2 * Math.PI);\n\n                    if (((Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle))) < 0.0001)\n                        || (Math.abs(startAngle\n                            - (remStartAngle - ((neighboursCount / 2) * deltaAngle)\n                            + (2 * Math.PI))) < 0.0001)) && (neighboursCount > 2)) {\n                        startAngle -= deltaAngle;\n\n                        if (startAngle < 0)\n                            startAngle += (2 * Math.PI);\n                    }\n                }\n            }\n        }\n\n        iter = nodes[nodeID].links;\n\n        if (neighboursCount > 2) {\n            this.DFSSetPos(min1Id, remStartAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(min2Id, remStartAngle + deltaAngle, theRadius * Math.sin(deltaAngle / 2));\n            this.DFSSetPos(maxId, remStartAngle - ((neighboursCount / 2) * deltaAngle),\n                theRadius * Math.sin(deltaAngle / 2));\n            hlp = remStartAngle;\n            remStartAngle -= deltaAngle;\n        }\n\n        for (var m = 0;m < iter.length;m++) {\n            currentNeighbour = iter[m];\n\n            if (tmp[currentNeighbour]) {\n                if (((currentNeighbour != min1Id) && (currentNeighbour != min2Id)\n                    && (currentNeighbour != maxId)) || (neighboursCount <= 2)) {\n                    this.DFSSetPos(currentNeighbour, remStartAngle,\n                        theRadius * Math.sin(deltaAngle / 2));\n\n                    remStartAngle -= deltaAngle;\n\n                    if (((remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)))\n                        || (remStartAngle == (hlp - ((neighboursCount / 2) * deltaAngle)\n                        + (2 * Math.PI)))) && (neighboursCount > 2))\n                        startAngle -= deltaAngle;\n\n                    if (remStartAngle < 0)\n                        remStartAngle += (2 * Math.PI);\n                }\n            }\n        }\n    }\n};\n\nfunction setOffset(node,x,y) {\n    node.x = x;\n    node.y = y;\n}\n\nexport default CircularLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/CircularLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class ColaLayout{\n    layout(graph){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(graph);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .symmetricDiffLinkLengths(50)\n            .start(60,0,0,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:e.y};\n        })\n    }\n\n    _init(graph){\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        graph.nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        graph.edges.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/ColaLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class DargeLayout{\n    layout(graph){\n        // debugger\n        if(!dagre || !dagre.graphlib) throw 'please add dagre lib first';\n        var g = new dagre.graphlib.Graph();\n\n        g.setGraph({\n            rankdir:'TB',\n            nodesep:15,\n            ranksep:100,\n            ranker:'longest-path'//network-simplex  longest-path tight-tree\n        });\n\n        g.setDefaultEdgeLabel(function() { return {}; });\n\n        graph.nodes.forEach(function (e) {\n            g.setNode(e.id,{width:20,height:20});\n        });\n\n        graph.edges.forEach(function (e) {\n            g.setEdge(e.source,e.target);\n        });\n\n        dagre.layout(g);\n\n        var data = g.nodes().map(function (e) {\n            var d = g.node(e);\n            return {x:d.x,y:-1*d.y};\n        });\n\n        return data;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/DargeLayout.js","/**\n * Created by chengang on 17-4-12.\n */\n\nexport default class FlowLayout{\n    layout(graph){\n        if(!cola || !cola.Layout) throw 'please add cola lib first';\n        this.cola = new cola.Layout().convergenceThreshold(1e-4)\n            .size([1000, 800]);\n\n        var data = this._init(graph);\n\n        this.cola.nodes(data.nodes)\n            .links(data.edges)\n            .flowLayout(\"y\", 30)\n            .symmetricDiffLinkLengths(30)\n            .start(10,20,20,0,false);\n\n        return data.nodes.map(function (e) {\n            return {x:e.x,y:-1*e.y};\n        })\n    }\n\n    _init(graph){\n\n        var filterEdge = this._filterEdge(graph);\n\n        var nodes = [];\n        var edges = [];\n        var map = {};\n        graph.nodes.forEach(function (e,i) {\n            nodes.push({\n                width:100,\n                height:100\n            });\n            map[e.id] = i;\n        })\n\n        filterEdge.forEach(function (e,i) {\n            edges.push({\n                source:map[e.source],\n                target:map[e.target],\n            });\n        })\n\n        return {\n            nodes:nodes,\n            edges:edges\n        }\n    }\n\n    _filterEdge(graph){\n        var filterEdges = [];\n\n        var flag = {};\n        var first = graph.nodes[0];\n\n        breadFirst(first);\n\n        return filterEdges;\n\n        function breadFirst(node) {\n            // debugger\n            flag[node.id] = true;\n\n            var nodes = [];\n\n            var edges = graph.inEdgesIndex[node.id],edge;\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.source]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.source]);\n                    }\n                });\n            }\n\n            edges = graph.outEdgesIndex[node.id];\n            if(edges && edges.length > 0){\n                edges.forEach(function (e) {\n                    edge = graph.edgesIndex[e];\n                    if(!flag[edge.target]) {\n                        filterEdges.push(edge);\n                        nodes.push(graph.nodesIndex[edge.target]);\n                    }\n                });\n            }\n\n            nodes.forEach(function (e) {\n                breadFirst(e);\n            })\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/FlowLayout.js","/**\n * Created by chengang on 17-2-20.\n */\n\nimport CircularLayout from './CircularLayout'\nimport ColaLayout from './ColaLayout'\nimport FlowLayout from './FlowLayout'\nimport DargeLayout from './DargeLayout'\n\nexport default {\n    circular:CircularLayout,\n    cola:ColaLayout,\n    flow:FlowLayout,\n    darge:DargeLayout,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layout/index.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureIcon extends EventEmitter{\n    constructor(gl,option){\n        super();\n\n        this.gl = gl;\n        this.texture = null;\n\n        this.textureIconWidth = option.textureIconWidth;\n        this.textureIconHeight = option.textureIconHeight;\n\n        this.fontSize = 60;\n        this.fontFamily = 'FontAwesome';\n\n        this.border = 2;\n        this.width = 70;//char width\n        this.height = 80;\n        this.startx =this.border+this.width/2;\n        this.starty =this.border+this.height/2;\n\n        this.canvas = null;\n        this.iconinfo = null;\n        this.icons = [];\n        this.iconsToCreate = [];\n\n        this.fontLoaded = false;\n\n        this._init();\n\n        var _this = this;\n        if (document.fonts) {\n            var fontsReady = document.fonts.ready;\n            if (typeof(fontsReady) == \"function\") {\n                fontsReady = document.fonts.ready();\n            }\n            fontsReady.then(function () {\n                _this.fontLoaded  = true;\n                _this.createIcons();\n                _this.emit('load')\n            });\n        }\n    }\n\n    _init(){\n        this.canvas = document.createElement('canvas');\n\n        this.canvas.width  = this.textureIconWidth;\n        this.canvas.height  = this.textureIconHeight;\n\n        var ctx = this.canvas.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        ctx.font = `${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = \"#ff0000\";\n\n        this.iconinfo =  {\n            fontSize:this.fontSize,\n            img:this.canvas,\n            width:this.width,\n            height:this.height,\n            infos:{}\n        };\n\n        this.ctx = ctx;\n\n    }\n\n    createIcons(icons) {\n\n        icons = icons || this.iconsToCreate;\n\n        if(icons.length == 0) return;\n\n        if(!this.fontLoaded){\n            icons.forEach(function (e) {\n                this.iconsToCreate.push(e);\n            }.bind(this));\n            return;\n        }\n\n        for (var i = 0; i < icons.length; i++) {\n            this.createIcon(icons[i]);\n        }\n        this.computeAlpha();\n\n\n        // document.body.appendChild(this.canvas);\n        this.updateGPUTexture();\n    }\n\n    createIcon(icon){\n\n        var ctx = this.ctx,\n            c = this.canvas;\n\n        if(this.iconinfo && this.iconinfo.infos[icon]) return;\n\n        if(this.startx + this.width + this.border > c.width){\n            this.startx = this.border;\n            this.starty += this.height + this.border;\n\n            if(this.starty + this.height > c.height){\n                console.warn('icon texture no space');\n                return;\n            }\n        }\n\n\n        ctx.fillText(icon, this.startx, this.starty);\n        this.iconinfo.infos[icon] = {\n            uvs:[\n                (this.startx-this.width/2)/c.width, (this.starty - this.height/2)/c.height,\n                (this.startx + this.width/2)/c.width, (this.starty + this.height/2)/c.height,\n            ],\n            width:this.width/this.width\n        };\n\n        this.icons.push(icon);\n\n        this.startx += this.width + this.border;\n    }\n\n\n    computeAlpha() {\n\n        var ctx = this.ctx;\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n        ctx.putImageData(imgData,0,0);\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n\n        this.createTexture();\n\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addIcons(icons){\n        var char;\n        var map = {};\n        for(var i = 0,len = icons.length;i< len;i++){\n            char = icons[i];\n            if(!this.iconinfo.infos[char] && !map[char]){\n                if(this.fontLoaded){\n                    this.createIcon(char);\n                }else {\n                    this.iconsToCreate.push(char);\n                }\n                map[char] = true;\n            }\n        }\n        this.updateGPUTexture();\n    }\n\n    createTexture(){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE11);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.iconinfo.img);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureIcon.js","/**\n * Created by chengang on 17-4-5.\n */\nimport EventEmitter from '../../base/EventEmitter'\n\nexport  default  class  TextureLoader extends EventEmitter {\n    constructor(gl){\n        super();\n        this.gl = gl;\n        this.cache = {};\n        this.textures = [];\n        this.defaultTexture = this.createTexture();\n        this.texturesIndex = [0,1,2,3,4,5,6,7,8,9];\n        this.updateGPUTexture();\n    }\n\n    loadImgs(urls){\n        if(Array.isArray(urls)){\n            urls.forEach(function (url) {\n                this._load(url);\n            }.bind(this));\n        }else {\n            this._load(urls);\n        }\n    }\n\n    _load(url){\n        if(!this.cache[url]){\n            var image = document.createElement('IMG');\n            // image.setAttribute('crossOrigin', imgCrossOrigin);\n            image.src = url;\n            image.onload = function() {\n                var tx = this.createTexture(image);\n                this.cache[url] = this.textures.length;//index\n                this.textures.push(tx);\n                this.updateGPUTexture();\n                this.emit('load',[url]);\n            }.bind(this);\n        }\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n        this.texturesIndex.forEach(function (e) {\n            gl.activeTexture(gl['TEXTURE'+e]);\n            if(e > this.textures.length - 1){\n                gl.bindTexture(gl.TEXTURE_2D, this.defaultTexture);\n            }else {\n                gl.bindTexture(gl.TEXTURE_2D, this.textures[e]);\n            }\n        }.bind(this));\n    }\n\n    createTexture(img){\n        var gl = this.gl;\n        var texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        if(img)gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        else gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        return texture;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureLoader.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport EventEmitter from '../../base/EventEmitter'\n\nexport default class TextureText extends EventEmitter{\n    constructor(gl){\n        super();\n\n        this.gl = gl;\n\n        this.texture = null;\n\n        this.border = 2;\n\n        this.fontSize = 26;\n        this.fontFamily = 'Arial';\n\n        this.canvas = null;\n\n        this.textinfo = null;\n\n        this.texts = null;\n    }\n\n    createCanvasImg(texts) {\n\n        if(!this.canvas) this.canvas = document.createElement('canvas');\n\n        var c = this.canvas;\n\n\n        var width = this.fontSize + 1;\n        var height = this.fontSize + 1;\n        var num = Math.ceil(Math.sqrt(texts.length));\n\n        c.width  = num * width + 2* this.border;\n        c.height  = num * height + 2* this.border;\n\n\n        var ctx = c.getContext(\"2d\");\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, c.width, c.height);\n\n        ctx.font = `bold ${this.fontSize}px ${this.fontFamily}`;\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"top\";\n        ctx.fillStyle = \"#ff0000\";\n\n\n        var startx =this.border;\n        var starty =this.border;\n        var infos = {}, px, py, charWidth;\n\n        this.texts = [];\n\n        for (var i = 0; i < texts.length; i++) {\n\n            if(this.textinfo && this.textinfo.infos[texts[i]]) continue;\n\n            charWidth = ctx.measureText(texts[i]).width;\n            if(startx + charWidth + this.border > c.width){\n                startx = this.border;\n                starty += height\n            }\n            ctx.fillText(texts[i], startx, starty);\n            infos[texts[i]] = {\n                uvs:[\n                    startx/c.width, starty/c.height,\n                    (startx + charWidth)/c.width, (starty + height)/c.height,\n                ],\n                width:charWidth/width\n            };\n\n            this.texts.push(texts[i]);\n\n            startx += charWidth + this.border;\n        }\n        this.computeAlpha(ctx);\n        this.textinfo =  {\n            fontSize:this.fontSize,\n            img:c,\n            width:c.width,\n            height:c.height,\n            infos:infos\n        };\n\n        // document.body.appendChild(c);\n        this.updateGPUTexture();\n    }\n\n    computeAlpha(ctx) {\n\n        var imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n        for (var i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i + 3] = imgData.data[i];\n        }\n\n        ctx.putImageData(imgData,0,0);\n\n    }\n\n    updateGPUTexture(){\n        var gl = this.gl;\n\n        this.createTexture();\n\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n\n    addTexts(strs){\n        var len = strs.length;\n        var char,num = 0;\n\n        var texts = this.texts;\n        var map = {};\n        for(var i = 0;i< len;i++){\n            char = strs.charAt(i);\n            if(!this.textinfo.infos[char] && !map[char]){\n                num++;\n                map[char] = true;\n                texts.push(char);\n            }\n        }\n\n        if(num > 0) {\n            this.textinfo = null;\n            this.texts = null;\n            this.createCanvasImg(texts);\n        }\n    }\n\n    createTexture(){\n\n        var gl = this.gl;\n\n        if(!this.texture) {\n            this.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl.TEXTURE10);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textinfo.img);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/TextureText.js","/**\n * Created by chengang on 17-3-31.\n */\n\nimport util from '../../../util'\n\nimport edgeVert from './glsl/default-vert.glsl'\nimport edgeFrag from './glsl/default-frag.glsl'\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport  default class Edge{\n    constructor(){\n        this.POINTS = 9;\n        this.ATTRIBUTES = 9 ;\n\n        this.shaderVert = edgeVert;\n        this.shaderFrag = edgeFrag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 5*4 + 1*4;\n    }\n\n    getRenderData({data,source,target}){\n        var edge = data;\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var data = [];\n        var size = 0.3,arrowSize =3;\n        var crossVector = util.normalize([-dy,dx]);\n\n        //arrow\n        var dis = util.getDistance(source.x,source.y,target.x,target.y);\n        var arrowX = target.x - (target.size + arrowSize)/dis * dx;\n        var arrowY = target.y - (target.size + arrowSize)/dis * dy;\n\n        var color = utils.parseColor(edge.color||source.color || '#b3d2ff');\n\n        addData(data,this.ATTRIBUTES,[source.x,source.y,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[source.x,source.y,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,-crossVector[0],-crossVector[1],size,color.r,color.g,color.b,color.a]);\n\n        //arrow\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,crossVector[0],crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,-crossVector[0],-crossVector[1],arrowSize/2,color.r,color.g,color.b,color.a]);\n        addData(data,this.ATTRIBUTES,[arrowX,arrowY,arrowSize/dis * dx,arrowSize/dis * dy,1,color.r,color.g,color.b,color.a]);\n\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var normalLocation = gl.getAttribLocation(program, \"a_normal\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n\n            Uint8View[i*offset8+20] = data[i*this.ATTRIBUTES+5];\n            Uint8View[i*offset8+21] = data[i*this.ATTRIBUTES+6];\n            Uint8View[i*offset8+22] = data[i*this.ATTRIBUTES+7];\n            Uint8View[i*offset8+23] = data[i*this.ATTRIBUTES+8];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(normalLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false, this.strip, 5*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(normalLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(colorLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/edge/default.js","/**\n * Created by chengang on 17-4-7.\n */\n\nimport util from '../../../util'\nimport mat3 from '../../../base/Matrix'\n\nimport vert from './glsl/edge-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData,centerX,centerY,angle) {\n    var rotate = mat3.transformPoint([attrData[0],attrData[1]],mat3.matrixFromRotation(angle));\n    attrData[0] = rotate[0] + centerX;\n    attrData[1] = rotate[1] + centerY;\n\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport default class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,source,target,textureText}){\n        var edge = data;\n        if(!edge.label) return [];\n\n        // debugger\n        var str = edge.label.split('');\n\n        var data = [];\n\n        var infos = textureText.textinfo.infos,\n            charWidth = source.size/2,\n            charHeight = source.size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n        var dx = target.x - source.x;\n        var dy = target.y - source.y;\n\n        var angle = util.getAngle(1,0,dx,dy);\n\n        angle = dy < 0 ? Math.PI-angle:angle;\n        angle = angle > Math.PI/2 ? angle + Math.PI: angle;\n\n        var centerX = (source.x + target.x)/2, centerY = (source.y + target.y)/2;\n        var startx = totalWidht/2 * -1;\n        var starty =  charHeight/2;\n        var x1,y1,x2,y2;\n\n\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log('no text texture info');\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1],centerX,centerY,angle);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2],centerX,centerY,angle);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/EdgeLabel.js","/**\n * Created by chengang on 17-4-7.\n */\nimport vert from './glsl/node-label-vert.glsl'\nimport frag from './glsl/label-frag.glsl'\n\n\nfunction addData(arr,attributes,attrData) {\n    for(var i = 0;i< attributes;i++){\n        arr.push(attrData[i]);\n    }\n}\n\nexport default class NodeLabel{\n    constructor(){\n        // this.POINTS = 1;\n        this.ATTRIBUTES = 4;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 ;\n    }\n\n    getRenderData({data,textureText}){\n        var node  = data;\n        if(!node.label) return [];\n\n        // debugger\n        var str = node.label.split('');\n\n        var data = [];\n\n        var infos = textureText.textinfo.infos,\n            charWidth = node.size/2,\n            charHeight = node.size/2,\n            char,uv,width;\n\n        var totalWidht = 0;\n        for(var i = 0;i< str.length;i++) {\n            char = str[i];\n            if (!infos[char]) {\n                console.log(1);\n                continue;\n            }\n            totalWidht +=infos[char].width * charWidth\n        }\n\n\n        var startx = totalWidht/2 * -1 + node.x;\n        var starty =  node.y - node.size;\n        var x1,y1,x2,y2;\n\n        for(var i = 0;i< str.length;i++){\n            char = str[i];\n            if(!infos[char]){\n                console.log(1);\n                continue;\n            }\n\n            width = infos[char].width * charWidth;\n            uv = infos[char].uvs;\n            x1 = uv[0],y1 = uv[1],x2 = uv[2],y2 = uv[3];\n\n            addData(data,this.ATTRIBUTES,[startx,starty,x1,y1]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1]);\n            addData(data,this.ATTRIBUTES,[startx,starty-charHeight,x1,y2]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty,x2,y1]);\n            addData(data,this.ATTRIBUTES,[startx+width,starty-charHeight,x2,y2]);\n\n            startx += width;\n        }\n\n        return data;\n    }\n\n    render({gl,program,data,matrix,camera,textureLoader}){\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var uvLocation = gl.getAttribLocation(program, \"a_uv\");\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var imageLocation = gl.getUniformLocation(program, \"u_image\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        // var Uint8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4,offset8 = this.strip;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(uvLocation, 2, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(uvLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1i(imageLocation, 10);\n\n\n        gl.drawArrays(gl.TRIANGLES, 0, len);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/label/NodeLabel.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../util'\nimport vert from './glsl/flag-vert.glsl'\nimport frag from './glsl/flag-frag.glsl'\n\nclass Flag{\n    constructor(){\n        this.POINTS = 1;\n        this.ATTRIBUTES = 3;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 3 * 4;\n    }\n\n    getRenderData({data,textureLoader}){\n        var node = data;\n        return node.flag ? [node.x+node.size*0.5,node.y+node.size*0.5,node.size] : null;\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];//x\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];//y\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];//size\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 2*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n\n        gl.drawArrays(gl.POINTS, 0, len);\n\n\n    }\n}\n\n\nexport default Flag;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/Flag.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../util'\nimport vert from './glsl/icon-vert.glsl'\nimport frag from './glsl/icon-frag.glsl'\n\nclass Icon{\n    constructor(){\n        this.POINTS = 1;\n        this.ATTRIBUTES = 7;\n\n        this.shaderVert = vert;\n        this.shaderFrag = frag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 7 * 4;\n    }\n\n    getRenderData({data,textureLoader,textureIcon}){\n        var node = data;\n\n        var iconx1,icony1,iconx2,icony2,uvs;\n        var hasIcon = node.icon && textureIcon.iconinfo.infos[node.icon];\n\n        if(hasIcon){\n            uvs = textureIcon.iconinfo.infos[node.icon].uvs;\n            iconx1 = uvs[0],icony1 = uvs[1],iconx2 = uvs[2], icony2 = uvs[3];\n        }\n\n        return hasIcon ? [node.x,node.y,node.size*2*0.7,iconx1 , icony1 , iconx2 , icony2] : null;\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n        if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n\n        var iconUVLocation1 = gl.getAttribLocation(program, \"a_icon_uvx1\");\n        var iconUVLocation2 = gl.getAttribLocation(program, \"a_icon_uvy1\");\n        var iconUVLocation3 = gl.getAttribLocation(program, \"a_icon_uvx2\");\n        var iconUVLocation4 = gl.getAttribLocation(program, \"a_icon_uvy2\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n        var iconTextureLocation = gl.getUniformLocation(program, \"u_icons_texture\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];\n\n            float32View[i*offset32+3] = data[i*this.ATTRIBUTES+3];\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+4];\n            float32View[i*offset32+5] = data[i*this.ATTRIBUTES+5];\n            float32View[i*offset32+6] = data[i*this.ATTRIBUTES+6];\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(iconUVLocation1, 1, gl.FLOAT, false, this.strip, 3*4);\n        gl.vertexAttribPointer(iconUVLocation2, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(iconUVLocation3, 1, gl.FLOAT, false, this.strip, 5*4);\n        gl.vertexAttribPointer(iconUVLocation4, 1, gl.FLOAT, false, this.strip, 6*4);\n\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(iconUVLocation1);\n        gl.enableVertexAttribArray(iconUVLocation2);\n        gl.enableVertexAttribArray(iconUVLocation3);\n        gl.enableVertexAttribArray(iconUVLocation4);\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n        gl.uniform1i(iconTextureLocation,11);\n\n\n        gl.drawArrays(gl.POINTS, 0, len);\n\n\n    }\n}\n\n\nexport default Icon;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/Icon.js","/**\n * Created by chengang on 17-3-28.\n */\n\nimport utils from '../../../util'\nimport nodeVert from './glsl/default-vert.glsl'\nimport nodeFrag from './glsl/default-frag.glsl'\n\nclass Node{\n    constructor(){\n        this.POINTS = 1;\n        this.ATTRIBUTES = 9;\n\n        this.shaderVert = nodeVert;\n        this.shaderFrag = nodeFrag;\n\n        this.arrayBuffer = null;\n        this.dataBuffer = null;\n        this.strip = 4 * 4 + 4 + 4;\n    }\n\n    getRenderData({data,textureLoader,textureIcon}){\n        var node = data;\n        var color = utils.parseColor(node.color || '#ff0000');\n        var img = -1;\n        if(node.img && textureLoader.cache[node.img])\n            img = textureLoader.cache[node.img];\n\n        var size = node.size*2||10*2;\n        var isSelected = node.selected ? 1.0 : 0.0;\n\n        return [\n            node.x,node.y,size,\n            color.r,color.g,color.b,color.a,\n            img,isSelected\n        ];\n    }\n\n    render({gl,program,data,matrix,camera,sampleRatio,textureLoader}){\n        // debugger\n\n       if(!this.dataBuffer) this.dataBuffer = gl.createBuffer();\n\n        var positionLocation = gl.getAttribLocation(program, \"a_position\");\n        var sizeLocation = gl.getAttribLocation(program, \"a_size\");\n        var colorLocation = gl.getAttribLocation(program, \"a_color\");\n        var imgLocation = gl.getAttribLocation(program, \"a_img\");\n        var selectedLocation = gl.getAttribLocation(program, \"a_selected\");\n\n\n        var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        var cameraScaleLocation = gl.getUniformLocation(program, \"u_camera_scale\");\n        var texturesLocation = gl.getUniformLocation(program, \"u_textures\");\n        var borderColorLocation = gl.getUniformLocation(program, \"u_borderColor\");\n        var sampleRatioLocation = gl.getUniformLocation(program, \"u_sample_ratio\");\n\n\n        var len = (data.length / this.ATTRIBUTES) | 0;\n\n        // debugger\n        if(!this.arrayBuffer || len * this.strip != this.arrayBuffer.byteLength){\n            this.arrayBuffer = new ArrayBuffer(len * this.strip);\n        }\n\n        var float32View = new Float32Array(this.arrayBuffer);\n        var int8View = new Uint8Array(this.arrayBuffer);\n\n        var offset32 = this.strip/4;\n        for(var i = 0;i< len;i++){\n            float32View[i*offset32+0] = data[i*this.ATTRIBUTES+0];//x\n            float32View[i*offset32+1] = data[i*this.ATTRIBUTES+1];//y\n            float32View[i*offset32+2] = data[i*this.ATTRIBUTES+2];//size\n            float32View[i*offset32+4] = data[i*this.ATTRIBUTES+7];//img\n            float32View[i*offset32+5] = data[i*this.ATTRIBUTES+8];//selected\n\n            int8View[i*this.strip+12] = data[i*this.ATTRIBUTES+3];//color.r\n            int8View[i*this.strip+13] = data[i*this.ATTRIBUTES+4];//color.g\n            int8View[i*this.strip+14] = data[i*this.ATTRIBUTES+5];//color.b\n            int8View[i*this.strip+15] = data[i*this.ATTRIBUTES+6];//color.a\n        }\n\n        // debugger\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dataBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,this.arrayBuffer , gl.STATIC_DRAW);\n\n\n        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, this.strip, 0);\n        gl.vertexAttribPointer(sizeLocation, 1, gl.FLOAT, false, this.strip, 2*4);\n        gl.vertexAttribPointer(colorLocation, 4, gl.UNSIGNED_BYTE, false,  this.strip, 3*4);\n        gl.vertexAttribPointer(imgLocation, 1, gl.FLOAT, false, this.strip, 4*4);\n        gl.vertexAttribPointer(selectedLocation, 1, gl.FLOAT, false, this.strip, 5*4);\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(positionLocation);\n        gl.enableVertexAttribArray(sizeLocation);\n        gl.enableVertexAttribArray(colorLocation);\n        gl.enableVertexAttribArray(imgLocation);\n        gl.enableVertexAttribArray(selectedLocation);\n\n\n        gl.uniformMatrix3fv(matrixLocation, false,new Float32Array(matrix));\n        gl.uniform1f(cameraScaleLocation,camera.scale);\n        gl.uniform1f(sampleRatioLocation,sampleRatio);\n        gl.uniform4f(borderColorLocation,194.0, 97.0, 54.0,255.0);\n\n        gl.uniform1iv(texturesLocation,textureLoader.texturesIndex);\n\n        gl.drawArrays(gl.POINTS, 0, len);\n\n\n    }\n}\n\n\nexport default Node;\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/default.js","/**\n * Created by chengang on 17-4-13.\n */\n\nimport node from './default'\nimport flag from './Flag'\nimport Icon from './Icon'\n\nexport default {\n    layers:[\n        {name:'base',layer:node},\n        {name:'icon',layer:Icon},\n        {name:'flag',layer:flag},\n    ]\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render/webgl/node/index.js","module.exports = \"precision mediump float;\\nvarying vec4 color;\\nvoid main(){\\ngl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-frag.glsl\n// module id = 28\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute vec4 a_color;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\n\\nvarying vec4 color;\\n\\nvoid main() {\\n\\nvec2 pos  = a_position + a_normal * a_size;\\ngl_Position = vec4((u_matrix*vec3(pos,1)).xy,0,1);\\n\\ncolor = a_color/255.0;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/edge/glsl/default-vert.glsl\n// module id = 29\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/edge-label-vert.glsl\n// module id = 30\n// module chunks = 0","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_uv;\\n\\nuniform mat3 u_matrix;\\nuniform sampler2D u_image;\\n\\n\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nv_texCoord = a_uv;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/label/glsl/node-label-vert.glsl\n// module id = 31\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying float size;\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\n\\nuniform sampler2D u_textures[10];\\nuniform sampler2D u_icons_texture;\\nuniform vec4 u_borderColor;\\nuniform float u_sample_ratio;\\n\\n\\n\\n\\n\\n//todo\\nvec4 getSampleColore(int index,vec2 uv){\\n    vec4 c;\\n    if(index == 0){\\n        c = texture2D(u_textures[0],uv);\\n    }else if(index == 1){\\n        c = texture2D(u_textures[1],uv);\\n    }else if(index == 2){\\n        c = texture2D(u_textures[2],uv);\\n    }else if(index == 3){\\n        c = texture2D(u_textures[3],uv);\\n    }else if(index == 4){\\n        c = texture2D(u_textures[4],uv);\\n    }else if(index == 5){\\n        c = texture2D(u_textures[5],uv);\\n    }\\n    return c;\\n}\\n\\nvec4 borderColor = u_borderColor/255.0;\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,\\n   blur = 4.0 * u_sample_ratio / size ,\\n   border = max(1.0 - 15.0 * u_sample_ratio / size,0.0) ;\\n\\n   vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\n    r = length(cxy);\\n\\n    if(img >= 0.0){\\n        nodecolor = getSampleColore(int(img),gl_PointCoord);\\n    }\\n\\n\\n    //todo\\n    if(selected < 0.5) borderColor = nodecolor;\\n\\n    if(size > 4.0){\\n        if(r > 1.0 ){\\n            discard;\\n        }\\n\\n        if(r > 1.0-blur && r <=1.0){\\n            alpha = 1.0 - smoothstep(1.0-blur, 1.0, r);\\n        }\\n        else if( r > border && r < border + blur){\\n            nodecolor = mix(nodecolor,borderColor,smoothstep(border, border + blur, r));\\n        }\\n\\n         if( r >= border + blur){\\n            nodecolor = borderColor;\\n         }\\n    }\\n\\n    gl_FragColor = nodecolor * alpha;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/default-frag.glsl\n// module id = 32\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\nattribute float a_size;\\nattribute float a_img;\\nattribute float a_selected;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying float size;\\nvarying vec4 color;\\nvarying float img;\\nvarying float selected;\\n\\nvoid main() {\\n\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nsize = gl_PointSize  = 1.0/u_camera_scale * a_size*u_sample_ratio;\\ncolor = a_color/255.0;\\nimg = a_img;\\nselected = a_selected;\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/default-vert.glsl\n// module id = 33\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying float size;\\n\\nuniform float u_sample_ratio;\\n\\n\\nvec4 color = vec4(0.0,1.0,0.0,1.0);\\n\\nvoid main()\\n{\\n   float r = 0.0, alpha = 1.0,blur = 4.0 * u_sample_ratio / size ;\\n   vec4 nodecolor = color;\\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\n    r = length(cxy);\\n\\n\\n    if(size > 4.0){\\n        if(r > 1.0 ){\\n            discard;\\n        }\\n\\n        if(r > 1.0-blur && r <=1.0){\\n            alpha = 1.0 - smoothstep(1.0-blur, 1.0, r);\\n        }\\n    }\\n    gl_FragColor = nodecolor * alpha;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/flag-frag.glsl\n// module id = 34\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute float a_size;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nsize = gl_PointSize  = 1.0/u_camera_scale * a_size*u_sample_ratio;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/flag-vert.glsl\n// module id = 35\n// module chunks = 0","module.exports = \"//#ifdef GL_OES_standard_derivatives\\n//#extension GL_OES_standard_derivatives : enable\\n//#endif\\n\\n precision mediump float;\\n\\nvarying float size;\\nvarying float icons_uv[4];\\n\\n\\nuniform float u_sample_ratio;\\nuniform sampler2D u_icons_texture;\\n\\n\\nvec2 get_icon_uv(vec2 coord){\\n    float x1 = icons_uv[0];\\n    float y1 = icons_uv[1];\\n    float x2 = icons_uv[2];\\n    float y2 = icons_uv[3];\\n\\n    float dx = x2-x1;\\n    float dy = y2-y1;\\n\\n    return vec2(coord.x * dx + x1,coord.y * dy + y1);\\n}\\n\\n\\n\\nvoid main()\\n{\\n    gl_FragColor = texture2D(u_icons_texture,get_icon_uv(gl_PointCoord)).w * vec4(1,1,1,1);\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/icon-frag.glsl\n// module id = 36\n// module chunks = 0","module.exports = \"\\n precision mediump float;\\nattribute vec2 a_position;\\nattribute float a_size;\\n\\nattribute float a_icon_uvx1;\\nattribute float a_icon_uvx2;\\nattribute float a_icon_uvy1;\\nattribute float a_icon_uvy2;\\n\\nuniform mat3 u_matrix;\\nuniform float u_camera_scale;\\nuniform float u_sample_ratio;\\n\\nvarying float icons_uv[4];\\nvarying float size;\\n\\nvoid main() {\\ngl_Position = vec4((u_matrix*vec3(a_position,1)).xy,0,1);\\nsize = gl_PointSize  = 1.0/u_camera_scale * a_size*u_sample_ratio;\\n\\nicons_uv[0] = a_icon_uvx1;\\nicons_uv[1] = a_icon_uvy1;\\nicons_uv[2] = a_icon_uvx2;\\nicons_uv[3] = a_icon_uvy2;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/render/webgl/node/glsl/icon-vert.glsl\n// module id = 37\n// module chunks = 0","export {default as Graph} from './core/Graph'\nexport {WebGLRender} from './render/index'\n// export {default as quadtree} from './test/src/quadtree'\nexport {default as Quad} from './base/Quad'\nexport {default as Event} from './core/Event'\nexport {default as GraphView} from './core/index'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}